(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{liLl:function(e,t,n){"use strict";n.r(t);var o=n("hosL"),r=n("QRet"),s=n("Hrl7"),c="chat__LjROG",i="/home/dylan/projects/psilly/src/routes/chat/index.tsx";const u=e=>{const{item:t}=e,n=t.substr(-6),r=t.substr(0,t.length-6);return Object(o.h)("li",{style:{color:`#${n}`},__source:{fileName:i,lineNumber:14,columnNumber:10}},r)};t.default=()=>{const e=Object(o.createRef)(),t=Object(o.createRef)(),n=Object(o.createRef)(),[a,l]=Object(r.k)([]),m=new AbortController;return Object(r.d)((()=>{const o=e.current,r=t.current,s=n.current;let c,i,u,a=!0,d=!1,w=!1,b=0,h=0,v="",p=0,f=.5-Math.random(),L=(.5-Math.random())/8,N=!0;const E=()=>{d=!0};window.addEventListener("blur",E);const _=()=>{d=!1};window.addEventListener("focus",_);const j=e=>(b|=1<<e.button,0===e.button&&(h=e.clientY),e.preventDefault(),!1);window.addEventListener("mousedown",j);const y=e=>(b^=1<<e.button,0===e.button&&(L=0,f*=2),r.focus(),e.preventDefault(),!1);window.addEventListener("mouseup",y);const g=e=>(e.preventDefault(),!1);window.addEventListener("contextmenu",g);const x=e=>{1&b&&(f=e.clientY-h,h=e.clientY,p+=f,o.style.backgroundPosition=`0 ${p}px`)};window.addEventListener("mousemove",x);const O=e=>(N=!1,h=e.touches[0].pageY,!1);window.addEventListener("touchstart",O);const k=()=>(N=!0,L=0,f*=2,!1);window.addEventListener("touchend",k);const T=e=>{1===e.touches.length&&(f=e.touches[0].pageY-h,h=e.touches[0].pageY,p+=f,o.style.backgroundPosition=`0 ${p}px`)};window.addEventListener("touchmove",T);const R=()=>{d?i=setTimeout(R,512):(c=window.requestAnimationFrame(R),1&b||!N||(f+=L,p+=f,Math.abs(f)>256&&f*L>=0&&(L=-f*Math.random()/128),o.style.backgroundPosition=`0 ${p}px`))};R();const Y=()=>{if(d)return void(a&&(u=setTimeout(Y,128)));let e="?r";v!==r.value&&(e+=`&s=${encodeURIComponent(r.value)}`,v=r.value),fetch(`https://psilly.com/experiments/ajax/chatter_chat.pill${e}`,m).then((e=>e.json())).then((e=>l(e||[]))).then((()=>{a&&(w||(w=!0,s.innerText="",s.style.display="none"))})).then((()=>{a&&(u=setTimeout(Y,1028))})).catch((e=>{a&&(w=!1,s.innerText=e,s.style.display="block",console.error(e),alert("Error connecting to server.\nYou may have lost your connection, or perhaps you dislike cookies?\nRefresh the page, with cookies enabled, to try again."),location.reload())}))};return Y(),s.innerText="Connecting...",r.focus(),()=>{a=!1,window.cancelAnimationFrame(c),m.abort(),clearTimeout(i),clearTimeout(u),window.removeEventListener("blur",E),window.removeEventListener("focus",_),window.removeEventListener("mousedown",j),window.removeEventListener("mouseup",y),window.removeEventListener("contextmenu",g),window.removeEventListener("mousemove",x),window.removeEventListener("touchstart",O),window.removeEventListener("touchend",k),window.removeEventListener("touchmove",T)}}),[]),Object(o.h)("section",{ref:e,class:c,__source:{fileName:i,lineNumber:206,columnNumber:5}},Object(o.h)(s.a,{title:"Chatter",__source:{fileName:i,lineNumber:207,columnNumber:7}}),Object(o.h)("input",{ref:t,autofocus:!0,__source:{fileName:i,lineNumber:208,columnNumber:7}}),Object(o.h)("ul",{class:"output",__source:{fileName:i,lineNumber:209,columnNumber:7}},a.map((e=>Object(o.h)(u,{item:e,key:e,__source:{fileName:i,lineNumber:211,columnNumber:11}})))),Object(o.h)("p",{ref:n,class:"text-center",__source:{fileName:i,lineNumber:214,columnNumber:7}},"A colourful ape input aggregator."))}}}]);
//# sourceMappingURL=route-chat.chunk.1a6d1.js.map