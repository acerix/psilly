!function(t){function e(e){for(var n,r,o=e[0],a=e[1],s=0,u=[];s<o.length;s++)r=o[s],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&u.push(i[r][0]),i[r]=0;for(n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n]);for(c&&c(e);u.length;)u.shift()()}function n(e){if(r[e])return r[e].exports;var o=r[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,n),o.l=!0,o.exports}var r={},o={0:0},i={0:0};n.e=function(t){var e=[];o[t]?e.push(o[t]):0!==o[t]&&{5:1,6:1,16:1,18:1}[t]&&e.push(o[t]=new Promise((function(e,r){for(var i=({2:"route-about",3:"route-art",4:"route-blog",5:"route-bylaws",6:"route-chat",7:"route-contact",8:"route-donate",9:"route-experiments",10:"route-faq",11:"route-highness",12:"route-home",13:"route-jam",14:"route-join",15:"route-not-found",16:"route-page",17:"route-privacy",18:"route-spinner",19:"route-terms"}[t]||t)+".chunk."+{2:"31d6c",3:"31d6c",4:"31d6c",5:"a9d5f",6:"be138",7:"31d6c",8:"31d6c",9:"31d6c",10:"31d6c",11:"31d6c",12:"31d6c",13:"31d6c",14:"31d6c",15:"31d6c",16:"ea64d",17:"31d6c",18:"27f18",19:"31d6c"}[t]+".css",a=n.p+i,s=document.getElementsByTagName("link"),u=0;u<s.length;u++){var c=(f=s[u]).getAttribute("data-href")||f.getAttribute("href");if("stylesheet"===f.rel&&(c===i||c===a))return e()}var l=document.getElementsByTagName("style");for(u=0;u<l.length;u++){var f;if((c=(f=l[u]).getAttribute("data-href"))===i||c===a)return e()}var h=document.createElement("link");h.rel="stylesheet",h.type="text/css";h.onerror=h.onload=function(n){if(h.onerror=h.onload=null,"load"===n.type)e();else{var i=n&&("load"===n.type?"missing":n.type),s=n&&n.target&&n.target.href||a,u=new Error("Loading CSS chunk "+t+" failed.\n("+s+")");u.code="CSS_CHUNK_LOAD_FAILED",u.type=i,u.request=s,delete o[t],h.parentNode.removeChild(h),r(u)}},h.href=a,document.head.appendChild(h)})).then((function(){o[t]=0})));var r=i[t];if(0!==r)if(r)e.push(r[2]);else{var a=new Promise((function(e,n){r=i[t]=[e,n]}));e.push(r[2]=a);var s,u=document.createElement("script");u.charset="utf-8",u.timeout=120,n.nc&&u.setAttribute("nonce",n.nc),u.src=function(t){return n.p+""+({2:"route-about",3:"route-art",4:"route-blog",5:"route-bylaws",6:"route-chat",7:"route-contact",8:"route-donate",9:"route-experiments",10:"route-faq",11:"route-highness",12:"route-home",13:"route-jam",14:"route-join",15:"route-not-found",16:"route-page",17:"route-privacy",18:"route-spinner",19:"route-terms"}[t]||t)+".chunk."+{2:"ae556",3:"2a71c",4:"28022",5:"68d69",6:"d206e",7:"8d44d",8:"6d0be",9:"7cb80",10:"2f8bd",11:"2ce89",12:"0d77e",13:"041bf",14:"46dea",15:"1a20b",16:"15914",17:"ae850",18:"78211",19:"e2e5b"}[t]+".js"}(t);var c=new Error;s=function(e){u.onerror=u.onload=null,clearTimeout(l);var n=i[t];if(0!==n){if(n){var r=e&&("load"===e.type?"missing":e.type),o=e&&e.target&&e.target.src;c.message="Loading chunk "+t+" failed.\n("+r+": "+o+")",c.name="ChunkLoadError",c.type=r,c.request=o,n[1](c)}i[t]=void 0}};var l=setTimeout((function(){s({type:"timeout",target:u})}),12e4);u.onerror=u.onload=s,document.head.appendChild(u)}return Promise.all(e)},n.m=t,n.c=r,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/",n.oe=function(t){throw console.error(t),t};var a=window.webpackJsonp=window.webpackJsonp||[],s=a.push.bind(a);a.push=e,a=a.slice();for(var u=0;u<a.length;u++)e(a[u]);var c=s;n(n.s="mdyV")}({"+3Yi":function(t,e,n){"use strict";var r=n("JRM0"),o=n("WGD3"),i=n("AvGt"),a=String.fromCharCode,s=o("".charAt),u=o(/./.exec),c=o("".slice),l=/^[\da-f]{2}$/i,f=/^[\da-f]{4}$/i;r({global:!0},{unescape:function(t){for(var e,n,r=i(t),o="",h=r.length,d=0;d<h;){if("%"===(e=s(r,d++)))if("u"===s(r,d)){if(n=c(r,d+1,d+5),u(f,n)){o+=a(parseInt(n,16)),d+=5;continue}}else if(n=c(r,d,d+2),u(l,n)){o+=a(parseInt(n,16)),d+=2;continue}o+=e}return o}})},"+5TE":function(t,e,n){"use strict";n("Muwe");var r=n("WGD3"),o=n("0K2p"),i=n("hVpg"),a=n("+iL7"),s=n("GHf2"),u=n("nHIk"),c=s("species"),l=RegExp.prototype;t.exports=function(t,e,n,f){var h=s(t),d=!a((function(){var e={};return e[h]=function(){return 7},7!=""[t](e)})),p=d&&!a((function(){var e=!1,n=/a/;return"split"===t&&((n={}).constructor={},n.constructor[c]=function(){return n},n.flags="",n[h]=/./[h]),n.exec=function(){return e=!0,null},n[h](""),!e}));if(!d||!p||n){var v=r(/./[h]),g=e(h,""[t],(function(t,e,n,o,a){var s=r(t),u=e.exec;return u===i||u===l.exec?d&&!a?{done:!0,value:v(e,n,o)}:{done:!0,value:s(n,e,o)}:{done:!1}}));o(String.prototype,t,g[0]),o(l,h,g[1])}f&&u(l[h],"sham",!0)}},"+COX":function(t,e){"use strict";e.a={polygonous:{path:"polygonous",type:"Art",title:"Bisectional Polygonous Giration",created:"2021",medium:"JavaScript on CanvasRenderingContext2D",description:"Explores the Euclidean nature of linear geometry, from the point of view of a conscious observer, emphasizing the dichotomy of transversal relationism in a post-reactivate triptonia."},meld:{path:"meld",type:"Art",title:"Meld",created:"2016",medium:"JavaScript on WebGLRenderingContext",description:"An examination of permatarian meldation."},circle:{path:"circle",type:"Art",title:"Circle",created:"2018",medium:"JavaScript on WebGLRenderingContext",description:"A non-euclidean journey into regular ellipses."},"golden-angle-donut":{path:"golden-angle-donut",type:"Art",title:"Golden Angle Donut",created:"2016",medium:"JavaScript on CanvasRenderingContext2D",description:"Draw a straight line, then starting from the end of that line, rotate by the golden angle and draw the same line in that direction.  Continue adding new lines until you have a tasty donut."},squibbo:{path:"squibbo",type:"Art",title:"Squibbo",created:"2021",medium:"JavaScript on CanvasRenderingContext2D",description:"A post-modern take on the classical interpretation of machine-assisted squibology."},falls:{path:"falls",type:"Art",title:"Doge Falls",created:"2014",medium:"JavaScript on WebGLRenderingContext",description:"An exploration of the gap between quantum chromaticism and classical gravity from a Newtonian frame of doge."},chillbert:{path:"chillbert",type:"Art",title:"Chillbert Pspace",created:"2021",medium:"JavaScript on CanvasRenderingContext2D",description:"A pspace filler."},develop:{path:"develop",type:"Art",title:"Developer of the Abstract",created:"2021",medium:"JavaScript on CanvasRenderingContext2D",description:"Some paintings are veloped to look like real world things, others develop."},quadingle:{path:"quadingle",type:"WIP",title:"Quadingle",created:"2021",medium:"JavaScript on WebGLRenderingContext",description:"A personalized data stream mapped to a four-way hilbert curve from the centre."},"oh-bezier":{path:"oh-bezier",type:"WIP",title:"Oh, Bézier!",created:"2021",medium:"JavaScript on WebGLRenderingContext",description:"Undescribed."},"totally-modular-form-bro":{path:"totally-modular-form-bro",type:"WIP",title:"Totally modular form, bro!",created:"2021",medium:"JavaScript on WebGLRenderingContext",description:"Undescribed."},untilted:{path:"untilted",type:"WIP",title:"Untilted",created:"2021",medium:"JavaScript on WebGLRenderingContext",description:"Ceci n'est pas tiltré."},lemnisgo:{path:"lemnisgo",type:"Art",title:"Lem nis go!",created:"2021",medium:"JavaScript on WebGLRenderingContext",description:"Sometimes lemn is moiré. Lem nis skate or lem nis go!"},"eye-of-newt":{path:"eye-of-newt",type:"WIP",title:"Oculus Newtonius",created:"2021",medium:"JavaScript on WebGLRenderingContext",description:"Booty is in the thigh of the buttholder."},hyperbollick:{path:"hyperbollick",type:"Art",title:"Hyper Ball Lick",created:"2021",medium:"JavaScript on WebGLRenderingContext",description:"Tall tales of extreme bollock privation."},vcock:{path:"vcock",type:"Art",title:"Veacock",created:"2022",medium:"JavaScript on CanvasRenderingContext2D",description:"A colourful veacock in balls."},gravity:{path:"gravity",type:"WIP",title:"Gravity",created:"2022",medium:"JavaScript on WebGLRenderingContext",description:"I hope you understand the gravity of this situation."},iball:{path:"iball",type:"Art",title:"iBall",created:"2022",medium:"JavaScript on WebGLRenderingContext",description:"Booty is in the I of the ball holder."},"canvas-template":{path:"canvas-template",type:"Template",title:"2D Canvas Template",created:"2021",medium:"JavaScript on CanvasRenderingContext2D",description:"May I be the spawn of many an art project."},"webgl-template":{path:"webgl-template",type:"Template",title:"WebGL Canvas Template",created:"2021",medium:"JavaScript on WebGLRenderingContext",description:"Good luck!"},loading:{path:"loading",type:"Test",title:"Loading...",created:"2021",medium:"JavaScript on HTML",description:"Loading... is a loading screen testing framework. Did I say framework? I mean artwork. Also tests patience."},"grid-test":{path:"grid-test",type:"Test",title:"Grid Overlay Test",created:"2021",medium:"JavaScript on CanvasRenderingContext2D over JavaScript on WebGLRenderingContext",description:"Where my grids at?"}}},"+VB/":function(t,e,n){var r=n("nEaP"),o=n("Hvpk"),i=n("BqYr").MISSED_STICKY,a=n("fSIz"),s=n("nRc6").f,u=n("SkE4").get,c=RegExp.prototype,l=r.TypeError;o&&i&&s(c,"sticky",{configurable:!0,get:function(){if(this!==c){if("RegExp"===a(this))return!!u(this).sticky;throw l("Incompatible receiver, RegExp required")}}})},"+XsM":function(t,e,n){var r=n("JRM0"),o=n("SlvM");r({target:"Number",stat:!0,forced:Number.parseInt!=o},{parseInt:o})},"+iL7":function(t){t.exports=function(t){try{return!!t()}catch(t){return!0}}},"+n59":function(t,e,n){var r=n("WGD3");t.exports=r({}.isPrototypeOf)},"/Mq+":function(t,e,n){"use strict";function r(t,e){for(var n in e)t[n]=e[n];return t}function o(t,e,n){var r,o=/(?:\?([^#]*))?(#.*)?$/,i=t.match(o),a={};if(i&&i[1])for(var u=i[1].split("&"),c=0;c<u.length;c++){var l=u[c].split("=");a[decodeURIComponent(l[0])]=decodeURIComponent(l.slice(1).join("="))}t=s(t.replace(o,"")),e=s(e||"");for(var f=Math.max(t.length,e.length),h=0;h<f;h++)if(e[h]&&":"===e[h].charAt(0)){var d=e[h].replace(/(^:|[+*?]+$)/g,""),p=(e[h].match(/[+*?]+$/)||b)[0]||"",v=~p.indexOf("+"),g=~p.indexOf("*"),m=t[h]||"";if(!m&&!g&&(p.indexOf("?")<0||v)){r=!1;break}if(a[d]=decodeURIComponent(m),v||g){a[d]=t.slice(h).map(decodeURIComponent).join("/");break}}else if(e[h]!==t[h]){r=!1;break}return(!0===n.default||!1!==r)&&a}function i(t,e){return t.rank<e.rank?1:t.rank>e.rank?-1:t.index-e.index}function a(t,e){return t.index=e,t.rank=function(t){return t.props.default?0:s(t.props.path).map(u).join("")}(t),t.props}function s(t){return t.replace(/(^\/+|\/+$)/g,"").split("/")}function u(t){return":"==t.charAt(0)?1+"*+?".indexOf(t.charAt(t.length-1))||4:5}function c(){var t=Object(y.b)(C);if(t===R){var e=Object(y.k)()[1];Object(y.d)((function(){return _.push(e),function(){return _.splice(_.indexOf(e),1)}}),[])}return[t,f]}function l(){var t;return""+((t=E&&E.location?E.location:E&&E.getCurrentLocation?E.getCurrentLocation():"undefined"!=typeof location?location:x).pathname||"")+(t.search||"")}function f(t,e){return void 0===e&&(e=!1),"string"!=typeof t&&t.url&&(e=t.replace,t=t.url),function(t){for(var e=w.length;e--;)if(w[e].canRoute(t))return!0;return!1}(t)&&function(t,e){void 0===e&&(e="push"),E&&E[e]?E[e](t):"undefined"!=typeof history&&history[e+"State"]&&history[e+"State"](null,null,t)}(t,e?"replace":"push"),h(t)}function h(t){for(var e=!1,n=0;n<w.length;n++)w[n].routeTo(t)&&(e=!0);return e}function d(t){if(t&&t.getAttribute){var e=t.getAttribute("href"),n=t.getAttribute("target");if(e&&e.match(/^\//g)&&(!n||n.match(/^_?self$/i)))return f(e)}}function p(t){return t.stopImmediatePropagation&&t.stopImmediatePropagation(),t.stopPropagation&&t.stopPropagation(),t.preventDefault(),!1}function v(t){if(!(t.ctrlKey||t.metaKey||t.altKey||t.shiftKey||t.button)){var e=t.target;do{if("a"===e.localName&&e.getAttribute("href")){if(e.hasAttribute("data-native")||e.hasAttribute("native"))return;if(d(e))return p(t)}}while(e=e.parentNode)}}function g(t){t.history&&(E=t.history),this.state={url:t.url||l()}}n.d(e,"a",(function(){return O})),n.d(e,"b",(function(){return A})),n.d(e,"c",(function(){return g})),n.d(e,"d",(function(){return o})),n.d(e,"e",(function(){return c}));var m=n("hosL"),y=n("QRet"),b={},x={},w=[],_=[],E=null,R={url:l()},C=Object(m.createContext)(R),S=!1;r(g.prototype=new m.Component,{shouldComponentUpdate:function(t){return!0!==t.static||t.url!==this.props.url||t.onChange!==this.props.onChange},canRoute:function(t){var e=Object(m.toChildArray)(this.props.children);return void 0!==this.g(e,t)},routeTo:function(t){this.setState({url:t});var e=this.canRoute(t);return this.p||this.forceUpdate(),e},componentWillMount:function(){this.p=!0},componentDidMount:function(){var t=this;S||(S=!0,E||addEventListener("popstate",(function(){h(l())})),addEventListener("click",v)),w.push(this),E&&(this.u=E.listen((function(e){var n=e.location||e;t.routeTo(""+(n.pathname||"")+(n.search||""))}))),this.p=!1},componentWillUnmount:function(){"function"==typeof this.u&&this.u(),w.splice(w.indexOf(this),1)},componentWillUpdate:function(){this.p=!0},componentDidUpdate:function(){this.p=!1},g:function(t,e){t=t.filter(a).sort(i);for(var n=0;n<t.length;n++){var r=t[n],s=o(e,r.props.path,r.props);if(s)return[r,s]}},render:function(t,e){var n,o,i=t.onChange,a=e.url,s=this.c,u=this.g(Object(m.toChildArray)(t.children),a);if(u&&(o=Object(m.cloneElement)(u[0],r(r({url:a,matches:n=u[1]},n),{key:void 0,ref:void 0}))),a!==(s&&s.url)){r(R,s=this.c={url:a,previous:s&&s.url,current:o,path:o?o.props.path:null,matches:n}),s.router=this,s.active=o?[o]:[];for(var c=_.length;c--;)_[c]({});"function"==typeof i&&i(s)}return Object(m.h)(C.Provider,{value:s},o)}});var O=function(t){return Object(m.h)("a",r({onClick:v},t))},A=function(t){return Object(m.h)(t.component,t)}},"/OaT":function(t,e,n){var r=n("jP2f");t.exports=function(t){return void 0!==t&&(r(t,"value")||r(t,"writable"))}},"/YXa":function(t,e,n){"use strict";var r=n("M/tt"),o=n("d5e9"),i=n("q/gS"),a=n("SkE4"),s=n("nRc6").f,u=n("vtID"),c=n("PCqT"),l=n("Hvpk"),f="Array Iterator",h=a.set,d=a.getterFor(f);t.exports=u(Array,"Array",(function(t,e){h(this,{type:f,target:r(t),index:0,kind:e})}),(function(){var t=d(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}}),"values");var p=i.Arguments=i.Array;if(o("keys"),o("values"),o("entries"),!c&&l&&"values"!==p.name)try{s(p,"name",{value:"values"})}catch(t){}},"/dUa":function(t,e,n){var r=n("WGD3"),o=n("PGFG"),i=n("MoOl"),a=r(Function.toString);o(i.inspectSource)||(i.inspectSource=function(t){return a(t)}),t.exports=i.inspectSource},"/usm":function(t,e,n){"use strict";var r=n("WGD3"),o=n("Xiyl"),i=r(n("QFfi")),a=o.aTypedArray;(0,o.exportTypedArrayMethod)("copyWithin",(function(t,e){return i(a(this),t,e,arguments.length>2?arguments[2]:void 0)}))},"/xTX":function(t,e,n){"use strict";var r=n("Xiyl"),o=n("y9dk"),i=r.aTypedArrayConstructor;(0,r.exportTypedArrayStaticMethod)("of",(function(){for(var t=0,e=arguments.length,n=new(i(this))(e);e>t;)n[t]=arguments[t++];return n}),o)},0:function(){},"0K2p":function(t,e,n){var r=n("nEaP"),o=n("PGFG"),i=n("jP2f"),a=n("nHIk"),s=n("Ya6V"),u=n("/dUa"),c=n("SkE4"),l=n("wLFK").CONFIGURABLE,f=c.get,h=c.enforce,d=String(String).split("String");(t.exports=function(t,e,n,u){var c,f=!!u&&!!u.unsafe,p=!!u&&!!u.enumerable,v=!!u&&!!u.noTargetGet,g=u&&void 0!==u.name?u.name:e;o(n)&&("Symbol("===String(g).slice(0,7)&&(g="["+String(g).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!i(n,"name")||l&&n.name!==g)&&a(n,"name",g),(c=h(n)).source||(c.source=d.join("string"==typeof g?g:""))),t!==r?(f?!v&&t[e]&&(p=!0):delete t[e],p?t[e]=n:a(t,e,n)):p?t[e]=n:s(e,n)})(Function.prototype,"toString",(function(){return o(this)&&f(this).source||u(this)}))},"0w+R":function(t,e,n){"use strict";var r=n("y9dk");(0,n("Xiyl").exportTypedArrayStaticMethod)("from",n("otnM"),r)},1:function(){},"1+4v":function(t){var e=Math.log,n=Math.LOG10E;t.exports=Math.log10||function(t){return e(t)*n}},"11ZY":function(t,e,n){var r=n("Hvpk"),o=n("G9Va"),i=n("nRc6"),a=n("gDYM"),s=n("M/tt"),u=n("ujzH");e.f=r&&!o?Object.defineProperties:function(t,e){a(t);for(var n,r=s(e),o=u(e),c=o.length,l=0;c>l;)i.f(t,n=o[l++],r[n]);return t}},"11tc":function(t,e,n){n("B3nq")("unscopables")},"1Qwx":function(t,e,n){"use strict";n("HZkJ")("Map",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),n("dxhH"))},"1Z5j":function(t,e,n){var r=n("nEaP");n("1tiZ")(r.JSON,"JSON",!0)},"1ihM":function(t,e,n){var r=n("JRM0"),o=n("CLff");r({target:"Object",stat:!0,forced:Object.isExtensible!==o},{isExtensible:o})},"1pWv":function(t,e,n){var r=n("nEaP"),o=n("+iL7"),i=n("WGD3"),a=n("AvGt"),s=n("H0Ge").trim,u=n("VcRG"),c=i("".charAt),l=r.parseFloat,f=r.Symbol,h=f&&f.iterator,d=1/l(u+"-0")!=-1/0||h&&!o((function(){l(Object(h))}));t.exports=d?function(t){var e=s(a(t)),n=l(e);return 0===n&&"-"==c(e,0)?-0:n}:l},"1sJv":function(t,e,n){var r=n("JRM0"),o=n("GdAE");r({global:!0,forced:!n("JBUR")},{DataView:o.DataView})},"1tiZ":function(t,e,n){var r=n("nRc6").f,o=n("jP2f"),i=n("GHf2")("toStringTag");t.exports=function(t,e,n){t&&!n&&(t=t.prototype),t&&!o(t,i)&&r(t,i,{configurable:!0,value:e})}},2:function(){},"26qs":function(t,e,n){n("B3nq")("split")},"2Hgx":function(t){function e(t,a){if(t===a)return!0;if(t&&a&&"object"==typeof t&&"object"==typeof a){if(t.constructor!==a.constructor)return!1;var s,u,c,l;if(Array.isArray(t)){if((s=t.length)!=a.length)return!1;for(u=s;0!=u--;)if(!e(t[u],a[u]))return!1;return!0}if(r&&t instanceof Map&&a instanceof Map){if(t.size!==a.size)return!1;for(l=t.entries();!(u=l.next()).done;)if(!a.has(u.value[0]))return!1;for(l=t.entries();!(u=l.next()).done;)if(!e(u.value[1],a.get(u.value[0])))return!1;return!0}if(o&&t instanceof Set&&a instanceof Set){if(t.size!==a.size)return!1;for(l=t.entries();!(u=l.next()).done;)if(!a.has(u.value[0]))return!1;return!0}if(i&&ArrayBuffer.isView(t)&&ArrayBuffer.isView(a)){if((s=t.length)!=a.length)return!1;for(u=s;0!=u--;)if(t[u]!==a[u])return!1;return!0}if(t.constructor===RegExp)return t.source===a.source&&t.flags===a.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===a.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===a.toString();if((s=(c=Object.keys(t)).length)!==Object.keys(a).length)return!1;for(u=s;0!=u--;)if(!Object.prototype.hasOwnProperty.call(a,c[u]))return!1;if(n&&t instanceof Element)return!1;for(u=s;0!=u--;)if(("_owner"!==c[u]&&"__v"!==c[u]&&"__o"!==c[u]||!t.$$typeof)&&!e(t[c[u]],a[c[u]]))return!1;return!0}return t!=t&&a!=a}var n="undefined"!=typeof Element,r="function"==typeof Map,o="function"==typeof Set,i="function"==typeof ArrayBuffer&&!!ArrayBuffer.isView;t.exports=function(t,n){try{return e(t,n)}catch(t){if((t.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw t}}},"2If+":function(t,e,n){"use strict";var r=n("WGD3"),o=n("xxLW"),i=n("CwSR").getWeakData,a=n("gDYM"),s=n("fT8P"),u=n("iBt0"),c=n("maYj"),l=n("5q7I"),f=n("jP2f"),h=n("SkE4"),d=h.set,p=h.getterFor,v=l.find,g=l.findIndex,m=r([].splice),y=0,b=function(t){return t.frozen||(t.frozen=new x)},x=function(){this.entries=[]},w=function(t,e){return v(t.entries,(function(t){return t[0]===e}))};x.prototype={get:function(t){var e=w(this,t);if(e)return e[1]},has:function(t){return!!w(this,t)},set:function(t,e){var n=w(this,t);n?n[1]=e:this.entries.push([t,e])},delete:function(t){var e=g(this.entries,(function(e){return e[0]===t}));return~e&&m(this.entries,e,1),!!~e}},t.exports={getConstructor:function(t,e,n,r){var l=t((function(t,o){u(t,h),d(t,{type:e,id:y++,frozen:void 0}),null!=o&&c(o,t[r],{that:t,AS_ENTRIES:n})})),h=l.prototype,v=p(e),g=function(t,e,n){var r=v(t),o=i(a(e),!0);return!0===o?b(r).set(e,n):o[r.id]=n,t};return o(h,{delete:function(t){var e=v(this);if(!s(t))return!1;var n=i(t);return!0===n?b(e).delete(t):n&&f(n,e.id)&&delete n[e.id]},has:function(t){var e=v(this);if(!s(t))return!1;var n=i(t);return!0===n?b(e).has(t):n&&f(n,e.id)}}),o(h,n?{get:function(t){var e=v(this);if(s(t)){var n=i(t);return!0===n?b(e).get(t):n?n[e.id]:void 0}},set:function(t,e){return g(this,t,e)}}:{add:function(t){return g(this,t,!0)}}),l}}},"2jC7":function(t,e,n){var r=n("nEaP"),o=n("Hvpk"),i=n("dOmT"),a=n("fSIz"),s=n("nRc6").f,u=n("SkE4").get,c=RegExp.prototype,l=r.TypeError;o&&i&&s(c,"dotAll",{configurable:!0,get:function(){if(this!==c){if("RegExp"===a(this))return!!u(this).dotAll;throw l("Incompatible receiver, RegExp required")}}})},"2jZG":function(t,e,n){var r=n("Hvpk"),o=n("WGD3"),i=n("ujzH"),a=n("M/tt"),s=o(n("41Zj").f),u=o([].push),c=function(t){return function(e){for(var n,o=a(e),c=i(o),l=c.length,f=0,h=[];l>f;)n=c[f++],r&&!s(o,n)||u(h,t?[n,o[n]]:o[n]);return h}};t.exports={entries:c(!0),values:c(!1)}},"36lJ":function(t,e,n){"use strict";var r=n("nEaP"),o=n("OzTt"),i=n("Xiyl"),a=n("fr05"),s=n("7/xu"),u=n("9pAD"),c=n("+iL7"),l=r.RangeError,f=r.Int8Array,h=f&&f.prototype,d=h&&h.set,p=i.aTypedArray,v=i.exportTypedArrayMethod,g=!c((function(){var t=new Uint8ClampedArray(2);return o(d,t,{length:1,0:3},1),3!==t[1]})),m=g&&i.NATIVE_ARRAY_BUFFER_VIEWS&&c((function(){var t=new f(2);return t.set(1),t.set("2",1),0!==t[0]||2!==t[1]}));v("set",(function(t){p(this);var e=s(arguments.length>1?arguments[1]:void 0,1),n=u(t);if(g)return o(d,this,n,e);var r=this.length,i=a(n),c=0;if(i+e>r)throw l("Wrong length");for(;c<i;)this[e+c]=n[c++]}),!g||m)},"3I4I":function(t,e,n){"use strict";var r=n("nEaP"),o=n("h/Mk"),i=n("fr05"),a=n("a72Q"),s=r.TypeError;t.exports=function t(e,n,r,u,c,l,f,h){for(var d,p=c,v=0,g=!!f&&a(f,h);v<u;){if(v in r){if(d=g?g(r[v],v,n):r[v],l>0&&o(d))p=t(e,n,d,i(d),p,l-1)-1;else{if(p>=9007199254740991)throw s("Exceed the acceptable array length");e[p]=d}p++}v++}return p}},"3PYW":function(t,e,n){"use strict";var r=n("5q7I").forEach,o=n("fK/z")("forEach");t.exports=o?[].forEach:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}},"3dw1":function(t,e,n){var r=n("nEaP"),o=n("tPpl"),i=n("L91r"),a=n("3PYW"),s=n("nHIk"),u=function(t){if(t&&t.forEach!==a)try{s(t,"forEach",a)}catch(e){t.forEach=a}};for(var c in o)o[c]&&u(r[c]&&r[c].prototype);u(i)},"3pC9":function(t,e,n){var r=n("gIo2"),o=n("nrda"),i=r("keys");t.exports=function(t){return i[t]||(i[t]=o(t))}},"3qk3":function(t,e,n){var r=n("JRM0"),o=n("UVdV"),i=n("WGD3"),a=n("+iL7"),s=n("AvGt"),u=n("jP2f"),c=n("7DHN"),l=n("mI7T").ctoi,f=/[^\d+/a-z]/i,h=/[\t\n\f\r ]+/g,d=/[=]+$/,p=o("atob"),v=String.fromCharCode,g=i("".charAt),m=i("".replace),y=i(f.exec),b=a((function(){return""!==atob(" ")})),x=!b&&!a((function(){p()}));r({global:!0,enumerable:!0,forced:b||x},{atob:function(t){if(c(arguments.length,1),x)return p(t);var e,n,r=m(s(t),h,""),i="",a=0,b=0;if(r.length%4==0&&(r=m(r,d,"")),r.length%4==1||y(f,r))throw new(o("DOMException"))("The string is not correctly encoded","InvalidCharacterError");for(;e=g(r,a++);)u(l,e)&&(n=b%4?64*n+l[e]:l[e],b++%4&&(i+=v(255&n>>(-2*b&6))));return i}})},"3rea":function(t){var e=Math.log;t.exports=Math.log1p||function(t){return(t=+t)>-1e-8&&t<1e-8?t-t*t/2:e(1+t)}},"41Zj":function(t,e){"use strict";var n={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,o=r&&!n.call({1:2},1);e.f=o?function(t){var e=r(this,t);return!!e&&e.enumerable}:n},"4GBK":function(t,e,n){n("JRM0")({target:"Object",stat:!0},{setPrototypeOf:n("hQLn")})},"4M91":function(t,e,n){var r=n("nEaP"),o=n("h/Mk"),i=n("iGMQ"),a=n("fT8P"),s=n("GHf2")("species"),u=r.Array;t.exports=function(t){var e;return o(t)&&(i(e=t.constructor)&&(e===u||o(e.prototype))||a(e)&&null===(e=e[s]))&&(e=void 0),void 0===e?u:e}},"4NM0":function(t,e,n){"use strict";var r=n("JRM0"),o=n("WGD3"),i=n("9dC0"),a=n("Qean"),s=n("AvGt"),u=n("O5TI"),c=o("".indexOf);r({target:"String",proto:!0,forced:!u("includes")},{includes:function(t){return!!~c(s(a(this)),s(i(t)),arguments.length>1?arguments[1]:void 0)}})},"4SRy":function(t,e,n){var r=n("JRM0"),o=n("nEaP"),i=n("R/cv"),a=n("PGFG"),s=n("rxbk"),u=n("i6bU"),c=n("7DHN"),l=/MSIE .\./.test(s),f=o.Function,h=function(t){return function(e,n){var r=c(arguments.length,1)>2,o=a(e)?e:f(e),s=r?u(arguments,2):void 0;return t(r?function(){i(o,this,s)}:o,n)}};r({global:!0,bind:!0,forced:l},{setTimeout:h(o.setTimeout),setInterval:h(o.setInterval)})},"4owi":function(t,e,n){var r=n("JRM0"),o=n("P3h4");r({target:"Array",stat:!0,forced:!n("Ncbx")((function(t){Array.from(t)}))},{from:o})},"4ssk":function(t,e,n){var r,o,i,a,s=n("nEaP"),u=n("R/cv"),c=n("a72Q"),l=n("PGFG"),f=n("jP2f"),h=n("+iL7"),d=n("R1TW"),p=n("i6bU"),v=n("HRgQ"),g=n("7DHN"),m=n("s06e"),y=n("YxGO"),b=s.setImmediate,x=s.clearImmediate,w=s.process,_=s.Dispatch,E=s.Function,R=s.MessageChannel,C=s.String,S=0,O={},A="onreadystatechange";try{r=s.location}catch(t){}var I=function(t){if(f(O,t)){var e=O[t];delete O[t],e()}},k=function(t){return function(){I(t)}},T=function(t){I(t.data)},M=function(t){s.postMessage(C(t),r.protocol+"//"+r.host)};b&&x||(b=function(t){g(arguments.length,1);var e=l(t)?t:E(t),n=p(arguments,1);return O[++S]=function(){u(e,void 0,n)},o(S),S},x=function(t){delete O[t]},y?o=function(t){w.nextTick(k(t))}:_&&_.now?o=function(t){_.now(k(t))}:R&&!m?(a=(i=new R).port2,i.port1.onmessage=T,o=c(a.postMessage,a)):s.addEventListener&&l(s.postMessage)&&!s.importScripts&&r&&"file:"!==r.protocol&&!h(M)?(o=M,s.addEventListener("message",T,!1)):o=A in v("script")?function(t){d.appendChild(v("script")).onreadystatechange=function(){d.removeChild(this),I(t)}}:function(t){setTimeout(k(t),0)}),t.exports={set:b,clear:x}},"4yXh":function(t,e,n){"use strict";var r=n("JRM0"),o=n("WGD3"),i=n("ZK/t"),a=Date.prototype,s=o(a.getTime),u=o(a.setFullYear);r({target:"Date",proto:!0},{setYear:function(t){s(this);var e=i(t);return u(this,0<=e&&e<=99?e+1900:e)}})},"526l":function(t,e,n){var r=n("JRM0"),o=n("BRZg"),i=Math.abs,a=Math.pow;r({target:"Math",stat:!0},{cbrt:function(t){return o(t=+t)*a(i(t),1/3)}})},"52tz":function(t,e,n){var r=n("+iL7"),o=n("VSW8");t.exports=!r((function(){var t=Error("a");return!("stack"in t)||(Object.defineProperty(t,"stack",o(1,7)),7!==t.stack)}))},"55Zx":function(t,e,n){"use strict";var r=n("JRM0"),o=n("xBW5"),i=n("UVdV"),a=n("+iL7"),s=n("w/Ji"),u=n("VSW8"),c=n("nRc6").f,l=n("11ZY").f,f=n("0K2p"),h=n("jP2f"),d=n("iBt0"),p=n("gDYM"),v=n("Z1fm"),g=n("QvVa"),m=n("7tL4"),y=n("oa+t"),b=n("SkE4"),x=n("Hvpk"),w=n("PCqT"),_="DOMException",E="DATA_CLONE_ERR",R=i("Error"),C=i(_)||function(){try{(new(i("MessageChannel")||o("worker_threads").MessageChannel)).port1.postMessage(new WeakMap)}catch(t){if(t.name==E&&25==t.code)return t.constructor}}(),S=C&&C.prototype,O=R.prototype,A=b.set,I=b.getterFor(_),k="stack"in R(_),T=function(t){return h(m,t)&&m[t].m?m[t].c:0},M=function(){d(this,D);var t=arguments.length,e=g(t<1?void 0:arguments[0]),n=g(t<2?void 0:arguments[1],"Error"),r=T(n);if(A(this,{type:_,name:n,message:e,code:r}),x||(this.name=n,this.message=e,this.code=r),k){var o=R(e);o.name=_,c(this,"stack",u(1,y(o.stack,1)))}},D=M.prototype=s(O),P=function(t){return{enumerable:!0,configurable:!0,get:t}},N=function(t){return P((function(){return I(this)[t]}))};x&&l(D,{name:N("name"),message:N("message"),code:N("code")}),c(D,"constructor",u(1,M));var F=a((function(){return!(new C instanceof R)})),L=F||a((function(){return O.toString!==v||"2: 1"!==String(new C(1,2))})),j=F||a((function(){return 25!==new C(1,"DataCloneError").code})),B=w?L||j||(F||25!==C.DATA_CLONE_ERR||25!==S.DATA_CLONE_ERR):F;r({global:!0,forced:B},{DOMException:B?M:C});var W=i(_),U=W.prototype;for(var G in L&&(w||C===W)&&f(U,"toString",v),j&&x&&C===W&&c(U,"code",P((function(){return T(p(this).name)}))),m)if(h(m,G)){var z=m[G],V=z.s,H=u(6,z.c);h(W,V)||c(W,V,H),h(U,V)||c(U,V,H)}},"5CFb":function(t,e,n){var r=n("PGFG"),o=n("fT8P"),i=n("hQLn");t.exports=function(t,e,n){var a,s;return i&&r(a=e.constructor)&&a!==n&&o(s=a.prototype)&&s!==n.prototype&&i(t,s),t}},"5q7I":function(t,e,n){var r=n("a72Q"),o=n("WGD3"),i=n("DJGK"),a=n("9pAD"),s=n("fr05"),u=n("iSxr"),c=o([].push),l=function(t){var e=1==t,n=2==t,o=3==t,l=4==t,f=6==t,h=7==t,d=5==t||f;return function(p,v,g,m){for(var y,b,x=a(p),w=i(x),_=r(v,g),E=s(w),R=0,C=m||u,S=e?C(p,E):n||h?C(p,0):void 0;E>R;R++)if((d||R in w)&&(b=_(y=w[R],R,x),t))if(e)S[R]=b;else if(b)switch(t){case 3:return!0;case 5:return y;case 6:return R;case 2:c(S,y)}else switch(t){case 4:return!1;case 7:c(S,y)}return f?-1:o||l?l:S}};t.exports={forEach:l(0),map:l(1),filter:l(2),some:l(3),every:l(4),find:l(5),findIndex:l(6),filterReject:l(7)}},"6+ef":function(t,e,n){var r=n("GHf2"),o=n("q/gS"),i=r("iterator"),a=Array.prototype;t.exports=function(t){return void 0!==t&&(o.Array===t||a[i]===t)}},"6QkG":function(t,e,n){var r=n("JRM0"),o=n("nEaP"),i=n("WGD3"),a=o.Date,s=i(a.prototype.getTime);r({target:"Date",stat:!0},{now:function(){return s(new a)}})},"6Uyv":function(t,e,n){var r=n("JRM0"),o=n("nEaP"),i=n("WGD3"),a=n("glsI"),s=o.RangeError,u=String.fromCharCode,c=String.fromCodePoint,l=i([].join);r({target:"String",stat:!0,forced:!!c&&1!=c.length},{fromCodePoint:function(t){for(var e,n=[],r=arguments.length,o=0;r>o;){if(e=+arguments[o++],a(e,1114111)!==e)throw s(e+" is not a valid code point");n[o]=e<65536?u(e):u(55296+((e-=65536)>>10),e%1024+56320)}return l(n,"")}})},"6ka5":function(t,e,n){var r=n("gDYM"),o=n("lEJZ"),i=n("GHf2")("species");t.exports=function(t,e){var n,a=r(t).constructor;return void 0===a||null==(n=r(a)[i])?e:o(n)}},"6lz5":function(t,e,n){"use strict";var r=n("JRM0"),o=n("jid/");r({target:"String",proto:!0,forced:n("Uo50")("fixed")},{fixed:function(){return o(this,"tt","","")}})},"6uKX":function(t,e,n){"use strict";var r=n("JRM0"),o=n("WGD3"),i=n("+iL7"),a=n("Qtiq"),s=o(1..toPrecision);r({target:"Number",proto:!0,forced:i((function(){return"1"!==s(1,void 0)}))||!i((function(){s({})}))},{toPrecision:function(t){return void 0===t?s(a(this)):s(a(this),t)}})},"7/xu":function(t,e,n){var r=n("nEaP"),o=n("Zpea"),i=r.RangeError;t.exports=function(t,e){var n=o(t);if(n%e)throw i("Wrong offset");return n}},"7DHN":function(t,e,n){var r=n("nEaP").TypeError;t.exports=function(t,e){if(t<e)throw r("Not enough arguments");return t}},"7P5K":function(t,e,n){var r=n("nEaP"),o=n("PGFG"),i=r.String,a=r.TypeError;t.exports=function(t){if("object"==typeof t||o(t))return t;throw a("Can't set "+i(t)+" as a prototype")}},"7YMQ":function(t,e,n){var r=n("gDYM"),o=n("wnjq");t.exports=function(t,e,n,i){try{return i?e(r(n)[0],n[1]):e(n)}catch(e){o(t,"throw",e)}}},"7fup":function(t,e,n){var r=n("JRM0"),o=n("UVdV"),i=n("WGD3"),a=n("+iL7"),s=n("AvGt"),u=n("7DHN"),c=n("mI7T").itoc,l=o("btoa"),f=i("".charAt),h=i("".charCodeAt),d=!!l&&!a((function(){l()}));r({global:!0,enumerable:!0,forced:d},{btoa:function(t){if(u(arguments.length,1),d)return l(t);for(var e,n,r=s(t),i="",a=0,p=c;f(r,a)||(p="=",a%1);){if((n=h(r,a+=3/4))>255)throw new(o("DOMException"))("The string contains characters outside of the Latin1 range","InvalidCharacterError");i+=f(p,63&(e=e<<8|n)>>8-a%1*8)}return i}})},"7qfE":function(t,e,n){"use strict";var r=n("JRM0"),o=n("5q7I").every;r({target:"Array",proto:!0,forced:!n("fK/z")("every")},{every:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}})},"7tL4":function(t){t.exports={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}}},"8Av2":function(t,e,n){"use strict";var r=n("JRM0"),o=n("SmY9").right,i=n("fK/z"),a=n("G5hJ"),s=n("YxGO");r({target:"Array",proto:!0,forced:!i("reduceRight")||!s&&a>79&&a<83},{reduceRight:function(t){return o(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"8OJN":function(t,e,n){var r=n("WGD3"),o=n("jP2f"),i=n("M/tt"),a=n("kMPr").indexOf,s=n("s3NK"),u=r([].push);t.exports=function(t,e){var n,r=i(t),c=0,l=[];for(n in r)!o(s,n)&&o(r,n)&&u(l,n);for(;e.length>c;)o(r,n=e[c++])&&(~a(l,n)||u(l,n));return l}},"8ZZt":function(t,e,n){var r=n("fT8P"),o=n("nHIk");t.exports=function(t,e){r(e)&&"cause"in e&&o(t,"cause",e.cause)}},"8cZI":function(t,e,n){"use strict";var r=n("JRM0"),o=n("WGD3"),i=n("DJGK"),a=n("M/tt"),s=n("fK/z"),u=o([].join),c=i!=Object,l=s("join",",");r({target:"Array",proto:!0,forced:c||!l},{join:function(t){return u(a(this),void 0===t?",":t)}})},"8rZV":function(t,e,n){var r=n("JRM0"),o=n("sLmC");r({target:"Array",proto:!0,forced:o!==[].lastIndexOf},{lastIndexOf:o})},"9DLp":function(t,e,n){"use strict";n("WoWj");var r,o=n("JRM0"),i=n("Hvpk"),a=n("iwLE"),s=n("nEaP"),u=n("a72Q"),c=n("WGD3"),l=n("11ZY").f,f=n("0K2p"),h=n("iBt0"),d=n("jP2f"),p=n("XOuC"),v=n("P3h4"),g=n("bSfA"),m=n("z+V7").codeAt,y=n("MF8d"),b=n("AvGt"),x=n("1tiZ"),w=n("7DHN"),_=n("SeWL"),E=n("SkE4"),R=E.set,C=E.getterFor("URL"),S=_.URLSearchParams,O=_.getState,A=s.URL,I=s.TypeError,k=s.parseInt,T=Math.floor,M=Math.pow,D=c("".charAt),P=c(/./.exec),N=c([].join),F=c(1..toString),L=c([].pop),j=c([].push),B=c("".replace),W=c([].shift),U=c("".split),G=c("".slice),z=c("".toLowerCase),V=c([].unshift),H="Invalid scheme",q="Invalid host",K="Invalid port",X=/[a-z]/i,J=/[\d+-.a-z]/i,Y=/\d/,Q=/^0x/i,$=/^[0-7]+$/,Z=/^\d+$/,tt=/^[\da-f]+$/i,et=/[\0\t\n\r #%/:<>?@[\\\]^|]/,nt=/[\0\t\n\r #/:<>?@[\\\]^|]/,rt=/^[\u0000-\u0020]+|[\u0000-\u0020]+$/g,ot=/[\t\n\r]/g,it=function(t){var e,n,r,o;if("number"==typeof t){for(e=[],n=0;n<4;n++)V(e,t%256),t=T(t/256);return N(e,".")}if("object"==typeof t){for(e="",r=function(t){for(var e=null,n=1,r=null,o=0,i=0;i<8;i++)0!==t[i]?(o>n&&(e=r,n=o),r=null,o=0):(null===r&&(r=i),++o);return o>n&&(e=r,n=o),e}(t),n=0;n<8;n++)o&&0===t[n]||(o&&(o=!1),r===n?(e+=n?":":"::",o=!0):(e+=F(t[n],16),n<7&&(e+=":")));return"["+e+"]"}return t},at={},st=p({},at,{" ":1,'"':1,"<":1,">":1,"`":1}),ut=p({},st,{"#":1,"?":1,"{":1,"}":1}),ct=p({},ut,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),lt=function(t,e){var n=m(t,0);return n>32&&n<127&&!d(e,t)?t:encodeURIComponent(t)},ft={ftp:21,file:null,http:80,https:443,ws:80,wss:443},ht=function(t,e){var n;return 2==t.length&&P(X,D(t,0))&&(":"==(n=D(t,1))||!e&&"|"==n)},dt=function(t){var e;return t.length>1&&ht(G(t,0,2))&&(2==t.length||"/"===(e=D(t,2))||"\\"===e||"?"===e||"#"===e)},pt=function(t){return"."===t||"%2e"===z(t)},vt={},gt={},mt={},yt={},bt={},xt={},wt={},_t={},Et={},Rt={},Ct={},St={},Ot={},At={},It={},kt={},Tt={},Mt={},Dt={},Pt={},Nt={},Ft=function t(e,n,r){var o,i,a,s=b(e);if(n){if(i=this.parse(s))throw I(i);this.searchParams=null}else{if(void 0!==r&&(o=new t(r,!0)),i=this.parse(s,null,o))throw I(i);(a=O(new S)).bindURL(this),this.searchParams=a}};Ft.prototype={type:"URL",parse:function(t,e,n){var o,i,a,s,u,c=this,l=e||vt,f=0,h="",p=!1,m=!1,y=!1;for(t=b(t),e||(c.scheme="",c.username="",c.password="",c.host=null,c.port=null,c.path=[],c.query=null,c.fragment=null,c.cannotBeABaseURL=!1,t=B(t,rt,"")),t=B(t,ot,""),o=v(t);f<=o.length;){switch(i=o[f],l){case vt:if(!i||!P(X,i)){if(e)return H;l=mt;continue}h+=z(i),l=gt;break;case gt:if(i&&(P(J,i)||"+"==i||"-"==i||"."==i))h+=z(i);else{if(":"!=i){if(e)return H;h="",l=mt,f=0;continue}if(e&&(c.isSpecial()!=d(ft,h)||"file"==h&&(c.includesCredentials()||null!==c.port)||"file"==c.scheme&&!c.host))return;if(c.scheme=h,e)return void(c.isSpecial()&&ft[c.scheme]==c.port&&(c.port=null));h="","file"==c.scheme?l=At:c.isSpecial()&&n&&n.scheme==c.scheme?l=yt:c.isSpecial()?l=_t:"/"==o[f+1]?(l=bt,f++):(c.cannotBeABaseURL=!0,j(c.path,""),l=Dt)}break;case mt:if(!n||n.cannotBeABaseURL&&"#"!=i)return H;if(n.cannotBeABaseURL&&"#"==i){c.scheme=n.scheme,c.path=g(n.path),c.query=n.query,c.fragment="",c.cannotBeABaseURL=!0,l=Nt;break}l="file"==n.scheme?At:xt;continue;case yt:if("/"!=i||"/"!=o[f+1]){l=xt;continue}l=Et,f++;break;case bt:if("/"==i){l=Rt;break}l=Mt;continue;case xt:if(c.scheme=n.scheme,i==r)c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,c.path=g(n.path),c.query=n.query;else if("/"==i||"\\"==i&&c.isSpecial())l=wt;else if("?"==i)c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,c.path=g(n.path),c.query="",l=Pt;else{if("#"!=i){c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,c.path=g(n.path),c.path.length--,l=Mt;continue}c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,c.path=g(n.path),c.query=n.query,c.fragment="",l=Nt}break;case wt:if(!c.isSpecial()||"/"!=i&&"\\"!=i){if("/"!=i){c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,l=Mt;continue}l=Rt}else l=Et;break;case _t:if(l=Et,"/"!=i||"/"!=D(h,f+1))continue;f++;break;case Et:if("/"!=i&&"\\"!=i){l=Rt;continue}break;case Rt:if("@"==i){p&&(h="%40"+h),p=!0,a=v(h);for(var x=0;x<a.length;x++){var w=a[x];if(":"!=w||y){var _=lt(w,ct);y?c.password+=_:c.username+=_}else y=!0}h=""}else if(i==r||"/"==i||"?"==i||"#"==i||"\\"==i&&c.isSpecial()){if(p&&""==h)return"Invalid authority";f-=v(h).length+1,h="",l=Ct}else h+=i;break;case Ct:case St:if(e&&"file"==c.scheme){l=kt;continue}if(":"!=i||m){if(i==r||"/"==i||"?"==i||"#"==i||"\\"==i&&c.isSpecial()){if(c.isSpecial()&&""==h)return q;if(e&&""==h&&(c.includesCredentials()||null!==c.port))return;if(s=c.parseHost(h))return s;if(h="",l=Tt,e)return;continue}"["==i?m=!0:"]"==i&&(m=!1),h+=i}else{if(""==h)return q;if(s=c.parseHost(h))return s;if(h="",l=Ot,e==St)return}break;case Ot:if(!P(Y,i)){if(i==r||"/"==i||"?"==i||"#"==i||"\\"==i&&c.isSpecial()||e){if(""!=h){var E=k(h,10);if(E>65535)return K;c.port=c.isSpecial()&&E===ft[c.scheme]?null:E,h=""}if(e)return;l=Tt;continue}return K}h+=i;break;case At:if(c.scheme="file","/"==i||"\\"==i)l=It;else{if(!n||"file"!=n.scheme){l=Mt;continue}if(i==r)c.host=n.host,c.path=g(n.path),c.query=n.query;else if("?"==i)c.host=n.host,c.path=g(n.path),c.query="",l=Pt;else{if("#"!=i){dt(N(g(o,f),""))||(c.host=n.host,c.path=g(n.path),c.shortenPath()),l=Mt;continue}c.host=n.host,c.path=g(n.path),c.query=n.query,c.fragment="",l=Nt}}break;case It:if("/"==i||"\\"==i){l=kt;break}n&&"file"==n.scheme&&!dt(N(g(o,f),""))&&(ht(n.path[0],!0)?j(c.path,n.path[0]):c.host=n.host),l=Mt;continue;case kt:if(i==r||"/"==i||"\\"==i||"?"==i||"#"==i){if(!e&&ht(h))l=Mt;else if(""==h){if(c.host="",e)return;l=Tt}else{if(s=c.parseHost(h))return s;if("localhost"==c.host&&(c.host=""),e)return;h="",l=Tt}continue}h+=i;break;case Tt:if(c.isSpecial()){if(l=Mt,"/"!=i&&"\\"!=i)continue}else if(e||"?"!=i)if(e||"#"!=i){if(i!=r&&(l=Mt,"/"!=i))continue}else c.fragment="",l=Nt;else c.query="",l=Pt;break;case Mt:if(i==r||"/"==i||"\\"==i&&c.isSpecial()||!e&&("?"==i||"#"==i)){if(".."===(u=z(u=h))||"%2e."===u||".%2e"===u||"%2e%2e"===u?(c.shortenPath(),"/"==i||"\\"==i&&c.isSpecial()||j(c.path,"")):pt(h)?"/"==i||"\\"==i&&c.isSpecial()||j(c.path,""):("file"==c.scheme&&!c.path.length&&ht(h)&&(c.host&&(c.host=""),h=D(h,0)+":"),j(c.path,h)),h="","file"==c.scheme&&(i==r||"?"==i||"#"==i))for(;c.path.length>1&&""===c.path[0];)W(c.path);"?"==i?(c.query="",l=Pt):"#"==i&&(c.fragment="",l=Nt)}else h+=lt(i,ut);break;case Dt:"?"==i?(c.query="",l=Pt):"#"==i?(c.fragment="",l=Nt):i!=r&&(c.path[0]+=lt(i,at));break;case Pt:e||"#"!=i?i!=r&&("'"==i&&c.isSpecial()?c.query+="%27":c.query+="#"==i?"%23":lt(i,at)):(c.fragment="",l=Nt);break;case Nt:i!=r&&(c.fragment+=lt(i,st))}f++}},parseHost:function(t){var e,n,r;if("["==D(t,0)){if("]"!=D(t,t.length-1))return q;if(e=function(t){var e,n,r,o,i,a,s,u=[0,0,0,0,0,0,0,0],c=0,l=null,f=0,h=function(){return D(t,f)};if(":"==h()){if(":"!=D(t,1))return;f+=2,l=++c}for(;h();){if(8==c)return;if(":"!=h()){for(e=n=0;n<4&&P(tt,h());)e=16*e+k(h(),16),f++,n++;if("."==h()){if(0==n)return;if(f-=n,c>6)return;for(r=0;h();){if(o=null,r>0){if(!("."==h()&&r<4))return;f++}if(!P(Y,h()))return;for(;P(Y,h());){if(i=k(h(),10),null===o)o=i;else{if(0==o)return;o=10*o+i}if(o>255)return;f++}u[c]=256*u[c]+o,2!=++r&&4!=r||c++}if(4!=r)return;break}if(":"==h()){if(f++,!h())return}else if(h())return;u[c++]=e}else{if(null!==l)return;f++,l=++c}}if(null!==l)for(a=c-l,c=7;0!=c&&a>0;)s=u[c],u[c--]=u[l+a-1],u[l+--a]=s;else if(8!=c)return;return u}(G(t,1,-1)),!e)return q;this.host=e}else if(this.isSpecial()){if(t=y(t),P(et,t))return q;if(e=function(t){var e,n,r,o,i,a,s,u=U(t,".");if(u.length&&""==u[u.length-1]&&u.length--,(e=u.length)>4)return t;for(n=[],r=0;r<e;r++){if(""==(o=u[r]))return t;if(i=10,o.length>1&&"0"==D(o,0)&&(i=P(Q,o)?16:8,o=G(o,8==i?1:2)),""===o)a=0;else{if(!P(10==i?Z:8==i?$:tt,o))return t;a=k(o,i)}j(n,a)}for(r=0;r<e;r++)if(a=n[r],r==e-1){if(a>=M(256,5-e))return null}else if(a>255)return null;for(s=L(n),r=0;r<n.length;r++)s+=n[r]*M(256,3-r);return s}(t),null===e)return q;this.host=e}else{if(P(nt,t))return q;for(e="",n=v(t),r=0;r<n.length;r++)e+=lt(n[r],at);this.host=e}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||"file"==this.scheme},includesCredentials:function(){return""!=this.username||""!=this.password},isSpecial:function(){return d(ft,this.scheme)},shortenPath:function(){var t=this.path,e=t.length;!e||"file"==this.scheme&&1==e&&ht(t[0],!0)||t.length--},serialize:function(){var t=this,e=t.scheme,n=t.username,r=t.password,o=t.host,i=t.port,a=t.path,s=t.query,u=t.fragment,c=e+":";return null!==o?(c+="//",t.includesCredentials()&&(c+=n+(r?":"+r:"")+"@"),c+=it(o),null!==i&&(c+=":"+i)):"file"==e&&(c+="//"),c+=t.cannotBeABaseURL?a[0]:a.length?"/"+N(a,"/"):"",null!==s&&(c+="?"+s),null!==u&&(c+="#"+u),c},setHref:function(t){var e=this.parse(t);if(e)throw I(e);this.searchParams.update()},getOrigin:function(){var t=this.scheme,e=this.port;if("blob"==t)try{return new Lt(t.path[0]).origin}catch(t){return"null"}return"file"!=t&&this.isSpecial()?t+"://"+it(this.host)+(null!==e?":"+e:""):"null"},getProtocol:function(){return this.scheme+":"},setProtocol:function(t){this.parse(b(t)+":",vt)},getUsername:function(){return this.username},setUsername:function(t){var e=v(b(t));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var n=0;n<e.length;n++)this.username+=lt(e[n],ct)}},getPassword:function(){return this.password},setPassword:function(t){var e=v(b(t));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var n=0;n<e.length;n++)this.password+=lt(e[n],ct)}},getHost:function(){var t=this.host,e=this.port;return null===t?"":null===e?it(t):it(t)+":"+e},setHost:function(t){this.cannotBeABaseURL||this.parse(t,Ct)},getHostname:function(){var t=this.host;return null===t?"":it(t)},setHostname:function(t){this.cannotBeABaseURL||this.parse(t,St)},getPort:function(){var t=this.port;return null===t?"":b(t)},setPort:function(t){this.cannotHaveUsernamePasswordPort()||(""==(t=b(t))?this.port=null:this.parse(t,Ot))},getPathname:function(){var t=this.path;return this.cannotBeABaseURL?t[0]:t.length?"/"+N(t,"/"):""},setPathname:function(t){this.cannotBeABaseURL||(this.path=[],this.parse(t,Tt))},getSearch:function(){var t=this.query;return t?"?"+t:""},setSearch:function(t){""==(t=b(t))?this.query=null:("?"==D(t,0)&&(t=G(t,1)),this.query="",this.parse(t,Pt)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var t=this.fragment;return t?"#"+t:""},setHash:function(t){""!=(t=b(t))?("#"==D(t,0)&&(t=G(t,1)),this.fragment="",this.parse(t,Nt)):this.fragment=null},update:function(){this.query=this.searchParams.serialize()||null}};var Lt=function(t){var e=h(this,jt),n=w(arguments.length,1)>1?arguments[1]:void 0,r=R(e,new Ft(t,!1,n));i||(e.href=r.serialize(),e.origin=r.getOrigin(),e.protocol=r.getProtocol(),e.username=r.getUsername(),e.password=r.getPassword(),e.host=r.getHost(),e.hostname=r.getHostname(),e.port=r.getPort(),e.pathname=r.getPathname(),e.search=r.getSearch(),e.searchParams=r.getSearchParams(),e.hash=r.getHash())},jt=Lt.prototype,Bt=function(t,e){return{get:function(){return C(this)[t]()},set:e&&function(t){return C(this)[e](t)},configurable:!0,enumerable:!0}};if(i&&l(jt,{href:Bt("serialize","setHref"),origin:Bt("getOrigin"),protocol:Bt("getProtocol","setProtocol"),username:Bt("getUsername","setUsername"),password:Bt("getPassword","setPassword"),host:Bt("getHost","setHost"),hostname:Bt("getHostname","setHostname"),port:Bt("getPort","setPort"),pathname:Bt("getPathname","setPathname"),search:Bt("getSearch","setSearch"),searchParams:Bt("getSearchParams"),hash:Bt("getHash","setHash")}),f(jt,"toJSON",(function(){return C(this).serialize()}),{enumerable:!0}),f(jt,"toString",(function(){return C(this).serialize()}),{enumerable:!0}),A){var Wt=A.createObjectURL,Ut=A.revokeObjectURL;Wt&&f(Lt,"createObjectURL",u(Wt,A)),Ut&&f(Lt,"revokeObjectURL",u(Ut,A))}x(Lt,"URL"),o({global:!0,forced:!a,sham:!i},{URL:Lt})},"9R9e":function(t,e,n){var r=n("JRM0"),o=n("gDYM"),i=n("CLff");r({target:"Reflect",stat:!0},{isExtensible:function(t){return o(t),i(t)}})},"9UJh":function(t,e,n){"use strict";var r=n("WGD3"),o=n("wLFK").PROPER,i=n("0K2p"),a=n("gDYM"),s=n("+n59"),u=n("AvGt"),c=n("+iL7"),l=n("O2Ja"),f="toString",h=RegExp.prototype,d=h.toString,p=r(l);(c((function(){return"/a/b"!=d.call({source:"a",flags:"b"})}))||o&&d.name!=f)&&i(RegExp.prototype,f,(function(){var t=a(this),e=u(t.source),n=t.flags;return"/"+e+"/"+u(void 0===n&&s(h,t)&&!("flags"in h)?p(t):n)}),{unsafe:!0})},"9dC0":function(t,e,n){var r=n("nEaP"),o=n("GrtF"),i=r.TypeError;t.exports=function(t){if(o(t))throw i("The method doesn't accept regular expressions");return t}},"9nX2":function(t,e,n){var r=n("+iL7"),o=n("PGFG"),i=/#|\.prototype\./,a=function(t,e){var n=u[s(t)];return n==l||n!=c&&(o(e)?r(e):!!e)},s=a.normalize=function(t){return String(t).replace(i,".").toLowerCase()},u=a.data={},c=a.NATIVE="N",l=a.POLYFILL="P";t.exports=a},"9pAD":function(t,e,n){var r=n("nEaP"),o=n("Qean"),i=r.Object;t.exports=function(t){return i(o(t))}},"9yb3":function(t,e,n){"use strict";var r=n("JRM0"),o=n("nEaP"),i=n("OzTt"),a=n("WGD3"),s=n("fM6A"),u=n("Qean"),c=n("zrDt"),l=n("AvGt"),f=n("gDYM"),h=n("fSIz"),d=n("+n59"),p=n("GrtF"),v=n("O2Ja"),g=n("Krfs"),m=n("0K2p"),y=n("+iL7"),b=n("GHf2"),x=n("6ka5"),w=n("JtDR"),_=n("a59c"),E=n("SkE4"),R=n("PCqT"),C=b("matchAll"),S="RegExp String",O="RegExp String Iterator",A=E.set,I=E.getterFor(O),k=RegExp.prototype,T=o.TypeError,M=a(v),D=a("".indexOf),P=a("".matchAll),N=!!P&&!y((function(){P("a",/./)})),F=s((function(t,e,n,r){A(this,{type:O,regexp:t,string:e,global:n,unicode:r,done:!1})}),S,(function(){var t=I(this);if(t.done)return{value:void 0,done:!0};var e=t.regexp,n=t.string,r=_(e,n);return null===r?{value:void 0,done:t.done=!0}:t.global?(""===l(r[0])&&(e.lastIndex=w(n,c(e.lastIndex),t.unicode)),{value:r,done:!1}):(t.done=!0,{value:r,done:!1})})),L=function(t){var e,n,r,o,i,a,s=f(this),u=l(t);return e=x(s,RegExp),void 0===(n=s.flags)&&d(k,s)&&!("flags"in k)&&(n=M(s)),r=void 0===n?"":l(n),o=new e(e===RegExp?s.source:s,r),i=!!~D(r,"g"),a=!!~D(r,"u"),o.lastIndex=c(s.lastIndex),new F(o,u,i,a)};r({target:"String",proto:!0,forced:N},{matchAll:function(t){var e,n,r,o,a=u(this);if(null!=t){if(p(t)&&(e=l(u("flags"in k?t.flags:M(t))),!~D(e,"g")))throw T("`.matchAll` does not allow non-global regexes");if(N)return P(a,t);if(void 0===(r=g(t,C))&&R&&"RegExp"==h(t)&&(r=L),r)return i(r,t,a)}else if(N)return P(a,t);return n=l(a),o=new RegExp(t,"g"),R?i(L,o,n):o[C](n)}}),R||C in k||m(k,C,L)},AHPp:function(t,e,n){var r=n("JRM0"),o=n("UVdV"),i=n("R/cv"),a=n("AvbG"),s=n("lEJZ"),u=n("gDYM"),c=n("fT8P"),l=n("w/Ji"),f=n("+iL7"),h=o("Reflect","construct"),d=Object.prototype,p=[].push,v=f((function(){function t(){}return!(h((function(){}),[],t)instanceof t)})),g=!f((function(){h((function(){}))})),m=v||g;r({target:"Reflect",stat:!0,forced:m,sham:m},{construct:function(t,e){s(t),u(e);var n=arguments.length<3?t:s(arguments[2]);if(g&&!v)return h(t,e,n);if(t==n){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var r=[null];return i(p,r,e),new(i(a,t,r))}var o=n.prototype,f=l(c(o)?o:d),m=i(t,f,e);return c(m)?m:f}})},APoS:function(t,e,n){n("j8ZG")("Float64",(function(t){return function(e,n,r){return t(this,e,n,r)}}))},"AT/g":function(t,e,n){"use strict";var r=n("JRM0"),o=n("sK41"),i=n("UVdV"),a=n("OzTt"),s=n("N1hr"),u=n("gmtn"),c=n("maYj"),l="No one promise resolved";r({target:"Promise",stat:!0},{any:function(t){var e=this,n=i("AggregateError"),r=s.f(e),f=r.resolve,h=r.reject,d=u((function(){var r=o(e.resolve),i=[],s=0,u=1,d=!1;c(t,(function(t){var o=s++,c=!1;u++,a(r,e,t).then((function(t){c||d||(d=!0,f(t))}),(function(t){c||d||(c=!0,i[o]=t,--u||h(new n(i,l)))}))})),--u||h(new n(i,l))}));return d.error&&h(d.value),r.promise}})},ApFe:function(t,e,n){"use strict";var r=n("JRM0"),o=n("jid/");r({target:"String",proto:!0,forced:n("Uo50")("italics")},{italics:function(){return o(this,"i","","")}})},ArYU:function(t,e,n){var r=n("JRM0"),o=Math.asinh,i=Math.log,a=Math.sqrt;r({target:"Math",stat:!0,forced:!(o&&1/o(0)>0)},{asinh:function t(e){return isFinite(e=+e)&&0!=e?e<0?-t(-e):i(e+a(e*e+1)):e}})},AvGt:function(t,e,n){var r=n("nEaP"),o=n("fshm"),i=r.String;t.exports=function(t){if("Symbol"===o(t))throw TypeError("Cannot convert a Symbol value to a string");return i(t)}},AvbG:function(t,e,n){"use strict";var r=n("nEaP"),o=n("WGD3"),i=n("sK41"),a=n("fT8P"),s=n("jP2f"),u=n("i6bU"),c=n("tlZM"),l=r.Function,f=o([].concat),h=o([].join),d={},p=function(t,e,n){if(!s(d,e)){for(var r=[],o=0;o<e;o++)r[o]="a["+o+"]";d[e]=l("C,a","return new C("+h(r,",")+")")}return d[e](t,n)};t.exports=c?l.bind:function(t){var e=i(this),n=e.prototype,r=u(arguments,1),o=function(){var n=f(r,u(arguments));return this instanceof o?p(e,n.length,n):e.apply(t,n)};return a(n)&&(o.prototype=n),o}},AxL9:function(t,e,n){"use strict";var r=n("nEaP"),o=n("WGD3"),i=n("+iL7"),a=n("sK41"),s=n("iKwF"),u=n("Xiyl"),c=n("Hou8"),l=n("nrpS"),f=n("G5hJ"),h=n("EnJw"),d=r.Array,p=u.aTypedArray,v=u.exportTypedArrayMethod,g=r.Uint16Array,m=g&&o(g.prototype.sort),y=!(!m||i((function(){m(new g(2),null)}))&&i((function(){m(new g(2),{})}))),b=!!m&&!i((function(){if(f)return f<74;if(c)return c<67;if(l)return!0;if(h)return h<602;var t,e,n=new g(516),r=d(516);for(t=0;t<516;t++)e=t%4,n[t]=515-t,r[t]=t-2*e+3;for(m(n,(function(t,e){return(t/4|0)-(e/4|0)})),t=0;t<516;t++)if(n[t]!==r[t])return!0}));v("sort",(function(t){return void 0!==t&&a(t),b?m(this,t):s(p(this),function(t){return function(e,n){return void 0!==t?+t(e,n)||0:n!=n?-1:e!=e?1:0===e&&0===n?1/e>0&&1/n<0?1:-1:e>n}}(t))}),!b||y)},"B/3V":function(t,e,n){var r=n("clxC");t.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},B3nq:function(t,e,n){var r=n("lUv3"),o=n("jP2f"),i=n("wQUi"),a=n("nRc6").f;t.exports=function(t){var e=r.Symbol||(r.Symbol={});o(e,t)||a(e,t,{value:i.f(t)})}},BDyu:function(t,e,n){"use strict";var r=n("JRM0"),o=n("WGD3"),i=n("+iL7")((function(){return 120!==new Date(16e11).getYear()})),a=o(Date.prototype.getFullYear);r({target:"Date",proto:!0,forced:i},{getYear:function(){return a(this)-1900}})},BRZg:function(t){t.exports=Math.sign||function(t){return 0==(t=+t)||t!=t?t:t<0?-1:1}},BnTm:function(t,e,n){"use strict";var r=n("nEaP"),o=n("ZK/t"),i=n("AvGt"),a=n("Qean"),s=r.RangeError;t.exports=function(t){var e=i(a(this)),n="",r=o(t);if(r<0||r==1/0)throw s("Wrong number of repetitions");for(;r>0;(r>>>=1)&&(e+=e))1&r&&(n+=e);return n}},BqNe:function(t,e,n){"use strict";var r=n("Xiyl"),o=n("OzTt"),i=n("rken"),a=r.aTypedArray;(0,r.exportTypedArrayMethod)("fill",(function(t){var e=arguments.length;return o(i,a(this),t,e>1?arguments[1]:void 0,e>2?arguments[2]:void 0)}))},BqYr:function(t,e,n){var r=n("+iL7"),o=n("nEaP").RegExp,i=r((function(){var t=o("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),a=i||r((function(){return!o("a","y").sticky})),s=i||r((function(){var t=o("^r","gy");return t.lastIndex=2,null!=t.exec("str")}));t.exports={BROKEN_CARET:s,MISSED_STICKY:a,UNSUPPORTED_Y:i}},C4nn:function(t,e,n){var r=n("JRM0"),o=n("rken"),i=n("d5e9");r({target:"Array",proto:!0},{fill:o}),i("fill")},CLff:function(t,e,n){var r=n("+iL7"),o=n("fT8P"),i=n("fSIz"),a=n("eCSz"),s=Object.isExtensible,u=r((function(){s(1)}));t.exports=u||a?function(t){return!!o(t)&&((!a||"ArrayBuffer"!=i(t))&&(!s||s(t)))}:s},CVD7:function(t,e,n){var r=n("nEaP"),o=n("OzTt"),i=n("PGFG"),a=n("fT8P"),s=r.TypeError;t.exports=function(t,e){var n,r;if("string"===e&&i(n=t.toString)&&!a(r=o(n,t)))return r;if(i(n=t.valueOf)&&!a(r=o(n,t)))return r;if("string"!==e&&i(n=t.toString)&&!a(r=o(n,t)))return r;throw s("Can't convert object to primitive value")}},CfbV:function(t,e,n){var r=n("Hvpk"),o=n("nEaP"),i=n("WGD3"),a=n("9nX2"),s=n("5CFb"),u=n("nHIk"),c=n("nRc6").f,l=n("OVha").f,f=n("+n59"),h=n("GrtF"),d=n("AvGt"),p=n("O2Ja"),v=n("BqYr"),g=n("0K2p"),m=n("+iL7"),y=n("jP2f"),b=n("SkE4").enforce,x=n("V2sW"),w=n("GHf2"),_=n("dOmT"),E=n("YURd"),R=w("match"),C=o.RegExp,S=C.prototype,O=o.SyntaxError,A=i(p),I=i(S.exec),k=i("".charAt),T=i("".replace),M=i("".indexOf),D=i("".slice),P=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,N=/a/g,F=/a/g,L=new C(N)!==N,j=v.MISSED_STICKY,B=v.UNSUPPORTED_Y,W=r&&(!L||j||_||E||m((function(){return F[R]=!1,C(N)!=N||C(F)==F||"/a/i"!=C(N,"i")})));if(a("RegExp",W)){for(var U=function(t,e){var n,r,o,i,a,c,l=f(S,this),p=h(t),v=void 0===e,g=[],m=t;if(!l&&p&&v&&t.constructor===U)return t;if((p||f(S,t))&&(t=t.source,v&&(e="flags"in m?m.flags:A(m))),t=void 0===t?"":d(t),e=void 0===e?"":d(e),m=t,_&&"dotAll"in N&&(r=!!e&&M(e,"s")>-1)&&(e=T(e,/s/g,"")),n=e,j&&"sticky"in N&&(o=!!e&&M(e,"y")>-1)&&B&&(e=T(e,/y/g,"")),E&&(i=function(t){for(var e,n=t.length,r=0,o="",i=[],a={},s=!1,u=!1,c=0,l="";r<=n;r++){if("\\"===(e=k(t,r)))e+=k(t,++r);else if("]"===e)s=!1;else if(!s)switch(!0){case"["===e:s=!0;break;case"("===e:I(P,D(t,r+1))&&(r+=2,u=!0),o+=e,c++;continue;case">"===e&&u:if(""===l||y(a,l))throw new O("Invalid capture group name");a[l]=!0,i[i.length]=[l,c],u=!1,l="";continue}u?l+=e:o+=e}return[o,i]}(t),t=i[0],g=i[1]),a=s(C(t,e),l?this:S,U),(r||o||g.length)&&(c=b(a),r&&(c.dotAll=!0,c.raw=U(function(t){for(var e,n=t.length,r=0,o="",i=!1;r<=n;r++)"\\"!==(e=k(t,r))?i||"."!==e?("["===e?i=!0:"]"===e&&(i=!1),o+=e):o+="[\\s\\S]":o+=e+k(t,++r);return o}(t),n)),o&&(c.sticky=!0),g.length&&(c.groups=g)),t!==m)try{u(a,"source",""===m?"(?:)":m)}catch(t){}return a},G=function(t){t in U||c(U,t,{configurable:!0,get:function(){return C[t]},set:function(e){C[t]=e}})},z=l(C),V=0;z.length>V;)G(z[V++]);S.constructor=U,U.prototype=S,g(o,"RegExp",U)}x("RegExp")},CwSR:function(t,e,n){var r=n("JRM0"),o=n("WGD3"),i=n("s3NK"),a=n("fT8P"),s=n("jP2f"),u=n("nRc6").f,c=n("OVha"),l=n("KQNm"),f=n("CLff"),h=n("nrda"),d=n("b82F"),p=!1,v=h("meta"),g=0,m=function(t){u(t,v,{value:{objectID:"O"+g++,weakData:{}}})},y=t.exports={enable:function(){y.enable=function(){},p=!0;var t=c.f,e=o([].splice),n={};n[v]=1,t(n).length&&(c.f=function(n){for(var r=t(n),o=0,i=r.length;o<i;o++)if(r[o]===v){e(r,o,1);break}return r},r({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:l.f}))},fastKey:function(t,e){if(!a(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!s(t,v)){if(!f(t))return"F";if(!e)return"E";m(t)}return t[v].objectID},getWeakData:function(t,e){if(!s(t,v)){if(!f(t))return!0;if(!e)return!1;m(t)}return t[v].weakData},onFreeze:function(t){return d&&p&&f(t)&&!s(t,v)&&m(t),t}};i[v]=!0},"D/wG":function(t,e,n){var r=n("Hvpk"),o=n("wLFK").EXISTS,i=n("WGD3"),a=n("nRc6").f,s=Function.prototype,u=i(s.toString),c=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,l=i(c.exec);r&&!o&&a(s,"name",{configurable:!0,get:function(){try{return l(c,u(this))[1]}catch(t){return""}}})},D0Fs:function(t,e,n){n("j8ZG")("Float32",(function(t){return function(e,n,r){return t(this,e,n,r)}}))},D4BR:function(t,e,n){"use strict";function r(t,e){function n(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function o(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))}function i(t,e){function n(n){return function(a){return function(n){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(i=2&n[0]?o.return:n[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,n[1])).done)return i;switch(o=0,i&&(n=[2&n[0],i.value]),n[0]){case 0:case 1:i=n;break;case 4:return s.label++,{value:n[1],done:!1};case 5:s.label++,o=n[1],n=[0];continue;case 7:n=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==n[0]&&2!==n[0])){s=0;continue}if(3===n[0]&&(!i||n[1]>i[0]&&n[1]<i[3])){s.label=n[1];break}if(6===n[0]&&s.label<i[1]){s.label=i[1],i=n;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(n);break}i[2]&&s.ops.pop(),s.trys.pop();continue}n=e.call(t,s)}catch(t){n=[6,t],o=0}finally{r=i=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,a])}}var r,o,i,a,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a}function a(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r}n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return u})),n.d(e,"b",(function(){return o})),n.d(e,"d",(function(){return i})),n.d(e,"e",(function(){return a}));var s=function(t,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},s(t,e)},u=function(){return u=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},u.apply(this,arguments)}},D4qn:function(t,e,n){"use strict";function r(t){var e="";if(!t)try{t=n("lVFF")}catch(t){e=t.toString()}return{readFile:t?function(e){return new Promise((function(n,r){t.readFile(e,(function(t,e){return t?r(t):n(e)}))}))}:function(){throw new Error("readFile - failed to require fs in nodejs environment with error: "+e)}}}n.d(e,"a",(function(){return r}))},D5rU:function(t,e,n){"use strict";var r=n("JRM0"),o=n("jid/");r({target:"String",proto:!0,forced:n("Uo50")("bold")},{bold:function(){return o(this,"b","","")}})},DJGK:function(t,e,n){var r=n("nEaP"),o=n("WGD3"),i=n("+iL7"),a=n("fSIz"),s=r.Object,u=o("".split);t.exports=i((function(){return!s("z").propertyIsEnumerable(0)}))?function(t){return"String"==a(t)?u(t,""):s(t)}:s},DnCL:function(t,e,n){"use strict";var r=n("JRM0"),o=n("jid/");r({target:"String",proto:!0,forced:n("Uo50")("sub")},{sub:function(){return o(this,"sub","","")}})},"E/vp":function(t,e,n){"use strict";var r=n("JRM0"),o=n("Hvpk"),i=n("mMsL"),a=n("9pAD"),s=n("b3pM"),u=n("XOJ6"),c=n("Fup7").f;o&&r({target:"Object",proto:!0,forced:i},{__lookupGetter__:function(t){var e,n=a(this),r=s(t);do{if(e=c(n,r))return e.get}while(n=u(n))}})},E02R:function(t){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},EApN:function(t,e,n){"use strict";var r=n("Xiyl"),o=n("5q7I").forEach,i=r.aTypedArray;(0,r.exportTypedArrayMethod)("forEach",(function(t){o(i(this),t,arguments.length>1?arguments[1]:void 0)}))},EQuw:function(t,e,n){var r=n("JRM0"),o=n("Hvpk"),i=n("nRc6").f;r({target:"Object",stat:!0,forced:Object.defineProperty!==i,sham:!o},{defineProperty:i})},EjQN:function(t,e,n){"use strict";var r=n("Xiyl"),o=r.aTypedArray,i=Math.floor;(0,r.exportTypedArrayMethod)("reverse",(function(){for(var t,e=this,n=o(e).length,r=i(n/2),a=0;a<r;)t=e[a],e[a++]=e[--n],e[n]=t;return e}))},EnJw:function(t,e,n){var r=n("rxbk").match(/AppleWebKit\/(\d+)\./);t.exports=!!r&&+r[1]},F28z:function(t,e,n){"use strict";var r=n("JRM0"),o=n("H0Ge").end,i=n("UkaN")("trimEnd"),a=i?function(){return o(this)}:"".trimEnd;r({target:"String",proto:!0,name:"trimEnd",forced:i},{trimEnd:a,trimRight:a})},F4s9:function(t,e,n){"use strict";var r=n("JRM0"),o=n("nEaP"),i=n("GdAE"),a=n("V2sW"),s="ArrayBuffer",u=i.ArrayBuffer;r({global:!0,forced:o.ArrayBuffer!==u},{ArrayBuffer:u}),a(s)},F9vW:function(t,e,n){var r=n("JRM0"),o=n("nEaP"),i=n("4ssk");r({global:!0,bind:!0,enumerable:!0,forced:!o.setImmediate||!o.clearImmediate},{setImmediate:i.set,clearImmediate:i.clear})},FOvO:function(t,e,n){var r=n("JRM0"),o=n("+iL7"),i=n("fT8P"),a=n("fSIz"),s=n("eCSz"),u=Object.isSealed;r({target:"Object",stat:!0,forced:o((function(){u(1)}))||s},{isSealed:function(t){return!i(t)||(!(!s||"ArrayBuffer"!=a(t))||!!u&&u(t))}})},FWxf:function(t,e,n){"use strict";var r=n("JRM0"),o=n("5q7I").findIndex,i=n("d5e9"),a="findIndex",s=!0;a in[]&&Array(1).findIndex((function(){s=!1})),r({target:"Array",proto:!0,forced:s},{findIndex:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),i(a)},"FbR/":function(t,e,n){var r=n("JRM0"),o=n("nEaP"),i=n("1tiZ");r({global:!0},{Reflect:{}}),i(o.Reflect,"Reflect",!0)},FdtR:function(t,e,n){"use strict";var r,o,i,a,s=n("JRM0"),u=n("PCqT"),c=n("nEaP"),l=n("UVdV"),f=n("OzTt"),h=n("hXTI"),d=n("0K2p"),p=n("xxLW"),v=n("hQLn"),g=n("1tiZ"),m=n("V2sW"),y=n("sK41"),b=n("PGFG"),x=n("fT8P"),w=n("iBt0"),_=n("/dUa"),E=n("maYj"),R=n("Ncbx"),C=n("6ka5"),S=n("4ssk").set,O=n("m1e9"),A=n("W2UA"),I=n("OTtX"),k=n("N1hr"),T=n("gmtn"),M=n("jKt2"),D=n("SkE4"),P=n("9nX2"),N=n("GHf2"),F=n("VuJW"),L=n("YxGO"),j=n("G5hJ"),B=N("species"),W="Promise",U=D.getterFor(W),G=D.set,z=D.getterFor(W),V=h&&h.prototype,H=h,q=V,K=c.TypeError,X=c.document,J=c.process,Y=k.f,Q=Y,$=!!(X&&X.createEvent&&c.dispatchEvent),Z=b(c.PromiseRejectionEvent),tt="unhandledrejection",et=!1,nt=P(W,(function(){var t=_(H),e=t!==String(H);if(!e&&66===j)return!0;if(u&&!q.finally)return!0;if(j>=51&&/native code/.test(t))return!1;var n=new H((function(t){t(1)})),r=function(t){t((function(){}),(function(){}))};return(n.constructor={})[B]=r,!(et=n.then((function(){}))instanceof r)||!e&&F&&!Z})),rt=nt||!R((function(t){H.all(t).catch((function(){}))})),ot=function(t){var e;return!(!x(t)||!b(e=t.then))&&e},it=function(t,e){var n,r,o,i=e.value,a=1==e.state,s=a?t.ok:t.fail,u=t.resolve,c=t.reject,l=t.domain;try{s?(a||(2===e.rejection&&lt(e),e.rejection=1),!0===s?n=i:(l&&l.enter(),n=s(i),l&&(l.exit(),o=!0)),n===t.promise?c(K("Promise-chain cycle")):(r=ot(n))?f(r,n,u,c):u(n)):c(i)}catch(t){l&&!o&&l.exit(),c(t)}},at=function(t,e){t.notified||(t.notified=!0,O((function(){for(var n,r=t.reactions;n=r.get();)it(n,t);t.notified=!1,e&&!t.rejection&&ut(t)})))},st=function(t,e,n){var r,o;$?((r=X.createEvent("Event")).promise=e,r.reason=n,r.initEvent(t,!1,!0),c.dispatchEvent(r)):r={promise:e,reason:n},!Z&&(o=c["on"+t])?o(r):t===tt&&I("Unhandled promise rejection",n)},ut=function(t){f(S,c,(function(){var e,n=t.facade,r=t.value;if(ct(t)&&(e=T((function(){L?J.emit("unhandledRejection",r,n):st(tt,n,r)})),t.rejection=L||ct(t)?2:1,e.error))throw e.value}))},ct=function(t){return 1!==t.rejection&&!t.parent},lt=function(t){f(S,c,(function(){var e=t.facade;L?J.emit("rejectionHandled",e):st("rejectionhandled",e,t.value)}))},ft=function(t,e,n){return function(r){t(e,r,n)}},ht=function(t,e,n){t.done||(t.done=!0,n&&(t=n),t.value=e,t.state=2,at(t,!0))},dt=function t(e,n,r){if(!e.done){e.done=!0,r&&(e=r);try{if(e.facade===n)throw K("Promise can't be resolved itself");var o=ot(n);o?O((function(){var r={done:!1};try{f(o,n,ft(t,r,e),ft(ht,r,e))}catch(t){ht(r,t,e)}})):(e.value=n,e.state=1,at(e,!1))}catch(t){ht({done:!1},t,e)}}};if(nt&&(H=function(t){w(this,q),y(t),f(r,this);var e=U(this);try{t(ft(dt,e),ft(ht,e))}catch(t){ht(e,t)}},(r=function(){G(this,{type:W,done:!1,notified:!1,parent:!1,reactions:new M,rejection:!1,state:0,value:void 0})}).prototype=p(q=H.prototype,{then:function(t,e){var n=z(this),r=Y(C(this,H));return n.parent=!0,r.ok=!b(t)||t,r.fail=b(e)&&e,r.domain=L?J.domain:void 0,0==n.state?n.reactions.add(r):O((function(){it(r,n)})),r.promise},catch:function(t){return this.then(void 0,t)}}),o=function(){var t=new r,e=U(t);this.promise=t,this.resolve=ft(dt,e),this.reject=ft(ht,e)},k.f=Y=function(t){return t===H||t===i?new o(t):Q(t)},!u&&b(h)&&V!==Object.prototype)){a=V.then,et||(d(V,"then",(function(t,e){var n=this;return new H((function(t,e){f(a,n,t,e)})).then(t,e)}),{unsafe:!0}),d(V,"catch",q.catch,{unsafe:!0}));try{delete V.constructor}catch(t){}v&&v(V,q)}s({global:!0,wrap:!0,forced:nt},{Promise:H}),g(H,W,!1,!0),m(W),i=l(W),s({target:W,stat:!0,forced:nt},{reject:function(t){var e=Y(this);return f(e.reject,void 0,t),e.promise}}),s({target:W,stat:!0,forced:u||nt},{resolve:function(t){return A(u&&this===i?H:this,t)}}),s({target:W,stat:!0,forced:rt},{all:function(t){var e=this,n=Y(e),r=n.resolve,o=n.reject,i=T((function(){var n=y(e.resolve),i=[],a=0,s=1;E(t,(function(t){var u=a++,c=!1;s++,f(n,e,t).then((function(t){c||(c=!0,i[u]=t,--s||r(i))}),o)})),--s||r(i)}));return i.error&&o(i.value),n.promise},race:function(t){var e=this,n=Y(e),r=n.reject,o=T((function(){var o=y(e.resolve);E(t,(function(t){f(o,e,t).then(n.resolve,r)}))}));return o.error&&r(o.value),n.promise}})},Ffmu:function(t,e,n){"use strict";var r=n("JRM0"),o=n("OzTt"),i=n("sK41"),a=n("N1hr"),s=n("gmtn"),u=n("maYj");r({target:"Promise",stat:!0},{allSettled:function(t){var e=this,n=a.f(e),r=n.resolve,c=n.reject,l=s((function(){var n=i(e.resolve),a=[],s=0,c=1;u(t,(function(t){var i=s++,u=!1;c++,o(n,e,t).then((function(t){u||(u=!0,a[i]={status:"fulfilled",value:t},--c||r(a))}),(function(t){u||(u=!0,a[i]={status:"rejected",reason:t},--c||r(a))}))})),--c||r(a)}));return l.error&&c(l.value),n.promise}})},Fup7:function(t,e,n){var r=n("Hvpk"),o=n("OzTt"),i=n("41Zj"),a=n("VSW8"),s=n("M/tt"),u=n("b3pM"),c=n("jP2f"),l=n("xwiM"),f=Object.getOwnPropertyDescriptor;e.f=r?f:function(t,e){if(t=s(t),e=u(e),l)try{return f(t,e)}catch(t){}if(c(t,e))return a(!o(i.f,t,e),t[e])}},G5hJ:function(t,e,n){var r,o,i=n("nEaP"),a=n("rxbk"),s=i.process,u=i.Deno,c=s&&s.versions||u&&u.version,l=c&&c.v8;l&&(o=(r=l.split("."))[0]>0&&r[0]<4?1:+(r[0]+r[1])),!o&&a&&(!(r=a.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=a.match(/Chrome\/(\d+)/))&&(o=+r[1]),t.exports=o},G9Va:function(t,e,n){var r=n("Hvpk"),o=n("+iL7");t.exports=r&&o((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},GCui:function(t,e,n){var r=n("JRM0"),o=n("AvbG");r({target:"Function",proto:!0,forced:Function.bind!==o},{bind:o})},GHf2:function(t,e,n){var r=n("nEaP"),o=n("gIo2"),i=n("jP2f"),a=n("nrda"),s=n("clxC"),u=n("B/3V"),c=o("wks"),l=r.Symbol,f=l&&l.for,h=u?l:l&&l.withoutSetter||a;t.exports=function(t){if(!i(c,t)||!s&&"string"!=typeof c[t]){var e="Symbol."+t;c[t]=s&&i(l,t)?l[t]:u&&f?f(e):h(e)}return c[t]}},GdAE:function(t,e,n){"use strict";var r=n("nEaP"),o=n("WGD3"),i=n("Hvpk"),a=n("JBUR"),s=n("wLFK"),u=n("nHIk"),c=n("xxLW"),l=n("+iL7"),f=n("iBt0"),h=n("ZK/t"),d=n("zrDt"),p=n("YRMr"),v=n("XC5q"),g=n("XOJ6"),m=n("hQLn"),y=n("OVha").f,b=n("nRc6").f,x=n("rken"),w=n("bSfA"),_=n("1tiZ"),E=n("SkE4"),R=s.PROPER,C=s.CONFIGURABLE,S=E.get,O=E.set,A="ArrayBuffer",I="DataView",k="Wrong index",T=r.ArrayBuffer,M=T,D=M&&M.prototype,P=r.DataView,N=P&&P.prototype,F=Object.prototype,L=r.Array,j=r.RangeError,B=o(x),W=o([].reverse),U=v.pack,G=v.unpack,z=function(t){return[255&t]},V=function(t){return[255&t,t>>8&255]},H=function(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]},q=function(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]},K=function(t){return U(t,23,4)},X=function(t){return U(t,52,8)},J=function(t,e){b(t.prototype,e,{get:function(){return S(this)[e]}})},Y=function(t,e,n,r){var o=p(n),i=S(t);if(o+e>i.byteLength)throw j(k);var a=S(i.buffer).bytes,s=o+i.byteOffset,u=w(a,s,s+e);return r?u:W(u)},Q=function(t,e,n,r,o,i){var a=p(n),s=S(t);if(a+e>s.byteLength)throw j(k);for(var u=S(s.buffer).bytes,c=a+s.byteOffset,l=r(+o),f=0;f<e;f++)u[c+f]=l[i?f:e-f-1]};if(a){var $=R&&T.name!==A;if(l((function(){T(1)}))&&l((function(){new T(-1)}))&&!l((function(){return new T,new T(1.5),new T(NaN),$&&!C})))$&&C&&u(T,"name",A);else{(M=function(t){return f(this,D),new T(p(t))}).prototype=D;for(var Z,tt=y(T),et=0;tt.length>et;)(Z=tt[et++])in M||u(M,Z,T[Z]);D.constructor=M}m&&g(N)!==F&&m(N,F);var nt=new P(new M(2)),rt=o(N.setInt8);nt.setInt8(0,2147483648),nt.setInt8(1,2147483649),!nt.getInt8(0)&&nt.getInt8(1)||c(N,{setInt8:function(t,e){rt(this,t,e<<24>>24)},setUint8:function(t,e){rt(this,t,e<<24>>24)}},{unsafe:!0})}else D=(M=function(t){f(this,D);var e=p(t);O(this,{bytes:B(L(e),0),byteLength:e}),i||(this.byteLength=e)}).prototype,N=(P=function(t,e,n){f(this,N),f(t,D);var r=S(t).byteLength,o=h(e);if(o<0||o>r)throw j("Wrong offset");if(o+(n=void 0===n?r-o:d(n))>r)throw j("Wrong length");O(this,{buffer:t,byteLength:n,byteOffset:o}),i||(this.buffer=t,this.byteLength=n,this.byteOffset=o)}).prototype,i&&(J(M,"byteLength"),J(P,"buffer"),J(P,"byteLength"),J(P,"byteOffset")),c(N,{getInt8:function(t){return Y(this,1,t)[0]<<24>>24},getUint8:function(t){return Y(this,1,t)[0]},getInt16:function(t){var e=Y(this,2,t,arguments.length>1?arguments[1]:void 0);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=Y(this,2,t,arguments.length>1?arguments[1]:void 0);return e[1]<<8|e[0]},getInt32:function(t){return q(Y(this,4,t,arguments.length>1?arguments[1]:void 0))},getUint32:function(t){return q(Y(this,4,t,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(t){return G(Y(this,4,t,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(t){return G(Y(this,8,t,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(t,e){Q(this,1,t,z,e)},setUint8:function(t,e){Q(this,1,t,z,e)},setInt16:function(t,e){Q(this,2,t,V,e,arguments.length>2?arguments[2]:void 0)},setUint16:function(t,e){Q(this,2,t,V,e,arguments.length>2?arguments[2]:void 0)},setInt32:function(t,e){Q(this,4,t,H,e,arguments.length>2?arguments[2]:void 0)},setUint32:function(t,e){Q(this,4,t,H,e,arguments.length>2?arguments[2]:void 0)},setFloat32:function(t,e){Q(this,4,t,K,e,arguments.length>2?arguments[2]:void 0)},setFloat64:function(t,e){Q(this,8,t,X,e,arguments.length>2?arguments[2]:void 0)}});_(M,A),_(P,I),t.exports={ArrayBuffer:M,DataView:P}},GrtF:function(t,e,n){var r=n("fT8P"),o=n("fSIz"),i=n("GHf2")("match");t.exports=function(t){var e;return r(t)&&(void 0!==(e=t[i])?!!e:"RegExp"==o(t))}},H0Ge:function(t,e,n){var r=n("WGD3"),o=n("Qean"),i=n("AvGt"),a=n("VcRG"),s=r("".replace),u="["+a+"]",c=RegExp("^"+u+u+"*"),l=RegExp(u+u+"*$"),f=function(t){return function(e){var n=i(o(e));return 1&t&&(n=s(n,c,"")),2&t&&(n=s(n,l,"")),n}};t.exports={start:f(1),end:f(2),trim:f(3)}},HAuY:function(t,e,n){"use strict";var r=n("JRM0"),o=n("jid/");r({target:"String",proto:!0,forced:n("Uo50")("blink")},{blink:function(){return o(this,"blink","","")}})},HJh7:function(t,e,n){"use strict";var r=n("Xiyl"),o=n("5q7I").every,i=r.aTypedArray;(0,r.exportTypedArrayMethod)("every",(function(t){return o(i(this),t,arguments.length>1?arguments[1]:void 0)}))},HKDy:function(t,e,n){"use strict";var r=n("Xiyl"),o=n("5q7I").filter,i=n("lnxm"),a=r.aTypedArray;(0,r.exportTypedArrayMethod)("filter",(function(t){var e=o(a(this),t,arguments.length>1?arguments[1]:void 0);return i(this,e)}))},HRgQ:function(t,e,n){var r=n("nEaP"),o=n("fT8P"),i=r.document,a=o(i)&&o(i.createElement);t.exports=function(t){return a?i.createElement(t):{}}},HZkJ:function(t,e,n){"use strict";var r=n("JRM0"),o=n("nEaP"),i=n("WGD3"),a=n("9nX2"),s=n("0K2p"),u=n("CwSR"),c=n("maYj"),l=n("iBt0"),f=n("PGFG"),h=n("fT8P"),d=n("+iL7"),p=n("Ncbx"),v=n("1tiZ"),g=n("5CFb");t.exports=function(t,e,n){var m=-1!==t.indexOf("Map"),y=-1!==t.indexOf("Weak"),b=m?"set":"add",x=o[t],w=x&&x.prototype,_=x,E={},R=function(t){var e=i(w[t]);s(w,t,"add"==t?function(t){return e(this,0===t?0:t),this}:"delete"==t?function(t){return!(y&&!h(t))&&e(this,0===t?0:t)}:"get"==t?function(t){return y&&!h(t)?void 0:e(this,0===t?0:t)}:"has"==t?function(t){return!(y&&!h(t))&&e(this,0===t?0:t)}:function(t,n){return e(this,0===t?0:t,n),this})};if(a(t,!f(x)||!(y||w.forEach&&!d((function(){(new x).entries().next()})))))_=n.getConstructor(e,t,m,b),u.enable();else if(a(t,!0)){var C=new _,S=C[b](y?{}:-0,1)!=C,O=d((function(){C.has(1)})),A=p((function(t){new x(t)})),I=!y&&d((function(){for(var t=new x,e=5;e--;)t[b](e,e);return!t.has(-0)}));A||((_=e((function(t,e){l(t,w);var n=g(new x,t,_);return null!=e&&c(e,n[b],{that:n,AS_ENTRIES:m}),n}))).prototype=w,w.constructor=_),(O||I)&&(R("delete"),R("has"),m&&R("get")),(I||S)&&R(b),y&&w.clear&&delete w.clear}return E[t]=_,r({global:!0,forced:_!=x},E),v(_,t),y||n.setStrong(_,t,m),_}},Hou8:function(t,e,n){var r=n("rxbk").match(/firefox\/(\d+)/i);t.exports=!!r&&+r[1]},Hrl7:function(t,e,n){"use strict";(function(t){var r,o,i,a,s=n("W0B4"),u=n.n(s),c=n("WiT8"),l=n.n(c),f=n("2Hgx"),h=n.n(f),d=n("l8WD"),p=n("IL7q"),v=n.n(p),g="bodyAttributes",m="htmlAttributes",y="titleAttributes",b={BASE:"base",BODY:"body",HEAD:"head",HTML:"html",LINK:"link",META:"meta",NOSCRIPT:"noscript",SCRIPT:"script",STYLE:"style",TITLE:"title"},x=(Object.keys(b).map((function(t){return b[t]})),"charset"),w="cssText",_="href",E="http-equiv",R="innerHTML",C="itemprop",S="name",O="property",A="rel",I="src",k="target",T={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},M="defaultTitle",D="defer",P="encodeSpecialCharacters",N="onChangeClientState",F="titleTemplate",L=Object.keys(T).reduce((function(t,e){return t[T[e]]=e,t}),{}),j=[b.NOSCRIPT,b.SCRIPT,b.STYLE],B="data-react-helmet",W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},U=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),G=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},z=function(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n},V=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},H=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return!1===e?String(t):String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")},q=function(t){var e=Q(t,b.TITLE),n=Q(t,F);if(n&&e)return n.replace(/%s/g,(function(){return Array.isArray(e)?e.join(""):e}));var r=Q(t,M);return e||r||void 0},K=function(t){return Q(t,N)||function(){}},X=function(t,e){return e.filter((function(e){return void 0!==e[t]})).map((function(e){return e[t]})).reduce((function(t,e){return G({},t,e)}),{})},J=function(t,e){return e.filter((function(t){return void 0!==t[b.BASE]})).map((function(t){return t[b.BASE]})).reverse().reduce((function(e,n){if(!e.length)for(var r=Object.keys(n),o=0;o<r.length;o++){var i=r[o].toLowerCase();if(-1!==t.indexOf(i)&&n[i])return e.concat(n)}return e}),[])},Y=function(t,e,n){var r={};return n.filter((function(e){return!!Array.isArray(e[t])||(void 0!==e[t]&&nt("Helmet: "+t+' should be of type "Array". Instead found type "'+W(e[t])+'"'),!1)})).map((function(e){return e[t]})).reverse().reduce((function(t,n){var o={};n.filter((function(t){for(var n=void 0,i=Object.keys(t),a=0;a<i.length;a++){var s=i[a],u=s.toLowerCase();-1===e.indexOf(u)||n===A&&"canonical"===t[n].toLowerCase()||u===A&&"stylesheet"===t[u].toLowerCase()||(n=u),-1===e.indexOf(s)||s!==R&&s!==w&&s!==C||(n=s)}if(!n||!t[n])return!1;var c=t[n].toLowerCase();return r[n]||(r[n]={}),o[n]||(o[n]={}),!r[n][c]&&(o[n][c]=!0,!0)})).reverse().forEach((function(e){return t.push(e)}));for(var i=Object.keys(o),a=0;a<i.length;a++){var s=i[a],u=v()({},r[s],o[s]);r[s]=u}return t}),[]).reverse()},Q=function(t,e){for(var n=t.length-1;n>=0;n--){var r=t[n];if(r.hasOwnProperty(e))return r[e]}return null},$=(r=Date.now(),function(t){var e=Date.now();e-r>16?(r=e,t(e)):setTimeout((function(){$(t)}),0)}),Z=function(t){return clearTimeout(t)},tt="undefined"!=typeof window?window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||$:t.requestAnimationFrame||$,et="undefined"!=typeof window?window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||Z:t.cancelAnimationFrame||Z,nt=function(t){return console&&"function"==typeof console.warn&&console.warn(t)},rt=null,ot=function(t,e){var n=t.baseTag,r=t.htmlAttributes,o=t.linkTags,i=t.metaTags,a=t.noscriptTags,s=t.onChangeClientState,u=t.scriptTags,c=t.styleTags,l=t.title,f=t.titleAttributes;st(b.BODY,t.bodyAttributes),st(b.HTML,r),at(l,f);var h={baseTag:ut(b.BASE,n),linkTags:ut(b.LINK,o),metaTags:ut(b.META,i),noscriptTags:ut(b.NOSCRIPT,a),scriptTags:ut(b.SCRIPT,u),styleTags:ut(b.STYLE,c)},d={},p={};Object.keys(h).forEach((function(t){var e=h[t],n=e.newTags,r=e.oldTags;n.length&&(d[t]=n),r.length&&(p[t]=h[t].oldTags)})),e&&e(),s(t,d,p)},it=function(t){return Array.isArray(t)?t.join(""):t},at=function(t,e){void 0!==t&&document.title!==t&&(document.title=it(t)),st(b.TITLE,e)},st=function(t,e){var n=document.getElementsByTagName(t)[0];if(n){for(var r=n.getAttribute(B),o=r?r.split(","):[],i=[].concat(o),a=Object.keys(e),s=0;s<a.length;s++){var u=a[s],c=e[u]||"";n.getAttribute(u)!==c&&n.setAttribute(u,c),-1===o.indexOf(u)&&o.push(u);var l=i.indexOf(u);-1!==l&&i.splice(l,1)}for(var f=i.length-1;f>=0;f--)n.removeAttribute(i[f]);o.length===i.length?n.removeAttribute(B):n.getAttribute(B)!==a.join(",")&&n.setAttribute(B,a.join(","))}},ut=function(t,e){var n=document.head||document.querySelector(b.HEAD),r=n.querySelectorAll(t+"["+"data-react-helmet]"),o=Array.prototype.slice.call(r),i=[],a=void 0;return e&&e.length&&e.forEach((function(e){var n=document.createElement(t);for(var r in e)if(e.hasOwnProperty(r))if(r===R)n.innerHTML=e.innerHTML;else if(r===w)n.styleSheet?n.styleSheet.cssText=e.cssText:n.appendChild(document.createTextNode(e.cssText));else{n.setAttribute(r,void 0===e[r]?"":e[r])}n.setAttribute(B,"true"),o.some((function(t,e){return a=e,n.isEqualNode(t)}))?o.splice(a,1):i.push(n)})),o.forEach((function(t){return t.parentNode.removeChild(t)})),i.forEach((function(t){return n.appendChild(t)})),{oldTags:o,newTags:i}},ct=function(t){return Object.keys(t).reduce((function(e,n){var r=void 0!==t[n]?n+'="'+t[n]+'"':""+n;return e?e+" "+r:r}),"")},lt=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(t).reduce((function(e,n){return e[T[n]||n]=t[n],e}),e)},ft=function(t,e,n){switch(t){case b.TITLE:return{toComponent:function(){return n=e.titleAttributes,(r={key:t=e.title})[B]=!0,o=lt(n,r),[d.default.createElement(b.TITLE,o,t)];var t,n,r,o},toString:function(){return function(t,e,n,r){var o=ct(n),i=it(e);return o?"<"+t+' data-react-helmet="true" '+o+">"+H(i,r)+"</"+t+">":"<"+t+' data-react-helmet="true">'+H(i,r)+"</"+t+">"}(t,e.title,e.titleAttributes,n)}};case g:case m:return{toComponent:function(){return lt(e)},toString:function(){return ct(e)}};default:return{toComponent:function(){return function(t,e){return e.map((function(e,n){var r,o=((r={key:n})[B]=!0,r);return Object.keys(e).forEach((function(t){var n=T[t]||t;n===R||n===w?o.dangerouslySetInnerHTML={__html:e.innerHTML||e.cssText}:o[n]=e[t]})),d.default.createElement(t,o)}))}(t,e)},toString:function(){return function(t,e,n){return e.reduce((function(e,r){var o=Object.keys(r).filter((function(t){return!(t===R||t===w)})).reduce((function(t,e){var o=void 0===r[e]?e:e+'="'+H(r[e],n)+'"';return t?t+" "+o:o}),""),i=r.innerHTML||r.cssText||"",a=-1===j.indexOf(t);return e+"<"+t+' data-react-helmet="true" '+o+(a?"/>":">"+i+"</"+t+">")}),"")}(t,e,n)}}}},ht=function(t){var e=t.bodyAttributes,n=t.encode,r=t.htmlAttributes,o=t.linkTags,i=t.metaTags,a=t.noscriptTags,s=t.scriptTags,u=t.styleTags,c=t.title,l=void 0===c?"":c,f=t.titleAttributes;return{base:ft(b.BASE,t.baseTag,n),bodyAttributes:ft(g,e,n),htmlAttributes:ft(m,r,n),link:ft(b.LINK,o,n),meta:ft(b.META,i,n),noscript:ft(b.NOSCRIPT,a,n),script:ft(b.SCRIPT,s,n),style:ft(b.STYLE,u,n),title:ft(b.TITLE,{title:l,titleAttributes:f},n)}},dt=l()((function(t){return{baseTag:J([_,k],t),bodyAttributes:X(g,t),defer:Q(t,D),encode:Q(t,P),htmlAttributes:X(m,t),linkTags:Y(b.LINK,[A,_],t),metaTags:Y(b.META,[S,x,E,O,C],t),noscriptTags:Y(b.NOSCRIPT,[R],t),onChangeClientState:K(t),scriptTags:Y(b.SCRIPT,[I,R],t),styleTags:Y(b.STYLE,[w],t),title:q(t),titleAttributes:X(y,t)}}),(function(t){rt&&et(rt),t.defer?rt=tt((function(){ot(t,(function(){rt=null}))})):(ot(t),rt=null)}),ht)((function(){return null})),pt=(o=dt,a=i=function(t){function e(){return V(this,t.apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.shouldComponentUpdate=function(t){return!h()(this.props,t)},e.prototype.mapNestedChildrenToProps=function(t,e){if(!e)return null;switch(t.type){case b.SCRIPT:case b.NOSCRIPT:return{innerHTML:e};case b.STYLE:return{cssText:e}}throw new Error("<"+t.type+" /> elements are self-closing and can not contain children. Refer to our API for more information.")},e.prototype.flattenArrayTypeChildren=function(t){var e,n=t.child,r=t.arrayTypeChildren;return G({},r,((e={})[n.type]=[].concat(r[n.type]||[],[G({},t.newChildProps,this.mapNestedChildrenToProps(n,t.nestedChildren))]),e))},e.prototype.mapObjectTypeChildren=function(t){var e,n,r=t.child,o=t.newProps,i=t.newChildProps,a=t.nestedChildren;switch(r.type){case b.TITLE:return G({},o,((e={})[r.type]=a,e.titleAttributes=G({},i),e));case b.BODY:return G({},o,{bodyAttributes:G({},i)});case b.HTML:return G({},o,{htmlAttributes:G({},i)})}return G({},o,((n={})[r.type]=G({},i),n))},e.prototype.mapArrayTypeChildrenToProps=function(t,e){var n=G({},e);return Object.keys(t).forEach((function(e){var r;n=G({},n,((r={})[e]=t[e],r))})),n},e.prototype.warnOnInvalidChildren=function(){return!0},e.prototype.mapChildrenToProps=function(t,e){var n=this,r={};return d.default.Children.forEach(t,(function(t){if(t&&t.props){var o=t.props,i=o.children,a=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(t).reduce((function(e,n){return e[L[n]||n]=t[n],e}),e)}(z(o,["children"]));switch(n.warnOnInvalidChildren(t,i),t.type){case b.LINK:case b.META:case b.NOSCRIPT:case b.SCRIPT:case b.STYLE:r=n.flattenArrayTypeChildren({child:t,arrayTypeChildren:r,newChildProps:a,nestedChildren:i});break;default:e=n.mapObjectTypeChildren({child:t,newProps:e,newChildProps:a,nestedChildren:i})}}})),e=this.mapArrayTypeChildrenToProps(r,e)},e.prototype.render=function(){var t=this.props,e=t.children,n=z(t,["children"]),r=G({},n);return e&&(r=this.mapChildrenToProps(e,r)),d.default.createElement(o,r)},U(e,null,[{key:"canUseDOM",set:function(t){o.canUseDOM=t}}]),e}(d.default.Component),i.propTypes={base:u.a.object,bodyAttributes:u.a.object,children:u.a.oneOfType([u.a.arrayOf(u.a.node),u.a.node]),defaultTitle:u.a.string,defer:u.a.bool,encodeSpecialCharacters:u.a.bool,htmlAttributes:u.a.object,link:u.a.arrayOf(u.a.object),meta:u.a.arrayOf(u.a.object),noscript:u.a.arrayOf(u.a.object),onChangeClientState:u.a.func,script:u.a.arrayOf(u.a.object),style:u.a.arrayOf(u.a.object),title:u.a.string,titleAttributes:u.a.object,titleTemplate:u.a.string},i.defaultProps={defer:!0,encodeSpecialCharacters:!0},i.peek=o.peek,i.rewind=function(){var t=o.rewind();return t||(t=ht({baseTag:[],bodyAttributes:{},encodeSpecialCharacters:!0,htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}})),t},a);pt.renderStatic=pt.rewind,e.a=pt}).call(this,n("pCvA"))},Hvpk:function(t,e,n){var r=n("+iL7");t.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},HztR:function(t,e,n){"use strict";var r=n("Xiyl"),o=n("zrDt"),i=n("glsI"),a=n("RN4W"),s=r.aTypedArray;(0,r.exportTypedArrayMethod)("subarray",(function(t,e){var n=s(this),r=n.length,u=i(t,r);return new(a(n))(n.buffer,n.byteOffset+u*n.BYTES_PER_ELEMENT,o((void 0===e?r:i(e,r))-u))}))},I06j:function(t,e,n){"use strict";var r=n("Xiyl"),o=n("fr05"),i=n("ZK/t"),a=r.aTypedArray;(0,r.exportTypedArrayMethod)("at",(function(t){var e=a(this),n=o(e),r=i(t),s=r>=0?r:n+r;return s<0||s>=n?void 0:e[s]}))},IL7q:function(t){"use strict";function e(){return e=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},e.apply(this,arguments)}function n(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}var r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var n={},r=0;r<10;r++)n["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(n).map((function(t){return n[t]})).join(""))return!1;var o={};return"abcdefghijklmnopqrst".split("").forEach((function(t){o[t]=t})),"abcdefghijklmnopqrst"===Object.keys(e({},o)).join("")}catch(t){return!1}}()?Object.assign:function(t){for(var e,a,s=n(t),u=1;u<arguments.length;u++){for(var c in e=Object(arguments[u]))o.call(e,c)&&(s[c]=e[c]);if(r){a=r(e);for(var l=0;l<a.length;l++)i.call(e,a[l])&&(s[a[l]]=e[a[l]])}}return s}},IfeN:function(t,e,n){n("JRM0")({target:"Math",stat:!0},{fround:n("q+fk")})},IlJM:function(t,e,n){"use strict";var r=n("JRM0"),o=n("5q7I").find,i=n("d5e9"),a="find",s=!0;a in[]&&Array(1).find((function(){s=!1})),r({target:"Array",proto:!0,forced:s},{find:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),i(a)},IvQZ:function(t,e,n){"use strict";var r=n("JRM0"),o=n("kMPr").includes,i=n("d5e9");r({target:"Array",proto:!0},{includes:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),i("includes")},JBDq:function(t,e,n){"use strict";function r(t){var e=t.className,n=t.activeClass,r=t.activeClassName,s=t.path,u=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)e.indexOf(n=i[r])>=0||(o[n]=t[n]);return o}(t,a),c=Object(i.e)()[0],l=s&&c.path&&Object(i.d)(c.path,s,{})||Object(i.d)(c.url,u.href,{}),f=u.class||e||"",h=l&&(n||r)||"";return u.class=f+(f&&h&&" ")+h,Object(o.h)(i.a,u)}n.d(e,"a",(function(){return r}));var o=n("hosL"),i=n("/Mq+"),a=["className","activeClass","activeClassName","path"]},JBUR:function(t){t.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},JBxO:function(t,e,n){var r=n("k2M3"),o=n("0K2p"),i=n("UpYF");r||o(Object.prototype,"toString",i,{unsafe:!0})},JLHK:function(t,e,n){var r=n("JRM0"),o=n("Xv5+"),i=Math.cosh,a=Math.abs,s=Math.E;r({target:"Math",stat:!0,forced:!i||i(710)===1/0},{cosh:function(t){var e=o(a(t)-1)+1;return(e+1/(e*s*s))*(s/2)}})},JRM0:function(t,e,n){var r=n("nEaP"),o=n("Fup7").f,i=n("nHIk"),a=n("0K2p"),s=n("Ya6V"),u=n("v0JE"),c=n("9nX2");t.exports=function(t,e){var n,l,f,h,d,p=t.target,v=t.global,g=t.stat;if(n=v?r:g?r[p]||s(p,{}):(r[p]||{}).prototype)for(l in e){if(h=e[l],f=t.noTargetGet?(d=o(n,l))&&d.value:n[l],!c(v?l:p+(g?".":"#")+l,t.forced)&&void 0!==f){if(typeof h==typeof f)continue;u(h,f)}(t.sham||f&&f.sham)&&i(h,"sham",!0),a(n,l,h,t)}}},"JT/7":function(t,e,n){"use strict";var r=n("JRM0"),o=n("WGD3"),i=n("+iL7"),a=n("GdAE"),s=n("gDYM"),u=n("glsI"),c=n("zrDt"),l=n("6ka5"),f=a.ArrayBuffer,h=a.DataView,d=h.prototype,p=o(f.prototype.slice),v=o(d.getUint8),g=o(d.setUint8);r({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:i((function(){return!new f(2).slice(1,void 0).byteLength}))},{slice:function(t,e){if(p&&void 0===e)return p(s(this),t);for(var n=s(this).byteLength,r=u(t,n),o=u(void 0===e?n:e,n),i=new(l(this,f))(c(o-r)),a=new h(this),d=new h(i),m=0;r<o;)g(d,m++,v(a,r++));return i}})},JjHl:function(t,e,n){var r=n("JRM0"),o=n("2jZG").values;r({target:"Object",stat:!0},{values:function(t){return o(t)}})},JtDR:function(t,e,n){"use strict";var r=n("z+V7").charAt;t.exports=function(t,e,n){return e+(n?r(t,e).length:1)}},JzGb:function(t,e,n){"use strict";var r=n("nEaP"),o=n("+iL7"),i=n("WGD3"),a=n("Xiyl"),s=n("/YXa"),u=n("GHf2")("iterator"),c=r.Uint8Array,l=i(s.values),f=i(s.keys),h=i(s.entries),d=a.aTypedArray,p=a.exportTypedArrayMethod,v=c&&c.prototype,g=!o((function(){v[u].call([1])})),m=!!v&&v.values&&v[u]===v.values&&"values"===v.values.name,y=function(){return l(d(this))};p("entries",(function(){return h(d(this))}),g),p("keys",(function(){return f(d(this))}),g),p("values",y,g||!m,{name:"values"}),p(u,y,g||!m,{name:"values"})},KQNm:function(t,e,n){var r=n("fSIz"),o=n("M/tt"),i=n("OVha").f,a=n("bSfA"),s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return s&&"Window"==r(t)?function(t){try{return i(t)}catch(t){return a(s)}}(t):i(o(t))}},KcJv:function(t,e,n){n("B3nq")("asyncIterator")},Ki2h:function(t,e,n){"use strict";var r=n("JRM0"),o=n("WGD3"),i=n("AvGt"),a=o("".charAt),s=o("".charCodeAt),u=o(/./.exec),c=o(1..toString),l=o("".toUpperCase),f=/[\w*+\-./@]/,h=function(t,e){for(var n=c(t,16);n.length<e;)n="0"+n;return n};r({global:!0},{escape:function(t){for(var e,n,r=i(t),o="",c=r.length,d=0;d<c;)e=a(r,d++),u(f,e)?o+=e:o+=(n=s(e,0))<256?"%"+h(n,2):"%u"+l(h(n,4));return o}})},KnrE:function(t,e,n){var r=n("JRM0"),o=n("QFfi"),i=n("d5e9");r({target:"Array",proto:!0},{copyWithin:o}),i("copyWithin")},Krfs:function(t,e,n){var r=n("sK41");t.exports=function(t,e){var n=t[e];return null==n?void 0:r(n)}},Kxz6:function(t,e,n){"use strict";var r=n("JRM0"),o=n("jid/");r({target:"String",proto:!0,forced:n("Uo50")("strike")},{strike:function(){return o(this,"strike","","")}})},L0xw:function(t,e,n){var r=n("JRM0"),o=n("gDYM"),i=n("Fup7").f;r({target:"Reflect",stat:!0},{deleteProperty:function(t,e){var n=i(o(t),e);return!(n&&!n.configurable)&&delete t[e]}})},L91r:function(t,e,n){var r=n("HRgQ")("span").classList,o=r&&r.constructor&&r.constructor.prototype;t.exports=o===Object.prototype?void 0:o},LMdw:function(t,e,n){var r=n("UVdV"),o=n("WGD3"),i=n("OVha"),a=n("rk7W"),s=n("gDYM"),u=o([].concat);t.exports=r("Reflect","ownKeys")||function(t){var e=i.f(s(t)),n=a.f;return n?u(e,n(t)):e}},LW6M:function(t,e,n){var r=n("JRM0"),o=n("1pWv");r({target:"Number",stat:!0,forced:Number.parseFloat!=o},{parseFloat:o})},LWud:function(t,e,n){"use strict";var r=n("Xiyl"),o=n("5q7I").some,i=r.aTypedArray;(0,r.exportTypedArrayMethod)("some",(function(t){return o(i(this),t,arguments.length>1?arguments[1]:void 0)}))},"M/tt":function(t,e,n){var r=n("DJGK"),o=n("Qean");t.exports=function(t){return r(o(t))}},M9Nf:function(t,e,n){var r=n("Hvpk"),o=n("nRc6"),i=n("O2Ja"),a=n("+iL7"),s=RegExp.prototype;r&&a((function(){return"sy"!==Object.getOwnPropertyDescriptor(s,"flags").get.call({dotAll:!0,sticky:!0})}))&&o.f(s,"flags",{configurable:!0,get:i})},MF8d:function(t,e,n){"use strict";var r=n("nEaP"),o=n("WGD3"),i=2147483647,a=/[^\0-\u007E]/,s=/[.\u3002\uFF0E\uFF61]/g,u="Overflow: input needs wider integers to process",c=r.RangeError,l=o(s.exec),f=Math.floor,h=String.fromCharCode,d=o("".charCodeAt),p=o([].join),v=o([].push),g=o("".replace),m=o("".split),y=o("".toLowerCase),b=function(t){return t+22+75*(t<26)},x=function(t,e,n){var r=0;for(t=n?f(t/700):t>>1,t+=f(t/e);t>455;)t=f(t/35),r+=36;return f(r+36*t/(t+38))},w=function(t){var e=[];t=function(t){for(var e=[],n=0,r=t.length;n<r;){var o=d(t,n++);if(o>=55296&&o<=56319&&n<r){var i=d(t,n++);56320==(64512&i)?v(e,((1023&o)<<10)+(1023&i)+65536):(v(e,o),n--)}else v(e,o)}return e}(t);var n,r,o=t.length,a=128,s=0,l=72;for(n=0;n<t.length;n++)(r=t[n])<128&&v(e,h(r));var g=e.length,m=g;for(g&&v(e,"-");m<o;){var y=i;for(n=0;n<t.length;n++)(r=t[n])>=a&&r<y&&(y=r);var w=m+1;if(y-a>f((i-s)/w))throw c(u);for(s+=(y-a)*w,a=y,n=0;n<t.length;n++){if((r=t[n])<a&&++s>i)throw c(u);if(r==a){for(var _=s,E=36;;){var R=E<=l?1:E>=l+26?26:E-l;if(_<R)break;var C=_-R,S=36-R;v(e,h(b(R+C%S))),_=f(C/S),E+=36}v(e,h(b(_))),l=x(s,w,m==g),s=0,m++}}s++,a++}return p(e,"")};t.exports=function(t){var e,n,r=[],o=m(g(y(t),s,"."),".");for(e=0;e<o.length;e++)v(r,l(a,n=o[e])?"xn--"+w(n):n);return p(r,".")}},MFGm:function(t,e,n){"use strict";var r=n("Xiyl"),o=n("kMPr").includes,i=r.aTypedArray;(0,r.exportTypedArrayMethod)("includes",(function(t){return o(i(this),t,arguments.length>1?arguments[1]:void 0)}))},MTDe:function(t,e,n){"use strict";var r,o=n("JRM0"),i=n("WGD3"),a=n("Fup7").f,s=n("zrDt"),u=n("AvGt"),c=n("9dC0"),l=n("Qean"),f=n("O5TI"),h=n("PCqT"),d=i("".startsWith),p=i("".slice),v=Math.min,g=f("startsWith");o({target:"String",proto:!0,forced:!!(h||g||(r=a(String.prototype,"startsWith"),!r||r.writable))&&!g},{startsWith:function(t){var e=u(l(this));c(t);var n=s(v(arguments.length>1?arguments[1]:void 0,e.length)),r=u(t);return d?d(e,r,n):p(e,n,n+r.length)===r}})},MoOl:function(t,e,n){var r=n("nEaP"),o=n("Ya6V"),i="__core-js_shared__",a=r[i]||o(i,{});t.exports=a},Muwe:function(t,e,n){"use strict";var r=n("JRM0"),o=n("hVpg");r({target:"RegExp",proto:!0,forced:/./.exec!==o},{exec:o})},N1hr:function(t,e,n){"use strict";var r=n("sK41"),o=function(t){var e,n;this.promise=new t((function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r})),this.resolve=r(e),this.reject=r(n)};t.exports.f=function(t){return new o(t)}},NISO:function(t,e,n){n("B3nq")("toStringTag")},NO6N:function(t,e,n){n("B3nq")("isConcatSpreadable")},NRL2:function(t,e,n){var r=n("JRM0"),o=n("OzTt"),i=n("gDYM"),a=n("fT8P"),s=n("/OaT"),u=n("+iL7"),c=n("nRc6"),l=n("Fup7"),f=n("XOJ6"),h=n("VSW8");r({target:"Reflect",stat:!0,forced:u((function(){var t=function(){},e=c.f(new t,"a",{configurable:!0});return!1!==Reflect.set(t.prototype,"a",1,e)}))},{set:function t(e,n,r){var u,d,p,v=arguments.length<4?e:arguments[3],g=l.f(i(e),n);if(!g){if(a(d=f(e)))return t(d,n,r,v);g=h(0)}if(s(g)){if(!1===g.writable||!a(v))return!1;if(u=l.f(v,n)){if(u.get||u.set||!1===u.writable)return!1;u.value=r,c.f(v,n,u)}else c.f(v,n,h(0,r))}else{if(void 0===(p=g.set))return!1;o(p,v,r)}return!0}})},NS33:function(t,e,n){"use strict";function r(){}function o(){}var i=n("E02R");o.resetWarningCache=r,t.exports=function(){function t(t,e,n,r,o,a){if(a!==i){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function e(){return t}t.isRequired=t;var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:o,resetWarningCache:r};return n.PropTypes=n,n}},NZIh:function(t,e,n){var r=n("JRM0"),o=Math.atanh,i=Math.log;r({target:"Math",stat:!0,forced:!(o&&1/o(-0)<0)},{atanh:function(t){return 0==(t=+t)?t:i((1+t)/(1-t))/2}})},Ncbx:function(t,e,n){var r=n("GHf2")("iterator"),o=!1;try{var i=0,a={next:function(){return{done:!!i++}},return:function(){o=!0}};a[r]=function(){return this},Array.from(a,(function(){throw 2}))}catch(t){}t.exports=function(t,e){if(!e&&!o)return!1;var n=!1;try{var i={};i[r]=function(){return{next:function(){return{done:n=!0}}}},t(i)}catch(t){}return n}},NdLR:function(t,e,n){"use strict";(function(r){function o(){return"object"==typeof r&&void 0!==t&&"undefined"!=typeof process&&!!process.version}n.d(e,"a",(function(){return o}))}).call(this,n("pCvA"))},Nfll:function(t,e,n){n("JRM0")({target:"Number",stat:!0},{MIN_SAFE_INTEGER:-9007199254740991})},Nk1t:function(t,e,n){"use strict";var r=n("UVdV"),o=n("jP2f"),i=n("nHIk"),a=n("+n59"),s=n("hQLn"),u=n("v0JE"),c=n("5CFb"),l=n("QvVa"),f=n("8ZZt"),h=n("oa+t"),d=n("52tz"),p=n("PCqT");t.exports=function(t,e,n,v){var g=v?2:1,m=t.split("."),y=m[m.length-1],b=r.apply(null,m);if(b){var x=b.prototype;if(!p&&o(x,"cause")&&delete x.cause,!n)return b;var w=r("Error"),_=e((function(t,e){var n=l(v?e:t,void 0),r=v?new b(t):new b;return void 0!==n&&i(r,"message",n),d&&i(r,"stack",h(r.stack,2)),this&&a(x,this)&&c(r,this,_),arguments.length>g&&f(r,arguments[g]),r}));if(_.prototype=x,"Error"!==y&&(s?s(_,w):u(_,w,{name:!0})),u(_,b),!p)try{x.name!==y&&i(x,"name",y),x.constructor=_}catch(t){}return _}}},Nu6h:function(t,e,n){n("j8ZG")("Int32",(function(t){return function(e,n,r){return t(this,e,n,r)}}))},Nx4O:function(t,e,n){"use strict";n("Muwe");var r,o,i=n("JRM0"),a=n("nEaP"),s=n("OzTt"),u=n("WGD3"),c=n("PGFG"),l=n("fT8P"),f=(r=!1,(o=/[ac]/).exec=function(){return r=!0,/./.exec.apply(this,arguments)},!0===o.test("abc")&&r),h=a.Error,d=u(/./.test);i({target:"RegExp",proto:!0,forced:!f},{test:function(t){var e=this.exec;if(!c(e))return d(this,t);var n=s(e,this,t);if(null!==n&&!l(n))throw new h("RegExp exec method returned something other than an Object or null");return!!n}})},O2Ja:function(t,e,n){"use strict";var r=n("gDYM");t.exports=function(){var t=r(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},O5TI:function(t,e,n){var r=n("GHf2")("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[r]=!1,"/./"[t](e)}catch(t){}}return!1}},OPLh:function(t,e,n){"use strict";(function(t){function r(){var e=t.Canvas||t.HTMLCanvasElement,n=t.Image||t.HTMLImageElement,r=t.fetch||function(){throw new Error("fetch - missing fetch implementation for nodejs environment")},a=Object(i.a)();return Object(o.a)({Canvas:e||function(){},CanvasRenderingContext2D:t.CanvasRenderingContext2D||function(){},Image:n||function(){},ImageData:t.ImageData||function(){},Video:t.HTMLVideoElement||function(){},createCanvasElement:function(){if(e)return new e;throw new Error("createCanvasElement - missing Canvas implementation for nodejs environment")},createImageElement:function(){if(n)return new n;throw new Error("createImageElement - missing Image implementation for nodejs environment")},fetch:r},a)}n.d(e,"a",(function(){return r}));var o=n("D4BR"),i=n("D4qn")}).call(this,n("pCvA"))},OTtX:function(t,e,n){var r=n("nEaP");t.exports=function(t,e){var n=r.console;n&&n.error&&(1==arguments.length?n.error(t):n.error(t,e))}},OVha:function(t,e,n){var r=n("8OJN"),o=n("ek/P").concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,o)}},OaJQ:function(t,e,n){var r=n("JRM0"),o=n("nEaP"),i=n("R/cv"),a=n("Nk1t"),s="WebAssembly",u=o.WebAssembly,c=7!==Error("e",{cause:7}).cause,l=function(t,e){var n={};n[t]=a(t,e,c),r({global:!0,forced:c},n)},f=function(t,e){if(u&&u[t]){var n={};n[t]=a("WebAssembly."+t,e,c),r({target:s,stat:!0,forced:c},n)}};l("Error",(function(t){return function(e){return i(t,this,arguments)}})),l("EvalError",(function(t){return function(e){return i(t,this,arguments)}})),l("RangeError",(function(t){return function(e){return i(t,this,arguments)}})),l("ReferenceError",(function(t){return function(e){return i(t,this,arguments)}})),l("SyntaxError",(function(t){return function(e){return i(t,this,arguments)}})),l("TypeError",(function(t){return function(e){return i(t,this,arguments)}})),l("URIError",(function(t){return function(e){return i(t,this,arguments)}})),f("CompileError",(function(t){return function(e){return i(t,this,arguments)}})),f("LinkError",(function(t){return function(e){return i(t,this,arguments)}})),f("RuntimeError",(function(t){return function(e){return i(t,this,arguments)}}))},OgzJ:function(t,e,n){"use strict";var r=n("Xiyl"),o=n("5q7I").find,i=r.aTypedArray;(0,r.exportTypedArrayMethod)("find",(function(t){return o(i(this),t,arguments.length>1?arguments[1]:void 0)}))},OlPo:function(t,e,n){n("j8ZG")("Uint32",(function(t){return function(e,n,r){return t(this,e,n,r)}}))},OzTt:function(t,e,n){var r=n("tlZM"),o=Function.prototype.call;t.exports=r?o.bind(o):function(){return o.apply(o,arguments)}},P2u4:function(t,e,n){var r=n("nEaP"),o=n("PGFG"),i=n("/dUa"),a=r.WeakMap;t.exports=o(a)&&/native code/.test(i(a))},P3h4:function(t,e,n){"use strict";var r=n("nEaP"),o=n("a72Q"),i=n("OzTt"),a=n("9pAD"),s=n("7YMQ"),u=n("6+ef"),c=n("iGMQ"),l=n("fr05"),f=n("ztTQ"),h=n("l682"),d=n("QYi2"),p=r.Array;t.exports=function(t){var e=a(t),n=c(this),r=arguments.length,v=r>1?arguments[1]:void 0,g=void 0!==v;g&&(v=o(v,r>2?arguments[2]:void 0));var m,y,b,x,w,_,E=d(e),R=0;if(!E||this==p&&u(E))for(m=l(e),y=n?new this(m):p(m);m>R;R++)_=g?v(e[R],R):e[R],f(y,R,_);else for(w=(x=h(e,E)).next,y=n?new this:[];!(b=i(w,x)).done;R++)_=g?s(x,v,[b.value,R],!0):b.value,f(y,R,_);return y.length=R,y}},PCqT:function(t){t.exports=!1},PGFG:function(t){t.exports=function(t){return"function"==typeof t}},PM3k:function(t,e,n){var r=n("JRM0"),o=n("+iL7"),i=n("M/tt"),a=n("Fup7").f,s=n("Hvpk"),u=o((function(){a(1)}));r({target:"Object",stat:!0,forced:!s||u,sham:!s},{getOwnPropertyDescriptor:function(t,e){return a(i(t),e)}})},PNx8:function(t,e,n){"use strict";var r=n("JRM0"),o=n("WGD3"),i=n("Qean"),a=n("ZK/t"),s=n("AvGt"),u=o("".slice),c=Math.max,l=Math.min;r({target:"String",proto:!0,forced:!"".substr||"b"!=="ab".substr(-1)},{substr:function(t,e){var n,r,o=s(i(this)),f=o.length,h=a(t);return h===1/0&&(h=0),h<0&&(h=c(f+h,0)),(n=void 0===e?f:a(e))<=0||n===1/0||h>=(r=l(h+n,f))?"":u(o,h,r)}})},"PTK/":function(t,e,n){"use strict";var r=n("JRM0"),o=n("Hvpk"),i=n("mMsL"),a=n("sK41"),s=n("9pAD"),u=n("nRc6");o&&r({target:"Object",proto:!0,forced:i},{__defineGetter__:function(t,e){u.f(s(this),t,{get:a(e),enumerable:!0,configurable:!0})}})},Pe4Z:function(t,e,n){var r=n("JRM0"),o=Math.hypot,i=Math.abs,a=Math.sqrt;r({target:"Math",stat:!0,forced:!!o&&o(1/0,NaN)!==1/0},{hypot:function(t,e){for(var n,r,o=0,s=0,u=arguments.length,c=0;s<u;)c<(n=i(arguments[s++]))?(o=o*(r=c/n)*r+1,c=n):o+=n>0?(r=n/c)*r:n;return c===1/0?1/0:c*a(o)}})},Pgdl:function(t,e,n){n("JRM0")({target:"Number",stat:!0},{isFinite:n("hWbQ")})},QDHd:function(t,e,n){"use strict";var r=n("JRM0"),o=n("PCqT"),i=n("hXTI"),a=n("+iL7"),s=n("UVdV"),u=n("PGFG"),c=n("6ka5"),l=n("W2UA"),f=n("0K2p");if(r({target:"Promise",proto:!0,real:!0,forced:!!i&&a((function(){i.prototype.finally.call({then:function(){}},(function(){}))}))},{finally:function(t){var e=c(this,s("Promise")),n=u(t);return this.then(n?function(n){return l(e,t()).then((function(){return n}))}:t,n?function(n){return l(e,t()).then((function(){throw n}))}:t)}}),!o&&u(i)){var h=s("Promise").prototype.finally;i.prototype.finally!==h&&f(i.prototype,"finally",h,{unsafe:!0})}},QFfi:function(t,e,n){"use strict";var r=n("9pAD"),o=n("glsI"),i=n("fr05"),a=Math.min;t.exports=[].copyWithin||function(t,e){var n=r(this),s=i(n),u=o(t,s),c=o(e,s),l=arguments.length>2?arguments[2]:void 0,f=a((void 0===l?s:o(l,s))-c,s-u),h=1;for(c<u&&u<c+f&&(h=-1,c+=f-1,u+=f-1);f-- >0;)c in n?n[u]=n[c]:delete n[u],u+=h,c+=h;return n}},QRet:function(t,e,n){"use strict";function r(t,e){E.options.__h&&E.options.__h(w,t,R||e),R=0;var n=w.__H||(w.__H={__:[],__h:[]});return t>=n.__.length&&n.__.push({}),n.__[t]}function o(t){return R=1,i(b,t)}function i(t,e,n){var o=r(x++,2);return o.t=t,o.__c||(o.__=[n?n(e):b(void 0,e),function(t){var e=o.t(o.__[0],t);o.__[0]!==e&&(o.__=[e,o.__[1]],o.__c.setState({}))}],o.__c=w),o.__}function a(t,e){var n=r(x++,3);!E.options.__s&&y(n.__H,e)&&(n.__=t,n.__H=e,w.__H.__h.push(n))}function s(t,e){var n=r(x++,4);!E.options.__s&&y(n.__H,e)&&(n.__=t,n.__H=e,w.__h.push(n))}function u(t){return R=5,l((function(){return{current:t}}),[])}function c(t,e,n){R=6,s((function(){return"function"==typeof t?(t(e()),function(){return t(null)}):t?(t.current=e(),function(){return t.current=null}):void 0}),null==n?n:n.concat(t))}function l(t,e){var n=r(x++,7);return y(n.__H,e)&&(n.__=t(),n.__H=e,n.__h=t),n.__}function f(t,e){return R=8,l((function(){return t}),e)}function h(t){var e=w.context[t.__c],n=r(x++,9);return n.c=t,e?(null==n.__&&(n.__=!0,e.sub(w)),e.props.value):t.__}function d(t,e){E.options.useDebugValue&&E.options.useDebugValue(e?e(t):t)}function p(t){var e=r(x++,10),n=o();return e.__=t,w.componentDidCatch||(w.componentDidCatch=function(t){e.__&&e.__(t),n[1](t)}),[n[0],function(){n[1](void 0)}]}function v(){for(var t;t=C.shift();)if(t.__P)try{t.__H.__h.forEach(g),t.__H.__h.forEach(m),t.__H.__h=[]}catch(e){t.__H.__h=[],E.options.__e(e,t.__v)}}function g(t){var e=w,n=t.__c;"function"==typeof n&&(t.__c=void 0,n()),w=e}function m(t){var e=w;t.__c=t.__(),w=e}function y(t,e){return!t||t.length!==e.length||e.some((function(e,n){return e!==t[n]}))}function b(t,e){return"function"==typeof e?e(t):e}n.d(e,"k",(function(){return o})),n.d(e,"i",(function(){return i})),n.d(e,"d",(function(){return a})),n.d(e,"g",(function(){return s})),n.d(e,"j",(function(){return u})),n.d(e,"f",(function(){return c})),n.d(e,"h",(function(){return l})),n.d(e,"a",(function(){return f})),n.d(e,"b",(function(){return h})),n.d(e,"c",(function(){return d})),n.d(e,"e",(function(){return p}));var x,w,_,E=n("hosL"),R=0,C=[],S=E.options.__b,O=E.options.__r,A=E.options.diffed,I=E.options.__c,k=E.options.unmount;E.options.__b=function(t){w=null,S&&S(t)},E.options.__r=function(t){O&&O(t),x=0;var e=(w=t.__c).__H;e&&(e.__h.forEach(g),e.__h.forEach(m),e.__h=[])},E.options.diffed=function(t){A&&A(t);var e=t.__c;e&&e.__H&&e.__H.__h.length&&(1!==C.push(e)&&_===E.options.requestAnimationFrame||((_=E.options.requestAnimationFrame)||function(t){var e,n=function(){clearTimeout(r),T&&cancelAnimationFrame(e),setTimeout(t)},r=setTimeout(n,100);T&&(e=requestAnimationFrame(n))})(v)),w=null},E.options.__c=function(t,e){e.some((function(t){try{t.__h.forEach(g),t.__h=t.__h.filter((function(t){return!t.__||m(t)}))}catch(n){e.some((function(t){t.__h&&(t.__h=[])})),e=[],E.options.__e(n,t.__v)}})),I&&I(t,e)},E.options.unmount=function(t){k&&k(t);var e,n=t.__c;n&&n.__H&&(n.__H.__.forEach((function(t){try{g(t)}catch(t){e=t}})),e&&E.options.__e(e,n.__v))};var T="function"==typeof requestAnimationFrame},QSk6:function(t,e,n){"use strict";var r=n("nEaP"),o=n("gDYM"),i=n("CVD7"),a=r.TypeError;t.exports=function(t){if(o(this),"string"===t||"default"===t)t="string";else if("number"!==t)throw a("Incorrect hint");return i(this,t)}},QYi2:function(t,e,n){var r=n("fshm"),o=n("Krfs"),i=n("q/gS"),a=n("GHf2")("iterator");t.exports=function(t){if(null!=t)return o(t,a)||o(t,"@@iterator")||i[r(t)]}},Qean:function(t,e,n){var r=n("nEaP").TypeError;t.exports=function(t){if(null==t)throw r("Can't call method on "+t);return t}},Qtiq:function(t,e,n){var r=n("WGD3");t.exports=r(1..valueOf)},QvVa:function(t,e,n){var r=n("AvGt");t.exports=function(t,e){return void 0===t?arguments.length<2?"":e:r(t)}},"R/cv":function(t,e,n){var r=n("tlZM"),o=Function.prototype,i=o.apply,a=o.call;t.exports="object"==typeof Reflect&&Reflect.apply||(r?a.bind(i):function(){return a.apply(i,arguments)})},R1TW:function(t,e,n){var r=n("UVdV");t.exports=r("document","documentElement")},RN4W:function(t,e,n){var r=n("Xiyl"),o=n("6ka5"),i=r.TYPED_ARRAY_CONSTRUCTOR,a=r.aTypedArrayConstructor;t.exports=function(t){return a(o(t,t[i]))}},RWcT:function(t,e,n){"use strict";var r=n("JRM0"),o=n("+iL7"),i=n("9pAD"),a=n("W9fh");r({target:"Date",proto:!0,forced:o((function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}))},{toJSON:function(){var t=i(this),e=a(t,"number");return"number"!=typeof e||isFinite(e)?t.toISOString():null}})},Rl66:function(t,e,n){n("JRM0")({target:"Math",stat:!0},{log1p:n("3rea")})},RrfL:function(t,e,n){var r=n("JRM0"),o=n("fT8P"),i=n("CwSR").onFreeze,a=n("b82F"),s=n("+iL7"),u=Object.seal;r({target:"Object",stat:!0,forced:s((function(){u(1)})),sham:!a},{seal:function(t){return u&&o(t)?u(i(t)):t}})},RsBt:function(t,e,n){n("d5e9")("flatMap")},RsMT:function(t,e,n){"use strict";n("HZkJ")("Set",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),n("dxhH"))},RtS0:function(t,e,n){"use strict";var r=n("JRM0"),o=n("3PYW");r({target:"Array",proto:!0,forced:[].forEach!=o},{forEach:o})},"S/BG":function(t,e,n){"use strict";var r=n("JRM0"),o=n("Hvpk"),i=n("mMsL"),a=n("9pAD"),s=n("b3pM"),u=n("XOJ6"),c=n("Fup7").f;o&&r({target:"Object",proto:!0,forced:i},{__lookupSetter__:function(t){var e,n=a(this),r=s(t);do{if(e=c(n,r))return e.set}while(n=u(n))}})},S8c5:function(t,e,n){var r=n("fr05");t.exports=function(t,e){for(var n=0,o=r(e),i=new t(o);o>n;)i[n]=e[n++];return i}},SB7D:function(t,e,n){var r=n("JRM0"),o=n("gDYM"),i=n("7P5K"),a=n("hQLn");a&&r({target:"Reflect",stat:!0},{setPrototypeOf:function(t,e){o(t),i(e);try{return a(t,e),!0}catch(t){return!1}}})},SJSz:function(t,e,n){"use strict";var r=n("JRM0"),o=n("3I4I"),i=n("sK41"),a=n("9pAD"),s=n("fr05"),u=n("iSxr");r({target:"Array",proto:!0},{flatMap:function(t){var e,n=a(this),r=s(n);return i(t),(e=u(n,0)).length=o(e,n,n,r,0,1,t,arguments.length>1?arguments[1]:void 0),e}})},SQIU:function(t,e,n){n("JRM0")({target:"Number",stat:!0},{isNaN:function(t){return t!=t}})},SUr3:function(t,e,n){var r=n("JRM0"),o=n("9pAD"),i=n("ujzH");r({target:"Object",stat:!0,forced:n("+iL7")((function(){i(1)}))},{keys:function(t){return i(o(t))}})},Se8w:function(t,e,n){"use strict";var r=n("JRM0"),o=n("3I4I"),i=n("9pAD"),a=n("fr05"),s=n("ZK/t"),u=n("iSxr");r({target:"Array",proto:!0},{flat:function(){var t=arguments.length?arguments[0]:void 0,e=i(this),n=a(e),r=u(e,0);return r.length=o(r,e,e,n,0,void 0===t?1:s(t)),r}})},SeWL:function(t,e,n){"use strict";n("/YXa");var r=n("JRM0"),o=n("nEaP"),i=n("UVdV"),a=n("OzTt"),s=n("WGD3"),u=n("iwLE"),c=n("0K2p"),l=n("xxLW"),f=n("1tiZ"),h=n("fM6A"),d=n("SkE4"),p=n("iBt0"),v=n("PGFG"),g=n("jP2f"),m=n("a72Q"),y=n("fshm"),b=n("gDYM"),x=n("fT8P"),w=n("AvGt"),_=n("w/Ji"),E=n("VSW8"),R=n("l682"),C=n("QYi2"),S=n("7DHN"),O=n("GHf2"),A=n("iKwF"),I=O("iterator"),k="URLSearchParams",T="URLSearchParamsIterator",M=d.set,D=d.getterFor(k),P=d.getterFor(T),N=i("fetch"),F=i("Request"),L=i("Headers"),j=F&&F.prototype,B=L&&L.prototype,W=o.RegExp,U=o.TypeError,G=o.decodeURIComponent,z=o.encodeURIComponent,V=s("".charAt),H=s([].join),q=s([].push),K=s("".replace),X=s([].shift),J=s([].splice),Y=s("".split),Q=s("".slice),$=/\+/g,Z=Array(4),tt=function(t){return Z[t-1]||(Z[t-1]=W("((?:%[\\da-f]{2}){"+t+"})","gi"))},et=function(t){try{return G(t)}catch(e){return t}},nt=function(t){var e=K(t,$," "),n=4;try{return G(e)}catch(t){for(;n;)e=K(e,tt(n--),et);return e}},rt=/[!'()~]|%20/g,ot={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},it=function(t){return ot[t]},at=function(t){return K(z(t),rt,it)},st=h((function(t,e){M(this,{type:T,iterator:R(D(t).entries),kind:e})}),"Iterator",(function(){var t=P(this),e=t.kind,n=t.iterator.next(),r=n.value;return n.done||(n.value="keys"===e?r.key:"values"===e?r.value:[r.key,r.value]),n}),!0),ut=function(t){this.entries=[],this.url=null,void 0!==t&&(x(t)?this.parseObject(t):this.parseQuery("string"==typeof t?"?"===V(t,0)?Q(t,1):t:w(t)))};ut.prototype={type:k,bindURL:function(t){this.url=t,this.update()},parseObject:function(t){var e,n,r,o,i,s,u,c=C(t);if(c)for(n=(e=R(t,c)).next;!(r=a(n,e)).done;){if(o=R(b(r.value)),(s=a(i=o.next,o)).done||(u=a(i,o)).done||!a(i,o).done)throw U("Expected sequence with length 2");q(this.entries,{key:w(s.value),value:w(u.value)})}else for(var l in t)g(t,l)&&q(this.entries,{key:l,value:w(t[l])})},parseQuery:function(t){if(t)for(var e,n,r=Y(t,"&"),o=0;o<r.length;)(e=r[o++]).length&&(n=Y(e,"="),q(this.entries,{key:nt(X(n)),value:nt(H(n,"="))}))},serialize:function(){for(var t,e=this.entries,n=[],r=0;r<e.length;)t=e[r++],q(n,at(t.key)+"="+at(t.value));return H(n,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var ct=function(){p(this,lt);var t=arguments.length>0?arguments[0]:void 0;M(this,new ut(t))},lt=ct.prototype;if(l(lt,{append:function(t,e){S(arguments.length,2);var n=D(this);q(n.entries,{key:w(t),value:w(e)}),n.updateURL()},delete:function(t){S(arguments.length,1);for(var e=D(this),n=e.entries,r=w(t),o=0;o<n.length;)n[o].key===r?J(n,o,1):o++;e.updateURL()},get:function(t){S(arguments.length,1);for(var e=D(this).entries,n=w(t),r=0;r<e.length;r++)if(e[r].key===n)return e[r].value;return null},getAll:function(t){S(arguments.length,1);for(var e=D(this).entries,n=w(t),r=[],o=0;o<e.length;o++)e[o].key===n&&q(r,e[o].value);return r},has:function(t){S(arguments.length,1);for(var e=D(this).entries,n=w(t),r=0;r<e.length;)if(e[r++].key===n)return!0;return!1},set:function(t,e){S(arguments.length,1);for(var n,r=D(this),o=r.entries,i=!1,a=w(t),s=w(e),u=0;u<o.length;u++)(n=o[u]).key===a&&(i?J(o,u--,1):(i=!0,n.value=s));i||q(o,{key:a,value:s}),r.updateURL()},sort:function(){var t=D(this);A(t.entries,(function(t,e){return t.key>e.key?1:-1})),t.updateURL()},forEach:function(t){for(var e,n=D(this).entries,r=m(t,arguments.length>1?arguments[1]:void 0),o=0;o<n.length;)r((e=n[o++]).value,e.key,this)},keys:function(){return new st(this,"keys")},values:function(){return new st(this,"values")},entries:function(){return new st(this,"entries")}},{enumerable:!0}),c(lt,I,lt.entries,{name:"entries"}),c(lt,"toString",(function(){return D(this).serialize()}),{enumerable:!0}),f(ct,k),r({global:!0,forced:!u},{URLSearchParams:ct}),!u&&v(L)){var ft=s(B.has),ht=s(B.set),dt=function(t){if(x(t)){var e,n=t.body;if(y(n)===k)return e=t.headers?new L(t.headers):new L,ft(e,"content-type")||ht(e,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),_(t,{body:E(0,w(n)),headers:E(0,e)})}return t};if(v(N)&&r({global:!0,enumerable:!0,forced:!0},{fetch:function(t){return N(t,arguments.length>1?dt(arguments[1]):{})}}),v(F)){var pt=function(t){return p(this,j),new F(t,arguments.length>1?dt(arguments[1]):{})};j.constructor=pt,pt.prototype=j,r({global:!0,forced:!0},{Request:pt})}}t.exports={URLSearchParams:ct,getState:D}},SgDD:function(t,e,n){"use strict";var r=n("JRM0"),o=n("H0Ge").trim;r({target:"String",proto:!0,forced:n("UkaN")("trim")},{trim:function(){return o(this)}})},SkE4:function(t,e,n){var r,o,i,a=n("P2u4"),s=n("nEaP"),u=n("WGD3"),c=n("fT8P"),l=n("nHIk"),f=n("jP2f"),h=n("MoOl"),d=n("3pC9"),p=n("s3NK"),v="Object already initialized",g=s.TypeError;if(a||h.state){var m=h.state||(h.state=new(0,s.WeakMap)),y=u(m.get),b=u(m.has),x=u(m.set);r=function(t,e){if(b(m,t))throw new g(v);return e.facade=t,x(m,t,e),e},o=function(t){return y(m,t)||{}},i=function(t){return b(m,t)}}else{var w=d("state");p[w]=!0,r=function(t,e){if(f(t,w))throw new g(v);return e.facade=t,l(t,w,e),e},o=function(t){return f(t,w)?t[w]:{}},i=function(t){return f(t,w)}}t.exports={set:r,get:o,has:i,enforce:function(t){return i(t)?o(t):r(t,{})},getterFor:function(t){return function(e){var n;if(!c(e)||(n=o(e)).type!==t)throw g("Incompatible receiver, "+t+" required");return n}}}},SlvM:function(t,e,n){var r=n("nEaP"),o=n("+iL7"),i=n("WGD3"),a=n("AvGt"),s=n("H0Ge").trim,u=n("VcRG"),c=r.parseInt,l=r.Symbol,f=l&&l.iterator,h=/^[+-]?0x/i,d=i(h.exec),p=8!==c(u+"08")||22!==c(u+"0x16")||f&&!o((function(){c(Object(f))}));t.exports=p?function(t,e){var n=s(a(t));return c(n,e>>>0||(d(h,n)?16:10))}:c},SmY9:function(t,e,n){var r=n("nEaP"),o=n("sK41"),i=n("9pAD"),a=n("DJGK"),s=n("fr05"),u=r.TypeError,c=function(t){return function(e,n,r,c){o(n);var l=i(e),f=a(l),h=s(l),d=t?h-1:0,p=t?-1:1;if(r<2)for(;;){if(d in f){c=f[d],d+=p;break}if(d+=p,t?d<0:h<=d)throw u("Reduce of empty array with no initial value")}for(;t?d>=0:h>d;d+=p)d in f&&(c=n(c,f[d],d,l));return c}};t.exports={left:c(!1),right:c(!0)}},St4I:function(t,e,n){var r=n("JRM0"),o=n("1pWv");r({global:!0,forced:parseFloat!=o},{parseFloat:o})},TlnR:function(t,e,n){var r=n("JRM0"),o=n("+iL7"),i=Math.imul;r({target:"Math",stat:!0,forced:o((function(){return-5!=i(4294967295,5)||2!=i.length}))},{imul:function(t,e){var n=65535,r=+t,o=+e,i=n&r,a=n&o;return 0|i*a+((n&r>>>16)*a+i*(n&o>>>16)<<16>>>0)}})},Tsb7:function(t,e,n){"use strict";var r=n("JRM0"),o=n("WGD3"),i=n("h/Mk"),a=o([].reverse),s=[1,2];r({target:"Array",proto:!0,forced:String(s)===String(s.reverse())},{reverse:function(){return i(this)&&(this.length=this.length),a(this)}})},U00V:function(t,e,n){var r=n("nEaP"),o=n("tPpl"),i=n("L91r"),a=n("/YXa"),s=n("nHIk"),u=n("GHf2"),c=u("iterator"),l=u("toStringTag"),f=a.values,h=function(t,e){if(t){if(t[c]!==f)try{s(t,c,f)}catch(e){t[c]=f}if(t[l]||s(t,l,e),o[e])for(var n in a)if(t[n]!==a[n])try{s(t,n,a[n])}catch(e){t[n]=a[n]}}};for(var d in o)h(r[d]&&r[d].prototype,d);h(i,"DOMTokenList")},UHK9:function(t,e,n){n("B3nq")("replace")},UVdV:function(t,e,n){var r=n("nEaP"),o=n("PGFG"),i=function(t){return o(t)?t:void 0};t.exports=function(t,e){return arguments.length<2?i(r[t]):r[t]&&r[t][e]}},UYaP:function(t,e,n){"use strict";var r=n("JRM0"),o=n("nEaP"),i=n("WGD3"),a=n("ZK/t"),s=n("Qtiq"),u=n("BnTm"),c=n("1+4v"),l=n("+iL7"),f=o.RangeError,h=o.String,d=o.isFinite,p=Math.abs,v=Math.floor,g=Math.pow,m=Math.round,y=i(1..toExponential),b=i(u),x=i("".slice),w="-6.9000e-11"===y(-69e-12,4)&&"1.25e+0"===y(1.255,2)&&"1.235e+4"===y(12345,3)&&"3e+1"===y(25,0),_=l((function(){y(1,1/0)}))&&l((function(){y(1,-1/0)})),E=!l((function(){y(1/0,1/0)}))&&!l((function(){y(NaN,1/0)}));r({target:"Number",proto:!0,forced:!w||!_||!E},{toExponential:function(t){var e=s(this);if(void 0===t)return y(e);var n=a(t);if(!d(e))return h(e);if(n<0||n>20)throw f("Incorrect fraction digits");if(w)return y(e,n);var r="",o="",i=0,u="",l="";if(e<0&&(r="-",e=-e),0===e)i=0,o=b("0",n+1);else{var _=c(e);i=v(_);var E=0,R=g(10,i-n);2*e>=(2*(E=m(e/R))+1)*R&&(E+=1),E>=g(10,n+1)&&(E/=10,i+=1),o=h(E)}return 0!==n&&(o=x(o,0,1)+"."+x(o,1)),0===i?(u="+",l="0"):(u=i>0?"+":"-",l=h(p(i))),r+(o+="e"+u+l)}})},UkaN:function(t,e,n){var r=n("wLFK").PROPER,o=n("+iL7"),i=n("VcRG");t.exports=function(t){return o((function(){return!!i[t]()||"​᠎"!=="​᠎"[t]()||r&&i[t].name!==t}))}},Uo50:function(t,e,n){var r=n("+iL7");t.exports=function(t){return r((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}))}},UpYF:function(t,e,n){"use strict";var r=n("k2M3"),o=n("fshm");t.exports=r?{}.toString:function(){return"[object "+o(this)+"]"}},Ut8V:function(t,e,n){n("JRM0")({global:!0},{globalThis:n("nEaP")})},V2sW:function(t,e,n){"use strict";var r=n("UVdV"),o=n("nRc6"),i=n("GHf2"),a=n("Hvpk"),s=i("species");t.exports=function(t){var e=r(t);a&&e&&!e[s]&&(0,o.f)(e,s,{configurable:!0,get:function(){return this}})}},VSW8:function(t){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},VcRG:function(t){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},VuJW:function(t){t.exports="object"==typeof window},VyG4:function(t,e,n){var r=n("JRM0"),o=n("+iL7"),i=n("Xv5+"),a=Math.abs,s=Math.exp,u=Math.E;r({target:"Math",stat:!0,forced:o((function(){return-2e-17!=Math.sinh(-2e-17)}))},{sinh:function(t){return a(t=+t)<1?(i(t)-i(-t))/2:(s(t-1)-s(-t-1))*(u/2)}})},VyTv:function(t,e,n){"use strict";var r=n("JRM0"),o=n("z+V7").codeAt;r({target:"String",proto:!0},{codePointAt:function(t){return o(this,t)}})},W0B4:function(t,e,n){t.exports=n("NS33")()},W2UA:function(t,e,n){var r=n("gDYM"),o=n("fT8P"),i=n("N1hr");t.exports=function(t,e){if(r(t),o(e)&&e.constructor===t)return e;var n=i.f(t);return(0,n.resolve)(e),n.promise}},W7E7:function(t,e,n){"use strict";var r=n("JRM0"),o=n("H0Ge").start,i=n("UkaN")("trimStart"),a=i?function(){return o(this)}:"".trimStart;r({target:"String",proto:!0,name:"trimStart",forced:i},{trimStart:a,trimLeft:a})},W9dP:function(t,e,n){n("j8ZG")("Uint16",(function(t){return function(e,n,r){return t(this,e,n,r)}}))},W9fh:function(t,e,n){var r=n("nEaP"),o=n("OzTt"),i=n("fT8P"),a=n("u5rE"),s=n("Krfs"),u=n("CVD7"),c=n("GHf2"),l=r.TypeError,f=c("toPrimitive");t.exports=function(t,e){if(!i(t)||a(t))return t;var n,r=s(t,f);if(r){if(void 0===e&&(e="default"),n=o(r,t,e),!i(n)||a(n))return n;throw l("Can't convert object to primitive value")}return void 0===e&&(e="number"),u(t,e)}},WB5j:function(t,e,n){"use strict";var r=n("JRM0"),o=n("nEaP"),i=n("h/Mk"),a=n("iGMQ"),s=n("fT8P"),u=n("glsI"),c=n("fr05"),l=n("M/tt"),f=n("ztTQ"),h=n("GHf2"),d=n("WCig"),p=n("i6bU"),v=d("slice"),g=h("species"),m=o.Array,y=Math.max;r({target:"Array",proto:!0,forced:!v},{slice:function(t,e){var n,r,o,h=l(this),d=c(h),v=u(t,d),b=u(void 0===e?d:e,d);if(i(h)&&((a(n=h.constructor)&&(n===m||i(n.prototype))||s(n)&&null===(n=n[g]))&&(n=void 0),n===m||void 0===n))return p(h,v,b);for(r=new(void 0===n?m:n)(y(b-v,0)),o=0;v<b;v++,o++)v in h&&f(r,o,h[v]);return r.length=o,r}})},WCig:function(t,e,n){var r=n("+iL7"),o=n("GHf2"),i=n("G5hJ"),a=o("species");t.exports=function(t){return i>=51||!r((function(){var e=[];return(e.constructor={})[a]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},WGD3:function(t,e,n){var r=n("tlZM"),o=Function.prototype,i=o.call,a=r&&o.bind.bind(i,i);t.exports=r?function(t){return t&&a(t)}:function(t){return t&&function(){return i.apply(t,arguments)}}},"WH+p":function(t,e,n){"use strict";var r=n("Xiyl"),o=n("WGD3"),i=r.aTypedArray,a=r.exportTypedArrayMethod,s=o([].join);a("join",(function(t){return s(i(this),t)}))},WiT8:function(t,e,n){"use strict";function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var o,i=n("l8WD"),a=(o=i)&&"object"==typeof o&&"default"in o?o.default:o,s=!("undefined"==typeof window||!window.document||!window.document.createElement);t.exports=function(t,e,n){if("function"!=typeof t)throw new Error("Expected reducePropsToState to be a function.");if("function"!=typeof e)throw new Error("Expected handleStateChangeOnClient to be a function.");if(void 0!==n&&"function"!=typeof n)throw new Error("Expected mapStateOnServer to either be undefined or a function.");return function(o){function u(){c=t(l.map((function(t){return t.props}))),f.canUseDOM?e(c):n&&(c=n(c))}if("function"!=typeof o)throw new Error("Expected WrappedComponent to be a React component.");var c,l=[],f=function(t){function e(){return t.apply(this,arguments)||this}var n,r;r=t,(n=e).prototype=Object.create(r.prototype),n.prototype.constructor=n,n.__proto__=r,e.peek=function(){return c},e.rewind=function(){if(e.canUseDOM)throw new Error("You may only call rewind() on the server. Call peek() to read the current state.");var t=c;return c=void 0,l=[],t};var i=e.prototype;return i.UNSAFE_componentWillMount=function(){l.push(this),u()},i.componentDidUpdate=function(){u()},i.componentWillUnmount=function(){var t=l.indexOf(this);l.splice(t,1),u()},i.render=function(){return a.createElement(o,this.props)},e}(i.PureComponent);return r(f,"displayName","SideEffect("+function(t){return t.displayName||t.name||"Component"}(o)+")"),r(f,"canUseDOM",s),f}}},WoWj:function(t,e,n){"use strict";var r=n("z+V7").charAt,o=n("AvGt"),i=n("SkE4"),a=n("vtID"),s="String Iterator",u=i.set,c=i.getterFor(s);a(String,"String",(function(t){u(this,{type:s,string:o(t),index:0})}),(function(){var t,e=c(this),n=e.string,o=e.index;return o>=n.length?{value:void 0,done:!0}:(t=r(n,o),e.index+=t.length,{value:t,done:!1})}))},X21e:function(t,e,n){var r=n("jP2f"),o=n("0K2p"),i=n("QSk6"),a=n("GHf2")("toPrimitive"),s=Date.prototype;r(s,a)||o(s,a,i)},X5mX:function(t,e,n){"use strict";var r=n("OzTt"),o=n("+5TE"),i=n("gDYM"),a=n("Qean"),s=n("mvOm"),u=n("AvGt"),c=n("Krfs"),l=n("a59c");o("search",(function(t,e,n){return[function(e){var n=a(this),o=null==e?void 0:c(e,t);return o?r(o,e,n):new RegExp(e)[t](u(n))},function(t){var r=i(this),o=u(t),a=n(e,r,o);if(a.done)return a.value;var c=r.lastIndex;s(c,0)||(r.lastIndex=0);var f=l(r,o);return s(r.lastIndex,c)||(r.lastIndex=c),null===f?-1:f.index}]}))},XC5q:function(t,e,n){var r=n("nEaP").Array,o=Math.abs,i=Math.pow,a=Math.floor,s=Math.log,u=Math.LN2;t.exports={pack:function(t,e,n){var c,l,f,h=r(n),d=8*n-e-1,p=(1<<d)-1,v=p>>1,g=23===e?i(2,-24)-i(2,-77):0,m=t<0||0===t&&1/t<0?1:0,y=0;for((t=o(t))!=t||t===1/0?(l=t!=t?1:0,c=p):(c=a(s(t)/u),t*(f=i(2,-c))<1&&(c--,f*=2),(t+=c+v>=1?g/f:g*i(2,1-v))*f>=2&&(c++,f/=2),c+v>=p?(l=0,c=p):c+v>=1?(l=(t*f-1)*i(2,e),c+=v):(l=t*i(2,v-1)*i(2,e),c=0));e>=8;)h[y++]=255&l,l/=256,e-=8;for(c=c<<e|l,d+=e;d>0;)h[y++]=255&c,c/=256,d-=8;return h[--y]|=128*m,h},unpack:function(t,e){var n,r=t.length,o=8*r-e-1,a=(1<<o)-1,s=a>>1,u=o-7,c=r-1,l=t[c--],f=127&l;for(l>>=7;u>0;)f=256*f+t[c--],u-=8;for(n=f&(1<<-u)-1,f>>=-u,u+=e;u>0;)n=256*n+t[c--],u-=8;if(0===f)f=1-s;else{if(f===a)return n?NaN:l?-1/0:1/0;n+=i(2,e),f-=s}return(l?-1:1)*n*i(2,f-e)}}},XJHa:function(t,e,n){n("B3nq")("hasInstance")},XOJ6:function(t,e,n){var r=n("nEaP"),o=n("jP2f"),i=n("PGFG"),a=n("9pAD"),s=n("3pC9"),u=n("XleP"),c=s("IE_PROTO"),l=r.Object,f=l.prototype;t.exports=u?l.getPrototypeOf:function(t){var e=a(t);if(o(e,c))return e[c];var n=e.constructor;return i(n)&&e instanceof n?n.prototype:e instanceof l?f:null}},XOuC:function(t,e,n){"use strict";var r=n("Hvpk"),o=n("WGD3"),i=n("OzTt"),a=n("+iL7"),s=n("ujzH"),u=n("rk7W"),c=n("41Zj"),l=n("9pAD"),f=n("DJGK"),h=Object.assign,d=Object.defineProperty,p=o([].concat);t.exports=!h||a((function(){if(r&&1!==h({b:1},h(d({},"a",{enumerable:!0,get:function(){d(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},n=Symbol(),o="abcdefghijklmnopqrst";return t[n]=7,o.split("").forEach((function(t){e[t]=t})),7!=h({},t)[n]||s(h({},e)).join("")!=o}))?function(t){for(var e=l(t),n=arguments.length,o=1,a=u.f,h=c.f;n>o;)for(var d,v=f(arguments[o++]),g=a?p(s(v),a(v)):s(v),m=g.length,y=0;m>y;)d=g[y++],r&&!i(h,v,d)||(e[d]=v[d]);return e}:h},XXOr:function(t,e,n){n("B3nq")("toPrimitive")},XgMv:function(t,e,n){var r=n("WGD3"),o=n("9pAD"),i=Math.floor,a=r("".charAt),s=r("".replace),u=r("".slice),c=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,l=/\$([$&'`]|\d{1,2})/g;t.exports=function(t,e,n,r,f,h){var d=n+t.length,p=r.length,v=l;return void 0!==f&&(f=o(f),v=c),s(h,v,(function(o,s){var c;switch(a(s,0)){case"$":return"$";case"&":return t;case"`":return u(e,0,n);case"'":return u(e,d);case"<":c=f[u(s,1,-1)];break;default:var l=+s;if(0===l)return o;if(l>p){var h=i(l/10);return 0===h?o:h<=p?void 0===r[h-1]?a(s,1):r[h-1]+a(s,1):o}c=r[l-1]}return void 0===c?"":c}))}},Xiyl:function(t,e,n){"use strict";var r,o,i,a=n("JBUR"),s=n("Hvpk"),u=n("nEaP"),c=n("PGFG"),l=n("fT8P"),f=n("jP2f"),h=n("fshm"),d=n("Xki7"),p=n("nHIk"),v=n("0K2p"),g=n("nRc6").f,m=n("+n59"),y=n("XOJ6"),b=n("hQLn"),x=n("GHf2"),w=n("nrda"),_=u.Int8Array,E=_&&_.prototype,R=u.Uint8ClampedArray,C=R&&R.prototype,S=_&&y(_),O=E&&y(E),A=Object.prototype,I=u.TypeError,k=x("toStringTag"),T=w("TYPED_ARRAY_TAG"),M=w("TYPED_ARRAY_CONSTRUCTOR"),D=a&&!!b&&"Opera"!==h(u.opera),P=!1,N={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},F={BigInt64Array:8,BigUint64Array:8},L=function(t){if(!l(t))return!1;var e=h(t);return f(N,e)||f(F,e)};for(r in N)(i=(o=u[r])&&o.prototype)?p(i,M,o):D=!1;for(r in F)(i=(o=u[r])&&o.prototype)&&p(i,M,o);if((!D||!c(S)||S===Function.prototype)&&(S=function(){throw I("Incorrect invocation")},D))for(r in N)u[r]&&b(u[r],S);if((!D||!O||O===A)&&(O=S.prototype,D))for(r in N)u[r]&&b(u[r].prototype,O);if(D&&y(C)!==O&&b(C,O),s&&!f(O,k))for(r in P=!0,g(O,k,{get:function(){return l(this)?this[T]:void 0}}),N)u[r]&&p(u[r],T,r);t.exports={NATIVE_ARRAY_BUFFER_VIEWS:D,TYPED_ARRAY_CONSTRUCTOR:M,TYPED_ARRAY_TAG:P&&T,aTypedArray:function(t){if(L(t))return t;throw I("Target is not a typed array")},aTypedArrayConstructor:function(t){if(c(t)&&(!b||m(S,t)))return t;throw I(d(t)+" is not a typed array constructor")},exportTypedArrayMethod:function(t,e,n,r){if(s){if(n)for(var o in N){var i=u[o];if(i&&f(i.prototype,t))try{delete i.prototype[t]}catch(n){try{i.prototype[t]=e}catch(t){}}}O[t]&&!n||v(O,t,n?e:D&&E[t]||e,r)}},exportTypedArrayStaticMethod:function(t,e,n){var r,o;if(s){if(b){if(n)for(r in N)if((o=u[r])&&f(o,t))try{delete o[t]}catch(t){}if(S[t]&&!n)return;try{return v(S,t,n?e:D&&S[t]||e)}catch(t){}}for(r in N)!(o=u[r])||o[t]&&!n||v(o,t,e)}},isView:function(t){if(!l(t))return!1;var e=h(t);return"DataView"===e||f(N,e)||f(F,e)},isTypedArray:L,TypedArray:S,TypedArrayPrototype:O}},Xki7:function(t,e,n){var r=n("nEaP").String;t.exports=function(t){try{return r(t)}catch(t){return"Object"}}},XleP:function(t,e,n){var r=n("+iL7");t.exports=!r((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},"Xlt+":function(t,e,n){"use strict";var r=n("JRM0"),o=n("nEaP"),i=n("glsI"),a=n("ZK/t"),s=n("fr05"),u=n("9pAD"),c=n("iSxr"),l=n("ztTQ"),f=n("WCig")("splice"),h=o.TypeError,d=Math.max,p=Math.min,v=9007199254740991,g="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!f},{splice:function(t,e){var n,r,o,f,m,y,b=u(this),x=s(b),w=i(t,x),_=arguments.length;if(0===_?n=r=0:1===_?(n=0,r=x-w):(n=_-2,r=p(d(a(e),0),x-w)),x+n-r>v)throw h(g);for(o=c(b,r),f=0;f<r;f++)(m=w+f)in b&&l(o,f,b[m]);if(o.length=r,n<r){for(f=w;f<x-r;f++)y=f+n,(m=f+r)in b?b[y]=b[m]:delete b[y];for(f=x;f>x-r+n;f--)delete b[f-1]}else if(n>r)for(f=x-r;f>w;f--)y=f+n-1,(m=f+r-1)in b?b[y]=b[m]:delete b[y];for(f=0;f<n;f++)b[f+w]=arguments[f+2];return b.length=x-r+n,o}})},"Xv5+":function(t){var e=Math.expm1,n=Math.exp;t.exports=!e||e(10)>22025.465794806718||e(10)<22025.465794806718||-2e-17!=e(-2e-17)?function(t){return 0==(t=+t)?t:t>-1e-6&&t<1e-6?t+t*t/2:n(t)-1}:e},Y4kN:function(t,e,n){var r=n("JRM0"),o=n("+iL7"),i=n("KQNm").f;r({target:"Object",stat:!0,forced:o((function(){return!Object.getOwnPropertyNames(1)}))},{getOwnPropertyNames:i})},YQGq:function(t,e,n){"use strict";var r=n("JRM0"),o=n("9pAD"),i=n("fr05"),a=n("ZK/t"),s=n("d5e9");r({target:"Array",proto:!0},{at:function(t){var e=o(this),n=i(e),r=a(t),s=r>=0?r:n+r;return s<0||s>=n?void 0:e[s]}}),s("at")},YRMr:function(t,e,n){var r=n("nEaP"),o=n("ZK/t"),i=n("zrDt"),a=r.RangeError;t.exports=function(t){if(void 0===t)return 0;var e=o(t),n=i(e);if(e!==n)throw a("Wrong length or index");return n}},YURd:function(t,e,n){var r=n("+iL7"),o=n("nEaP").RegExp;t.exports=r((function(){var t=o("(?<a>b)","g");return"b"!==t.exec("b").groups.a||"bc"!=="b".replace(t,"$<a>c")}))},YVp5:function(t,e,n){n("JRM0")({target:"Reflect",stat:!0},{ownKeys:n("LMdw")})},YZdy:function(t,e,n){var r=n("rxbk");t.exports=/web0s(?!.*chrome)/i.test(r)},Ya6V:function(t,e,n){var r=n("nEaP"),o=Object.defineProperty;t.exports=function(t,e){try{o(r,t,{value:e,configurable:!0,writable:!0})}catch(n){r[t]=e}return e}},YxGO:function(t,e,n){var r=n("fSIz"),o=n("nEaP");t.exports="process"==r(o.process)},YySF:function(t,e,n){"use strict";var r=n("JRM0"),o=n("jid/");r({target:"String",proto:!0,forced:n("Uo50")("small")},{small:function(){return o(this,"small","","")}})},Z1fm:function(t,e,n){"use strict";var r=n("Hvpk"),o=n("+iL7"),i=n("gDYM"),a=n("w/Ji"),s=n("QvVa"),u=Error.prototype.toString,c=o((function(){if(r){var t=a(Object.defineProperty({},"name",{get:function(){return this===t}}));if("true"!==u.call(t))return!0}return"2: 1"!==u.call({message:1,name:2})||"Error"!==u.call({})}));t.exports=c?function(){var t=i(this),e=s(t.name,"Error"),n=s(t.message);return e?n?e+": "+n:e:n}:u},ZAKC:function(t,e,n){var r=n("JRM0"),o=n("WGD3"),i=n("M/tt"),a=n("9pAD"),s=n("AvGt"),u=n("fr05"),c=o([].push),l=o([].join);r({target:"String",stat:!0},{raw:function(t){for(var e=i(a(t).raw),n=u(e),r=arguments.length,o=[],f=0;n>f;){if(c(o,s(e[f++])),f===n)return l(o,"");f<r&&c(o,s(arguments[f]))}}})},ZEAQ:function(t,e,n){"use strict";var r=n("JRM0"),o=n("nEaP"),i=n("WGD3"),a=n("ZK/t"),s=n("Qtiq"),u=n("BnTm"),c=n("+iL7"),l=o.RangeError,f=o.String,h=Math.floor,d=i(u),p=i("".slice),v=i(1..toFixed),g=function t(e,n,r){return 0===n?r:n%2==1?t(e,n-1,r*e):t(e*e,n/2,r)},m=function(t,e,n){for(var r=-1,o=n;++r<6;)t[r]=(o+=e*t[r])%1e7,o=h(o/1e7)},y=function(t,e){for(var n=6,r=0;--n>=0;)t[n]=h((r+=t[n])/e),r=r%e*1e7},b=function(t){for(var e=6,n="";--e>=0;)if(""!==n||0===e||0!==t[e]){var r=f(t[e]);n=""===n?r:n+d("0",7-r.length)+r}return n};r({target:"Number",proto:!0,forced:c((function(){return"0.000"!==v(8e-5,3)||"1"!==v(.9,0)||"1.25"!==v(1.255,2)||"1000000000000000128"!==v(0xde0b6b3a7640080,0)}))||!c((function(){v({})}))},{toFixed:function(t){var e,n,r,o,i=s(this),u=a(t),c=[0,0,0,0,0,0],h="",v="0";if(u<0||u>20)throw l("Incorrect fraction digits");if(i!=i)return"NaN";if(i<=-1e21||i>=1e21)return f(i);if(i<0&&(h="-",i=-i),i>1e-21)if(n=(e=function(t){for(var e=0,n=t;n>=4096;)e+=12,n/=4096;for(;n>=2;)e+=1,n/=2;return e}(i*g(2,69,1))-69)<0?i*g(2,-e,1):i/g(2,e,1),n*=4503599627370496,(e=52-e)>0){for(m(c,0,n),r=u;r>=7;)m(c,1e7,0),r-=7;for(m(c,g(10,r,1),0),r=e-1;r>=23;)y(c,1<<23),r-=23;y(c,1<<r),m(c,1,1),y(c,2),v=b(c)}else m(c,0,n),m(c,1<<-e,0),v=b(c)+d("0",u);return v=u>0?h+((o=v.length)<=u?"0."+d("0",u-o)+v:p(v,0,o-u)+"."+p(v,o-u)):h+v}})},ZJUF:function(t,e,n){n("JRM0")({target:"Number",stat:!0},{MAX_SAFE_INTEGER:9007199254740991})},"ZK/t":function(t){var e=Math.ceil,n=Math.floor;t.exports=function(t){var r=+t;return r!=r||0===r?0:(r>0?n:e)(r)}},ZXyM:function(t,e,n){var r=n("WGD3"),o=n("0K2p"),i=Date.prototype,a="Invalid Date",s="toString",u=r(i.toString),c=r(i.getTime);String(new Date(NaN))!=a&&o(i,s,(function(){var t=c(this);return t==t?u(this):a}))},Zpea:function(t,e,n){var r=n("nEaP"),o=n("ZK/t"),i=r.RangeError;t.exports=function(t){var e=o(t);if(e<0)throw i("The argument can't be less than 0");return e}},ZrY6:function(t,e,n){var r=n("JRM0"),o=n("maYj"),i=n("ztTQ");r({target:"Object",stat:!0},{fromEntries:function(t){var e={};return o(t,(function(t,n){i(e,t,n)}),{AS_ENTRIES:!0}),e}})},a59c:function(t,e,n){var r=n("nEaP"),o=n("OzTt"),i=n("gDYM"),a=n("PGFG"),s=n("fSIz"),u=n("hVpg"),c=r.TypeError;t.exports=function(t,e){var n=t.exec;if(a(n)){var r=o(n,t,e);return null!==r&&i(r),r}if("RegExp"===s(t))return o(u,t,e);throw c("RegExp#exec called on incompatible receiver")}},a6dz:function(t,e,n){var r=n("fT8P"),o=Math.floor;t.exports=Number.isInteger||function(t){return!r(t)&&isFinite(t)&&o(t)===t}},a72Q:function(t,e,n){var r=n("WGD3"),o=n("sK41"),i=n("tlZM"),a=r(r.bind);t.exports=function(t,e){return o(t),void 0===e?t:i?a(t,e):function(){return t.apply(e,arguments)}}},aEH2:function(t,e,n){n("iPZ8"),n("kypl"),n("KcJv"),n("XJHa"),n("NO6N"),n("pCzD"),n("aNIS"),n("u1l9"),n("UHK9"),n("qO//"),n("ag/i"),n("26qs"),n("XXOr"),n("NISO"),n("11tc"),n("OaJQ"),n("ykSQ"),n("v78j"),n("ume/"),n("YQGq"),n("hi3g"),n("KnrE"),n("7qfE"),n("C4nn"),n("lYjL"),n("IlJM"),n("FWxf"),n("Se8w"),n("SJSz"),n("RtS0"),n("4owi"),n("IvQZ"),n("uQK7"),n("o5JG"),n("/YXa"),n("8cZI"),n("8rZV"),n("lmye"),n("hTH9"),n("x3Br"),n("8Av2"),n("Tsb7"),n("WB5j"),n("lAJ5"),n("aOEW"),n("v+MS"),n("Xlt+"),n("bEJU"),n("RsBt"),n("F4s9"),n("op7M"),n("JT/7"),n("1sJv"),n("BDyu"),n("6QkG"),n("4yXh"),n("lvot"),n("pKr/"),n("RWcT"),n("X21e"),n("ZXyM"),n("Ki2h"),n("GCui"),n("iXYm"),n("D/wG"),n("Ut8V"),n("oncN"),n("1Z5j"),n("1Qwx"),n("pJGf"),n("ArYU"),n("NZIh"),n("526l"),n("akAd"),n("JLHK"),n("ekdp"),n("IfeN"),n("Pe4Z"),n("TlnR"),n("wObw"),n("Rl66"),n("eUWX"),n("uAsx"),n("VyG4"),n("uJcu"),n("aR7f"),n("x+Sn"),n("fp7Y"),n("xeeI"),n("Pgdl"),n("ydrk"),n("SQIU"),n("i+rb"),n("ZJUF"),n("Nfll"),n("LW6M"),n("+XsM"),n("UYaP"),n("ZEAQ"),n("6uKX"),n("wCa+"),n("wk30"),n("PTK/"),n("c5sl"),n("EQuw"),n("dhi5"),n("zSSO"),n("u/xS"),n("ZrY6"),n("PM3k"),n("m37F"),n("Y4kN"),n("o9/u"),n("xWgW"),n("yEA/"),n("1ihM"),n("hKfv"),n("FOvO"),n("SUr3"),n("E/vp"),n("S/BG"),n("o29/"),n("RrfL"),n("4GBK"),n("JBxO"),n("JjHl"),n("St4I"),n("yPLR"),n("FdtR"),n("Ffmu"),n("AT/g"),n("QDHd"),n("oLsI"),n("AHPp"),n("bggm"),n("L0xw"),n("enkF"),n("i6eu"),n("dQW1"),n("hMrN"),n("9R9e"),n("YVp5"),n("btft"),n("NRL2"),n("SB7D"),n("FbR/"),n("CfbV"),n("2jC7"),n("Muwe"),n("M9Nf"),n("+VB/"),n("Nx4O"),n("9UJh"),n("RsMT"),n("pZEX"),n("VyTv"),n("dYvz"),n("6Uyv"),n("4NM0"),n("WoWj"),n("w13K"),n("9yb3"),n("uXbS"),n("e+qc"),n("ZAKC"),n("chvs"),n("y89P"),n("wLDV"),n("X5mX"),n("aZFp"),n("MTDe"),n("PNx8"),n("SgDD"),n("F28z"),n("W7E7"),n("zSDB"),n("mslO"),n("HAuY"),n("D5rU"),n("6lz5"),n("jqTn"),n("eyPT"),n("ApFe"),n("y8Ly"),n("YySF"),n("Kxz6"),n("DnCL"),n("veAN"),n("D0Fs"),n("APoS"),n("uTy6"),n("pY4j"),n("Nu6h"),n("kPpV"),n("q2Qn"),n("W9dP"),n("OlPo"),n("I06j"),n("/usm"),n("HJh7"),n("BqNe"),n("HKDy"),n("OgzJ"),n("lCat"),n("EApN"),n("0w+R"),n("MFGm"),n("lZgT"),n("JzGb"),n("WH+p"),n("xg3p"),n("soU3"),n("/xTX"),n("ajWl"),n("s5En"),n("EjQN"),n("36lJ"),n("fD/E"),n("LWud"),n("AxL9"),n("HztR"),n("xmYR"),n("cF0Y"),n("+3Yi"),n("qoNQ"),n("rTzs"),n("3qk3"),n("7fup"),n("3dw1"),n("U00V"),n("55Zx"),n("xZ2g"),n("i1Wr"),n("F9vW"),n("qwoB"),n("km/T"),n("4SRy"),n("9DLp"),n("f5ON"),n("SeWL"),t.exports=n("lUv3")},aNIS:function(t,e,n){n("B3nq")("match")},aOEW:function(t,e,n){"use strict";var r=n("JRM0"),o=n("WGD3"),i=n("sK41"),a=n("9pAD"),s=n("fr05"),u=n("AvGt"),c=n("+iL7"),l=n("iKwF"),f=n("fK/z"),h=n("Hou8"),d=n("nrpS"),p=n("G5hJ"),v=n("EnJw"),g=[],m=o(g.sort),y=o(g.push),b=c((function(){g.sort(void 0)})),x=c((function(){g.sort(null)})),w=f("sort"),_=!c((function(){if(p)return p<70;if(!(h&&h>3)){if(d)return!0;if(v)return v<603;var t,e,n,r,o="";for(t=65;t<76;t++){switch(e=String.fromCharCode(t),t){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(r=0;r<47;r++)g.push({k:e+r,v:n})}for(g.sort((function(t,e){return e.v-t.v})),r=0;r<g.length;r++)e=g[r].k.charAt(0),o.charAt(o.length-1)!==e&&(o+=e);return"DGBEFHACIJK"!==o}}));r({target:"Array",proto:!0,forced:b||!x||!w||!_},{sort:function(t){void 0!==t&&i(t);var e=a(this);if(_)return void 0===t?m(e):m(e,t);var n,r,o=[],c=s(e);for(r=0;r<c;r++)r in e&&y(o,e[r]);for(l(o,function(t){return function(e,n){return void 0===n?-1:void 0===e?1:void 0!==t?+t(e,n)||0:u(e)>u(n)?1:-1}}(t)),n=o.length,r=0;r<n;)e[r]=o[r++];for(;r<c;)delete e[r++];return e}})},aR7f:function(t,e,n){n("1tiZ")(Math,"Math",!0)},aZFp:function(t,e,n){"use strict";var r=n("R/cv"),o=n("OzTt"),i=n("WGD3"),a=n("+5TE"),s=n("GrtF"),u=n("gDYM"),c=n("Qean"),l=n("6ka5"),f=n("JtDR"),h=n("zrDt"),d=n("AvGt"),p=n("Krfs"),v=n("bSfA"),g=n("a59c"),m=n("hVpg"),y=n("BqYr"),b=n("+iL7"),x=y.UNSUPPORTED_Y,w=4294967295,_=Math.min,E=[].push,R=i(/./.exec),C=i(E),S=i("".slice),O=!b((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));a("split",(function(t,e,n){var i;return i="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,n){var i=d(c(this)),a=void 0===n?w:n>>>0;if(0===a)return[];if(void 0===t)return[i];if(!s(t))return o(e,i,t,a);for(var u,l,f,h=[],p=0,g=new RegExp(t.source,(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":"")+"g");(u=o(m,g,i))&&!((l=g.lastIndex)>p&&(C(h,S(i,p,u.index)),u.length>1&&u.index<i.length&&r(E,h,v(u,1)),f=u[0].length,p=l,h.length>=a));)g.lastIndex===u.index&&g.lastIndex++;return p===i.length?!f&&R(g,"")||C(h,""):C(h,S(i,p)),h.length>a?v(h,0,a):h}:"0".split(void 0,0).length?function(t,n){return void 0===t&&0===n?[]:o(e,this,t,n)}:e,[function(e,n){var r=c(this),a=null==e?void 0:p(e,t);return a?o(a,e,r,n):o(i,d(r),e,n)},function(t,r){var o=u(this),a=d(t),s=n(i,o,a,r,i!==e);if(s.done)return s.value;var c=l(o,RegExp),p=o.unicode,v=new c(x?"^(?:"+o.source+")":o,(o.ignoreCase?"i":"")+(o.multiline?"m":"")+(o.unicode?"u":"")+(x?"g":"y")),m=void 0===r?w:r>>>0;if(0===m)return[];if(0===a.length)return null===g(v,a)?[a]:[];for(var y=0,b=0,E=[];b<a.length;){v.lastIndex=x?0:b;var R,O=g(v,x?S(a,b):a);if(null===O||(R=_(h(v.lastIndex+(x?b:0)),a.length))===y)b=f(a,b,p);else{if(C(E,S(a,y,b)),E.length===m)return E;for(var A=1;A<=O.length-1;A++)if(C(E,O[A]),E.length===m)return E;b=y=R}}return C(E,S(a,y)),E}]}),!O,x)},"ag/i":function(t,e,n){n("B3nq")("species")},ajWl:function(t,e,n){"use strict";var r=n("Xiyl"),o=n("SmY9").left,i=r.aTypedArray;(0,r.exportTypedArrayMethod)("reduce",(function(t){var e=arguments.length;return o(i(this),t,e,e>1?arguments[1]:void 0)}))},akAd:function(t,e,n){var r=n("JRM0"),o=Math.floor,i=Math.log,a=Math.LOG2E;r({target:"Math",stat:!0},{clz32:function(t){return(t>>>=0)?31-o(i(t+.5)*a):32}})},b3pM:function(t,e,n){var r=n("W9fh"),o=n("u5rE");t.exports=function(t){var e=r(t,"string");return o(e)?e:e+""}},b82F:function(t,e,n){var r=n("+iL7");t.exports=!r((function(){return Object.isExtensible(Object.preventExtensions({}))}))},bEJU:function(t,e,n){n("d5e9")("flat")},bSfA:function(t,e,n){var r=n("nEaP"),o=n("glsI"),i=n("fr05"),a=n("ztTQ"),s=r.Array,u=Math.max;t.exports=function(t,e,n){for(var r=i(t),c=o(e,r),l=o(void 0===n?r:n,r),f=s(u(l-c,0)),h=0;c<l;c++,h++)a(f,h,t[c]);return f.length=h,f}},bggm:function(t,e,n){var r=n("JRM0"),o=n("Hvpk"),i=n("gDYM"),a=n("b3pM"),s=n("nRc6");r({target:"Reflect",stat:!0,forced:n("+iL7")((function(){Reflect.defineProperty(s.f({},1,{value:1}),1,{value:2})})),sham:!o},{defineProperty:function(t,e,n){i(t);var r=a(e);i(n);try{return s.f(t,r,n),!0}catch(t){return!1}}})},btft:function(t,e,n){var r=n("JRM0"),o=n("UVdV"),i=n("gDYM");r({target:"Reflect",stat:!0,sham:!n("b82F")},{preventExtensions:function(t){i(t);try{var e=o("Object","preventExtensions");return e&&e(t),!0}catch(t){return!1}}})},c5sl:function(t,e,n){var r=n("JRM0"),o=n("Hvpk"),i=n("11ZY").f;r({target:"Object",stat:!0,forced:Object.defineProperties!==i,sham:!o},{defineProperties:i})},cF0Y:function(t,e,n){"use strict";var r=n("Xiyl").exportTypedArrayMethod,o=n("+iL7"),i=n("nEaP"),a=n("WGD3"),s=i.Uint8Array,u=s&&s.prototype||{},c=[].toString,l=a([].join);o((function(){c.call({})}))&&(c=function(){return l(this)}),r("toString",c,u.toString!=c)},chvs:function(t,e,n){n("JRM0")({target:"String",proto:!0},{repeat:n("BnTm")})},clxC:function(t,e,n){var r=n("G5hJ"),o=n("+iL7");t.exports=!!Object.getOwnPropertySymbols&&!o((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&r&&r<41}))},d5e9:function(t,e,n){var r=n("GHf2"),o=n("w/Ji"),i=n("nRc6"),a=r("unscopables"),s=Array.prototype;null==s[a]&&i.f(s,a,{configurable:!0,value:o(null)}),t.exports=function(t){s[a][t]=!0}},dOmT:function(t,e,n){var r=n("+iL7"),o=n("nEaP").RegExp;t.exports=r((function(){var t=o(".","s");return!(t.dotAll&&t.exec("\n")&&"s"===t.flags)}))},dQW1:function(t,e,n){var r=n("JRM0"),o=n("gDYM"),i=n("XOJ6");r({target:"Reflect",stat:!0,sham:!n("XleP")},{getPrototypeOf:function(t){return i(o(t))}})},dYvz:function(t,e,n){"use strict";var r,o=n("JRM0"),i=n("WGD3"),a=n("Fup7").f,s=n("zrDt"),u=n("AvGt"),c=n("9dC0"),l=n("Qean"),f=n("O5TI"),h=n("PCqT"),d=i("".endsWith),p=i("".slice),v=Math.min,g=f("endsWith");o({target:"String",proto:!0,forced:!!(h||g||(r=a(String.prototype,"endsWith"),!r||r.writable))&&!g},{endsWith:function(t){var e=u(l(this));c(t);var n=arguments.length>1?arguments[1]:void 0,r=e.length,o=void 0===n?r:v(s(n),r),i=u(t);return d?d(e,i,o):p(e,o-i.length,o)===i}})},dhi5:function(t,e,n){"use strict";var r=n("JRM0"),o=n("Hvpk"),i=n("mMsL"),a=n("sK41"),s=n("9pAD"),u=n("nRc6");o&&r({target:"Object",proto:!0,forced:i},{__defineSetter__:function(t,e){u.f(s(this),t,{set:a(e),enumerable:!0,configurable:!0})}})},dxhH:function(t,e,n){"use strict";var r=n("nRc6").f,o=n("w/Ji"),i=n("xxLW"),a=n("a72Q"),s=n("iBt0"),u=n("maYj"),c=n("vtID"),l=n("V2sW"),f=n("Hvpk"),h=n("CwSR").fastKey,d=n("SkE4"),p=d.set,v=d.getterFor;t.exports={getConstructor:function(t,e,n,c){var l=t((function(t,r){s(t,d),p(t,{type:e,index:o(null),first:void 0,last:void 0,size:0}),f||(t.size=0),null!=r&&u(r,t[c],{that:t,AS_ENTRIES:n})})),d=l.prototype,g=v(e),m=function(t,e,n){var r,o,i=g(t),a=y(t,e);return a?a.value=n:(i.last=a={index:o=h(e,!0),key:e,value:n,previous:r=i.last,next:void 0,removed:!1},i.first||(i.first=a),r&&(r.next=a),f?i.size++:t.size++,"F"!==o&&(i.index[o]=a)),t},y=function(t,e){var n,r=g(t),o=h(e);if("F"!==o)return r.index[o];for(n=r.first;n;n=n.next)if(n.key==e)return n};return i(d,{clear:function(){for(var t=g(this),e=t.index,n=t.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete e[n.index],n=n.next;t.first=t.last=void 0,f?t.size=0:this.size=0},delete:function(t){var e=this,n=g(e),r=y(e,t);if(r){var o=r.next,i=r.previous;delete n.index[r.index],r.removed=!0,i&&(i.next=o),o&&(o.previous=i),n.first==r&&(n.first=o),n.last==r&&(n.last=i),f?n.size--:e.size--}return!!r},forEach:function(t){for(var e,n=g(this),r=a(t,arguments.length>1?arguments[1]:void 0);e=e?e.next:n.first;)for(r(e.value,e.key,this);e&&e.removed;)e=e.previous},has:function(t){return!!y(this,t)}}),i(d,n?{get:function(t){var e=y(this,t);return e&&e.value},set:function(t,e){return m(this,0===t?0:t,e)}}:{add:function(t){return m(this,t=0===t?0:t,t)}}),f&&r(d,"size",{get:function(){return g(this).size}}),l},setStrong:function(t,e,n){var r=e+" Iterator",o=v(e),i=v(r);c(t,e,(function(t,e){p(this,{type:r,target:t,state:o(t),kind:e,last:void 0})}),(function(){for(var t=i(this),e=t.kind,n=t.last;n&&n.removed;)n=n.previous;return t.target&&(t.last=n=n?n.next:t.state.first)?"keys"==e?{value:n.key,done:!1}:"values"==e?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(t.target=void 0,{value:void 0,done:!0})}),n?"entries":"values",!n,!0),l(e)}}},"e+qc":function(t,e,n){"use strict";var r=n("JRM0"),o=n("mEUw").start;r({target:"String",proto:!0,forced:n("uz20")},{padStart:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}})},eCSz:function(t,e,n){var r=n("+iL7");t.exports=r((function(){if("function"==typeof ArrayBuffer){var t=new ArrayBuffer(8);Object.isExtensible(t)&&Object.defineProperty(t,"a",{value:8})}}))},eUWX:function(t,e,n){var r=n("JRM0"),o=Math.log,i=Math.LN2;r({target:"Math",stat:!0},{log2:function(t){return o(t)/i}})},"ek/P":function(t){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},ekdp:function(t,e,n){var r=n("JRM0"),o=n("Xv5+");r({target:"Math",stat:!0,forced:o!=Math.expm1},{expm1:o})},enkF:function(t,e,n){var r=n("JRM0"),o=n("OzTt"),i=n("fT8P"),a=n("gDYM"),s=n("/OaT"),u=n("Fup7"),c=n("XOJ6");r({target:"Reflect",stat:!0},{get:function t(e,n){var r,l,f=arguments.length<3?e:arguments[2];return a(e)===f?e[n]:(r=u.f(e,n))?s(r)?r.value:void 0===r.get?void 0:o(r.get,f):i(l=c(e))?t(l,n,f):void 0}})},ensb:function(t,e,n){"use strict";function r(t,e){if("string"==typeof t.type)return null;const n=t.__;if(!n)return;let o=n.__k;if(o){Array.isArray(o)||(o=[o]);let e=o.indexOf(t);-1===e&&(e=o.length);for(let t=e;t--;){const e=o[t],n=e&&e.__e||r(e,!0);if(n)return n}}return e?void 0:r(n)}function o(t){function e(){i.Component.call(this),n||(this.componentWillMount=()=>{t((t=>{n=t&&t.default||t,this.setState({})}))},this.shouldComponentUpdate=()=>null!=n),this.render=t=>{if(n)return Object(i.h)(n,t);const e=r(this.__v),o=e&&e.nextSibling||(this.__P||this._parentDom).firstChild;return o&&Object(i.h)(o.localName,{dangerouslySetInnerHTML:a})}}let n;return e.preload=t,(e.prototype=new i.Component).constructor=e,e}n.d(e,"a",(function(){return o}));var i=n("hosL");const a={}},eyPT:function(t,e,n){"use strict";var r=n("JRM0"),o=n("jid/");r({target:"String",proto:!0,forced:n("Uo50")("fontsize")},{fontsize:function(t){return o(this,"font","size",t)}})},f5ON:function(t,e,n){"use strict";var r=n("JRM0"),o=n("OzTt");r({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return o(URL.prototype.toString,this)}})},"fD/E":function(t,e,n){"use strict";var r=n("Xiyl"),o=n("RN4W"),i=n("+iL7"),a=n("i6bU"),s=r.aTypedArray;(0,r.exportTypedArrayMethod)("slice",(function(t,e){for(var n=a(s(this),t,e),r=o(this),i=0,u=n.length,c=new r(u);u>i;)c[i]=n[i++];return c}),i((function(){new Int8Array(1).slice()})))},"fK/z":function(t,e,n){"use strict";var r=n("+iL7");t.exports=function(t,e){var n=[][t];return!!n&&r((function(){n.call(null,e||function(){return 1},1)}))}},fM6A:function(t,e,n){"use strict";var r=n("kXs/").IteratorPrototype,o=n("w/Ji"),i=n("VSW8"),a=n("1tiZ"),s=n("q/gS"),u=function(){return this};t.exports=function(t,e,n,c){var l=e+" Iterator";return t.prototype=o(r,{next:i(+!c,n)}),a(t,l,!1,!0),s[l]=u,t}},fSIz:function(t,e,n){var r=n("WGD3"),o=r({}.toString),i=r("".slice);t.exports=function(t){return i(o(t),8,-1)}},fT8P:function(t,e,n){var r=n("PGFG");t.exports=function(t){return"object"==typeof t?null!==t:r(t)}},fp7Y:function(t,e,n){"use strict";var r=n("Hvpk"),o=n("nEaP"),i=n("WGD3"),a=n("9nX2"),s=n("0K2p"),u=n("jP2f"),c=n("5CFb"),l=n("+n59"),f=n("u5rE"),h=n("W9fh"),d=n("+iL7"),p=n("OVha").f,v=n("Fup7").f,g=n("nRc6").f,m=n("Qtiq"),y=n("H0Ge").trim,b="Number",x=o.Number,w=x.prototype,_=o.TypeError,E=i("".slice),R=i("".charCodeAt),C=function(t){var e=h(t,"number");return"bigint"==typeof e?e:S(e)},S=function(t){var e,n,r,o,i,a,s,u,c=h(t,"number");if(f(c))throw _("Cannot convert a Symbol value to a number");if("string"==typeof c&&c.length>2)if(c=y(c),43===(e=R(c,0))||45===e){if(88===(n=R(c,2))||120===n)return NaN}else if(48===e){switch(R(c,1)){case 66:case 98:r=2,o=49;break;case 79:case 111:r=8,o=55;break;default:return+c}for(a=(i=E(c,2)).length,s=0;s<a;s++)if((u=R(i,s))<48||u>o)return NaN;return parseInt(i,r)}return+c};if(a(b,!x(" 0o1")||!x("0b1")||x("+0x1"))){for(var O,A=function(t){var e=arguments.length<1?0:x(C(t)),n=this;return l(w,n)&&d((function(){m(n)}))?c(Object(e),n,A):e},I=r?p(x):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),k=0;I.length>k;k++)u(x,O=I[k])&&!u(A,O)&&g(A,O,v(x,O));A.prototype=w,w.constructor=A,s(o,b,A)}},fr05:function(t,e,n){var r=n("zrDt");t.exports=function(t){return r(t.length)}},fshm:function(t,e,n){var r=n("nEaP"),o=n("k2M3"),i=n("PGFG"),a=n("fSIz"),s=n("GHf2")("toStringTag"),u=r.Object,c="Arguments"==a(function(){return arguments}());t.exports=o?a:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=u(t),s))?n:c?a(e):"Object"==(r=a(e))&&i(e.callee)?"Arguments":r}},gDYM:function(t,e,n){var r=n("nEaP"),o=n("fT8P"),i=r.String,a=r.TypeError;t.exports=function(t){if(o(t))return t;throw a(i(t)+" is not an object")}},gIo2:function(t,e,n){var r=n("PCqT"),o=n("MoOl");(t.exports=function(t,e){return o[t]||(o[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.21.1",mode:r?"pure":"global",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.21.1/LICENSE",source:"https://github.com/zloirock/core-js"})},glsI:function(t,e,n){var r=n("ZK/t"),o=Math.max,i=Math.min;t.exports=function(t,e){var n=r(t);return n<0?o(n+e,0):i(n,e)}},gmtn:function(t){t.exports=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}}},"h/Mk":function(t,e,n){var r=n("fSIz");t.exports=Array.isArray||function(t){return"Array"==r(t)}},hKfv:function(t,e,n){var r=n("JRM0"),o=n("+iL7"),i=n("fT8P"),a=n("fSIz"),s=n("eCSz"),u=Object.isFrozen;r({target:"Object",stat:!0,forced:o((function(){u(1)}))||s},{isFrozen:function(t){return!i(t)||(!(!s||"ArrayBuffer"!=a(t))||!!u&&u(t))}})},hMrN:function(t,e,n){n("JRM0")({target:"Reflect",stat:!0},{has:function(t,e){return e in t}})},hQLn:function(t,e,n){var r=n("WGD3"),o=n("gDYM"),i=n("7P5K");t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=r(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(n,[]),e=n instanceof Array}catch(t){}return function(n,r){return o(n),i(r),e?t(n,r):n.__proto__=r,n}}():void 0)},hTH9:function(t,e,n){"use strict";var r=n("JRM0"),o=n("nEaP"),i=n("+iL7"),a=n("iGMQ"),s=n("ztTQ"),u=o.Array;r({target:"Array",stat:!0,forced:i((function(){function t(){}return!(u.of.call(t)instanceof t)}))},{of:function(){for(var t=0,e=arguments.length,n=new(a(this)?this:u)(e);e>t;)s(n,t,arguments[t++]);return n.length=e,n}})},hVpg:function(t,e,n){"use strict";var r,o,i=n("OzTt"),a=n("WGD3"),s=n("AvGt"),u=n("O2Ja"),c=n("BqYr"),l=n("gIo2"),f=n("w/Ji"),h=n("SkE4").get,d=n("dOmT"),p=n("YURd"),v=l("native-string-replace",String.prototype.replace),g=RegExp.prototype.exec,m=g,y=a("".charAt),b=a("".indexOf),x=a("".replace),w=a("".slice),_=(o=/b*/g,i(g,r=/a/,"a"),i(g,o,"a"),0!==r.lastIndex||0!==o.lastIndex),E=c.BROKEN_CARET,R=void 0!==/()??/.exec("")[1];(_||R||E||d||p)&&(m=function(t){var e,n,r,o,a,c,l,d=this,p=h(d),C=s(t),S=p.raw;if(S)return S.lastIndex=d.lastIndex,e=i(m,S,C),d.lastIndex=S.lastIndex,e;var O=p.groups,A=E&&d.sticky,I=i(u,d),k=d.source,T=0,M=C;if(A&&(I=x(I,"y",""),-1===b(I,"g")&&(I+="g"),M=w(C,d.lastIndex),d.lastIndex>0&&(!d.multiline||d.multiline&&"\n"!==y(C,d.lastIndex-1))&&(k="(?: "+k+")",M=" "+M,T++),n=new RegExp("^(?:"+k+")",I)),R&&(n=new RegExp("^"+k+"$(?!\\s)",I)),_&&(r=d.lastIndex),o=i(g,A?n:d,M),A?o?(o.input=w(o.input,T),o[0]=w(o[0],T),o.index=d.lastIndex,d.lastIndex+=o[0].length):d.lastIndex=0:_&&o&&(d.lastIndex=d.global?o.index+o[0].length:r),R&&o&&o.length>1&&i(v,o[0],n,(function(){for(a=1;a<arguments.length-2;a++)void 0===arguments[a]&&(o[a]=void 0)})),o&&O)for(o.groups=c=f(null),a=0;a<O.length;a++)c[(l=O[a])[0]]=o[l[1]];return o}),t.exports=m},hWbQ:function(t,e,n){var r=n("nEaP").isFinite;t.exports=Number.isFinite||function(t){return"number"==typeof t&&r(t)}},hXTI:function(t,e,n){var r=n("nEaP");t.exports=r.Promise},hi3g:function(t,e,n){"use strict";var r=n("JRM0"),o=n("nEaP"),i=n("+iL7"),a=n("h/Mk"),s=n("fT8P"),u=n("9pAD"),c=n("fr05"),l=n("ztTQ"),f=n("iSxr"),h=n("WCig"),d=n("GHf2"),p=n("G5hJ"),v=d("isConcatSpreadable"),g=9007199254740991,m="Maximum allowed index exceeded",y=o.TypeError,b=p>=51||!i((function(){var t=[];return t[v]=!1,t.concat()[0]!==t})),x=h("concat"),w=function(t){if(!s(t))return!1;var e=t[v];return void 0!==e?!!e:a(t)};r({target:"Array",proto:!0,forced:!b||!x},{concat:function(){var t,e,n,r,o,i=u(this),a=f(i,0),s=0;for(t=-1,n=arguments.length;t<n;t++)if(w(o=-1===t?i:arguments[t])){if(s+(r=c(o))>g)throw y(m);for(e=0;e<r;e++,s++)e in o&&l(a,s,o[e])}else{if(s>=g)throw y(m);l(a,s++,o)}return a.length=s,a}})},hosL:function(t,e,n){"use strict";function r(t,e){for(var n in e)t[n]=e[n];return t}function o(t){var e=t.parentNode;e&&e.removeChild(t)}function i(t,e,n){var r,o,i,s={};for(i in e)"key"==i?r=e[i]:"ref"==i?o=e[i]:s[i]=e[i];if(arguments.length>2&&(s.children=arguments.length>3?M.call(arguments,2):n),"function"==typeof t&&null!=t.defaultProps)for(i in t.defaultProps)void 0===s[i]&&(s[i]=t.defaultProps[i]);return a(t,s,r,o,null)}function a(t,e,n,r,o){var i={type:t,props:e,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:null==o?++P:o};return null==o&&null!=D.vnode&&D.vnode(i),i}function s(){return{current:null}}function u(t){return t.children}function c(t,e){this.props=t,this.context=e}function l(t,e){if(null==e)return t.__?l(t.__,t.__.__k.indexOf(t)+1):null;for(var n;e<t.__k.length;e++)if(null!=(n=t.__k[e])&&null!=n.__e)return n.__e;return"function"==typeof t.type?l(t):null}function f(t){var e,n;if(null!=(t=t.__)&&null!=t.__c){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if(null!=(n=t.__k[e])&&null!=n.__e){t.__e=t.__c.base=n.__e;break}return f(t)}}function h(t){(!t.__d&&(t.__d=!0)&&F.push(t)&&!d.__r++||j!==D.debounceRendering)&&((j=D.debounceRendering)||L)(d)}function d(){for(var t;d.__r=F.length;)t=F.sort((function(t,e){return t.__v.__b-e.__v.__b})),F=[],t.some((function(t){var e,n,o,i,a,s;t.__d&&(a=(i=(e=t).__v).__e,(s=e.__P)&&(n=[],(o=r({},i)).__v=i.__v+1,_(s,i,o,e.__n,void 0!==s.ownerSVGElement,null!=i.__h?[a]:null,n,null==a?l(i):a,i.__h),E(n,i),i.__e!=a&&f(i)))}))}function p(t,e,n,r,o,i,s,c,f,h){var d,p,g,y,b,x,w,E=r&&r.__k||U,R=E.length;for(n.__k=[],d=0;d<e.length;d++)if(null!=(y=n.__k[d]=null==(y=e[d])||"boolean"==typeof y?null:"string"==typeof y||"number"==typeof y||"bigint"==typeof y?a(null,y,null,null,y):Array.isArray(y)?a(u,{children:y},null,null,null):y.__b>0?a(y.type,y.props,y.key,null,y.__v):y)){if(y.__=n,y.__b=n.__b+1,null===(g=E[d])||g&&y.key==g.key&&y.type===g.type)E[d]=void 0;else for(p=0;p<R;p++){if((g=E[p])&&y.key==g.key&&y.type===g.type){E[p]=void 0;break}g=null}_(t,y,g=g||W,o,i,s,c,f,h),b=y.__e,(p=y.ref)&&g.ref!=p&&(w||(w=[]),g.ref&&w.push(g.ref,null,y),w.push(p,y.__c||b,y)),null!=b?(null==x&&(x=b),"function"==typeof y.type&&y.__k===g.__k?y.__d=f=v(y,f,t):f=m(t,y,g,E,b,f),"function"==typeof n.type&&(n.__d=f)):f&&g.__e==f&&f.parentNode!=t&&(f=l(g))}for(n.__e=x,d=R;d--;)null!=E[d]&&("function"==typeof n.type&&null!=E[d].__e&&E[d].__e==n.__d&&(n.__d=l(r,d+1)),S(E[d],E[d]));if(w)for(d=0;d<w.length;d++)C(w[d],w[++d],w[++d])}function v(t,e,n){for(var r,o=t.__k,i=0;o&&i<o.length;i++)(r=o[i])&&(r.__=t,e="function"==typeof r.type?v(r,e,n):m(n,r,r,o,r.__e,e));return e}function g(t,e){return e=e||[],null==t||"boolean"==typeof t||(Array.isArray(t)?t.some((function(t){g(t,e)})):e.push(t)),e}function m(t,e,n,r,o,i){var a,s,u;if(void 0!==e.__d)a=e.__d,e.__d=void 0;else if(null==n||o!=i||null==o.parentNode)t:if(null==i||i.parentNode!==t)t.appendChild(o),a=null;else{for(s=i,u=0;(s=s.nextSibling)&&u<r.length;u+=2)if(s==o)break t;t.insertBefore(o,i),a=i}return void 0!==a?a:o.nextSibling}function y(t,e,n){"-"===e[0]?t.setProperty(e,n):t[e]=null==n?"":"number"!=typeof n||G.test(e)?n:n+"px"}function b(t,e,n,r,o){var i;t:if("style"===e)if("string"==typeof n)t.style.cssText=n;else{if("string"==typeof r&&(t.style.cssText=r=""),r)for(e in r)n&&e in n||y(t.style,e,"");if(n)for(e in n)r&&n[e]===r[e]||y(t.style,e,n[e])}else if("o"===e[0]&&"n"===e[1])i=e!==(e=e.replace(/Capture$/,"")),e=e.toLowerCase()in t?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+i]=n,n?r||t.addEventListener(e,i?w:x,i):t.removeEventListener(e,i?w:x,i);else if("dangerouslySetInnerHTML"!==e){if(o)e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("href"!==e&&"list"!==e&&"form"!==e&&"tabIndex"!==e&&"download"!==e&&e in t)try{t[e]=null==n?"":n;break t}catch(t){}"function"==typeof n||(null!=n&&(!1!==n||"a"===e[0]&&"r"===e[1])?t.setAttribute(e,n):t.removeAttribute(e))}}function x(t){this.l[t.type+!1](D.event?D.event(t):t)}function w(t){this.l[t.type+!0](D.event?D.event(t):t)}function _(t,e,n,o,i,a,s,l,f){var h,d,v,g,m,y,b,x,w,_,E,C=e.type;if(void 0!==e.constructor)return null;null!=n.__h&&(f=n.__h,l=e.__e=n.__e,e.__h=null,a=[l]),(h=D.__b)&&h(e);try{t:if("function"==typeof C){if(x=e.props,w=(h=C.contextType)&&o[h.__c],_=h?w?w.props.value:h.__:o,n.__c?b=(d=e.__c=n.__c).__=d.__E:("prototype"in C&&C.prototype.render?e.__c=d=new C(x,_):(e.__c=d=new c(x,_),d.constructor=C,d.render=O),w&&w.sub(d),d.props=x,d.state||(d.state={}),d.context=_,d.__n=o,v=d.__d=!0,d.__h=[]),null==d.__s&&(d.__s=d.state),null!=C.getDerivedStateFromProps&&(d.__s==d.state&&(d.__s=r({},d.__s)),r(d.__s,C.getDerivedStateFromProps(x,d.__s))),g=d.props,m=d.state,v)null==C.getDerivedStateFromProps&&null!=d.componentWillMount&&d.componentWillMount(),null!=d.componentDidMount&&d.__h.push(d.componentDidMount);else{if(null==C.getDerivedStateFromProps&&x!==g&&null!=d.componentWillReceiveProps&&d.componentWillReceiveProps(x,_),!d.__e&&null!=d.shouldComponentUpdate&&!1===d.shouldComponentUpdate(x,d.__s,_)||e.__v===n.__v){d.props=x,d.state=d.__s,e.__v!==n.__v&&(d.__d=!1),d.__v=e,e.__e=n.__e,e.__k=n.__k,e.__k.forEach((function(t){t&&(t.__=e)})),d.__h.length&&s.push(d);break t}null!=d.componentWillUpdate&&d.componentWillUpdate(x,d.__s,_),null!=d.componentDidUpdate&&d.__h.push((function(){d.componentDidUpdate(g,m,y)}))}d.context=_,d.props=x,d.state=d.__s,(h=D.__r)&&h(e),d.__d=!1,d.__v=e,d.__P=t,h=d.render(d.props,d.state,d.context),d.state=d.__s,null!=d.getChildContext&&(o=r(r({},o),d.getChildContext())),v||null==d.getSnapshotBeforeUpdate||(y=d.getSnapshotBeforeUpdate(g,m)),E=null!=h&&h.type===u&&null==h.key?h.props.children:h,p(t,Array.isArray(E)?E:[E],e,n,o,i,a,s,l,f),d.base=e.__e,e.__h=null,d.__h.length&&s.push(d),b&&(d.__E=d.__=null),d.__e=!1}else null==a&&e.__v===n.__v?(e.__k=n.__k,e.__e=n.__e):e.__e=R(n.__e,e,n,o,i,a,s,f);(h=D.diffed)&&h(e)}catch(t){e.__v=null,(f||null!=a)&&(e.__e=l,e.__h=!!f,a[a.indexOf(l)]=null),D.__e(t,e,n)}}function E(t,e){D.__c&&D.__c(e,t),t.some((function(e){try{t=e.__h,e.__h=[],t.some((function(t){t.call(e)}))}catch(t){D.__e(t,e.__v)}}))}function R(t,e,n,r,i,a,s,u){var c,f,h,d=n.props,v=e.props,g=e.type,m=0;if("svg"===g&&(i=!0),null!=a)for(;m<a.length;m++)if((c=a[m])&&"setAttribute"in c==!!g&&(g?c.localName===g:3===c.nodeType)){t=c,a[m]=null;break}if(null==t){if(null===g)return document.createTextNode(v);t=i?document.createElementNS("http://www.w3.org/2000/svg",g):document.createElement(g,v.is&&v),a=null,u=!1}if(null===g)d===v||u&&t.data===v||(t.data=v);else{if(a=a&&M.call(t.childNodes),f=(d=n.props||W).dangerouslySetInnerHTML,h=v.dangerouslySetInnerHTML,!u){if(null!=a)for(d={},m=0;m<t.attributes.length;m++)d[t.attributes[m].name]=t.attributes[m].value;(h||f)&&(h&&(f&&h.__html==f.__html||h.__html===t.innerHTML)||(t.innerHTML=h&&h.__html||""))}if(function(t,e,n,r,o){var i;for(i in n)"children"===i||"key"===i||i in e||b(t,i,null,n[i],r);for(i in e)o&&"function"!=typeof e[i]||"children"===i||"key"===i||"value"===i||"checked"===i||n[i]===e[i]||b(t,i,e[i],n[i],r)}(t,v,d,i,u),h)e.__k=[];else if(m=e.props.children,p(t,Array.isArray(m)?m:[m],e,n,r,i&&"foreignObject"!==g,a,s,a?a[0]:n.__k&&l(n,0),u),null!=a)for(m=a.length;m--;)null!=a[m]&&o(a[m]);u||("value"in v&&void 0!==(m=v.value)&&(m!==t.value||"progress"===g&&!m||"option"===g&&m!==d.value)&&b(t,"value",m,d.value,!1),"checked"in v&&void 0!==(m=v.checked)&&m!==t.checked&&b(t,"checked",m,d.checked,!1))}return t}function C(t,e,n){try{"function"==typeof t?t(e):t.current=e}catch(t){D.__e(t,n)}}function S(t,e,n){var r,i;if(D.unmount&&D.unmount(t),(r=t.ref)&&(r.current&&r.current!==t.__e||C(r,null,e)),null!=(r=t.__c)){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(t){D.__e(t,e)}r.base=r.__P=null}if(r=t.__k)for(i=0;i<r.length;i++)r[i]&&S(r[i],e,"function"!=typeof t.type);n||null==t.__e||o(t.__e),t.__e=t.__d=void 0}function O(t,e,n){return this.constructor(t,n)}function A(t,e,n){var r,o,a;D.__&&D.__(t,e),o=(r="function"==typeof n)?null:n&&n.__k||e.__k,a=[],_(e,t=(!r&&n||e).__k=i(u,null,[t]),o||W,W,void 0!==e.ownerSVGElement,!r&&n?[n]:o?null:e.firstChild?M.call(e.childNodes):null,a,!r&&n?n:o?o.__e:e.firstChild,r),E(a,t)}function I(t,e){A(t,e,I)}function k(t,e,n){var o,i,s,u=r({},t.props);for(s in e)"key"==s?o=e[s]:"ref"==s?i=e[s]:u[s]=e[s];return arguments.length>2&&(u.children=arguments.length>3?M.call(arguments,2):n),a(t.type,u,o||t.key,i||t.ref,null)}function T(t,e){var n={__c:e="__cC"+B++,__:t,Consumer:function(t,e){return t.children(e)},Provider:function(t){var n,r;return this.getChildContext||(n=[],(r={})[e]=this,this.getChildContext=function(){return r},this.shouldComponentUpdate=function(t){this.props.value!==t.value&&n.some(h)},this.sub=function(t){n.push(t);var e=t.componentWillUnmount;t.componentWillUnmount=function(){n.splice(n.indexOf(t),1),e&&e.call(t)}}),t.children}};return n.Provider.__=n.Consumer.contextType=n}n.r(e),n.d(e,"render",(function(){return A})),n.d(e,"hydrate",(function(){return I})),n.d(e,"createElement",(function(){return i})),n.d(e,"h",(function(){return i})),n.d(e,"Fragment",(function(){return u})),n.d(e,"createRef",(function(){return s})),n.d(e,"isValidElement",(function(){return N})),n.d(e,"Component",(function(){return c})),n.d(e,"cloneElement",(function(){return k})),n.d(e,"createContext",(function(){return T})),n.d(e,"toChildArray",(function(){return g})),n.d(e,"options",(function(){return D}));var M,D,P,N,F,L,j,B,W={},U=[],G=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;M=U.slice,D={__e:function(t,e,n,r){for(var o,i,a;e=e.__;)if((o=e.__c)&&!o.__)try{if((i=o.constructor)&&null!=i.getDerivedStateFromError&&(o.setState(i.getDerivedStateFromError(t)),a=o.__d),null!=o.componentDidCatch&&(o.componentDidCatch(t,r||{}),a=o.__d),a)return o.__E=o}catch(e){t=e}throw t}},P=0,N=function(t){return null!=t&&void 0===t.constructor},c.prototype.setState=function(t,e){var n;n=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=r({},this.state),"function"==typeof t&&(t=t(r({},n),this.props)),t&&r(n,t),null!=t&&this.__v&&(e&&this.__h.push(e),h(this))},c.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),h(this))},c.prototype.render=u,F=[],L="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,d.__r=0,B=0},"i+rb":function(t,e,n){var r=n("JRM0"),o=n("a6dz"),i=Math.abs;r({target:"Number",stat:!0},{isSafeInteger:function(t){return o(t)&&i(t)<=9007199254740991}})},i1Wr:function(t,e,n){var r=n("UVdV"),o="DOMException";n("1tiZ")(r(o),o)},i6bU:function(t,e,n){var r=n("WGD3");t.exports=r([].slice)},i6eu:function(t,e,n){var r=n("JRM0"),o=n("Hvpk"),i=n("gDYM"),a=n("Fup7");r({target:"Reflect",stat:!0,sham:!o},{getOwnPropertyDescriptor:function(t,e){return a.f(i(t),e)}})},iBt0:function(t,e,n){var r=n("nEaP"),o=n("+n59"),i=r.TypeError;t.exports=function(t,e){if(o(e,t))return t;throw i("Incorrect invocation")}},iGMQ:function(t,e,n){var r=n("WGD3"),o=n("+iL7"),i=n("PGFG"),a=n("fshm"),s=n("UVdV"),u=n("/dUa"),c=function(){},l=[],f=s("Reflect","construct"),h=/^\s*(?:class|function)\b/,d=r(h.exec),p=!h.exec(c),v=function(t){if(!i(t))return!1;try{return f(c,l,t),!0}catch(t){return!1}},g=function(t){if(!i(t))return!1;switch(a(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return p||!!d(h,u(t))}catch(t){return!0}};g.sham=!0,t.exports=!f||o((function(){var t;return v(v.call)||!v(Object)||!v((function(){t=!0}))||t}))?g:v},iKwF:function(t,e,n){var r=n("bSfA"),o=Math.floor,i=function(t,e){for(var n,r,o=t.length,i=1;i<o;){for(r=i,n=t[i];r&&e(t[r-1],n)>0;)t[r]=t[--r];r!==i++&&(t[r]=n)}return t},a=function(t,e,n,r){for(var o=e.length,i=n.length,a=0,s=0;a<o||s<i;)t[a+s]=a<o&&s<i?r(e[a],n[s])<=0?e[a++]:n[s++]:a<o?e[a++]:n[s++];return t};t.exports=function t(e,n){var s=e.length,u=o(s/2);return s<8?i(e,n):a(e,t(r(e,0,u),n),t(r(e,u),n),n)}},iPZ8:function(t,e,n){"use strict";var r=n("JRM0"),o=n("nEaP"),i=n("UVdV"),a=n("R/cv"),s=n("OzTt"),u=n("WGD3"),c=n("PCqT"),l=n("Hvpk"),f=n("clxC"),h=n("+iL7"),d=n("jP2f"),p=n("h/Mk"),v=n("PGFG"),g=n("fT8P"),m=n("+n59"),y=n("u5rE"),b=n("gDYM"),x=n("9pAD"),w=n("M/tt"),_=n("b3pM"),E=n("AvGt"),R=n("VSW8"),C=n("w/Ji"),S=n("ujzH"),O=n("OVha"),A=n("KQNm"),I=n("rk7W"),k=n("Fup7"),T=n("nRc6"),M=n("11ZY"),D=n("41Zj"),P=n("i6bU"),N=n("0K2p"),F=n("gIo2"),L=n("3pC9"),j=n("s3NK"),B=n("nrda"),W=n("GHf2"),U=n("wQUi"),G=n("B3nq"),z=n("1tiZ"),V=n("SkE4"),H=n("5q7I").forEach,q=L("hidden"),K="Symbol",X=W("toPrimitive"),J=V.set,Y=V.getterFor(K),Q=Object.prototype,$=o.Symbol,Z=$&&$.prototype,tt=o.TypeError,et=o.QObject,nt=i("JSON","stringify"),rt=k.f,ot=T.f,it=A.f,at=D.f,st=u([].push),ut=F("symbols"),ct=F("op-symbols"),lt=F("string-to-symbol-registry"),ft=F("symbol-to-string-registry"),ht=F("wks"),dt=!et||!et.prototype||!et.prototype.findChild,pt=l&&h((function(){return 7!=C(ot({},"a",{get:function(){return ot(this,"a",{value:7}).a}})).a}))?function(t,e,n){var r=rt(Q,e);r&&delete Q[e],ot(t,e,n),r&&t!==Q&&ot(Q,e,r)}:ot,vt=function(t,e){var n=ut[t]=C(Z);return J(n,{type:K,tag:t,description:e}),l||(n.description=e),n},gt=function(t,e,n){t===Q&&gt(ct,e,n),b(t);var r=_(e);return b(n),d(ut,r)?(n.enumerable?(d(t,q)&&t[q][r]&&(t[q][r]=!1),n=C(n,{enumerable:R(0,!1)})):(d(t,q)||ot(t,q,R(1,{})),t[q][r]=!0),pt(t,r,n)):ot(t,r,n)},mt=function(t,e){b(t);var n=w(e),r=S(n).concat(wt(n));return H(r,(function(e){l&&!s(yt,n,e)||gt(t,e,n[e])})),t},yt=function(t){var e=_(t),n=s(at,this,e);return!(this===Q&&d(ut,e)&&!d(ct,e))&&(!(n||!d(this,e)||!d(ut,e)||d(this,q)&&this[q][e])||n)},bt=function(t,e){var n=w(t),r=_(e);if(n!==Q||!d(ut,r)||d(ct,r)){var o=rt(n,r);return!o||!d(ut,r)||d(n,q)&&n[q][r]||(o.enumerable=!0),o}},xt=function(t){var e=it(w(t)),n=[];return H(e,(function(t){d(ut,t)||d(j,t)||st(n,t)})),n},wt=function(t){var e=t===Q,n=it(e?ct:w(t)),r=[];return H(n,(function(t){!d(ut,t)||e&&!d(Q,t)||st(r,ut[t])})),r};(f||($=function(){if(m(Z,this))throw tt("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?E(arguments[0]):void 0,e=B(t),n=function t(n){this===Q&&s(t,ct,n),d(this,q)&&d(this[q],e)&&(this[q][e]=!1),pt(this,e,R(1,n))};return l&&dt&&pt(Q,e,{configurable:!0,set:n}),vt(e,t)},N(Z=$.prototype,"toString",(function(){return Y(this).tag})),N($,"withoutSetter",(function(t){return vt(B(t),t)})),D.f=yt,T.f=gt,M.f=mt,k.f=bt,O.f=A.f=xt,I.f=wt,U.f=function(t){return vt(W(t),t)},l&&(ot(Z,"description",{configurable:!0,get:function(){return Y(this).description}}),c||N(Q,"propertyIsEnumerable",yt,{unsafe:!0}))),r({global:!0,wrap:!0,forced:!f,sham:!f},{Symbol:$}),H(S(ht),(function(t){G(t)})),r({target:K,stat:!0,forced:!f},{for:function(t){var e=E(t);if(d(lt,e))return lt[e];var n=$(e);return lt[e]=n,ft[n]=e,n},keyFor:function(t){if(!y(t))throw tt(t+" is not a symbol");if(d(ft,t))return ft[t]},useSetter:function(){dt=!0},useSimple:function(){dt=!1}}),r({target:"Object",stat:!0,forced:!f,sham:!l},{create:function(t,e){return void 0===e?C(t):mt(C(t),e)},defineProperty:gt,defineProperties:mt,getOwnPropertyDescriptor:bt}),r({target:"Object",stat:!0,forced:!f},{getOwnPropertyNames:xt,getOwnPropertySymbols:wt}),r({target:"Object",stat:!0,forced:h((function(){I.f(1)}))},{getOwnPropertySymbols:function(t){return I.f(x(t))}}),nt)&&r({target:"JSON",stat:!0,forced:!f||h((function(){var t=$();return"[null]"!=nt([t])||"{}"!=nt({a:t})||"{}"!=nt(Object(t))}))},{stringify:function(t,e){var n=P(arguments),r=e;if((g(e)||void 0!==t)&&!y(t))return p(e)||(e=function(t,e){if(v(r)&&(e=s(r,this,t,e)),!y(e))return e}),n[1]=e,a(nt,null,n)}});if(!Z[X]){var _t=Z.valueOf;N(Z,X,(function(){return s(_t,this)}))}z($,K),j[q]=!0},iSxr:function(t,e,n){var r=n("4M91");t.exports=function(t,e){return new(r(t))(0===e?0:e)}},iXYm:function(t,e,n){"use strict";var r=n("PGFG"),o=n("fT8P"),i=n("nRc6"),a=n("XOJ6"),s=n("GHf2")("hasInstance"),u=Function.prototype;s in u||i.f(u,s,{value:function(t){if(!r(this)||!o(t))return!1;var e=this.prototype;if(!o(e))return t instanceof this;for(;t=a(t);)if(e===t)return!0;return!1}})},iwLE:function(t,e,n){var r=n("+iL7"),o=n("GHf2"),i=n("PCqT"),a=o("iterator");t.exports=!r((function(){var t=new URL("b?a=1&b=2&c=3","http://a"),e=t.searchParams,n="";return t.pathname="c%20d",e.forEach((function(t,r){e.delete("b"),n+=r+t})),i&&!t.toJSON||!e.sort||"http://a/c%20d?a=1&c=3"!==t.href||"3"!==e.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!e[a]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash||"a1c3"!==n||"x"!==new URL("http://x",void 0).host}))},j8ZG:function(t,e,n){"use strict";var r=n("JRM0"),o=n("nEaP"),i=n("OzTt"),a=n("Hvpk"),s=n("y9dk"),u=n("Xiyl"),c=n("GdAE"),l=n("iBt0"),f=n("VSW8"),h=n("nHIk"),d=n("a6dz"),p=n("zrDt"),v=n("YRMr"),g=n("7/xu"),m=n("b3pM"),y=n("jP2f"),b=n("fshm"),x=n("fT8P"),w=n("u5rE"),_=n("w/Ji"),E=n("+n59"),R=n("hQLn"),C=n("OVha").f,S=n("otnM"),O=n("5q7I").forEach,A=n("V2sW"),I=n("nRc6"),k=n("Fup7"),T=n("SkE4"),M=n("5CFb"),D=T.get,P=T.set,N=I.f,F=k.f,L=Math.round,j=o.RangeError,B=c.ArrayBuffer,W=B.prototype,U=c.DataView,G=u.NATIVE_ARRAY_BUFFER_VIEWS,z=u.TYPED_ARRAY_CONSTRUCTOR,V=u.TYPED_ARRAY_TAG,H=u.TypedArray,q=u.TypedArrayPrototype,K=u.aTypedArrayConstructor,X=u.isTypedArray,J="BYTES_PER_ELEMENT",Y="Wrong length",Q=function(t,e){K(t);for(var n=0,r=e.length,o=new t(r);r>n;)o[n]=e[n++];return o},$=function(t,e){N(t,e,{get:function(){return D(this)[e]}})},Z=function(t){var e;return E(W,t)||"ArrayBuffer"==(e=b(t))||"SharedArrayBuffer"==e},tt=function(t,e){return X(t)&&!w(e)&&e in t&&d(+e)&&e>=0},et=function(t,e){return e=m(e),tt(t,e)?f(2,t[e]):F(t,e)},nt=function(t,e,n){return e=m(e),!(tt(t,e)&&x(n)&&y(n,"value"))||y(n,"get")||y(n,"set")||n.configurable||y(n,"writable")&&!n.writable||y(n,"enumerable")&&!n.enumerable?N(t,e,n):(t[e]=n.value,t)};a?(G||(k.f=et,I.f=nt,$(q,"buffer"),$(q,"byteOffset"),$(q,"byteLength"),$(q,"length")),r({target:"Object",stat:!0,forced:!G},{getOwnPropertyDescriptor:et,defineProperty:nt}),t.exports=function(t,e,n){var a=t.match(/\d+$/)[0]/8,u=t+(n?"Clamped":"")+"Array",c="get"+t,f="set"+t,d=o[u],m=d,y=m&&m.prototype,b={},w=function(t,e){N(t,e,{get:function(){return function(t,e){var n=D(t);return n.view[c](e*a+n.byteOffset,!0)}(this,e)},set:function(t){return function(t,e,r){var o=D(t);n&&(r=(r=L(r))<0?0:r>255?255:255&r),o.view[f](e*a+o.byteOffset,r,!0)}(this,e,t)},enumerable:!0})};G?s&&(m=e((function(t,e,n,r){return l(t,y),M(x(e)?Z(e)?void 0!==r?new d(e,g(n,a),r):void 0!==n?new d(e,g(n,a)):new d(e):X(e)?Q(m,e):i(S,m,e):new d(v(e)),t,m)})),R&&R(m,H),O(C(d),(function(t){t in m||h(m,t,d[t])})),m.prototype=y):(m=e((function(t,e,n,r){l(t,y);var o,s,u,c=0,f=0;if(x(e)){if(!Z(e))return X(e)?Q(m,e):i(S,m,e);o=e,f=g(n,a);var h=e.byteLength;if(void 0===r){if(h%a)throw j(Y);if((s=h-f)<0)throw j(Y)}else if((s=p(r)*a)+f>h)throw j(Y);u=s/a}else u=v(e),o=new B(s=u*a);for(P(t,{buffer:o,byteOffset:f,byteLength:s,length:u,view:new U(o)});c<u;)w(t,c++)})),R&&R(m,H),y=m.prototype=_(q)),y.constructor!==m&&h(y,"constructor",m),h(y,z,m),V&&h(y,V,u),b[u]=m,r({global:!0,forced:m!=d,sham:!G},b),J in m||h(m,J,a),J in y||h(y,J,a),A(u)}):t.exports=function(){}},jKt2:function(t){var e=function(){this.head=null,this.tail=null};e.prototype={add:function(t){var e={item:t,next:null};this.head?this.tail.next=e:this.head=e,this.tail=e},get:function(){var t=this.head;if(t)return this.head=t.next,this.tail===t&&(this.tail=null),t.item}},t.exports=e},jP2f:function(t,e,n){var r=n("WGD3"),o=n("9pAD"),i=r({}.hasOwnProperty);t.exports=Object.hasOwn||function(t,e){return i(o(t),e)}},"jid/":function(t,e,n){var r=n("WGD3"),o=n("Qean"),i=n("AvGt"),a=/"/g,s=r("".replace);t.exports=function(t,e,n,r){var u=i(o(t)),c="<"+e;return""!==n&&(c+=" "+n+'="'+s(i(r),a,"&quot;")+'"'),c+">"+u+"</"+e+">"}},jqTn:function(t,e,n){"use strict";var r=n("JRM0"),o=n("jid/");r({target:"String",proto:!0,forced:n("Uo50")("fontcolor")},{fontcolor:function(t){return o(this,"font","color",t)}})},k2M3:function(t,e,n){var r={};r[n("GHf2")("toStringTag")]="z",t.exports="[object z]"===String(r)},kMPr:function(t,e,n){var r=n("M/tt"),o=n("glsI"),i=n("fr05"),a=function(t){return function(e,n,a){var s,u=r(e),c=i(u),l=o(a,c);if(t&&n!=n){for(;c>l;)if((s=u[l++])!=s)return!0}else for(;c>l;l++)if((t||l in u)&&u[l]===n)return t||l||0;return!t&&-1}};t.exports={includes:a(!0),indexOf:a(!1)}},kPpV:function(t,e,n){n("j8ZG")("Uint8",(function(t){return function(e,n,r){return t(this,e,n,r)}}))},"kXs/":function(t,e,n){"use strict";var r,o,i,a=n("+iL7"),s=n("PGFG"),u=n("w/Ji"),c=n("XOJ6"),l=n("0K2p"),f=n("GHf2"),h=n("PCqT"),d=f("iterator"),p=!1;[].keys&&("next"in(i=[].keys())?(o=c(c(i)))!==Object.prototype&&(r=o):p=!0),null==r||a((function(){var t={};return r[d].call(t)!==t}))?r={}:h&&(r=u(r)),s(r[d])||l(r,d,(function(){return this})),t.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:p}},"km/T":function(t,e,n){var r,o=n("PCqT"),i=n("JRM0"),a=n("nEaP"),s=n("UVdV"),u=n("WGD3"),c=n("+iL7"),l=n("nrda"),f=n("PGFG"),h=n("iGMQ"),d=n("fT8P"),p=n("u5rE"),v=n("maYj"),g=n("gDYM"),m=n("fshm"),y=n("jP2f"),b=n("ztTQ"),x=n("nHIk"),w=n("fr05"),_=n("7DHN"),E=n("O2Ja"),R=n("52tz"),C=a.Object,S=a.Date,O=a.Error,A=a.EvalError,I=a.RangeError,k=a.ReferenceError,T=a.SyntaxError,M=a.TypeError,D=a.URIError,P=a.PerformanceMark,N=a.WebAssembly,F=N&&N.CompileError||O,L=N&&N.LinkError||O,j=N&&N.RuntimeError||O,B=s("DOMException"),W=s("Set"),U=s("Map"),G=U.prototype,z=u(G.has),V=u(G.get),H=u(G.set),q=u(W.prototype.add),K=s("Object","keys"),X=u([].push),J=u((!0).valueOf),Y=u(1..valueOf),Q=u("".valueOf),$=u(E),Z=u(S.prototype.getTime),tt=l("structuredClone"),et="DataCloneError",nt="Transferring",rt=function(t){return!c((function(){var e=new a.Set([7]),n=t(e),r=t(C(7));return n==e||!n.has(7)||"object"!=typeof r||7!=r}))&&t},ot=a.structuredClone,it=o||(r=ot,!(!c((function(){var t=r(new a.AggregateError([1],tt,{cause:3}));return"AggregateError"!=t.name||1!=t.errors[0]||t.message!=tt||3!=t.cause}))&&r)),at=!ot&&rt((function(t){return new P(tt,{detail:t}).detail})),st=rt(ot)||at,ut=function(t){throw new B("Uncloneable type: "+t,et)},ct=function(t,e){throw new B((e||"Cloning")+" of "+t+" cannot be properly polyfilled in this engine",et)},lt=function t(e,n){if(p(e)&&ut("Symbol"),!d(e))return e;if(n){if(z(n,e))return V(n,e)}else n=new U;var r,o,i,u,c,l,v,g,_,E,P=m(e),N=!1;switch(P){case"Array":i=[],N=!0;break;case"Object":i={},N=!0;break;case"Map":i=new U,N=!0;break;case"Set":i=new W,N=!0;break;case"RegExp":i=new RegExp(e.source,"flags"in e?e.flags:$(e));break;case"Error":switch(o=e.name){case"AggregateError":i=s("AggregateError")([]);break;case"EvalError":i=A();break;case"RangeError":i=I();break;case"ReferenceError":i=k();break;case"SyntaxError":i=T();break;case"TypeError":i=M();break;case"URIError":i=D();break;case"CompileError":i=F();break;case"LinkError":i=L();break;case"RuntimeError":i=j();break;default:i=O()}N=!0;break;case"DOMException":i=new B(e.message,e.name),N=!0;break;case"DataView":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":d(r=a[P])||ct(P),i=new r(t(e.buffer,n),e.byteOffset,"DataView"===P?e.byteLength:e.length);break;case"DOMQuad":try{i=new DOMQuad(t(e.p1,n),t(e.p2,n),t(e.p3,n),t(e.p4,n))}catch(t){st?i=st(e):ct(P)}break;case"FileList":if(h(r=a.DataTransfer)){for(u=new r,c=0,l=w(e);c<l;c++)u.items.add(t(e[c],n));i=u.files}else st?i=st(e):ct(P);break;case"ImageData":try{i=new ImageData(t(e.data,n),e.width,e.height,{colorSpace:e.colorSpace})}catch(t){st?i=st(e):ct(P)}break;default:if(st)i=st(e);else switch(P){case"BigInt":i=C(e.valueOf());break;case"Boolean":i=C(J(e));break;case"Number":i=C(Y(e));break;case"String":i=C(Q(e));break;case"Date":i=new S(Z(e));break;case"ArrayBuffer":(r=a.DataView)||"function"==typeof e.slice||ct(P);try{if("function"==typeof e.slice)i=e.slice(0);else for(l=e.byteLength,i=new ArrayBuffer(l),_=new r(e),E=new r(i),c=0;c<l;c++)E.setUint8(c,_.getUint8(c))}catch(t){throw new B("ArrayBuffer is detached",et)}break;case"SharedArrayBuffer":i=e;break;case"Blob":try{i=e.slice(0,e.size,e.type)}catch(t){ct(P)}break;case"DOMPoint":case"DOMPointReadOnly":r=a[P];try{i=r.fromPoint?r.fromPoint(e):new r(e.x,e.y,e.z,e.w)}catch(t){ct(P)}break;case"DOMRect":case"DOMRectReadOnly":r=a[P];try{i=r.fromRect?r.fromRect(e):new r(e.x,e.y,e.width,e.height)}catch(t){ct(P)}break;case"DOMMatrix":case"DOMMatrixReadOnly":r=a[P];try{i=r.fromMatrix?r.fromMatrix(e):new r(e)}catch(t){ct(P)}break;case"AudioData":case"VideoFrame":f(e.clone)||ct(P);try{i=e.clone()}catch(t){ut(P)}break;case"File":try{i=new File([e],e.name,e)}catch(t){ct(P)}break;case"CryptoKey":case"GPUCompilationMessage":case"GPUCompilationInfo":case"ImageBitmap":case"RTCCertificate":case"WebAssembly.Module":ct(P);default:ut(P)}}if(H(n,e,i),N)switch(P){case"Array":case"Object":for(v=K(e),c=0,l=w(v);c<l;c++)b(i,g=v[c],t(e[g],n));break;case"Map":e.forEach((function(e,r){H(i,t(r,n),t(e,n))}));break;case"Set":e.forEach((function(e){q(i,t(e,n))}));break;case"Error":x(i,"message",t(e.message,n)),y(e,"cause")&&x(i,"cause",t(e.cause,n)),"AggregateError"==o&&(i.errors=t(e.errors,n));case"DOMException":R&&x(i,"stack",t(e.stack,n))}return i},ft=ot&&!c((function(){var t=new ArrayBuffer(8),e=ot(t,{transfer:[t]});return 0!=t.byteLength||8!=e.byteLength})),ht=function(t,e){if(!d(t))throw M("Transfer option cannot be converted to a sequence");var n=[];v(t,(function(t){X(n,g(t))}));var r,o,i,s,u,c,l=0,p=w(n);if(ft)for(s=ot(n,{transfer:n});l<p;)H(e,n[l],s[l++]);else for(;l<p;){if(r=n[l++],z(e,r))throw new B("Duplicate transferable",et);switch(o=m(r)){case"ImageBitmap":h(i=a.OffscreenCanvas)||ct(o,nt);try{(c=new i(r.width,r.height)).getContext("bitmaprenderer").transferFromImageBitmap(r),u=c.transferToImageBitmap()}catch(t){}break;case"AudioData":case"VideoFrame":f(r.clone)&&f(r.close)||ct(o,nt);try{u=r.clone(),r.close()}catch(t){}break;case"ArrayBuffer":case"MessagePort":case"OffscreenCanvas":case"ReadableStream":case"TransformStream":case"WritableStream":ct(o,nt)}if(void 0===u)throw new B("This object cannot be transferred: "+o,et);H(e,r,u)}};i({global:!0,enumerable:!0,sham:!ft,forced:it},{structuredClone:function(t){var e,n=_(arguments.length,1)>1?g(arguments[1]):void 0,r=n?n.transfer:void 0;return void 0!==r&&(e=new U,ht(r,e)),lt(t,e)}})},kypl:function(t,e,n){"use strict";var r=n("JRM0"),o=n("Hvpk"),i=n("nEaP"),a=n("WGD3"),s=n("jP2f"),u=n("PGFG"),c=n("+n59"),l=n("AvGt"),f=n("nRc6").f,h=n("v0JE"),d=i.Symbol,p=d&&d.prototype;if(o&&u(d)&&(!("description"in p)||void 0!==d().description)){var v={},g=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:l(arguments[0]),e=c(p,this)?new d(t):void 0===t?d():d(t);return""===t&&(v[e]=!0),e};h(g,d),g.prototype=p,p.constructor=g;var m="Symbol(test)"==String(d("test")),y=a(p.toString),b=a(p.valueOf),x=/^Symbol\((.*)\)[^)]+$/,w=a("".replace),_=a("".slice);f(p,"description",{configurable:!0,get:function(){var t=b(this),e=y(t);if(s(v,t))return"";var n=m?_(e,7,-1):w(e,x,"$1");return""===n?void 0:n}}),r({global:!0,forced:!0},{Symbol:g})}},l682:function(t,e,n){var r=n("nEaP"),o=n("OzTt"),i=n("sK41"),a=n("gDYM"),s=n("Xki7"),u=n("QYi2"),c=r.TypeError;t.exports=function(t,e){var n=arguments.length<2?u(t):e;if(i(n))return a(o(n,t));throw c(s(t)+" is not iterable")}},l8WD:function(t,e,n){"use strict";function r(t,e){for(var n in e)t[n]=e[n];return t}function o(t,e){for(var n in t)if("__source"!==n&&!(n in e))return!0;for(var r in e)if("__source"!==r&&t[r]!==e[r])return!0;return!1}function i(t){this.props=t}function a(t,e){function n(t){var n=this.props.ref,r=n==t.ref;return!r&&n&&(n.call?n(null):n.current=null),e?!e(this.props,t)||!r:o(this.props,t)}function r(e){return this.shouldComponentUpdate=n,Object(S.createElement)(t,e)}return r.displayName="Memo("+(t.displayName||t.name)+")",r.prototype.isReactComponent=!0,r.__f=!0,r}function s(t){function e(e){var n=r({},e);return delete n.ref,t(n,e.ref||null)}return e.$$typeof=A,e.render=e,e.prototype.isReactComponent=e.__f=!0,e.displayName="ForwardRef("+(t.displayName||t.name)+")",e}function u(){this.__u=0,this.t=null,this.__b=null}function c(t){var e=t.__.__c;return e&&e.__e&&e.__e(t)}function l(t){function e(e){if(n||(n=t()).then((function(t){r=t.default||t}),(function(t){o=t})),o)throw o;if(!r)throw n;return Object(S.createElement)(r,e)}var n,r,o;return e.displayName="Lazy",e.__f=!0,e}function f(){this.u=null,this.o=null}function h(t){return this.getChildContext=function(){return t.context},t.children}function d(t){var e=this,n=t.i;e.componentWillUnmount=function(){Object(S.render)(null,e.l),e.l=null,e.i=null},e.i&&e.i!==n&&e.componentWillUnmount(),t.__v?(e.l||(e.i=n,e.l={nodeType:1,parentNode:n,childNodes:[],appendChild:function(t){this.childNodes.push(t),e.i.appendChild(t)},insertBefore:function(t){this.childNodes.push(t),e.i.appendChild(t)},removeChild:function(t){this.childNodes.splice(this.childNodes.indexOf(t)>>>1,1),e.i.removeChild(t)}}),Object(S.render)(Object(S.createElement)(h,{context:e.context},t.__v),e.l)):e.l&&e.componentWillUnmount()}function p(t,e){return Object(S.createElement)(d,{__v:t,i:e})}function v(t,e,n){return null==e.__k&&(e.textContent=""),Object(S.render)(t,e),"function"==typeof n&&n(),t?t.__c:null}function g(t,e,n){return Object(S.hydrate)(t,e),"function"==typeof n&&n(),t?t.__c:null}function m(){}function y(){return this.cancelBubble}function b(){return this.defaultPrevented}function x(t){return S.createElement.bind(null,t)}function w(t){return!!t&&t.$$typeof===P}function _(t){return w(t)?S.cloneElement.apply(null,arguments):t}function E(t){return!!t.__k&&(Object(S.render)(null,t),!0)}function R(t){return t&&(t.base||1===t.nodeType&&t)||null}n.r(e),n.d(e,"version",(function(){return V})),n.d(e,"Children",(function(){return k})),n.d(e,"render",(function(){return v})),n.d(e,"hydrate",(function(){return g})),n.d(e,"unmountComponentAtNode",(function(){return E})),n.d(e,"createPortal",(function(){return p})),n.d(e,"createFactory",(function(){return x})),n.d(e,"cloneElement",(function(){return _})),n.d(e,"isValidElement",(function(){return w})),n.d(e,"findDOMNode",(function(){return R})),n.d(e,"PureComponent",(function(){return i})),n.d(e,"memo",(function(){return a})),n.d(e,"forwardRef",(function(){return s})),n.d(e,"flushSync",(function(){return q})),n.d(e,"unstable_batchedUpdates",(function(){return H})),n.d(e,"StrictMode",(function(){return K})),n.d(e,"Suspense",(function(){return u})),n.d(e,"SuspenseList",(function(){return f})),n.d(e,"lazy",(function(){return l})),n.d(e,"__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED",(function(){return z}));var C=n("QRet");n.d(e,"useState",(function(){return C.k})),n.d(e,"useReducer",(function(){return C.i})),n.d(e,"useEffect",(function(){return C.d})),n.d(e,"useLayoutEffect",(function(){return C.g})),n.d(e,"useRef",(function(){return C.j})),n.d(e,"useImperativeHandle",(function(){return C.f})),n.d(e,"useMemo",(function(){return C.h})),n.d(e,"useCallback",(function(){return C.a})),n.d(e,"useContext",(function(){return C.b})),n.d(e,"useDebugValue",(function(){return C.c})),n.d(e,"useErrorBoundary",(function(){return C.e}));var S=n("hosL");n.d(e,"createElement",(function(){return S.createElement})),n.d(e,"createContext",(function(){return S.createContext})),n.d(e,"createRef",(function(){return S.createRef})),n.d(e,"Fragment",(function(){return S.Fragment})),n.d(e,"Component",(function(){return S.Component})),(i.prototype=new S.Component).isPureReactComponent=!0,i.prototype.shouldComponentUpdate=function(t,e){return o(this.props,t)||o(this.state,e)};var O=S.options.__b;S.options.__b=function(t){t.type&&t.type.__f&&t.ref&&(t.props.ref=t.ref,t.ref=null),O&&O(t)};var A="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.forward_ref")||3911,I=function(t,e){return null==t?null:Object(S.toChildArray)(Object(S.toChildArray)(t).map(e))},k={map:I,forEach:I,count:function(t){return t?Object(S.toChildArray)(t).length:0},only:function(t){var e=Object(S.toChildArray)(t);if(1!==e.length)throw"Children.only";return e[0]},toArray:S.toChildArray},T=S.options.__e;S.options.__e=function(t,e,n,r){if(t.then)for(var o,i=e;i=i.__;)if((o=i.__c)&&o.__c)return null==e.__e&&(e.__e=n.__e,e.__k=n.__k),o.__c(t,e);T(t,e,n,r)};var M=S.options.unmount;S.options.unmount=function(t){var e=t.__c;e&&e.__R&&e.__R(),e&&!0===t.__h&&(t.type=null),M&&M(t)},(u.prototype=new S.Component).__c=function(t,e){var n=e.__c,r=this;null==r.t&&(r.t=[]),r.t.push(n);var o=c(r.__v),i=!1,a=function(){i||(i=!0,n.__R=null,o?o(s):s())};n.__R=a;var s=function(){if(!--r.__u){if(r.state.__e){var t=r.state.__e;r.__v.__k[0]=function t(e,n,r){return e&&(e.__v=null,e.__k=e.__k&&e.__k.map((function(e){return t(e,n,r)})),e.__c&&e.__c.__P===n&&(e.__e&&r.insertBefore(e.__e,e.__d),e.__c.__e=!0,e.__c.__P=r)),e}(t,t.__c.__P,t.__c.__O)}var e;for(r.setState({__e:r.__b=null});e=r.t.pop();)e.forceUpdate()}},u=!0===e.__h;r.__u++||u||r.setState({__e:r.__b=r.__v.__k[0]}),t.then(a,a)},u.prototype.componentWillUnmount=function(){this.t=[]},u.prototype.render=function(t,e){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),o=this.__v.__k[0].__c;this.__v.__k[0]=function t(e,n,o){return e&&(e.__c&&e.__c.__H&&(e.__c.__H.__.forEach((function(t){"function"==typeof t.__c&&t.__c()})),e.__c.__H=null),null!=(e=r({},e)).__c&&(e.__c.__P===o&&(e.__c.__P=n),e.__c=null),e.__k=e.__k&&e.__k.map((function(e){return t(e,n,o)}))),e}(this.__b,n,o.__O=o.__P)}this.__b=null}var i=e.__e&&Object(S.createElement)(S.Fragment,null,t.fallback);return i&&(i.__h=null),[Object(S.createElement)(S.Fragment,null,e.__e?null:t.children),i]};var D=function(t,e,n){if(++n[1]===n[0]&&t.o.delete(e),t.props.revealOrder&&("t"!==t.props.revealOrder[0]||!t.o.size))for(n=t.u;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;t.u=n=n[2]}};(f.prototype=new S.Component).__e=function(t){var e=this,n=c(e.__v),r=e.o.get(t);return r[0]++,function(o){var i=function(){e.props.revealOrder?(r.push(o),D(e,t,r)):o()};n?n(i):i()}},f.prototype.render=function(t){this.u=null,this.o=new Map;var e=Object(S.toChildArray)(t.children);t.revealOrder&&"b"===t.revealOrder[0]&&e.reverse();for(var n=e.length;n--;)this.o.set(e[n],this.u=[1,0,this.u]);return t.children},f.prototype.componentDidUpdate=f.prototype.componentDidMount=function(){var t=this;this.o.forEach((function(e,n){D(t,n,e)}))};var P="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,N=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|marker(?!H|W|U)|overline|paint|stop|strikethrough|stroke|text(?!L)|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,F="undefined"!=typeof document,L=function(t){return("undefined"!=typeof Symbol&&"symbol"==typeof Symbol()?/fil|che|rad/i:/fil|che|ra/i).test(t)};S.Component.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach((function(t){Object.defineProperty(S.Component.prototype,t,{configurable:!0,get:function(){return this["UNSAFE_"+t]},set:function(e){Object.defineProperty(this,t,{configurable:!0,writable:!0,value:e})}})}));var j=S.options.event;S.options.event=function(t){return j&&(t=j(t)),t.persist=m,t.isPropagationStopped=y,t.isDefaultPrevented=b,t.nativeEvent=t};var B,W={configurable:!0,get:function(){return this.class}},U=S.options.vnode;S.options.vnode=function(t){var e=t.type,n=t.props,r=n;if("string"==typeof e){var o=-1===e.indexOf("-");for(var i in r={},n){var a=n[i];F&&"children"===i&&"noscript"===e||"value"===i&&"defaultValue"in n&&null==a||("defaultValue"===i&&"value"in n&&null==n.value?i="value":"download"===i&&!0===a?a="":/ondoubleclick/i.test(i)?i="ondblclick":/^onchange(textarea|input)/i.test(i+e)&&!L(n.type)?i="oninput":/^onfocus$/i.test(i)?i="onfocusin":/^onblur$/i.test(i)?i="onfocusout":/^on(Ani|Tra|Tou|BeforeInp|Compo)/.test(i)?i=i.toLowerCase():o&&N.test(i)?i=i.replace(/[A-Z0-9]/,"-$&").toLowerCase():null===a&&(a=void 0),r[i]=a)}"select"==e&&r.multiple&&Array.isArray(r.value)&&(r.value=Object(S.toChildArray)(n.children).forEach((function(t){t.props.selected=-1!=r.value.indexOf(t.props.value)}))),"select"==e&&null!=r.defaultValue&&(r.value=Object(S.toChildArray)(n.children).forEach((function(t){t.props.selected=r.multiple?-1!=r.defaultValue.indexOf(t.props.value):r.defaultValue==t.props.value}))),t.props=r,n.class!=n.className&&(W.enumerable="className"in n,null!=n.className&&(r.class=n.className),Object.defineProperty(r,"className",W))}t.$$typeof=P,U&&U(t)};var G=S.options.__r;S.options.__r=function(t){G&&G(t),B=t.__c};var z={ReactCurrentDispatcher:{current:{readContext:function(t){return B.__n[t.__c].props.value}}}},V="17.0.2",H=function(t,e){return t(e)},q=function(t,e){return t(e)},K=S.Fragment;e.default={useState:C.k,useReducer:C.i,useEffect:C.d,useLayoutEffect:C.g,useRef:C.j,useImperativeHandle:C.f,useMemo:C.h,useCallback:C.a,useContext:C.b,useDebugValue:C.c,version:"17.0.2",Children:k,render:v,hydrate:g,unmountComponentAtNode:E,createPortal:p,createElement:S.createElement,createContext:S.createContext,createFactory:x,cloneElement:_,createRef:S.createRef,Fragment:S.Fragment,isValidElement:w,findDOMNode:R,Component:S.Component,PureComponent:i,memo:a,forwardRef:s,flushSync:q,unstable_batchedUpdates:H,StrictMode:S.Fragment,Suspense:u,SuspenseList:f,lazy:l,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:z}},lAJ5:function(t,e,n){"use strict";var r=n("JRM0"),o=n("5q7I").some;r({target:"Array",proto:!0,forced:!n("fK/z")("some")},{some:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}})},lCat:function(t,e,n){"use strict";var r=n("Xiyl"),o=n("5q7I").findIndex,i=r.aTypedArray;(0,r.exportTypedArrayMethod)("findIndex",(function(t){return o(i(this),t,arguments.length>1?arguments[1]:void 0)}))},lEJZ:function(t,e,n){var r=n("nEaP"),o=n("iGMQ"),i=n("Xki7"),a=r.TypeError;t.exports=function(t){if(o(t))return t;throw a(i(t)+" is not a constructor")}},lUv3:function(t,e,n){var r=n("nEaP");t.exports=r},lVFF:function(){},lYjL:function(t,e,n){"use strict";var r=n("JRM0"),o=n("5q7I").filter;r({target:"Array",proto:!0,forced:!n("WCig")("filter")},{filter:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}})},lZgT:function(t,e,n){"use strict";var r=n("Xiyl"),o=n("kMPr").indexOf,i=r.aTypedArray;(0,r.exportTypedArrayMethod)("indexOf",(function(t){return o(i(this),t,arguments.length>1?arguments[1]:void 0)}))},lmye:function(t,e,n){"use strict";var r=n("JRM0"),o=n("5q7I").map;r({target:"Array",proto:!0,forced:!n("WCig")("map")},{map:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}})},lnxm:function(t,e,n){var r=n("S8c5"),o=n("RN4W");t.exports=function(t,e){return r(o(t),e)}},lvot:function(t,e,n){n("JRM0")({target:"Date",proto:!0},{toGMTString:Date.prototype.toUTCString})},m1e9:function(t,e,n){var r,o,i,a,s,u,c,l,f=n("nEaP"),h=n("a72Q"),d=n("Fup7").f,p=n("4ssk").set,v=n("s06e"),g=n("uHfv"),m=n("YZdy"),y=n("YxGO"),b=f.MutationObserver||f.WebKitMutationObserver,x=f.document,w=f.process,_=f.Promise,E=d(f,"queueMicrotask"),R=E&&E.value;R||(r=function(){var t,e;for(y&&(t=w.domain)&&t.exit();o;){e=o.fn,o=o.next;try{e()}catch(t){throw o?a():i=void 0,t}}i=void 0,t&&t.enter()},v||y||m||!b||!x?!g&&_&&_.resolve?((c=_.resolve(void 0)).constructor=_,l=h(c.then,c),a=function(){l(r)}):y?a=function(){w.nextTick(r)}:(p=h(p,f),a=function(){p(r)}):(s=!0,u=x.createTextNode(""),new b(r).observe(u,{characterData:!0}),a=function(){u.data=s=!s})),t.exports=R||function(t){var e={fn:t,next:void 0};i&&(i.next=e),o||(o=e,a()),i=e}},m37F:function(t,e,n){var r=n("JRM0"),o=n("Hvpk"),i=n("LMdw"),a=n("M/tt"),s=n("Fup7"),u=n("ztTQ");r({target:"Object",stat:!0,sham:!o},{getOwnPropertyDescriptors:function(t){for(var e,n,r=a(t),o=s.f,c=i(r),l={},f=0;c.length>f;)void 0!==(n=o(r,e=c[f++]))&&u(l,e,n);return l}})},mEUw:function(t,e,n){var r=n("WGD3"),o=n("zrDt"),i=n("AvGt"),a=n("BnTm"),s=n("Qean"),u=r(a),c=r("".slice),l=Math.ceil,f=function(t){return function(e,n,r){var a,f,h=i(s(e)),d=o(n),p=h.length,v=void 0===r?" ":i(r);return d<=p||""==v?h:((f=u(v,l((a=d-p)/v.length))).length>a&&(f=c(f,0,a)),t?h+f:f+h)}};t.exports={start:f(!1),end:f(!0)}},mI7T:function(t){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n={},r=0;r<66;r++)n[e.charAt(r)]=r;t.exports={itoc:e,ctoi:n}},mMsL:function(t,e,n){"use strict";var r=n("PCqT"),o=n("nEaP"),i=n("+iL7"),a=n("EnJw");t.exports=r||!i((function(){if(!(a&&a<535)){var t=Math.random();__defineSetter__.call(null,t,(function(){})),delete o[t]}}))},maYj:function(t,e,n){var r=n("nEaP"),o=n("a72Q"),i=n("OzTt"),a=n("gDYM"),s=n("Xki7"),u=n("6+ef"),c=n("fr05"),l=n("+n59"),f=n("l682"),h=n("QYi2"),d=n("wnjq"),p=r.TypeError,v=function(t,e){this.stopped=t,this.result=e},g=v.prototype;t.exports=function(t,e,n){var r,m,y,b,x,w,_,E=!(!n||!n.AS_ENTRIES),R=!(!n||!n.IS_ITERATOR),C=!(!n||!n.INTERRUPTED),S=o(e,n&&n.that),O=function(t){return r&&d(r,"normal",t),new v(!0,t)},A=function(t){return E?(a(t),C?S(t[0],t[1],O):S(t[0],t[1])):C?S(t,O):S(t)};if(R)r=t;else{if(!(m=h(t)))throw p(s(t)+" is not iterable");if(u(m)){for(y=0,b=c(t);b>y;y++)if((x=A(t[y]))&&l(g,x))return x;return new v(!1)}r=f(t,m)}for(w=r.next;!(_=i(w,r)).done;){try{x=A(_.value)}catch(t){d(r,"throw",t)}if("object"==typeof x&&x&&l(g,x))return x}return new v(!1)}},mdyV:function(t,e,n){"use strict";n.r(e);var r=n("hosL");const{h:o,render:i,hydrate:a}=r,s=t=>t&&t.default?t.default:t,u=t=>"/"===t[t.length-1]?t:t+"/";if("serviceWorker"in navigator&&navigator.serviceWorker.register(u(n.p)+"sw.js"),"function"==typeof s(n("qVkA"))){let t=document.getElementById("preact_root")||document.body.firstElementChild,e=()=>{let e=s(n("qVkA")),r={};const c=document.querySelector('[type="__PREACT_CLI_DATA__"]');c&&(r=JSON.parse(decodeURI(c.innerHTML)).preRenderData||r);const l={preRenderData:r},f=r.url?u(r.url):"";(a&&f===u(location.pathname)?a:i)(o(e,{CLI_DATA:l}),document.body,t)};0,e()}},mslO:function(t,e,n){"use strict";var r=n("JRM0"),o=n("jid/");r({target:"String",proto:!0,forced:n("Uo50")("big")},{big:function(){return o(this,"big","","")}})},mvOm:function(t){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}},nEaP:function(t,e,n){(function(e){var n=function(t){return t&&t.Math==Math&&t};t.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof e&&e)||function(){return this}()||Function("return this")()}).call(this,n("pCvA"))},nHIk:function(t,e,n){var r=n("Hvpk"),o=n("nRc6"),i=n("VSW8");t.exports=r?function(t,e,n){return o.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},nRc6:function(t,e,n){var r=n("nEaP"),o=n("Hvpk"),i=n("xwiM"),a=n("G9Va"),s=n("gDYM"),u=n("b3pM"),c=r.TypeError,l=Object.defineProperty,f=Object.getOwnPropertyDescriptor,h="enumerable",d="configurable",p="writable";e.f=o?a?function(t,e,n){if(s(t),e=u(e),s(n),"function"==typeof t&&"prototype"===e&&"value"in n&&p in n&&!n.writable){var r=f(t,e);r&&r.writable&&(t[e]=n.value,n={configurable:d in n?n.configurable:r.configurable,enumerable:h in n?n.enumerable:r.enumerable,writable:!1})}return l(t,e,n)}:l:function(t,e,n){if(s(t),e=u(e),s(n),i)try{return l(t,e,n)}catch(t){}if("get"in n||"set"in n)throw c("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},nrda:function(t,e,n){var r=n("WGD3"),o=0,i=Math.random(),a=r(1..toString);t.exports=function(t){return"Symbol("+(void 0===t?"":t)+")_"+a(++o+i,36)}},nrpS:function(t,e,n){var r=n("rxbk");t.exports=/MSIE|Trident/.test(r)},"o29/":function(t,e,n){var r=n("JRM0"),o=n("fT8P"),i=n("CwSR").onFreeze,a=n("b82F"),s=n("+iL7"),u=Object.preventExtensions;r({target:"Object",stat:!0,forced:s((function(){u(1)})),sham:!a},{preventExtensions:function(t){return u&&o(t)?u(i(t)):t}})},o5JG:function(t,e,n){n("JRM0")({target:"Array",stat:!0},{isArray:n("h/Mk")})},"o9/u":function(t,e,n){var r=n("JRM0"),o=n("+iL7"),i=n("9pAD"),a=n("XOJ6"),s=n("XleP");r({target:"Object",stat:!0,forced:o((function(){a(1)})),sham:!s},{getPrototypeOf:function(t){return a(i(t))}})},oLsI:function(t,e,n){var r=n("JRM0"),o=n("R/cv"),i=n("sK41"),a=n("gDYM");r({target:"Reflect",stat:!0,forced:!n("+iL7")((function(){Reflect.apply((function(){}))}))},{apply:function(t,e,n){return o(i(t),e,a(n))}})},"oa+t":function(t,e,n){var r=n("WGD3")("".replace),o=String(Error("zxcasd").stack),i=/\n\s*at [^:]*:[^\n]*/,a=i.test(o);t.exports=function(t,e){if(a&&"string"==typeof t)for(;e--;)t=r(t,i,"");return t}},oncN:function(t,e,n){var r=n("JRM0"),o=n("nEaP"),i=n("UVdV"),a=n("R/cv"),s=n("WGD3"),u=n("+iL7"),c=o.Array,l=i("JSON","stringify"),f=s(/./.exec),h=s("".charAt),d=s("".charCodeAt),p=s("".replace),v=s(1..toString),g=/[\uD800-\uDFFF]/g,m=/^[\uD800-\uDBFF]$/,y=/^[\uDC00-\uDFFF]$/,b=function(t,e,n){var r=h(n,e-1),o=h(n,e+1);return f(m,t)&&!f(y,o)||f(y,t)&&!f(m,r)?"\\u"+v(d(t,0),16):t},x=u((function(){return'"\\udf06\\ud834"'!==l("\udf06\ud834")||'"\\udead"'!==l("\udead")}));l&&r({target:"JSON",stat:!0,forced:x},{stringify:function(t,e,n){for(var r=0,o=arguments.length,i=c(o);r<o;r++)i[r]=arguments[r];var s=a(l,null,i);return"string"==typeof s?p(s,g,b):s}})},op7M:function(t,e,n){var r=n("JRM0"),o=n("Xiyl");r({target:"ArrayBuffer",stat:!0,forced:!o.NATIVE_ARRAY_BUFFER_VIEWS},{isView:o.isView})},otnM:function(t,e,n){var r=n("a72Q"),o=n("OzTt"),i=n("lEJZ"),a=n("9pAD"),s=n("fr05"),u=n("l682"),c=n("QYi2"),l=n("6+ef"),f=n("Xiyl").aTypedArrayConstructor;t.exports=function(t){var e,n,h,d,p,v,g=i(this),m=a(t),y=arguments.length,b=y>1?arguments[1]:void 0,x=void 0!==b,w=c(m);if(w&&!l(w))for(v=(p=u(m,w)).next,m=[];!(d=o(v,p)).done;)m.push(d.value);for(x&&y>2&&(b=r(b,arguments[2])),n=s(m),h=new(f(g))(n),e=0;n>e;e++)h[e]=x?b(m[e],e):m[e];return h}},pCvA:function(t){var e;e=function(){return this}();try{e=e||new Function("return this")()}catch(t){"object"==typeof window&&(e=window)}t.exports=e},pCzD:function(t,e,n){n("B3nq")("iterator")},pJGf:function(t,e,n){var r=n("JRM0"),o=n("3rea"),i=Math.acosh,a=Math.log,s=Math.sqrt,u=Math.LN2;r({target:"Math",stat:!0,forced:!i||710!=Math.floor(i(Number.MAX_VALUE))||i(1/0)!=1/0},{acosh:function(t){return(t=+t)<1?NaN:t>94906265.62425156?a(t)+u:o(t-1+s(t-1)*s(t+1))}})},"pKr/":function(t,e,n){var r=n("JRM0"),o=n("ti6M");r({target:"Date",proto:!0,forced:Date.prototype.toISOString!==o},{toISOString:o})},pY4j:function(t,e,n){n("j8ZG")("Int16",(function(t){return function(e,n,r){return t(this,e,n,r)}}))},pZEX:function(t,e,n){"use strict";var r=n("JRM0"),o=n("WGD3"),i=n("Qean"),a=n("ZK/t"),s=n("AvGt"),u=n("+iL7"),c=o("".charAt);r({target:"String",proto:!0,forced:u((function(){return"\ud842"!=="𠮷".at(-2)}))},{at:function(t){var e=s(i(this)),n=e.length,r=a(t),o=r>=0?r:n+r;return o<0||o>=n?void 0:c(e,o)}})},"q+fk":function(t,e,n){var r=n("BRZg"),o=Math.abs,i=Math.pow,a=i(2,-52),s=i(2,-23),u=i(2,127)*(2-s),c=i(2,-126);t.exports=Math.fround||function(t){var e,n,i=o(t),l=r(t);return i<c?l*(i/c/s+1/a-1/a)*c*s:(n=(e=(1+s/a)*i)-(e-i))>u||n!=n?l*(1/0):l*n}},"q/gS":function(t){t.exports={}},q2Qn:function(t,e,n){n("j8ZG")("Uint8",(function(t){return function(e,n,r){return t(this,e,n,r)}}),!0)},"qO//":function(t,e,n){n("B3nq")("search")},qVkA:function(t,e,n){"use strict";function r(){return r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},r.apply(this,arguments)}function o(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)e.indexOf(n=i[r])>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)e.indexOf(n=i[r])>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function i(){return i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},i.apply(this,arguments)}function a(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)e.indexOf(n=i[r])>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)e.indexOf(n=i[r])>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(Object(n),!0).forEach((function(e){c(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function c(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function l(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function f(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function h(){return h=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},h.apply(this,arguments)}function d(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)e.indexOf(n=i[r])>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)e.indexOf(n=i[r])>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function p(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function v(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function g(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?v(Object(n),!0).forEach((function(e){m(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function m(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function y(t,e,n){if(void 0===n&&(n=!1),t.beginPath(),e.slice(1).forEach((function(n,r){var o=n.x,i=n.y,a=e[r];t.moveTo(a.x,a.y),t.lineTo(o,i)})),n){var r=e[e.length-1],o=e[0];if(!r||!o)return;t.moveTo(r.x,r.y),t.lineTo(o.x,o.y)}t.stroke()}function b(t,e){return t instanceof tr.a&&t.shape.length===e}function x(t){return b(t,3)}function w(t){return b(t,4)}function _(t){return t%2==0}function E(t,e){void 0===e&&(e=2);var n=Math.pow(10,e);return Math.floor(t*n)/n}function R(t){return t&&t.width&&t.height}function C(t){return t.reduce((function(t,e){return t.add(e)}),new rr(0,0)).div(new rr(t.length,t.length))}function S(t,e,n){return Array(t).fill(0).map((function(t,r){return e+r*n}))}function O(t){return!!t&&t!==1/0&&t!==-1/0&&!isNaN(t)||0===t}function A(t){return O(t)&&0<=t&&t<=1}function I(t,e,n){void 0===n&&(n=!0);var r=Math.max(0,Math.min(t.right,e.right)-Math.max(t.left,e.left))*Math.max(0,Math.min(t.bottom,e.bottom)-Math.max(t.top,e.top));return n?r/(t.area+e.area-r):r/Math.min(t.area,e.area)}function k(t,e,n,r){void 0===r&&(r=!0);for(var o=e.map((function(t,e){return{score:t,boxIndex:e}})).sort((function(t,e){return t.score-e.score})).map((function(t){return t.boxIndex})),i=[],a=function(){var e=o.pop();i.push(e);for(var a=o,s=[],u=0;u<a.length;u++){s.push(I(t[e],t[a[u]],r))}o=o.filter((function(t,e){return s[e]<=n}))};o.length>0;)a();return i}function T(t,e){return tr.L((function(){var n=e[0],r=e[1],o=e[2],i=tr.n(Object(er.e)(t.shape.slice(0,3),[1]),n),a=tr.n(Object(er.e)(t.shape.slice(0,3),[1]),r),s=tr.n(Object(er.e)(t.shape.slice(0,3),[1]),o),u=tr.h([i,a,s],3);return tr.F(t,u)}))}function M(t){return 1/(1+Math.exp(-t))}function D(){return D=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},D.apply(this,arguments)}function P(){return P=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},P.apply(this,arguments)}function N(t){return t.detection instanceof sr}function F(t,e){return P({},t,{detection:e})}function L(){var t=window.fetch||function(){throw new Error("fetch - missing fetch implementation for browser environment")};return{Canvas:HTMLCanvasElement,CanvasRenderingContext2D:CanvasRenderingContext2D,Image:HTMLImageElement,ImageData:ImageData,Video:HTMLVideoElement,createCanvasElement:function(){return document.createElement("canvas")},createImageElement:function(){return document.createElement("img")},fetch:t,readFile:function(){throw new Error("readFile - filesystem not available for browser environment")}}}function j(){return"object"==typeof window&&"undefined"!=typeof document&&"undefined"!=typeof HTMLImageElement&&"undefined"!=typeof HTMLCanvasElement&&"undefined"!=typeof HTMLVideoElement&&"undefined"!=typeof ImageData&&"undefined"!=typeof CanvasRenderingContext2D}function B(t){Qn=t}function W(){j()&&B(L()),Object(mr.a)()&&B(Object(gr.a)())}function U(t){return yr.isNodejs()||"string"!=typeof t?t:document.getElementById(t)}function G(t){var e=yr.getEnv(),n=e.Canvas;if(t instanceof e.CanvasRenderingContext2D)return t;var r=U(t);if(!(r instanceof n))throw new Error("resolveContext2d - expected canvas to be of instance of Canvas");var o=r.getContext("2d");if(!o)throw new Error("resolveContext2d - canvas 2d context is null");return o}function z(){return z=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},z.apply(this,arguments)}function V(t){var e=yr.getEnv();return t instanceof e.Image&&t.complete||t instanceof e.Video&&t.readyState>=3}function H(t){var e=yr.getEnv(),n=e.Video;return t instanceof e.Image?new nr(t.naturalWidth,t.naturalHeight):t instanceof n?new nr(t.videoWidth,t.videoHeight):new nr(t.width,t.height)}function q(t){var e=t.width,n=t.height,r=(0,yr.getEnv().createCanvasElement)();return r.width=e,r.height=n,r}function K(t,e){var n=yr.getEnv().ImageData;if(!(t instanceof n||V(t)))throw new Error("createCanvasFromMedia - media has not finished loading yet");var r=e||H(t),o=r.width,i=r.height,a=q({width:o,height:i});return t instanceof n?G(a).putImageData(t,0,0):G(a).drawImage(t,0,0,o,i),a}function X(t,e){return Object(er.b)(this,void 0,void 0,(function(){var n,r,o,i,a,s;return Object(er.d)(this,(function(u){switch(u.label){case 0:return n=e||yr.getEnv().createCanvasElement(),r=t.shape.slice(w(t)?1:0),o=r[0],i=r[1],a=r[2],s=tr.L((function(){return t.as3D(o,i,a).toInt()})),[4,tr.f.toPixels(s,n)];case 1:return u.sent(),s.dispose(),[2,n]}}))}))}function J(t){var e=yr.getEnv();return t instanceof e.Image||t instanceof e.Canvas||t instanceof e.Video}function Y(t){return Object(er.b)(this,void 0,void 0,(function(){var e,n,r;return Object(er.d)(this,(function(o){switch(o.label){case 0:if(t instanceof Er)return[2,t];if(!(e=Array.isArray(t)?t:[t]).length)throw new Error("toNetInput - empty array passed as input");return n=function(e){return Array.isArray(t)?" at input index "+e+":":""},(r=e.map(U)).forEach((function(t,r){if(!J(t)&&!x(t)&&!w(t)){if("string"==typeof e[r])throw new Error("toNetInput -"+n(r)+" string passed, but could not resolve HTMLElement for element id "+e[r]);throw new Error("toNetInput -"+n(r)+" expected media to be of type HTMLImageElement | HTMLVideoElement | HTMLCanvasElement | tf.Tensor3D, or to be an element id")}if(w(t)){var o=t.shape[0];if(1!==o)throw new Error("toNetInput -"+n(r)+" tf.Tensor4D with batchSize "+o+" passed, but not supported in input array")}})),[4,Promise.all(r.map((function(t){return J(t)&&(e=t,new Promise((function(t,n){function r(e){e.currentTarget&&(e.currentTarget.removeEventListener("load",r),e.currentTarget.removeEventListener("error",o),t(e))}function o(t){t.currentTarget&&(t.currentTarget.removeEventListener("load",r),t.currentTarget.removeEventListener("error",o),n(t))}if(e instanceof yr.getEnv().Canvas||V(e))return t();e.addEventListener("load",r),e.addEventListener("error",o)})));var e})))];case 1:return o.sent(),[2,new Er(r,Array.isArray(t))]}}))}))}function Q(t,e){return Object(er.b)(this,void 0,void 0,(function(){var n,r,o,i,a,s;return Object(er.d)(this,(function(u){switch(u.label){case 0:return n=yr.getEnv().Canvas,r=t,t instanceof n?[3,5]:[4,Y(t)];case 1:if((o=u.sent()).batchSize>1)throw new Error("extractFaces - batchSize > 1 not supported");return(i=o.getInput(0))instanceof n?(a=i,[3,4]):[3,2];case 2:return[4,X(i)];case 3:a=u.sent(),u.label=4;case 4:r=a,u.label=5;case 5:return s=G(r),[2,e.map((function(t){return t instanceof sr?t.forSize(r.width,r.height).box.floor():t})).map((function(t){return t.clipAtImageBorders(r.width,r.height)})).map((function(t){var e=t.x,n=t.y,r=t.width,o=t.height,i=q({width:r,height:o});return G(i).putImageData(s.getImageData(e,n,r,o),0,0),i}))]}}))}))}function $(t,e){return Object(er.b)(this,void 0,void 0,(function(){return Object(er.d)(this,(function(){if(!x(t)&&!w(t))throw new Error("extractFaceTensors - expected image tensor to be 3D or 4D");if(w(t)&&t.shape[0]>1)throw new Error("extractFaceTensors - batchSize > 1 not supported");return[2,tr.L((function(){var n=t.shape.slice(w(t)?1:0),r=n[0],o=n[1],i=n[2],a=e.map((function(t){return t instanceof sr?t.forSize(o,r).box:t})).map((function(t){return t.clipAtImageBorders(o,r)})).map((function(e){var n=e.x,a=e.y,s=e.width,u=e.height;return tr.C(t.as3D(r,o,i),[a,n,0],[u,s,i])}));return a}))]}))}))}function Z(t,e){return Object(er.b)(this,void 0,void 0,(function(){var n;return Object(er.d)(this,(function(r){switch(r.label){case 0:return[4,(0,yr.getEnv().fetch)(t,e)];case 1:if(!((n=r.sent()).status<400))throw new Error("failed to fetch: ("+n.status+") "+n.statusText+", from url: "+n.url);return[2,n]}}))}))}function tt(t){return Object(er.b)(this,void 0,void 0,(function(){return Object(er.d)(this,(function(e){switch(e.label){case 0:return[4,Z(t)];case 1:return[2,e.sent().json()]}}))}))}function et(t,e){var n=e+"-weights_manifest.json";if(!t)return{modelBaseUri:"",manifestUri:n};if("/"===t)return{modelBaseUri:"/",manifestUri:"/"+n};var r=t.startsWith("http://")?"http://":t.startsWith("https://")?"https://":"",o=(t=t.replace(r,"")).split("/").filter((function(t){return t})),i=t.endsWith(".json")?o[o.length-1]:n,a=r+(t.endsWith(".json")?o.slice(0,o.length-1):o).join("/");return{modelBaseUri:a=t.startsWith("/")?"/"+a:a,manifestUri:"/"===a?"/"+i:a+"/"+i}}function nt(t,e){return Object(er.b)(this,void 0,void 0,(function(){var n,r,o;return Object(er.d)(this,(function(i){switch(i.label){case 0:return n=et(t,e),r=n.modelBaseUri,[4,tt(n.manifestUri)];case 1:return o=i.sent(),[2,tr.p.loadWeights(o,r)]}}))}))}function rt(t,e,n){return tr.L((function(){var r=tr.z(t,e.depthwise_filter,e.pointwise_filter,n,"same");return r=tr.c(r,e.bias)}))}function ot(t,e,n){return void 0===n&&(n=!1),tr.L((function(){var r=tr.w(n?tr.c(tr.i(t,e.conv0.filters,[2,2],"same"),e.conv0.bias):rt(t,e.conv0,[2,2])),o=rt(r,e.conv1,[1,1]),i=rt(tr.w(tr.c(r,o)),e.conv2,[1,1]);return tr.w(tr.c(r,tr.c(o,i)))}))}function it(t,e,n,r){return void 0===n&&(n=!1),void 0===r&&(r=!0),tr.L((function(){var o=tr.w(n?tr.c(tr.i(t,e.conv0.filters,r?[2,2]:[1,1],"same"),e.conv0.bias):rt(t,e.conv0,r?[2,2]:[1,1])),i=rt(o,e.conv1,[1,1]),a=rt(tr.w(tr.c(o,i)),e.conv2,[1,1]),s=rt(tr.w(tr.c(o,tr.c(i,a))),e.conv3,[1,1]);return tr.w(tr.c(o,tr.c(i,tr.c(a,s))))}))}function at(t,e,n,r){return void 0===n&&(n="same"),void 0===r&&(r=!1),tr.L((function(){var o=tr.c(tr.i(t,e.filters,[1,1],n),e.bias);return r?tr.w(o):o}))}function st(t,e){Object.keys(t).forEach((function(n){e.some((function(t){return t.originalPath===n}))||t[n].dispose()}))}function ut(t,e){return function(n,r,o,i){var a=tr.K(t(n*r*o*o),[o,o,n,r]),s=tr.H(t(r));return e.push({paramPath:i+"/filters"},{paramPath:i+"/bias"}),{filters:a,bias:s}}}function ct(t,e){return function(n,r,o){var i=tr.I(t(n*r),[n,r]),a=tr.H(t(r));return e.push({paramPath:o+"/weights"},{paramPath:o+"/bias"}),{weights:i,bias:a}}}function lt(t,e){return function(n,r,o){var i=tr.K(t(9*n),[3,3,n,1]),a=tr.K(t(n*r),[1,1,n,r]),s=tr.H(t(r));return e.push({paramPath:o+"/depthwise_filter"},{paramPath:o+"/pointwise_filter"},{paramPath:o+"/bias"}),new Cr(i,a,s)}}function ft(t){return function(e){var n=t(e+"/depthwise_filter",4),r=t(e+"/pointwise_filter",4),o=t(e+"/bias",1);return new Cr(n,r,o)}}function ht(t,e){return function(n,r,o){var i=t[n];if(!b(i,r))throw new Error("expected weightMap["+n+"] to be a Tensor"+r+"D, instead have "+i);return e.push({originalPath:n,paramPath:o||n}),i}}function dt(t){var e=t;return{extractWeights:function(t){var n=e.slice(0,t);return e=e.slice(t),n},getRemainingWeights:function(){return e}}}function pt(t,e){function n(t,e,n,i){return void 0===i&&(i=!1),{conv0:i?r(t,e,3,n+"/conv0"):o(t,e,n+"/conv0"),conv1:o(e,e,n+"/conv1"),conv2:o(e,e,n+"/conv2")}}var r=ut(t,e),o=lt(t,e);return{extractDenseBlock3Params:n,extractDenseBlock4Params:function(t,e,r,i){void 0===i&&(i=!1);var a=n(t,e,r,i);return{conv0:a.conv0,conv1:a.conv1,conv2:a.conv2,conv3:o(e,e,r+"/conv3")}}}}function vt(t){return function(e){return{filters:t(e+"/filters",4),bias:t(e+"/bias",1)}}}function gt(t,e){var n=ht(t,e),r=vt(n),o=ft(n);return{extractDenseBlock3Params:function(t,e){return void 0===e&&(e=!1),{conv0:e?r(t+"/conv0"):o(t+"/conv0"),conv1:o(t+"/conv1"),conv2:o(t+"/conv2")}},extractDenseBlock4Params:function(t,e){return void 0===e&&(e=!1),{conv0:e?r(t+"/conv0"):o(t+"/conv0"),conv1:o(t+"/conv1"),conv2:o(t+"/conv2"),conv3:o(t+"/conv3")}}}}function mt(t,e){return tr.L((function(){return tr.c(tr.q(t,e.weights),e.bias)}))}function yt(t){var e={},n={};return Object.keys(t).forEach((function(r){(r.startsWith("fc")?n:e)[r]=t[r]})),{featureExtractorMap:e,classifierMap:n}}function bt(){return bt=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bt.apply(this,arguments)}function xt(t,e){return bt({},t,{expressions:e})}function wt(){return wt=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},wt.apply(this,arguments)}function _t(t){return N(t)&&t.landmarks instanceof cr&&t.unshiftedLandmarks instanceof cr&&t.alignedRect instanceof sr}function Et(t,e){var n=t.detection.box,r=e.shiftBy(n.x,n.y),o=r.align(),i=t.detection.imageDims;return wt({},t,{landmarks:r,unshiftedLandmarks:e,alignedRect:new sr(t.detection.score,o.rescale(i.reverse()),i)})}function Rt(t,e){var n=[],r=dt(t),o=r.getRemainingWeights,i=function(t,e){var n=ut(t,e),r=lt(t,e);return{extractConvParams:n,extractSeparableConvParams:r,extractReductionBlockParams:function(t,e,o){return{separable_conv0:r(t,e,o+"/separable_conv0"),separable_conv1:r(e,e,o+"/separable_conv1"),expansion_conv:n(t,e,1,o+"/expansion_conv")}},extractMainBlockParams:function(t,e){return{separable_conv0:r(t,t,e+"/separable_conv0"),separable_conv1:r(t,t,e+"/separable_conv1"),separable_conv2:r(t,t,e+"/separable_conv2")}}}}(r.extractWeights,n),a=i.extractSeparableConvParams,s=i.extractReductionBlockParams,u=i.extractMainBlockParams,c={conv_in:(0,i.extractConvParams)(3,32,3,"entry_flow/conv_in"),reduction_block_0:s(32,64,"entry_flow/reduction_block_0"),reduction_block_1:s(64,128,"entry_flow/reduction_block_1")},l={};S(e,0,1).forEach((function(t){l["main_block_"+t]=u(128,"middle_flow/main_block_"+t)}));var f={reduction_block:s(128,256,"exit_flow/reduction_block"),separable_conv:a(256,512,"exit_flow/separable_conv")};if(0!==o().length)throw new Error("weights remaing after extract: "+o().length);return{paramMappings:n,params:{entry_flow:c,middle_flow:l,exit_flow:f}}}function Ct(t,e){var n=[],r=function(t,e){var n=ht(t,e),r=vt(n),o=ft(n);return{extractConvParams:r,extractSeparableConvParams:o,extractReductionBlockParams:function(t){return{separable_conv0:o(t+"/separable_conv0"),separable_conv1:o(t+"/separable_conv1"),expansion_conv:r(t+"/expansion_conv")}},extractMainBlockParams:function(t){return{separable_conv0:o(t+"/separable_conv0"),separable_conv1:o(t+"/separable_conv1"),separable_conv2:o(t+"/separable_conv2")}}}}(t,n),o=r.extractSeparableConvParams,i=r.extractReductionBlockParams,a=r.extractMainBlockParams,s={conv_in:(0,r.extractConvParams)("entry_flow/conv_in"),reduction_block_0:i("entry_flow/reduction_block_0"),reduction_block_1:i("entry_flow/reduction_block_1")},u={};S(e,0,1).forEach((function(t){u["main_block_"+t]=a("middle_flow/main_block_"+t)}));var c={reduction_block:i("exit_flow/reduction_block"),separable_conv:o("exit_flow/separable_conv")};return st(t,n),{params:{entry_flow:s,middle_flow:u,exit_flow:c},paramMappings:n}}function St(t,e,n){return tr.c(tr.i(t,e.filters,n,"same"),e.bias)}function Ot(t,e,n){void 0===n&&(n=!0);var r=n?tr.w(t):t;return r=rt(r,e.separable_conv0,[1,1]),r=rt(tr.w(r),e.separable_conv1,[1,1]),r=tr.s(r,[3,3],[2,2],"same"),r=tr.c(r,St(t,e.expansion_conv,[2,2]))}function At(t,e,n,r,o){void 0===o&&(o="same");var i=e.conv,a=i.bias,s=tr.i(t,i.filters,n,o);return s=function(t,e){return tr.c(tr.t(t,e.weights),e.biases)}(s=tr.c(s,a),e.scale),r?tr.w(s):s}function It(t,e){return At(t,e,[1,1],!1)}function kt(t,e){return At(t,e,[2,2],!0,"valid")}function Tt(t,e){function n(n,r,o,i){var a=function(e,n,r){var o=t(e),i=o.length/(n*r*r);if(i%1!=0)throw new Error("depth has to be an integer: "+i+", weights.length: "+o.length+", numFilters: "+n+", filterSize: "+r);return tr.L((function(){return tr.N(tr.K(o,[n,i,r,r]),[2,3,1,0])}))}(n,r,o),s=tr.H(t(r));return e.push({paramPath:i+"/filters"},{paramPath:i+"/bias"}),{filters:a,bias:s}}function r(r,o,i,a){var s=n(r,o,i,a+"/conv"),u=function(n,r){var o=tr.H(t(n)),i=tr.H(t(n));return e.push({paramPath:r+"/weights"},{paramPath:r+"/biases"}),{weights:o,biases:i}}(o,a+"/scale");return{conv:s,scale:u}}return{extractConvLayerParams:r,extractResidualLayerParams:function(t,e,n,o,i){return void 0===i&&(i=!1),{conv1:r((i?.5:1)*t,e,n,o+"/conv1"),conv2:r(t,e,n,o+"/conv2")}}}}function Mt(t,e){function n(t){var e=r(t+"/conv/filters",4),n=r(t+"/conv/bias",1),o=function(t){return{weights:r(t+"/scale/weights",1),biases:r(t+"/scale/biases",1)}}(t);return{conv:{filters:e,bias:n},scale:o}}var r=ht(t,e);return{extractConvLayerParams:n,extractResidualLayerParams:function(t){return{conv1:n(t+"/conv1"),conv2:n(t+"/conv2")}}}}function Dt(t){var e=[],n=Mt(t,e),r=n.extractResidualLayerParams,o=(0,n.extractConvLayerParams)("conv32_down"),i=r("conv32_1"),a=r("conv32_2"),s=r("conv32_3"),u=r("conv64_down"),c=r("conv64_1"),l=r("conv64_2"),f=r("conv64_3"),h=r("conv128_down"),d=r("conv128_1"),p=r("conv128_2"),v=r("conv256_down"),g=r("conv256_1"),m=r("conv256_2"),y=r("conv256_down_out"),x=t.fc;if(e.push({originalPath:"fc",paramPath:"fc"}),!b(x,2))throw new Error("expected weightMap[fc] to be a Tensor2D, instead have "+x);var w={conv32_down:o,conv32_1:i,conv32_2:a,conv32_3:s,conv64_down:u,conv64_1:c,conv64_2:l,conv64_3:f,conv128_down:h,conv128_1:d,conv128_2:p,conv256_down:v,conv256_1:g,conv256_2:m,conv256_down_out:y,fc:x};return st(t,e),{params:w,paramMappings:e}}function Pt(t,e){var n=function(t,e){return At(t,e,[1,1],!0)}(t,e.conv1);return n=It(n,e.conv2),n=tr.c(n,t),n=tr.w(n)}function Nt(t,e){var n=kt(t,e.conv1);n=It(n,e.conv2);var r=tr.d(t,2,2,"valid"),o=tr.P(r.shape),i=r.shape[3]!==n.shape[3];if(r.shape[1]!==n.shape[1]||r.shape[2]!==n.shape[2]){var a=Object(er.e)(n.shape);a[1]=1;var s=tr.P(a);n=tr.h([n,s],1);var u=Object(er.e)(n.shape);u[2]=1;var c=tr.P(u);n=tr.h([n,c],2)}return r=i?tr.h([r,o],3):r,n=tr.c(r,n),n=tr.w(n)}function Ft(){return Ft=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ft.apply(this,arguments)}function Lt(t,e){return Ft({},t,{descriptor:e})}function jt(){return jt=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},jt.apply(this,arguments)}function Bt(t,e){return jt({},t,{age:e})}function Wt(){return Wt=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Wt.apply(this,arguments)}function Ut(t,e,n){return Wt({},t,{gender:e,genderProbability:n})}function Gt(t,e){function n(n,r,o,i,a){var s=tr.K(t(n*r*o*o),[o,o,n,r]),u=tr.H(t(r));return e.push({paramPath:i+"/filters"},{paramPath:i+"/"+(a?"batch_norm_offset":"bias")}),{filters:s,bias:u}}function r(t,e,r,o){var i=n(t,e,r,o,!0);return{filters:i.filters,batch_norm_offset:i.bias}}function o(n,o,i){var a=function(n,r){var o=tr.K(t(9*n),[3,3,n,1]),i=tr.H(t(n)),a=tr.H(t(n)),s=tr.H(t(n)),u=tr.H(t(n));return e.push({paramPath:r+"/filters"},{paramPath:r+"/batch_norm_scale"},{paramPath:r+"/batch_norm_offset"},{paramPath:r+"/batch_norm_mean"},{paramPath:r+"/batch_norm_variance"}),{filters:o,batch_norm_scale:i,batch_norm_offset:a,batch_norm_mean:s,batch_norm_variance:u}}(n,i+"/depthwise_conv");return{depthwise_conv:a,pointwise_conv:r(n,o,1,i+"/pointwise_conv")}}return{extractMobilenetV1Params:function(){return{conv_0:r(3,32,3,"mobilenetv1/conv_0"),conv_1:o(32,64,"mobilenetv1/conv_1"),conv_2:o(64,128,"mobilenetv1/conv_2"),conv_3:o(128,128,"mobilenetv1/conv_3"),conv_4:o(128,256,"mobilenetv1/conv_4"),conv_5:o(256,256,"mobilenetv1/conv_5"),conv_6:o(256,512,"mobilenetv1/conv_6"),conv_7:o(512,512,"mobilenetv1/conv_7"),conv_8:o(512,512,"mobilenetv1/conv_8"),conv_9:o(512,512,"mobilenetv1/conv_9"),conv_10:o(512,512,"mobilenetv1/conv_10"),conv_11:o(512,512,"mobilenetv1/conv_11"),conv_12:o(512,1024,"mobilenetv1/conv_12"),conv_13:o(1024,1024,"mobilenetv1/conv_13")}},extractPredictionLayerParams:function(){return{conv_0:r(1024,256,1,"prediction_layer/conv_0"),conv_1:r(256,512,3,"prediction_layer/conv_1"),conv_2:r(512,128,1,"prediction_layer/conv_2"),conv_3:r(128,256,3,"prediction_layer/conv_3"),conv_4:r(256,128,1,"prediction_layer/conv_4"),conv_5:r(128,256,3,"prediction_layer/conv_5"),conv_6:r(256,64,1,"prediction_layer/conv_6"),conv_7:r(64,128,3,"prediction_layer/conv_7"),box_predictor_0:{box_encoding_predictor:n(512,12,1,"prediction_layer/box_predictor_0/box_encoding_predictor"),class_predictor:n(512,9,1,"prediction_layer/box_predictor_0/class_predictor")},box_predictor_1:{box_encoding_predictor:n(1024,24,1,"prediction_layer/box_predictor_1/box_encoding_predictor"),class_predictor:n(1024,18,1,"prediction_layer/box_predictor_1/class_predictor")},box_predictor_2:{box_encoding_predictor:n(512,24,1,"prediction_layer/box_predictor_2/box_encoding_predictor"),class_predictor:n(512,18,1,"prediction_layer/box_predictor_2/class_predictor")},box_predictor_3:{box_encoding_predictor:n(256,24,1,"prediction_layer/box_predictor_3/box_encoding_predictor"),class_predictor:n(256,18,1,"prediction_layer/box_predictor_3/class_predictor")},box_predictor_4:{box_encoding_predictor:n(256,24,1,"prediction_layer/box_predictor_4/box_encoding_predictor"),class_predictor:n(256,18,1,"prediction_layer/box_predictor_4/class_predictor")},box_predictor_5:{box_encoding_predictor:n(128,24,1,"prediction_layer/box_predictor_5/box_encoding_predictor"),class_predictor:n(128,18,1,"prediction_layer/box_predictor_5/class_predictor")}}}}}function zt(t){var e=[],n=function(t,e){function n(t,e,n){return{filters:a(t+"/Conv2d_"+e+"_pointwise/weights",4,n+"/filters"),batch_norm_offset:a(t+"/Conv2d_"+e+"_pointwise/convolution_bn_offset",1,n+"/batch_norm_offset")}}function r(t){var e="mobilenetv1/conv_"+t,r="MobilenetV1/Conv2d_"+t+"_depthwise",o=e+"/depthwise_conv",i=e+"/pointwise_conv";return{depthwise_conv:{filters:a(r+"/depthwise_weights",4,o+"/filters"),batch_norm_scale:a(r+"/BatchNorm/gamma",1,o+"/batch_norm_scale"),batch_norm_offset:a(r+"/BatchNorm/beta",1,o+"/batch_norm_offset"),batch_norm_mean:a(r+"/BatchNorm/moving_mean",1,o+"/batch_norm_mean"),batch_norm_variance:a(r+"/BatchNorm/moving_variance",1,o+"/batch_norm_variance")},pointwise_conv:n("MobilenetV1",t,i)}}function o(t,e){return{filters:a(t+"/weights",4,e+"/filters"),bias:a(t+"/biases",1,e+"/bias")}}function i(t){return{box_encoding_predictor:o("Prediction/BoxPredictor_"+t+"/BoxEncodingPredictor","prediction_layer/box_predictor_"+t+"/box_encoding_predictor"),class_predictor:o("Prediction/BoxPredictor_"+t+"/ClassPredictor","prediction_layer/box_predictor_"+t+"/class_predictor")}}var a=ht(t,e);return{extractMobilenetV1Params:function(){return{conv_0:n("MobilenetV1",0,"mobilenetv1/conv_0"),conv_1:r(1),conv_2:r(2),conv_3:r(3),conv_4:r(4),conv_5:r(5),conv_6:r(6),conv_7:r(7),conv_8:r(8),conv_9:r(9),conv_10:r(10),conv_11:r(11),conv_12:r(12),conv_13:r(13)}},extractPredictionLayerParams:function(){return{conv_0:n("Prediction",0,"prediction_layer/conv_0"),conv_1:n("Prediction",1,"prediction_layer/conv_1"),conv_2:n("Prediction",2,"prediction_layer/conv_2"),conv_3:n("Prediction",3,"prediction_layer/conv_3"),conv_4:n("Prediction",4,"prediction_layer/conv_4"),conv_5:n("Prediction",5,"prediction_layer/conv_5"),conv_6:n("Prediction",6,"prediction_layer/conv_6"),conv_7:n("Prediction",7,"prediction_layer/conv_7"),box_predictor_0:i(0),box_predictor_1:i(1),box_predictor_2:i(2),box_predictor_3:i(3),box_predictor_4:i(4),box_predictor_5:i(5)}}}}(t,e),r=n.extractMobilenetV1Params,o=n.extractPredictionLayerParams,i=t["Output/extra_dim"];if(e.push({originalPath:"Output/extra_dim",paramPath:"output_layer/extra_dim"}),!x(i))throw new Error("expected weightMap['Output/extra_dim'] to be a Tensor3D, instead have "+i);var a={mobilenetv1:r(),prediction_layer:o(),output_layer:{extra_dim:i}};return st(t,e),{params:a,paramMappings:e}}function Vt(t,e,n){return tr.L((function(){var r=tr.i(t,e.filters,n,"same");return r=tr.c(r,e.batch_norm_offset),tr.g(r,0,6)}))}function Ht(t,e){return tr.L((function(){var n=null,r=Vt(t,e.conv_0,[2,2]);if([e.conv_1,e.conv_2,e.conv_3,e.conv_4,e.conv_5,e.conv_6,e.conv_7,e.conv_8,e.conv_9,e.conv_10,e.conv_11,e.conv_12,e.conv_13].forEach((function(t,e){var o=e+1,i=function(t){return[2,4,6,12].some((function(e){return e===t}))?[2,2]:[1,1]}(o);r=function(t,e,n){return tr.L((function(){var r=tr.j(t,e.filters,n,"same");return r=tr.e(r,e.batch_norm_mean,e.batch_norm_variance,e.batch_norm_offset,e.batch_norm_scale,.0010000000474974513),tr.g(r,0,6)}))}(r,t.depthwise_conv,i),r=Vt(r,t.pointwise_conv,[1,1]),11===o&&(n=r)})),null===n)throw new Error("mobileNetV1 - output of conv layer 11 is null");return{out:r,conv11:n}}))}function qt(t,e,n){var r=t.arraySync(),o=Math.min(r[e][0],r[e][2]),i=Math.min(r[e][1],r[e][3]),a=Math.max(r[e][0],r[e][2]),s=Math.max(r[e][1],r[e][3]),u=Math.min(r[n][0],r[n][2]),c=Math.min(r[n][1],r[n][3]),l=Math.max(r[n][0],r[n][2]),f=Math.max(r[n][1],r[n][3]),h=(a-o)*(s-i),d=(l-u)*(f-c);if(h<=0||d<=0)return 0;var p=Math.max(o,u),v=Math.max(i,c),g=Math.min(a,l),m=Math.min(s,f),y=Math.max(g-p,0)*Math.max(m-v,0);return y/(h+d-y)}function Kt(t,e){var n=function(t){var e=tr.O(tr.N(t,[1,0])),n=[tr.F(e[2],e[0]),tr.F(e[3],e[1])];return{sizes:n,centers:[tr.c(e[0],tr.k(n[0],tr.y(2))),tr.c(e[1],tr.k(n[1],tr.y(2)))]}}(t),r=n.sizes,o=n.centers,i=tr.O(tr.N(e,[1,0])),a=tr.k(tr.t(tr.l(tr.k(i[2],tr.y(5))),r[0]),tr.y(2)),s=tr.c(tr.t(tr.k(i[0],tr.y(10)),r[0]),o[0]),u=tr.k(tr.t(tr.l(tr.k(i[3],tr.y(5))),r[1]),tr.y(2)),c=tr.c(tr.t(tr.k(i[1],tr.y(10)),r[1]),o[1]);return tr.N(tr.E([tr.F(s,a),tr.F(c,u),tr.c(s,a),tr.c(c,u)]),[1,0])}function Xt(t,e){return tr.L((function(){var n=t.shape[0];return{boxPredictionEncoding:tr.x(at(t,e.box_encoding_predictor),[n,-1,1,4]),classPrediction:tr.x(at(t,e.class_predictor),[n,-1,3])}}))}function Jt(t){return tr.L((function(){var e=tr.t(t,tr.y(.10000000149011612));return tr.c(tr.w(tr.F(t,e)),e)}))}function Yt(t,e){return tr.L((function(){var n=tr.v(t,[[0,0],[1,1],[1,1],[0,0]]);return n=tr.i(n,e.conv.filters,[1,1],"valid"),n=tr.F(n,e.bn.sub),n=tr.t(n,e.bn.truediv),Jt(n=tr.c(n,e.conv.bias))}))}function Qt(t,e){return tr.L((function(){var n=tr.v(t,[[0,0],[1,1],[1,1],[0,0]]);return n=tr.z(n,e.depthwise_filter,e.pointwise_filter,[1,1],"valid"),Jt(n=tr.c(n,e.bias))}))}function $t(t,e){var n=ut(t,e),r=lt(t,e);return{extractConvParams:n,extractConvWithBatchNormParams:function(r,o,i){var a=n(r,o,3,i+"/conv"),s=function(n,r){var o=tr.H(t(n)),i=tr.H(t(n));return e.push({paramPath:r+"/sub"},{paramPath:r+"/truediv"}),{sub:o,truediv:i}}(o,i+"/bn");return{conv:a,bn:s}},extractSeparableConvParams:r}}function Zt(t,e){function n(t){return{filters:r(t+"/filters",4),bias:r(t+"/bias",1)}}var r=ht(t,e);return{extractConvParams:n,extractConvWithBatchNormParams:function(t){var e=n(t+"/conv"),o=function(t){return{sub:r(t+"/sub",1),truediv:r(t+"/truediv",1)}}(t+"/bn");return{conv:e,bn:o}},extractSeparableConvParams:ft(r)}}function te(){return te=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},te.apply(this,arguments)}function ee(t,e,n,r,o){return void 0===o&&(o=function(t){return t.alignedRect}),Object(er.b)(this,void 0,void 0,(function(){var i,a,s,u,c;return Object(er.d)(this,(function(l){switch(l.label){case 0:return i=t.map((function(t){return _t(t)?o(t):t.detection})),(s=r)?[3,5]:e instanceof tr.a?[4,$(e,i)]:[3,2];case 1:return u=l.sent(),[3,4];case 2:return[4,Q(e,i)];case 3:u=l.sent(),l.label=4;case 4:s=u,l.label=5;case 5:return[4,n(a=s)];case 6:return c=l.sent(),a.forEach((function(t){return t instanceof tr.a&&t.dispose()})),[2,c]}}))}))}function ne(t,e,n,r,o){return Object(er.b)(this,void 0,void 0,(function(){var i=this;return Object(er.d)(this,(function(){return[2,ee([t],e,(function(t){return Object(er.b)(i,void 0,void 0,(function(){return Object(er.d)(this,(function(){return[2,n(t[0])]}))}))}),r,o)]}))}))}function re(t){var e=dt(t),n=e.getRemainingWeights,r=[],o=function(t,e){function n(n,r){var o=tr.H(t(n));return e.push({paramPath:r}),o}function r(t,e,r){return void 0===r&&(r=!1),{conv1:o(t[0],t[1],3,e+"/conv1"),prelu1_alpha:n(t[1],e+"/prelu1_alpha"),conv2:o(t[1],t[2],3,e+"/conv2"),prelu2_alpha:n(t[2],e+"/prelu2_alpha"),conv3:o(t[2],t[3],r?2:3,e+"/conv3"),prelu3_alpha:n(t[3],e+"/prelu3_alpha")}}var o=ut(t,e),i=ct(t,e);return{extractPNetParams:function(){var t=r([3,10,16,32],"pnet"),e=o(32,2,1,"pnet/conv4_1"),n=o(32,4,1,"pnet/conv4_2");return Object(er.a)(Object(er.a)({},t),{conv4_1:e,conv4_2:n})},extractRNetParams:function(){var t=r([3,28,48,64],"rnet",!0),e=i(576,128,"rnet/fc1"),o=n(128,"rnet/prelu4_alpha"),a=i(128,2,"rnet/fc2_1"),s=i(128,4,"rnet/fc2_2");return Object(er.a)(Object(er.a)({},t),{fc1:e,prelu4_alpha:o,fc2_1:a,fc2_2:s})},extractONetParams:function(){var t=r([3,32,64,64],"onet"),e=o(64,128,2,"onet/conv4"),a=n(128,"onet/prelu4_alpha"),s=i(1152,256,"onet/fc1"),u=n(256,"onet/prelu5_alpha"),c=i(256,2,"onet/fc2_1"),l=i(256,4,"onet/fc2_2"),f=i(256,10,"onet/fc2_3");return Object(er.a)(Object(er.a)({},t),{conv4:e,prelu4_alpha:a,fc1:s,prelu5_alpha:u,fc2_1:c,fc2_2:l,fc2_3:f})}}}(e.extractWeights,r),i=o.extractRNetParams,a=o.extractONetParams,s=(0,o.extractPNetParams)(),u=i(),c=a();if(0!==n().length)throw new Error("weights remaing after extract: "+n().length);return{params:{pnet:s,rnet:u,onet:c},paramMappings:r}}function oe(t){var e=[],n=function(t,e){function n(t){return{filters:a(t+"/weights",4,t+"/filters"),bias:a(t+"/bias",1)}}function r(t){return{weights:a(t+"/weights",2),bias:a(t+"/bias",1)}}function o(t){return a(t,1)}function i(t){return{conv1:n(t+"/conv1"),prelu1_alpha:o(t+"/prelu1_alpha"),conv2:n(t+"/conv2"),prelu2_alpha:o(t+"/prelu2_alpha"),conv3:n(t+"/conv3"),prelu3_alpha:o(t+"/prelu3_alpha")}}var a=ht(t,e);return{extractPNetParams:function(){var t=i("pnet"),e=n("pnet/conv4_1"),r=n("pnet/conv4_2");return Object(er.a)(Object(er.a)({},t),{conv4_1:e,conv4_2:r})},extractRNetParams:function(){var t=i("rnet"),e=r("rnet/fc1"),n=o("rnet/prelu4_alpha"),a=r("rnet/fc2_1"),s=r("rnet/fc2_2");return Object(er.a)(Object(er.a)({},t),{fc1:e,prelu4_alpha:n,fc2_1:a,fc2_2:s})},extractONetParams:function(){var t=i("onet"),e=n("onet/conv4"),a=o("onet/prelu4_alpha"),s=r("onet/fc1"),u=o("onet/prelu5_alpha"),c=r("onet/fc2_1"),l=r("onet/fc2_2"),f=r("onet/fc2_3");return Object(er.a)(Object(er.a)({},t),{conv4:e,prelu4_alpha:a,fc1:s,prelu5_alpha:u,fc2_1:c,fc2_2:l,fc2_3:f})}}}(t,e),r=n.extractRNetParams,o=n.extractONetParams,i=(0,n.extractPNetParams)(),a=r(),s=o();return st(t,e),{params:{pnet:i,rnet:a,onet:s},paramMappings:e}}function ie(t,e){var n=e[1];return{height:Math.floor(e[0]*t),width:Math.floor(n*t)}}function ae(t){return tr.L((function(){return tr.t(tr.F(t,tr.y(127.5)),tr.y(.0078125))}))}function se(t,e){return tr.L((function(){return tr.c(tr.w(t),tr.t(e,tr.u(tr.w(tr.u(t)))))}))}function ue(t,e,n){return void 0===n&&(n=!1),tr.L((function(){var r=at(t,e.conv1,"valid");return r=se(r,e.prelu1_alpha),r=se(r=at(r=tr.s(r,n?[2,2]:[3,3],[2,2],"same"),e.conv2,"valid"),e.prelu2_alpha),r=se(r=at(r=n?r:tr.s(r,[3,3],[2,2],"valid"),e.conv3,"valid"),e.prelu3_alpha)}))}function ce(t,e,n,r,o){o.stage1=[];var i=e.map((function(e){return tr.L((function(){var n={scale:e},o=function(t,e){return tr.L((function(){var n=ie(e,t.shape.slice(1)),r=ae(tr.o.resizeBilinear(t,[n.height,n.width]));return tr.N(r,[0,2,1,3])}))}(t,e),i=Date.now(),a=function(t,e){return tr.L((function(){var n=ue(t,e,!0),r=at(n,e.conv4_1,"valid"),o=tr.m(tr.r(r,3),3);return{prob:tr.D(tr.F(r,o),3),regions:at(n,e.conv4_2,"valid")}}))}(o,r),s=a.prob,u=a.regions;return n.pnet=Date.now()-i,{scoresTensor:tr.O(tr.O(s,3)[1])[0],regionsTensor:tr.O(u)[0],scale:e,statsForScale:n}}))})),a=i.map((function(t){var e=t.scoresTensor,r=t.regionsTensor,i=t.statsForScale,a=function(t,e,n,r){for(var o=[],i=t.arraySync(),a=0;a<t.shape[0];a++)for(var s=0;s<t.shape[1];s++)i[a][s]>=r&&o.push(new rr(s,a));return o.map((function(t){var r=new ir(Math.round((2*t.y+1)/n),Math.round((2*t.x+1)/n),Math.round((2*t.y+12)/n),Math.round((2*t.x+12)/n)),o=i[t.y][t.x],a=e.arraySync();return{cell:r,score:o,region:new $r(a[t.y][t.x][0],a[t.y][t.x][1],a[t.y][t.x][2],a[t.y][t.x][3])}}))}(e,r,t.scale,n);if(e.dispose(),r.dispose(),!a.length)return o.stage1.push(i),[];var s=Date.now(),u=k(a.map((function(t){return t.cell})),a.map((function(t){return t.score})),.5);return i.nms=Date.now()-s,i.numBoxes=u.length,o.stage1.push(i),u.map((function(t){return a[t]}))})),s=a.reduce((function(t,e){return t.concat(e)}),[]),u=[],c=[];if(s.length>0){var l=Date.now(),f=k(s.map((function(t){return t.cell})),s.map((function(t){return t.score})),.7);o.stage1_nms=Date.now()-l,c=f.map((function(t){return s[t].score})),u=f.map((function(t){return s[t]})).map((function(t){var e=t.cell,n=t.region;return new ir(e.left+n.left*e.width,e.top+n.top*e.height,e.right+n.right*e.width,e.bottom+n.bottom*e.height).toSquare().round()}))}return{boxes:u,scores:c}}function le(t,e,n){var r=n.width,o=n.height;return Object(er.b)(this,void 0,void 0,(function(){var n,i,a,s=this;return Object(er.d)(this,(function(u){switch(u.label){case 0:return n=G(t),[4,Promise.all(e.map((function(e){return Object(er.b)(s,void 0,void 0,(function(){var r,o,i,a;return Object(er.d)(this,(function(){return r=e.padAtBorders(t.height,t.width),a=n.getImageData(o=r.x-1,i=r.y-1,r.ex-o,r.ey-i),[2,yr.isNodejs()?K(a):createImageBitmap(a)]}))}))})))];case 1:return i=u.sent(),a=[],i.forEach((function(t){var e=G(q({width:r,height:o}));e.drawImage(t,0,0,r,o);for(var n=e.getImageData(0,0,r,o).data,i=[],s=0;s<n.length;s+=4)i.push(n[s+2]),i.push(n[s+1]),i.push(n[s]);a.push(i)})),[2,a.map((function(t){return tr.L((function(){return ae(tr.N(tr.K(t,[1,r,o,3]),[0,2,1,3]).toFloat())}))}))]}}))}))}function fe(t,e,n,r,o){return Object(er.b)(this,void 0,void 0,(function(){var i,a,s,u,c,l,f,h,d,p,v,g,m,y;return Object(er.d)(this,(function(b){switch(b.label){case 0:return i=Date.now(),[4,le(t,e,{width:24,height:24})];case 1:return a=b.sent(),o.stage2_extractImagePatches=Date.now()-i,i=Date.now(),s=a.map((function(t){var e=function(t,e){return tr.L((function(){var n=ue(t,e),r=se(mt(tr.x(n,[n.shape[0],e.fc1.weights.shape[0]]),e.fc1),e.prelu4_alpha),o=mt(r,e.fc2_1),i=tr.m(tr.r(o,1),1),a=tr.D(tr.F(o,i),1),s=mt(r,e.fc2_2);return{scores:tr.O(a,1)[1],regions:s}}))}(t,r);return t.dispose(),e})),o.stage2_rnet=Date.now()-i,u=s.length>1?tr.h(s.map((function(t){return t.scores}))):s[0].scores,f=(l=Array).from,[4,u.data()];case 2:return c=f.apply(l,[b.sent()]),u.dispose(),h=c.map((function(t,e){return{score:t,idx:e}})).filter((function(t){return t.score>n})).map((function(t){return t.idx})),d=h.map((function(t){return e[t]})),p=h.map((function(t){return c[t]})),v=[],g=[],d.length>0&&(i=Date.now(),m=k(d,p,.7),o.stage2_nms=Date.now()-i,y=m.map((function(t){var e=s[h[t]].regions.arraySync();return new $r(e[0][0],e[0][1],e[0][2],e[0][3])})),g=m.map((function(t){return p[t]})),v=m.map((function(t,e){return d[t].calibrate(y[e])}))),s.forEach((function(t){t.regions.dispose(),t.scores.dispose()})),[2,{boxes:v,scores:g}]}}))}))}function he(t,e,n,r,o){return Object(er.b)(this,void 0,void 0,(function(){var i,a,s,u,c,l,f,h,d,p,v,g,m,y,b;return Object(er.d)(this,(function(x){switch(x.label){case 0:return i=Date.now(),[4,le(t,e,{width:48,height:48})];case 1:return a=x.sent(),o.stage3_extractImagePatches=Date.now()-i,i=Date.now(),s=a.map((function(t){var e=function(t,e){return tr.L((function(){var n=ue(t,e);n=se(n=at(n=tr.s(n,[2,2],[2,2],"same"),e.conv4,"valid"),e.prelu4_alpha);var r=se(mt(tr.x(n,[n.shape[0],e.fc1.weights.shape[0]]),e.fc1),e.prelu5_alpha),o=mt(r,e.fc2_1),i=tr.m(tr.r(o,1),1),a=tr.D(tr.F(o,i),1),s=mt(r,e.fc2_2),u=mt(r,e.fc2_3);return{scores:tr.O(a,1)[1],regions:s,points:u}}))}(t,r);return t.dispose(),e})),o.stage3_onet=Date.now()-i,u=s.length>1?tr.h(s.map((function(t){return t.scores}))):s[0].scores,f=(l=Array).from,[4,u.data()];case 2:return c=f.apply(l,[x.sent()]),u.dispose(),h=c.map((function(t,e){return{score:t,idx:e}})).filter((function(t){return t.score>n})).map((function(t){return t.idx})),d=h.map((function(t){var e=s[t].regions.arraySync();return new $r(e[0][0],e[0][1],e[0][2],e[0][3])})),p=h.map((function(t,n){return e[t].calibrate(d[n])})),v=h.map((function(t){return c[t]})),g=[],m=[],y=[],p.length>0&&(i=Date.now(),b=k(p,v,.7,!1),o.stage3_nms=Date.now()-i,g=b.map((function(t){return p[t]})),m=b.map((function(t){return v[t]})),y=b.map((function(t,e){return Array(5).fill(0).map((function(n,r){var o=s[t].points.arraySync();return new rr(o[0][r]*(g[e].width+1)+g[e].left,o[0][r+5]*(g[e].height+1)+g[e].top)}))}))),s.forEach((function(t){t.regions.dispose(),t.scores.dispose(),t.points.dispose()})),[2,{boxes:g,scores:m,points:y}]}}))}))}function de(){return de=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},de.apply(this,arguments)}function pe(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)e.indexOf(n=i[r])>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)e.indexOf(n=i[r])>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function ve(){return ve=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ve.apply(this,arguments)}function ge(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)e.indexOf(n=i[r])>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)e.indexOf(n=i[r])>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}n.r(e);n("aEH2"),n("wcNg");var me=n("hosL"),ye=n("/Mq+"),be=n("Hrl7"),xe=n("ensb"),we=Object(xe.a)((function(t){n.e(12).then(function(){var e=n("FDtd");"function"==typeof t&&t(e)}.bind(null,n)).catch(n.oe)})),_e=Object(xe.a)((function(t){n.e(2).then(function(){var e=n("SDU8");"function"==typeof t&&t(e)}.bind(null,n)).catch(n.oe)})),Ee=Object(xe.a)((function(t){n.e(17).then(function(){var e=n("LNEB");"function"==typeof t&&t(e)}.bind(null,n)).catch(n.oe)})),Re=Object(xe.a)((function(t){n.e(19).then(function(){var e=n("u5aW");"function"==typeof t&&t(e)}.bind(null,n)).catch(n.oe)})),Ce=Object(xe.a)((function(t){n.e(5).then(function(){var e=n("ucjA");"function"==typeof t&&t(e)}.bind(null,n)).catch(n.oe)})),Se=Object(xe.a)((function(t){n.e(10).then(function(){var e=n("ySAv");"function"==typeof t&&t(e)}.bind(null,n)).catch(n.oe)})),Oe=Object(xe.a)((function(t){n.e(7).then(function(){var e=n("m1M9");"function"==typeof t&&t(e)}.bind(null,n)).catch(n.oe)})),Ae=Object(xe.a)((function(t){n.e(14).then(function(){var e=n("vnhr");"function"==typeof t&&t(e)}.bind(null,n)).catch(n.oe)})),Ie=Object(xe.a)((function(t){n.e(8).then(function(){var e=n("Ra7T");"function"==typeof t&&t(e)}.bind(null,n)).catch(n.oe)})),ke=Object(xe.a)((function(t){n.e(11).then(function(){var e=n("RraE");"function"==typeof t&&t(e)}.bind(null,n)).catch(n.oe)})),Te=Object(xe.a)((function(t){n.e(9).then(function(){var e=n("Hymy");"function"==typeof t&&t(e)}.bind(null,n)).catch(n.oe)})),Me=Object(xe.a)((function(t){n.e(3).then(function(){var e=n("gZd1");"function"==typeof t&&t(e)}.bind(null,n)).catch(n.oe)})),De=n("QRet");const Pe=["getContext","init","ready","draw","onResize","animate","framesPerSecond"];var Ne=t=>{const{getContext:e,init:n,ready:i,draw:a,onResize:s,animate:u,framesPerSecond:c}=t,l=o(t,Pe),f=c?1e3/c:void 0,h=Object(me.createRef)(),d=Object(De.j)(!1);let p=0;return Object(De.d)((()=>{const t=()=>{d.current=!0};window.addEventListener("blur",t);const e=()=>{d.current=!1};return window.addEventListener("focus",e),()=>{window.removeEventListener("blur",t),window.removeEventListener("focus",e)}}),[]),Object(De.d)((()=>{const t=h.current,n=e?e(t):t.getContext("2d"),r=()=>{n.canvas.width=window.innerWidth,n.canvas.height=window.innerHeight,s&&s(n)};return window.addEventListener("resize",r),r(),()=>{window.removeEventListener("resize",r)}}),[h,e,s]),Object(De.d)((()=>{const t=()=>{document.fullscreenElement||document.body.requestFullscreen().catch((t=>{console.error("Fullscreen fail",t)}))};return window.addEventListener("click",t),()=>{window.removeEventListener("click",t)}}),[h]),Object(De.d)((()=>{const r=h.current,o=e?e(r):r.getContext("2d");let s;n&&n(o);const c=()=>{a(o,p++)},l=()=>{d.current?s=window.setTimeout(l,128):(s=f?window.setTimeout(l,f):requestAnimationFrame(l),a(o,p++))};t.canvasMethodRefs&&(t.canvasMethodRefs.render=c);const v=()=>{s=!1===u?window.setTimeout(c):window.setTimeout(l)};return void 0===i?v():i(v),()=>{f?window.clearTimeout(s):cancelAnimationFrame(s)}}),[h,e,s,u,a,p,f,n,t.canvasMethodRefs,i]),Object(me.h)("canvas",r({ref:h},l))};const Fe=t=>`rgb(${t.join(",")})`,Le=()=>(.5-Math.random())**2,je=Math.PI/60;var Be=function*(t){var e,n;const r=null!=t?t:{},o=null!==(e=r.initialColor)&&void 0!==e?e:new Uint8Array([128,128,128]),i=null!==(n=r.mutate)&&void 0!==n?n:function(t,e){t.fill(128+127*Math.sin(je*e))};for(let t=0;;t++)yield o,i(o,t)},We=n("sRXP"),Ue=n("+COX"),Ge="canvas_frame__PZiEk";const ze=10**(1/13),Ve=1.0055504070680625;let He=!0;var qe=()=>{const t=1/7;let e=0,n=30,r=1;const o=2*Math.PI/7,i=new Uint8Array([0,0,0]),a=[Le(),Le(),Le()],s=-.598,u=[0,0],c=[1,1],l=[0,0],f=o=>{u[0]=Math.floor(o.canvas.width/2),u[1]=Math.floor(o.canvas.height/2);const i=Math.sqrt(u[0]**2+u[1]**2),a=1/Math.cos(Math.PI/7);for(;e++;){if(t*a**e-t>i)break}n=4*Math.floor(t*a**e-t-(t*a**(e-1)-t));r=(1+n*(((t+(t*a**2-t))/t)**(1/n**2)-1)/n)**n},h=(t,e,n,r,s)=>{const c=e-n;let l=r%2==0?0:o/2,f=r%2==0?u[0]-e/2:u[0];const d=e/(2*Math.tan(Math.PI/7)),p=Math.sqrt(d**2+(e/2)**2);let v=r%2==0?u[1]-d:u[1]-p;s&&h(t,e/Math.cos(Math.PI/7),n,r+1,s-1);for(let t=0;t<3;t++)i[t]=Math.round(128+127*Math.sin(c*a[t]));t.strokeStyle=Fe(i),t.beginPath(),t.moveTo(f,v);for(let n=0;n<7;n++)f+=e*Math.cos(l),v+=e*Math.sin(l),t.lineTo(f,v),l+=o;t.stroke()},d=(t,e)=>{u[0]=t,u[1]=e},p=(t,e)=>{c[0]=t,c[1]=e};Object(De.d)((()=>{let t=0;const e=[0,0],n=n=>(t|=1<<n.button,e[0]=n.clientX,e[1]=n.clientY,l[0]=l[1]=0,He=!(1&t),n.preventDefault(),!1);window.addEventListener("mousedown",n);const r=e=>(t^=1<<e.button,e.preventDefault(),He=!(1&t),!1);window.addEventListener("mouseup",r);const o=t=>(t.preventDefault(),!1);window.addEventListener("contextmenu",o);const i=n=>{const r=e[0]-n.clientX,o=e[1]-n.clientY;if(1&t&&(l[0]=r,l[1]=o,u[0]+=r,u[1]-=o,d&&d(u[0],u[1])),2&t){const t=r+o>0?Ve:1/Ve;c[0]*=t,c[1]*=t,p&&p(c[0],c[1])}4&t&&(r&&(c[0]*=r>0?Ve:1/Ve),o&&(c[1]*=o>0?Ve:1/Ve),p&&p(c[0],c[1])),e[0]=n.clientX,e[1]=n.clientY};window.addEventListener("mousemove",i);const a=t=>(e[0]=t.touches[0].pageX,e[1]=t.touches[0].pageY,l[0]=l[1]=0,He=!1,!1);window.addEventListener("touchstart",a);const s=()=>(He=!0,!1);window.addEventListener("touchend",s);const f=t=>{if(1===t.touches.length){const n=e[0]-t.touches[0].pageX,r=e[1]-t.touches[0].pageY;l[0]=n,l[1]=r,u[0]+=n,u[1]-=r,d&&d(u[0],u[1]),e[0]=t.touches[0].pageX,e[1]=t.touches[0].pageY}else 2===t.touches.length?console.log(t.touches):console.error("Insufficient holes")};window.addEventListener("touchmove",f);return window.addEventListener("wheel",(t=>{const e=t.deltaY>0?ze:1/ze;c[0]*=e,c[1]*=e,p&&p(c[0],c[1])})),()=>{window.cancelAnimationFrame(undefined),window.removeEventListener("mousedown",n),window.removeEventListener("mouseup",r),window.removeEventListener("contextmenu",o),window.removeEventListener("mousemove",i),window.removeEventListener("touchstart",a),window.removeEventListener("touchend",s),window.removeEventListener("touchmove",f)}}),[]);const v=Ue.a.polygonous;return Object(me.h)("section",{class:Ge},Object(me.h)(be.a,null,Object(me.h)("title",null,v.title)),Object(me.h)("div",{class:"d-none"},Object(me.h)(We.b,{art:v})),Object(me.h)(Ne,{init:f,onResize:f,draw:(o,i)=>{const a=t*Math.pow(r,i%n);h(o,a,i,0,e),l[0]*=.96,l[1]*=.96,He&&(u[0]+=l[0],u[1]-=l[1]),o.translate(u[0],u[1]),o.rotate(s),o.translate(-u[0],-u[1])}}))};const Ke=["getContext","init","ready","draw","onResize","framesPerSecond"],Xe={alpha:!1,depth:!1,preserveDrawingBuffer:!0};var Je=t=>{const{getContext:e,init:n,ready:r,draw:o,onResize:s,framesPerSecond:u}=t,c=a(t,Ke),l=u?1e3/u:void 0,f=Object(me.createRef)(),h=Object(De.j)(!1);let d=0;return Object(De.d)((()=>{const t=()=>{h.current=!0};window.addEventListener("blur",t);const e=()=>{h.current=!1};return window.addEventListener("focus",e),()=>{window.removeEventListener("blur",t),window.removeEventListener("focus",e)}}),[]),Object(De.d)((()=>{const t=f.current,n=e?e(t):t.getContext("webgl2",Xe),r=()=>{n.canvas.width=window.innerWidth,n.canvas.height=window.innerHeight,s&&s(n)};return window.addEventListener("resize",r),setTimeout(r,128),()=>{window.removeEventListener("resize",r)}}),[f,e,s]),Object(De.d)((()=>{const t=()=>{document.fullscreenElement||document.body.requestFullscreen().catch((t=>{console.error("Fullscreen fail",t)}))};return window.addEventListener("click",t),()=>{window.removeEventListener("click",t)}}),[f]),Object(De.d)((()=>{const t=f.current;let i;const a=e?e(t):t.getContext("webgl2",Xe);if(!a)return alert("Error getting context. WebGL2 is required."),void(window.location.href="https://get.webgl.org/webgl2/");n&&n(a);const s=()=>{h.current?i=window.setTimeout(s,128):(d++,i=l?window.setTimeout(s,l):window.requestAnimationFrame(s),o(a,d))},u=()=>{i=window.setTimeout(s,0)};return void 0===r?u():r(u),()=>{l?window.clearTimeout(i):window.cancelAnimationFrame(i)}}),[f,o,d,l,e,n,r]),Object(me.h)("canvas",i({ref:f},c))};const Ye=(t,e,n)=>{const r=t.createShader(e);if(!r)throw"Missing shader";if(t.shaderSource(r,n),t.compileShader(r),!t.getShaderParameter(r,t.COMPILE_STATUS))throw t.getShaderInfoLog(r);return r};var Qe=()=>{let t,e,n;const r=[0,0];let o=0;Object(De.d)((()=>{const t=[-1,-1],e=[-1,-1],n=e=>{if(t[0]>-1){const n=t[1]-e.clientY;r[0]+=t[0]-e.clientX,r[1]-=n,o+=n}t[0]=e.clientX,t[1]=e.clientY};window.addEventListener("mousemove",n);const i=t=>{if(e[0]>-1){const n=e[1]-t.touches[0].pageY;r[0]+=e[0]-t.touches[0].pageX,r[1]-=n,o+=n}e[0]=t.touches[0].pageX,e[1]=t.touches[0].pageY};return window.addEventListener("touchmove",i),()=>{window.removeEventListener("mousemove",n),window.removeEventListener("touchmove",i)}}),[]);const i=Ue.a.meld;return Object(me.h)("section",{class:Ge},Object(me.h)(be.a,null,Object(me.h)("title",null,i.title)),Object(me.h)("div",{class:"d-none"},Object(me.h)(We.b,{art:i})),Object(me.h)("div",{class:"offcanvas offcanvas-start","data-bs-scroll":"true","data-bs-backdrop":"false",id:"shaders","aria-labelledby":"shadersLabel"},Object(me.h)("div",{class:"offcanvas-header"},Object(me.h)("h5",{class:"offcanvas-title",id:"shadersLabel"},"Shaders"),Object(me.h)("button",{type:"button",class:"btn-close text-reset","data-bs-dismiss":"parameterPanel","aria-label":"Close"})),Object(me.h)("div",{class:"offcanvas-body"},Object(me.h)("form",null,Object(me.h)("div",{class:"mb-3"},Object(me.h)("label",{for:"vertexShader"},"Vertex Shader"),Object(me.h)("textarea",{class:"form-control",id:"vertexShader",rows:6},"#version 300 es\nin vec3 a_position;\n\nvoid main(void) {\n    gl_Position = vec4(a_position, 1.0);\n}\n")),Object(me.h)("div",{class:"mb-3"},Object(me.h)("label",{for:"fragmentShader"},"Fragment Shader"),Object(me.h)("textarea",{class:"form-control",id:"fragmentShader",rows:20},'#version 300 es\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n\nuniform float u_time;\nuniform vec2 u_translate;\nout vec4 fragmentColor;\n\n/*\n  Based on https://github.com/stegu/webgl-noise/blob/master/src/psrdnoise2D.glsl\n  Copyright (c) 2016 Stefan Gustavson. All rights reserved.\n  Distributed under the MIT license. See LICENSE file.\n  https://github.com/stegu/webgl-noise\n*/\n\n// Modulo 289, optimizes to code without divisions\nvec3 mod289(vec3 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nfloat mod289(float x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\n// Permutation polynomial (ring size 289 = 17*17)\nvec3 permute(vec3 x) {\n  return mod289(((x*34.0)+10.0)*x);\n}\n\nfloat permute(float x) {\n  return mod289(((x*34.0)+1.0)*x);\n}\n\n// Hashed 2-D gradients with an extra rotation.\n// (The constant 0.0243902439 is 1/41)\nvec2 rgrad2(vec2 p, float rot) {\n#if 0\n// Map from a line to a diamond such that a shift maps to a rotation.\n  float u = permute(permute(p.x) + p.y) * 0.0243902439 + rot; // Rotate by shift\n  u = 4.0 * fract(u) - 2.0;\n  // (This vector could be normalized, exactly or approximately.)\n  return vec2(abs(u)-1.0, abs(abs(u+1.0)-2.0)-1.0);\n#else\n// For more isotropic gradients, sin/cos can be used instead.\n  float u = permute(permute(p.x) + p.y) * 0.0243902439 + rot; // Rotate by shift\n  u = fract(u) * 6.28318530718; // 2*pi\n  return vec2(cos(u), sin(u));\n#endif\n}\n\n//\n// 2-D tiling simplex noise with rotating gradients and analytical derivative.\n// The first component of the 3-element return vector is the noise value,\n// and the second and third components are the x and y partial derivatives.\n//\nvec3 psrdnoise(vec2 pos, vec2 per, float rot) {\n  // Hack: offset y slightly to hide some rare artifacts\n  pos.y += 0.01;\n  // Skew to hexagonal grid\n  vec2 uv = vec2(pos.x + pos.y*0.5, pos.y);\n  \n  vec2 i0 = floor(uv);\n  vec2 f0 = fract(uv);\n  // Traversal order\n  vec2 i1 = (f0.x > f0.y) ? vec2(1.0, 0.0) : vec2(0.0, 1.0);\n\n  // Unskewed grid points in (x,y) space\n  vec2 p0 = vec2(i0.x - i0.y * 0.5, i0.y);\n  vec2 p1 = vec2(p0.x + i1.x - i1.y * 0.5, p0.y + i1.y);\n  vec2 p2 = vec2(p0.x + 0.5, p0.y + 1.0);\n\n  // Integer grid point indices in (u,v) space\n  i1 = i0 + i1;\n  vec2 i2 = i0 + vec2(1.0, 1.0);\n\n  // Vectors in unskewed (x,y) coordinates from\n  // each of the simplex corners to the evaluation point\n  vec2 d0 = pos - p0;\n  vec2 d1 = pos - p1;\n  vec2 d2 = pos - p2;\n\n  // Wrap i0, i1 and i2 to the desired period before gradient hashing:\n  // wrap points in (x,y), map to (u,v)\n  vec3 xw = mod(vec3(p0.x, p1.x, p2.x), per.x);\n  vec3 yw = mod(vec3(p0.y, p1.y, p2.y), per.y);\n  vec3 iuw = xw + 0.5 * yw;\n  vec3 ivw = yw;\n  \n  // Create gradients from indices\n  vec2 g0 = rgrad2(vec2(iuw.x, ivw.x), rot);\n  vec2 g1 = rgrad2(vec2(iuw.y, ivw.y), rot);\n  vec2 g2 = rgrad2(vec2(iuw.z, ivw.z), rot);\n\n  // Gradients dot vectors to corresponding corners\n  // (The derivatives of this are simply the gradients)\n  vec3 w = vec3(dot(g0, d0), dot(g1, d1), dot(g2, d2));\n  \n  // Radial weights from corners\n  // 0.8 is the square of 2/sqrt(5), the distance from\n  // a grid point to the nearest simplex boundary\n  vec3 t = 0.8 - vec3(dot(d0, d0), dot(d1, d1), dot(d2, d2));\n\n  // Partial derivatives for analytical gradient computation\n  vec3 dtdx = -2.0 * vec3(d0.x, d1.x, d2.x);\n  vec3 dtdy = -2.0 * vec3(d0.y, d1.y, d2.y);\n\n  // Set influence of each surflet to zero outside radius sqrt(0.8)\n  if (t.x < 0.0) {\n    dtdx.x = 0.0;\n    dtdy.x = 0.0;\n\tt.x = 0.0;\n  }\n  if (t.y < 0.0) {\n    dtdx.y = 0.0;\n    dtdy.y = 0.0;\n\tt.y = 0.0;\n  }\n  if (t.z < 0.0) {\n    dtdx.z = 0.0;\n    dtdy.z = 0.0;\n\tt.z = 0.0;\n  }\n\n  // Fourth power of t (and third power for derivative)\n  vec3 t2 = t * t;\n  vec3 t4 = t2 * t2;\n  vec3 t3 = t2 * t;\n  \n  // Final noise value is:\n  // sum of ((radial weights) times (gradient dot vector from corner))\n  float n = dot(t4, w);\n  \n  // Final analytical derivative (gradient of a sum of scalar products)\n  vec2 dt0 = vec2(dtdx.x, dtdy.x) * 4.0 * t3.x;\n  vec2 dn0 = t4.x * g0 + dt0 * w.x;\n  vec2 dt1 = vec2(dtdx.y, dtdy.y) * 4.0 * t3.y;\n  vec2 dn1 = t4.y * g1 + dt1 * w.y;\n  vec2 dt2 = vec2(dtdx.z, dtdy.z) * 4.0 * t3.z;\n  vec2 dn2 = t4.z * g2 + dt2 * w.z;\n\n  return 11.0*vec3(n, dn0 + dn1 + dn2);\n}\n\n//\n// 2-D tiling simplex noise with fixed gradients\n// and analytical derivative.\n// This function is implemented as a wrapper to "psrdnoise",\n// at the minimal cost of three extra additions.\n//\nvec3 psdnoise(vec2 pos, vec2 per) {\n  return psrdnoise(pos, per, 0.0);\n}\n\n//\n// 2-D tiling simplex noise with rotating gradients,\n// but without the analytical derivative.\n//\nfloat psrnoise(vec2 pos, vec2 per, float rot) {\n  // Offset y slightly to hide some rare artifacts\n  pos.y += 0.001;\n  // Skew to hexagonal grid\n  vec2 uv = vec2(pos.x + pos.y*0.5, pos.y);\n  \n  vec2 i0 = floor(uv);\n  vec2 f0 = fract(uv);\n  // Traversal order\n  vec2 i1 = (f0.x > f0.y) ? vec2(1.0, 0.0) : vec2(0.0, 1.0);\n\n  // Unskewed grid points in (x,y) space\n  vec2 p0 = vec2(i0.x - i0.y * 0.5, i0.y);\n  vec2 p1 = vec2(p0.x + i1.x - i1.y * 0.5, p0.y + i1.y);\n  vec2 p2 = vec2(p0.x + 0.5, p0.y + 1.0);\n\n  // Integer grid point indices in (u,v) space\n  i1 = i0 + i1;\n  vec2 i2 = i0 + vec2(1.0, 1.0);\n\n  // Vectors in unskewed (x,y) coordinates from\n  // each of the simplex corners to the evaluation point\n  vec2 d0 = pos - p0;\n  vec2 d1 = pos - p1;\n  vec2 d2 = pos - p2;\n\n  // Wrap i0, i1 and i2 to the desired period before gradient hashing:\n  // wrap points in (x,y), map to (u,v)\n  vec3 xw = mod(vec3(p0.x, p1.x, p2.x), per.x);\n  vec3 yw = mod(vec3(p0.y, p1.y, p2.y), per.y);\n  vec3 iuw = xw + 0.5 * yw;\n  vec3 ivw = yw;\n  \n  // Create gradients from indices\n  vec2 g0 = rgrad2(vec2(iuw.x, ivw.x), rot);\n  vec2 g1 = rgrad2(vec2(iuw.y, ivw.y), rot);\n  vec2 g2 = rgrad2(vec2(iuw.z, ivw.z), rot);\n\n  // Gradients dot vectors to corresponding corners\n  // (The derivatives of this are simply the gradients)\n  vec3 w = vec3(dot(g0, d0), dot(g1, d1), dot(g2, d2));\n  \n  // Radial weights from corners\n  // 0.8 is the square of 2/sqrt(5), the distance from\n  // a grid point to the nearest simplex boundary\n  vec3 t = 0.8 - vec3(dot(d0, d0), dot(d1, d1), dot(d2, d2));\n\n  // Set influence of each surflet to zero outside radius sqrt(0.8)\n  t = max(t, 0.0);\n\n  // Fourth power of t\n  vec3 t2 = t * t;\n  vec3 t4 = t2 * t2;\n  \n  // Final noise value is:\n  // sum of ((radial weights) times (gradient dot vector from corner))\n  float n = dot(t4, w);\n  \n  // Rescale to cover the range [-1,1] reasonably well\n  return 11.0*n;\n}\n\n//\n// 2-D tiling simplex noise with fixed gradients,\n// without the analytical derivative.\n// This function is implemented as a wrapper to "psrnoise",\n// at the minimal cost of three extra additions.\n//\nfloat psnoise(vec2 pos, vec2 per) {\n  return psrnoise(pos, per, 0.0);\n}\n\n//\n// 2-D non-tiling simplex noise with rotating gradients and analytical derivative.\n// The first component of the 3-element return vector is the noise value,\n// and the second and third components are the x and y partial derivatives.\n//\nvec3 srdnoise(vec2 pos, float rot) {\n  // Offset y slightly to hide some rare artifacts\n  pos.y += 0.001;\n  // Skew to hexagonal grid\n  vec2 uv = vec2(pos.x + pos.y*0.5, pos.y);\n  \n  vec2 i0 = floor(uv);\n  vec2 f0 = fract(uv);\n  // Traversal order\n  vec2 i1 = (f0.x > f0.y) ? vec2(1.0, 0.0) : vec2(0.0, 1.0);\n\n  // Unskewed grid points in (x,y) space\n  vec2 p0 = vec2(i0.x - i0.y * 0.5, i0.y);\n  vec2 p1 = vec2(p0.x + i1.x - i1.y * 0.5, p0.y + i1.y);\n  vec2 p2 = vec2(p0.x + 0.5, p0.y + 1.0);\n\n  // Integer grid point indices in (u,v) space\n  i1 = i0 + i1;\n  vec2 i2 = i0 + vec2(1.0, 1.0);\n\n  // Vectors in unskewed (x,y) coordinates from\n  // each of the simplex corners to the evaluation point\n  vec2 d0 = pos - p0;\n  vec2 d1 = pos - p1;\n  vec2 d2 = pos - p2;\n\n  vec3 x = vec3(p0.x, p1.x, p2.x);\n  vec3 y = vec3(p0.y, p1.y, p2.y);\n  vec3 iuw = x + 0.5 * y;\n  vec3 ivw = y;\n  \n  // Avoid precision issues in permutation\n  iuw = mod289(iuw);\n  ivw = mod289(ivw);\n\n  // Create gradients from indices\n  vec2 g0 = rgrad2(vec2(iuw.x, ivw.x), rot);\n  vec2 g1 = rgrad2(vec2(iuw.y, ivw.y), rot);\n  vec2 g2 = rgrad2(vec2(iuw.z, ivw.z), rot);\n\n  // Gradients dot vectors to corresponding corners\n  // (The derivatives of this are simply the gradients)\n  vec3 w = vec3(dot(g0, d0), dot(g1, d1), dot(g2, d2));\n  \n  // Radial weights from corners\n  // 0.8 is the square of 2/sqrt(5), the distance from\n  // a grid point to the nearest simplex boundary\n  vec3 t = 0.8 - vec3(dot(d0, d0), dot(d1, d1), dot(d2, d2));\n\n  // Partial derivatives for analytical gradient computation\n  vec3 dtdx = -2.0 * vec3(d0.x, d1.x, d2.x);\n  vec3 dtdy = -2.0 * vec3(d0.y, d1.y, d2.y);\n\n  // Set influence of each surflet to zero outside radius sqrt(0.8)\n  if (t.x < 0.0) {\n    dtdx.x = 0.0;\n    dtdy.x = 0.0;\n\tt.x = 0.0;\n  }\n  if (t.y < 0.0) {\n    dtdx.y = 0.0;\n    dtdy.y = 0.0;\n\tt.y = 0.0;\n  }\n  if (t.z < 0.0) {\n    dtdx.z = 0.0;\n    dtdy.z = 0.0;\n\tt.z = 0.0;\n  }\n\n  // Fourth power of t (and third power for derivative)\n  vec3 t2 = t * t;\n  vec3 t4 = t2 * t2;\n  vec3 t3 = t2 * t;\n  \n  // Final noise value is:\n  // sum of ((radial weights) times (gradient dot vector from corner))\n  float n = dot(t4, w);\n  \n  // Final analytical derivative (gradient of a sum of scalar products)\n  vec2 dt0 = vec2(dtdx.x, dtdy.x) * 4.0 * t3.x;\n  vec2 dn0 = t4.x * g0 + dt0 * w.x;\n  vec2 dt1 = vec2(dtdx.y, dtdy.y) * 4.0 * t3.y;\n  vec2 dn1 = t4.y * g1 + dt1 * w.y;\n  vec2 dt2 = vec2(dtdx.z, dtdy.z) * 4.0 * t3.z;\n  vec2 dn2 = t4.z * g2 + dt2 * w.z;\n\n  return 11.0*vec3(n, dn0 + dn1 + dn2);\n}\n\n//\n// 2-D non-tiling simplex noise with fixed gradients and analytical derivative.\n// This function is implemented as a wrapper to "srdnoise",\n// at the minimal cost of three extra additions.\n//\nvec3 sdnoise(vec2 pos) {\n  return srdnoise(pos, 0.0);\n}\n\n//\n// 2-D non-tiling simplex noise with rotating gradients,\n// without the analytical derivative.\n//\nfloat srnoise(vec2 pos, float rot) {\n  // Offset y slightly to hide some rare artifacts\n  pos.y += 0.001;\n  // Skew to hexagonal grid\n  vec2 uv = vec2(pos.x + pos.y*0.5, pos.y);\n  \n  vec2 i0 = floor(uv);\n  vec2 f0 = fract(uv);\n  // Traversal order\n  vec2 i1 = (f0.x > f0.y) ? vec2(1.0, 0.0) : vec2(0.0, 1.0);\n\n  // Unskewed grid points in (x,y) space\n  vec2 p0 = vec2(i0.x - i0.y * 0.5, i0.y);\n  vec2 p1 = vec2(p0.x + i1.x - i1.y * 0.5, p0.y + i1.y);\n  vec2 p2 = vec2(p0.x + 0.5, p0.y + 1.0);\n\n  // Integer grid point indices in (u,v) space\n  i1 = i0 + i1;\n  vec2 i2 = i0 + vec2(1.0, 1.0);\n\n  // Vectors in unskewed (x,y) coordinates from\n  // each of the simplex corners to the evaluation point\n  vec2 d0 = pos - p0;\n  vec2 d1 = pos - p1;\n  vec2 d2 = pos - p2;\n\n  // Wrap i0, i1 and i2 to the desired period before gradient hashing:\n  // wrap points in (x,y), map to (u,v)\n  vec3 x = vec3(p0.x, p1.x, p2.x);\n  vec3 y = vec3(p0.y, p1.y, p2.y);\n  vec3 iuw = x + 0.5 * y;\n  vec3 ivw = y;\n  \n  // Avoid precision issues in permutation\n  iuw = mod289(iuw);\n  ivw = mod289(ivw);\n\n  // Create gradients from indices\n  vec2 g0 = rgrad2(vec2(iuw.x, ivw.x), rot);\n  vec2 g1 = rgrad2(vec2(iuw.y, ivw.y), rot);\n  vec2 g2 = rgrad2(vec2(iuw.z, ivw.z), rot);\n\n  // Gradients dot vectors to corresponding corners\n  // (The derivatives of this are simply the gradients)\n  vec3 w = vec3(dot(g0, d0), dot(g1, d1), dot(g2, d2));\n  \n  // Radial weights from corners\n  // 0.8 is the square of 2/sqrt(5), the distance from\n  // a grid point to the nearest simplex boundary\n  vec3 t = 0.8 - vec3(dot(d0, d0), dot(d1, d1), dot(d2, d2));\n\n  // Set influence of each surflet to zero outside radius sqrt(0.8)\n  t = max(t, 0.0);\n\n  // Fourth power of t\n  vec3 t2 = t * t;\n  vec3 t4 = t2 * t2;\n  \n  // Final noise value is:\n  // sum of ((radial weights) times (gradient dot vector from corner))\n  float n = dot(t4, w);\n  \n  // Rescale to cover the range [-1,1] reasonably well\n  return 11.0*n;\n}\n\n//\n// 2-D non-tiling simplex noise with fixed gradients,\n// without the analytical derivative.\n// This function is implemented as a wrapper to "srnoise",\n// at the minimal cost of three extra additions.\n// Note: if this kind of noise is all you want, there are faster\n// GLSL implementations of non-tiling simplex noise out there.\n// This one is included mainly for completeness and compatibility\n// with the other functions in the file.\n//\nfloat snoise(vec2 pos) {\n  return srnoise(pos, 0.0);\n}\n\nvoid main() {\n  vec2 xy = gl_FragCoord.xy + u_translate.xy;\n  float t = u_time / 64.0;\n  float a = snoise(xy - 0.5 * cos(t / 3.923));\n  float b = snoise(xy - 0.5 * cos(t / 2.329));\n  float c = snoise(xy - 0.5 * cos(t / 1.123));\n  fragmentColor = vec4(0.5 + 0.5 * vec3(a, b, c), 1.0);\n}\n'))))),Object(me.h)(Je,{init:o=>{r[0]=-o.canvas.width/2,r[1]=-o.canvas.height/2,t=(t=>{var e,n;const r=t.createProgram();if(!r)throw"Missing program";const o=null===(e=document.getElementById("fragmentShader"))||void 0===e?void 0:e.textContent;if(!o)throw"Missing fragmentShaderSource";const i=Ye(t,t.FRAGMENT_SHADER,o);t.attachShader(r,i);const a=null===(n=document.getElementById("vertexShader"))||void 0===n?void 0:n.textContent;if(!a)throw"Missing vertexShaderSource";const s=Ye(t,t.VERTEX_SHADER,a);var u;if(t.attachShader(r,s),t.linkProgram(r),!t.getProgramParameter(r,t.LINK_STATUS))throw null!==(u=t.getProgramInfoLog(r))&&void 0!==u?u:"Error from getProgramParameter";return t.useProgram(r),r})(o),((t,r)=>{const o=t.getAttribLocation(r,"a_position"),i=new Float32Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0]),a=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,a),t.bufferData(t.ARRAY_BUFFER,i,t.STATIC_DRAW),t.vertexAttribPointer(o,3,t.FLOAT,!1,0,0),t.bindBuffer(t.ARRAY_BUFFER,null),t.enableVertexAttribArray(o),e=t.getUniformLocation(r,"u_time"),n=t.getUniformLocation(r,"u_translate")})(o,t)},onResize:t=>{t.viewport(0,0,t.canvas.width,t.canvas.height),t.clear(t.COLOR_BUFFER_BIT)},draw:(t,i)=>{t.uniform1f(e,i+o),t.uniform2f(n,r[0],r[1]),t.drawArrays(t.TRIANGLE_STRIP,0,4)}}))};var $e=()=>{const t=Ue.a.circle;return Object(me.h)("section",{class:Ge},Object(me.h)(be.a,null,Object(me.h)("title",null,t.title)),Object(me.h)("div",{class:"d-none"},Object(me.h)(We.b,{art:t})),Object(me.h)("iframe",{src:"https://psilly.com/experiments/circle.html"}))};var Ze=()=>{const t=[0,0],e=e=>{t[0]=e.canvas.width/2,t[1]=e.canvas.height/2},n=Be({mutate:t=>{for(let e=0;e<3;e++)if(Math.random()>.5){const n=1-2*Math.floor(2*Math.random());t[e]=(t[e]+256+n)%256}}}),r=Ue.a.squibbo;return Object(me.h)("section",{class:Ge},Object(me.h)(be.a,null,Object(me.h)("title",null,r.title)),Object(me.h)("div",{class:"d-none"},Object(me.h)(We.b,{art:r})),Object(me.h)(Ne,{init:e,onResize:e,draw:e=>{e.strokeStyle=Fe(n.next().value),e.beginPath(),e.moveTo(t[0],t[1]);for(let n=0;n<32;n++)t[0]=Math.random()*e.canvas.width,t[1]=Math.random()*e.canvas.height,e.lineTo(t[0],t[1]);e.stroke()}}))},tn="parameter_panel_toggle_button__XNF61";var en=t=>{const e=Object(me.createRef)(),[n,r]=Object(De.k)(!0),o=()=>r(!n);return Object(De.d)((()=>(console.log("ParameterPanel construct"),()=>{console.log("ParameterPanel destruct")})),[t,e]),Object(me.h)("div",{ref:e},Object(me.h)("button",{class:`btn ${tn}`,type:"button","data-bs-toggle":"parameterPanel","aria-controls":"panel","aria-label":"Show Parameter Panel","aria-expanded":!n,onClick:o},"⚙️"),Object(me.h)("div",{class:"offcanvas offcanvas-end "+(n?"":" show visible"),"data-bs-scroll":"true","data-bs-backdrop":"false",tabIndex:-1,id:"panel","aria-labelledby":"panelLabel"},Object(me.h)("div",{class:"offcanvas-header"},Object(me.h)("h5",{class:"offcanvas-title",id:"panelLabel"},"Parameters"),Object(me.h)("button",{type:"button",class:"btn-close text-reset","data-bs-dismiss":"parameterPanel","aria-label":"Close",onClick:o})),Object(me.h)("div",{class:"offcanvas-body"})))};const nn=(1+Math.sqrt(5))/2,rn=2*Math.PI/Math.pow(nn,2);var on=()=>{const t=Be();let e=0,n=0;const r=[0,0],o=t=>{e=.92*Math.min(t.canvas.width,t.canvas.height),n=0,r[0]=(t.canvas.width-e)/2,r[1]=t.canvas.height/2-e/5},i=o,a=Ue.a["golden-angle-donut"];return Object(me.h)("section",{class:Ge},Object(me.h)(Ne,{init:o,draw:o=>{o.strokeStyle=Fe(t.next().value),o.beginPath(),o.moveTo(r[0],r[1]);for(let t=0;t<8;t++)r[0]+=e*Math.cos(n),r[1]+=e*Math.sin(n),o.lineTo(r[0],r[1]),n+=rn;o.stroke()},onResize:i}),Object(me.h)(be.a,null,Object(me.h)("title",null,a.title)),Object(me.h)("div",{class:"d-none"},Object(me.h)(We.b,{art:a})),Object(me.h)(en,{something:69}))};var an=()=>{const t=Ue.a.circle;return Object(me.h)("section",{class:Ge},Object(me.h)(be.a,null,Object(me.h)("title",null,t.title)),Object(me.h)("div",{class:"d-none"},Object(me.h)(We.b,{art:t})),Object(me.h)("iframe",{src:"https://falls.psilly.com/"}))},sn="loading_screen__Tgmbg";const un={isLoading:!0,progress:1,statusMessage:"Loading"},cn=["Planting apple seeds","Lazering dolphins","Crisping nachos","Reticulating bungholes","Turtling half-shells","Fuzzing resplicers","Treadmilling","Forkifying respores","Watering existentialisms","Keeping the peace","Gravitizing anti-gravitons","Ratcheting crackers","Revolving revolvers","Rolling rocks of roll into roll-rocks to be rocked by rollers","Cawwing cowards","Tickling dangleberries","Dignifying dignity","Zapping anomalies","Mining Dogecoin","Phishing for compliments","Realizing the meaning of life","Nulling sensitivities","Minimizing the wage gap","Tossing salad","Going out for a rip","Unrectifying bridge rectifiers","Cauliflowering rotisseries","Truncating tree trunks","Solving p=np","Rejoicing reggae","Crushing cylinders of diluted ethanol","Pumping backwash","Pandering bandits","Wheelspinning"],ln=(t,e)=>{switch(e.type){case"start":return u(u({},t),{},{isLoading:!0,progress:1,statusMessage:"Started"});case"stop":return u(u({},t),{},{isLoading:!1,progress:100,statusMessage:"Done!"});case"update":return u(u({},t),{},{isLoading:t.progress<100,progress:t.progress+100/3,statusMessage:cn[Math.random()*cn.length|0]});default:throw'Undefined action "action.type"'}},fn=t=>`width: ${t}%`,hn=t=>{const{style:e,isLoading:n,progress:r,statusMessage:o}=t;return Object(me.h)("div",{class:`${e} modal-dialog modal-fullscreen text-center ${n?"":"d-none"}`},Object(me.h)("div",{class:"spinner-border"},Object(me.h)("span",{class:"visually-hidden"},"Loading...")),Object(me.h)("br",null),Object(me.h)("span",null,o,n?"...":""),Object(me.h)("div",{class:"progress mt-2 mx-3"},Object(me.h)("div",{class:"progress-bar progress-bar-striped progress-bar-animated",role:"progressbar","aria-valuenow":r,"aria-valuemin":"0","aria-valuemax":"100",style:fn(r)})))};var dn=()=>{const[t,e]=Object(De.i)(ln,un);return Object(De.d)((()=>{const n=setTimeout((()=>{e({type:"update",arg:t.progress})}),1024*Math.random());return()=>clearTimeout(n)})),Object(me.h)(hn,{style:sn,isLoading:t.isLoading,progress:t.progress,statusMessage:t.statusMessage})};const pn=(t,e)=>{void 0===e&&(e=Math.ceil(Math.log2(t+1)/2));const n=[1==(1&e),!1],r=[0,0];for(let o=e-1;-1!==o;o--){const e=1<<(o<<1),i=0!=(t&e<<1),a=0!=(t&e),s=i!==n[+!a],u=1<<o;s&&(r[0]|=u),s!==a&&(r[1]|=u),n[0]=n[0]!==!(i||a),n[1]=n[1]!==(i&&a)}return r},vn={};class gn{constructor(){l(this,"position",0),l(this,"negative",Math.random()<.5),l(this,"speed",Math.ceil(64*Math.random())),l(this,"colorPeriods",[Le(),Le(),Le()]),l(this,"colorGenerator",Be({mutate:(t,e)=>{for(let n=0;n<3;n++)t[n]=Math.round(128+127*Math.sin(e*this.colorPeriods[n]))}}))}}var mn=()=>{const t=[];let e,n=[];const r=r=>{r.clearRect(0,0,r.canvas.width,r.canvas.height);const o=Math.max(r.canvas.width,r.canvas.height),i=Math.ceil(Math.log2(o));n=(t=>{if(t in vn)return vn[t];const e=[];for(let n=0;n<1<<2*t;++n)e.push(pn(n,t));return vn[t]=e,e})(i);const a=Math.floor(Math.sqrt(r.canvas.width*r.canvas.height)/16);for(t.length=0;a>t.length;)t.push(new gn);for(const e of t)e.position=Math.floor(Math.random()*n.length);e=r.createImageData(1,1),e.data[3]=255},o=Ue.a.chillbert;return Object(me.h)("section",{class:Ge},Object(me.h)(be.a,null,Object(me.h)("title",null,o.title)),Object(me.h)("div",{class:"d-none"},Object(me.h)(We.b,{art:o})),Object(me.h)(dn,null),Object(me.h)(Ne,{init:r,onResize:r,draw:r=>{for(const o of t){const t=o.colorGenerator.next().value;e.data[0]=t[0],e.data[1]=t[1],e.data[2]=t[2];for(let t=0;t<o.speed;t++)o.position=o.position+(o.negative?-1:1),o.position&=n.length-1,r.putImageData(e,...n[o.position&n.length-1])}}}))};class yn{constructor(){f(this,"position",new Int16Array([0,0])),f(this,"direction",0),f(this,"colorGenerator",Be({mutate:t=>{for(let e=0;e<3;e++)if(Math.random()>.5){const n=1-2*Math.floor(2*Math.random());t[e]=(t[e]+256+n)%256}}}))}}var bn=()=>{const t=[],e=t=>{t.clearRect(0,0,t.canvas.width,t.canvas.height),n(t)},n=e=>{const n=4*Math.floor(Math.sqrt(e.canvas.width*e.canvas.height));for(;n>t.length;)t.push(new yn);for(const n of t)n.position[0]=Math.floor(Math.random()*e.canvas.width),n.position[1]=Math.floor(Math.random()*e.canvas.height),n.direction=Math.floor(4*Math.random())},r=Ue.a.develop;return Object(me.h)("section",{class:Ge},Object(me.h)(be.a,null,Object(me.h)("title",null,r.title)),Object(me.h)("div",{class:"d-none"},Object(me.h)(We.b,{art:r})),Object(me.h)(Ne,{init:e,onResize:e,draw:e=>{for(const n of t){e.strokeStyle=Fe(n.colorGenerator.next().value),e.beginPath(),e.moveTo(n.position[0],n.position[1]);const[t,r]=n.position;0===n.direction?n.position[1]-=1:1===n.direction?n.position[0]+=1:2===n.direction?n.position[1]+=1:3===n.direction&&(n.position[0]-=1),n.direction=Math.floor(4*Math.random());const[o,i]=[e.canvas.width+1,e.canvas.height+1];n.position[0]<0&&(n.position[0]+=o),n.position[1]<0&&(n.position[1]+=i),n.position[0]%=o,n.position[1]%=i;const[a,s]=n.position;Math.abs(t%o-a)>1||Math.abs(r%i-s)>1||(e.lineTo(n.position[0],n.position[1]),e.stroke())}}}))};const xn=(t,e,n)=>{const r=t.createShader(e);if(!r)throw"Missing shader";if(t.shaderSource(r,n),t.compileShader(r),!t.getShaderParameter(r,t.COMPILE_STATUS))throw t.getShaderInfoLog(r);return r},wn=(t,e)=>{const n=1<<2*e,r=t.createTexture();if(!r)throw"Error creating texture";t.bindTexture(t.TEXTURE_2D,r),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,n,n,0,t.RGBA,t.UNSIGNED_BYTE,null);const o=new Uint32Array(n);for(let t=1;t<n;t++)o[t]=+(Math.random()>.5);const i=new Uint8Array(n*n*4);for(let t=0;t<o.length;t++){const e=4*t;i[e+0]=i[e+1]=i[e+2]=Math.random()>.5?255:0,i[e+3]=255}return t.texSubImage2D(t.TEXTURE_2D,0,0,0,n,n,t.RGBA,t.UNSIGNED_BYTE,i),r};var _n=()=>{let t,e,n;const r=[0,0],o=Ue.a.quadingle;return Object(me.h)("section",{class:Ge},Object(me.h)(be.a,null,Object(me.h)("title",null,o.title)),Object(me.h)("div",{class:"d-none"},Object(me.h)(We.b,{art:o})),Object(me.h)("div",{class:"offcanvas offcanvas-start","data-bs-scroll":"true","data-bs-backdrop":"false",id:"shaders","aria-labelledby":"shadersLabel"},Object(me.h)("div",{class:"offcanvas-header"},Object(me.h)("h5",{class:"offcanvas-title",id:"shadersLabel"},"Shaders"),Object(me.h)("button",{type:"button",class:"btn-close text-reset","data-bs-dismiss":"parameterPanel","aria-label":"Close"})),Object(me.h)("div",{class:"offcanvas-body"},Object(me.h)("form",null,Object(me.h)("div",{class:"mb-3"},Object(me.h)("label",{for:"vertexShader"},"Vertex Shader"),Object(me.h)("textarea",{class:"form-control",id:"vertexShader",rows:6},"#version 300 es\nin vec2 a_position;\n\nvoid main(void) {\n  gl_Position = vec4(a_position, 0.0, 1.0);\n}\n")),Object(me.h)("div",{class:"mb-3"},Object(me.h)("label",{for:"fragmentShader"},"Fragment Shader"),Object(me.h)("textarea",{class:"form-control",id:"fragmentShader",rows:20},"#version 300 es\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n\nuniform float u_time;\nuniform vec2 u_translate;\nuniform sampler2D a_curve;\nout vec4 fragmentColor;\n\nvoid main() {\n  float m_0 = gl_FragCoord.x + u_translate.x;\n  float m_1 = gl_FragCoord.y + u_translate.y;\n\n  // fragmentColor.r = (m_0*m_0+m_1*m_1)/1024.0;\n\n  // fragmentColor = texture(a_curve, gl_FragCoord.xy);\n\n  vec2 tex = vec2(m_0, m_1);\n  fragmentColor = texture(a_curve, tex);\n\n  fragmentColor.g = 0.3;\n  fragmentColor.r = (m_0*m_0+m_1*m_1)/1024.0;\n}\n"))))),Object(me.h)(Je,{init:o=>{3===wn.length&&console.log(wn),r[0]=-o.canvas.width/2,r[1]=-o.canvas.height/2,t=(t=>{var e,n;const r=t.createProgram();if(!r)throw"Missing program";const o=null===(e=document.getElementById("fragmentShader"))||void 0===e?void 0:e.textContent;if(!o)throw"Missing fragmentShaderSource";const i=xn(t,t.FRAGMENT_SHADER,o);t.attachShader(r,i);const a=null===(n=document.getElementById("vertexShader"))||void 0===n?void 0:n.textContent;if(!a)throw"Missing vertexShaderSource";const s=xn(t,t.VERTEX_SHADER,a);var u;if(t.attachShader(r,s),t.linkProgram(r),!t.getProgramParameter(r,t.LINK_STATUS))throw null!==(u=t.getProgramInfoLog(r))&&void 0!==u?u:"Error from getProgramParameter";return t.useProgram(r),r})(o),((t,r)=>{const o=t.getAttribLocation(r,"a_position"),i=t.getAttribLocation(r,"a_curve"),a=new Float32Array([1,1,-1,1,1,-1,-1,-1]),s=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,s),t.bufferData(t.ARRAY_BUFFER,a,t.STATIC_DRAW),t.vertexAttribPointer(o,2,t.FLOAT,!1,0,0),t.bindBuffer(t.ARRAY_BUFFER,null),t.enableVertexAttribArray(o);const u=new Float32Array([1,0,0,255,255,255,255,0]),c=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,c),t.bufferData(t.ARRAY_BUFFER,u,t.STATIC_DRAW),t.vertexAttribPointer(i,2,t.FLOAT,!1,0,0),t.bindBuffer(t.ARRAY_BUFFER,null),t.enableVertexAttribArray(i),e=t.getUniformLocation(r,"u_time"),n=t.getUniformLocation(r,"u_translate")})(o,t)},onResize:t=>{t.viewport(0,0,t.canvas.width,t.canvas.height),t.clear(t.COLOR_BUFFER_BIT)},draw:(t,o)=>{t.uniform1i(e,o),t.uniform2f(n,r[0],r[1]),t.drawArrays(t.TRIANGLE_STRIP,0,4)}}))};const En=(t,e,n)=>{const r=t.createShader(e);if(!r)throw"Missing shader";if(t.shaderSource(r,n),t.compileShader(r),!t.getShaderParameter(r,t.COMPILE_STATUS))throw t.getShaderInfoLog(r);return r};var Rn=()=>{let t,e,n,r;const o=[0,0],i=[1,1];let a=1;const s=Ue.a["oh-bezier"];return Object(me.h)("section",{class:Ge},Object(me.h)(be.a,null,Object(me.h)("title",null,s.title)),Object(me.h)("div",{class:"d-none"},Object(me.h)(We.b,{art:s})),Object(me.h)("div",{class:"offcanvas offcanvas-start","data-bs-scroll":"true","data-bs-backdrop":"false",id:"shaders","aria-labelledby":"shadersLabel"},Object(me.h)("div",{class:"offcanvas-header"},Object(me.h)("h5",{class:"offcanvas-title",id:"shadersLabel"},"Shaders"),Object(me.h)("button",{type:"button",class:"btn-close text-reset","data-bs-dismiss":"parameterPanel","aria-label":"Close"})),Object(me.h)("div",{class:"offcanvas-body"},Object(me.h)("form",null,Object(me.h)("div",{class:"mb-3"},Object(me.h)("label",{for:"vertexShader"},"Vertex Shader"),Object(me.h)("textarea",{class:"form-control",id:"vertexShader",rows:6},"#version 300 es\nin vec2 a_position;\nin vec4 a_color;\nout vec4 v_color;\n\nvoid main(void) {\n  gl_Position = vec4(a_position, 0.0, 1.0);\n  v_color = a_color;\n}\n")),Object(me.h)("div",{class:"mb-3"},Object(me.h)("label",{for:"fragmentShader"},"Fragment Shader"),Object(me.h)("textarea",{class:"form-control",id:"fragmentShader",rows:20},"#version 300 es\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n\nuniform float u_time;\nuniform vec2 u_translate;\nuniform vec2 u_scale;\nout vec4 fragmentColor;\n\nvoid main() {\n  float m_0 = ( gl_FragCoord.x + u_translate.x ) * u_scale.x;\n  float m_1 = ( gl_FragCoord.y + u_translate.y ) * u_scale.y;\n  bool inside = m_0 > 0.0;\n  fragmentColor.r = fragmentColor.b = inside ? 0.5 : 0.0;\n}\n"))))),Object(me.h)("button",{class:"btn btn-primary position-fixed"},"+"),Object(me.h)(Je,{init:s=>{a=Math.sqrt(s.canvas.width**2+s.canvas.height**2),o[0]=-s.canvas.width/2,o[1]=-s.canvas.height/2,i[0]=i[1]=2/a,t=(t=>{var e,n;const r=t.createProgram();if(!r)throw"Missing program";const o=null===(e=document.getElementById("fragmentShader"))||void 0===e?void 0:e.textContent;if(!o)throw"Missing fragmentShaderSource";const i=En(t,t.FRAGMENT_SHADER,o);t.attachShader(r,i);const a=null===(n=document.getElementById("vertexShader"))||void 0===n?void 0:n.textContent;if(!a)throw"Missing vertexShaderSource";const s=En(t,t.VERTEX_SHADER,a);var u;if(t.attachShader(r,s),t.linkProgram(r),!t.getProgramParameter(r,t.LINK_STATUS))throw null!==(u=t.getProgramInfoLog(r))&&void 0!==u?u:"Error from getProgramParameter";return t.useProgram(r),r})(s),((t,o)=>{const i=t.getAttribLocation(o,"a_position"),a=new Float32Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0]),s=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,s),t.bufferData(t.ARRAY_BUFFER,a,t.STATIC_DRAW),t.vertexAttribPointer(i,3,t.FLOAT,!1,0,0),t.bindBuffer(t.ARRAY_BUFFER,null),t.enableVertexAttribArray(i),e=t.getUniformLocation(o,"u_time"),n=t.getUniformLocation(o,"u_translate"),r=t.getUniformLocation(o,"u_scale")})(s,t)},onResize:t=>{t.viewport(0,0,t.canvas.width,t.canvas.height),t.clear(t.COLOR_BUFFER_BIT)},draw:(t,a)=>{t.uniform1f(e,a),t.uniform2f(n,o[0],o[1]),t.uniform2f(r,i[0],i[1]),t.drawArrays(t.TRIANGLE_STRIP,0,4)}}))},Cn="grid_overlay__VJE1o";const Sn=["setTranslate","setScale"],On=(t,e)=>0===t?"0":e>-1&&e<4?`${t}${"0".repeat(e)}`:`${t}⏨${e}`,An=10**(1/13),In=1.0055504070680625;let kn=!0;var Tn=t=>{const{setTranslate:e,setScale:n}=t,r=d(t,Sn),o={render(){console.log("canvasMethodRefs.render()")}},i=[0,0],a=[0,0],s=[1,1],u=[0,0],c=[-4,16],l=[-4,-4];let f=0;const p=t=>{var e;t.strokeStyle="#999",t.fillStyle="#ccc",t.textAlign="right",t.lineWidth=1,t.font="12px monospace",f=t.canvas.height,i[0]=t.canvas.width/2,i[1]=t.canvas.height/2,a[0]=-i[0],a[1]=-i[1];const o=null!==(e=r.initialScale)&&void 0!==e?e:64/t.canvas.width;s[0]=s[1]=o,n&&n(s[0],s[1]),g(t)},v=()=>{o&&"render"in o&&o.render()},g=t=>{t.clearRect(0,0,t.canvas.width,t.canvas.height),u[0]*=.9,u[1]*=.9,kn&&(a[0]+=u[0],a[1]-=u[1]);const n=Math.ceil(Math.log10(24*s[0])),r=Math.ceil(Math.log10(24*s[1])),o=10**n,i=10**r,f=o/s[0],h=i/s[1],d=Math.ceil(a[0]*s[0]/o),p=Math.ceil(a[1]*s[1]/i),v=d*o/s[0]-a[0],g=a[1]-p*i/s[1],m=Math.floor(t.canvas.width/f),y=Math.floor(t.canvas.height/h),b=Math.floor(m/2),x=Math.floor(y/2);t.beginPath();for(let e=0;e<=m;e++){const n=v+e*f;if(t.moveTo(n,0),t.lineTo(n,t.canvas.height),e===b)for(let e=0;e<=y;e++){const o=On(e+p,r);t.fillText(o,n+l[0],g+t.canvas.height-e*h+l[1])}}for(let e=0;e<=y;e++){const r=g+t.canvas.height-e*h;if(t.moveTo(0,r),t.lineTo(t.canvas.width,r),e===x)for(let e=0;e<=m;e++){const o=On(e+d,n);t.fillText(o,v+e*f+c[0],r+c[1])}}t.stroke(),e&&e(a[0],a[1])};return Object(De.d)((()=>{let t=0;const r=[0,0],o=[-1,-1],i=[-1,-1],c=e=>(t|=1<<e.button,r[0]=e.clientX,r[1]=e.clientY,u[0]=u[1]=0,kn=!(1&t),e.preventDefault(),!1);window.addEventListener("mousedown",c);const l=e=>(t^=1<<e.button,e.preventDefault(),kn=!(1&t),!1);window.addEventListener("mouseup",l);const h=t=>(t.preventDefault(),!1);window.addEventListener("contextmenu",h);const d=o=>{const i=r[0]-o.clientX,c=r[1]-o.clientY;if(1&t&&(u[0]=4*i,u[1]=4*c,a[0]+=i,a[1]-=c,e&&(e(a[0],a[1]),v())),2&t){const t=In**-c;s[0]*=t,s[1]*=t,n&&(n(s[0],s[1]),v())}if(4&t){const t=[(r[0]+a[0])*s[0],(f-r[1]+a[1])*s[1]],o=[t[0]/s[0]-a[0],t[1]/s[1]-a[1]];s[0]*=In**i,s[1]*=In**-c,n&&n(s[0],s[1]);const u=[t[0]/s[0]-a[0],t[1]/s[1]-a[1]];a[0]-=o[0]-u[0]-i,a[1]+=u[1]-o[1]-c,e&&e(a[0],a[1]),v()}r[0]=o.clientX,r[1]=o.clientY};window.addEventListener("mousemove",d);const p=t=>(o[0]=t.touches[0].pageX,o[1]=t.touches[0].pageY,u[0]=u[1]=0,kn=!1,!1);window.addEventListener("touchstart",p);const g=()=>(o[0]=o[1]=-1,kn=!0,!1);window.addEventListener("touchend",g);const m=t=>{if(o[0]>-1)if(1===t.touches.length){const n=o[0]-t.touches[0].pageX,r=o[1]-t.touches[0].pageY;u[0]=n,u[1]=r,a[0]+=n,a[1]-=r,i[0]=i[1]=-1,e&&(e(a[0],a[1]),v())}else{if(i[0]>-1){const r=t.touches[0].pageX,u=t.touches[0].pageY,c=t.touches[1].pageX,l=t.touches[1].pageY,h=((o[0]-i[0])**2+(o[1]-i[1])**2)/((r-c)**2+(u-l)**2),d=[(r+c)/2,(u+l)/2],p=[(d[0]+a[0])*s[0],(f-d[1]+a[1])*s[1]],g=[p[0]/s[0]-a[0],p[1]/s[1]-a[1]];s[0]*=h,s[1]*=h,n&&n(s[0],s[1]);const m=[p[0]/s[0]-a[0],p[1]/s[1]-a[1]];a[0]-=g[0]-m[0],a[1]+=m[1]-g[1],e&&e(a[0],a[1]),v()}i[0]=t.touches[1].pageX,i[1]=t.touches[1].pageY}o[0]=t.touches[0].pageX,o[1]=t.touches[0].pageY};window.addEventListener("touchmove",m);window.addEventListener("wheel",(t=>{const o=t.deltaY>0?An:.8376776400682919,i=[(r[0]+a[0])*s[0],(f-r[1]+a[1])*s[1]],u=[i[0]/s[0]-a[0],i[1]/s[1]-a[1]];s[0]*=o,s[1]*=o,n&&n(s[0],s[1]);const c=[i[0]/s[0]-a[0],i[1]/s[1]-a[1]];a[0]-=u[0]-c[0],a[1]+=c[1]-u[1],e&&e(a[0],a[1]),v()}));const y=t=>{switch(t.code){case"KeyW":case"ArrowUp":case"Numpad8":a[1]-=19.100426267430983;break;case"KeyS":case"ArrowDown":case"Numpad2":a[1]+=19.100426267430983;break;case"KeyA":case"ArrowLeft":case"Numpad4":a[0]+=19.100426267430983;break;case"KeyD":case"ArrowRight":case"Numpad6":a[0]-=19.100426267430983;break;case"NumpadSubtract":case"Minus":s[0]*=An,s[1]*=An,n&&(n(s[0],s[1]),v());break;case"NumpadAdd":case"Equal":s[0]/=An,s[1]/=An,n&&(n(s[0],s[1]),v())}};return window.addEventListener("keydown",y),()=>{window.removeEventListener("mousedown",c),window.removeEventListener("mouseup",l),window.removeEventListener("contextmenu",h),window.removeEventListener("mousemove",d),window.removeEventListener("touchstart",p),window.removeEventListener("touchend",g),window.removeEventListener("touchmove",m),window.removeEventListener("keypress",y)}}),[]),Object(me.h)("div",h({class:Cn},r),Object(me.h)(Ne,{canvasMethodRefs:o,init:p,onResize:p,draw:g,animate:!0}))};class Mn{constructor(t){p(this,"level",1n),p(this,"weight",0n),p(this,"S",[0,-1,1,0]),p(this,"U",[0,1,-1,0]),p(this,"R",[1,-1,0,1]),p(this,"T",[1,1,0,1]),p(this,"E",[1,0,0,1]),p(this,"I",[-1,0,0,-1]),this.weight=t}get label(){return`${this.level}.${this.weight}.a.a.1.1`}}const Dn=(t,e,n)=>{const r=t.createShader(e);if(!r)throw"Missing shader";if(t.shaderSource(r,n),t.compileShader(r),!t.getShaderParameter(r,t.COMPILE_STATUS))throw t.getShaderInfoLog(r);return r};var Pn=()=>{const t=Object(me.createRef)();let e,n,r,o;const i=[0,0],a=[1,1],s=Ue.a["totally-modular-form-bro"];return Object(me.h)("section",{ref:t,class:Ge},Object(me.h)(be.a,null,Object(me.h)("title",null,s.title)),Object(me.h)("div",{class:"d-none"},Object(me.h)(We.b,{art:s})),Object(me.h)("div",{class:"offcanvas offcanvas-start","data-bs-scroll":"true","data-bs-backdrop":"false",id:"shaders","aria-labelledby":"shadersLabel"},Object(me.h)("div",{class:"offcanvas-header"},Object(me.h)("h5",{class:"offcanvas-title",id:"shadersLabel"},"Shaders"),Object(me.h)("button",{type:"button",class:"btn-close text-reset","data-bs-dismiss":"parameterPanel","aria-label":"Close"})),Object(me.h)("div",{class:"offcanvas-body"},Object(me.h)("form",null,Object(me.h)("div",{class:"mb-3"},Object(me.h)("label",{for:"vertexShader"},"Vertex Shader"),Object(me.h)("textarea",{class:"form-control",id:"vertexShader",rows:6},"#version 300 es\nin vec2 a_position;\nin vec4 a_color;\nout vec4 v_color;\n\nvoid main(void) {\n  gl_Position = vec4(a_position, 0.0, 1.0);\n  v_color = a_color;\n}\n")),Object(me.h)("div",{class:"mb-3"},Object(me.h)("label",{for:"fragmentShader"},"Fragment Shader"),Object(me.h)("textarea",{class:"form-control",id:"fragmentShader",rows:20},"#version 300 es\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n\nuniform float u_time;\nuniform vec2 u_translate;\nuniform vec2 u_scale;\nout vec4 fragmentColor;\n\nvoid main() {\n  float m_0 = ( gl_FragCoord.x + u_translate.x ) * u_scale.x;\n  float m_1 = ( gl_FragCoord.y + u_translate.y ) * u_scale.y;\n  float z = m_0 / m_1;\n  fragmentColor.r = fragmentColor.g = fragmentColor.b = z < 1.0 ? z : 1.0 / z;\n}\n"))))),Object(me.h)(Tn,{setTranslate:(t,e)=>{i[0]=t,i[1]=e},setScale:(t,e)=>{a[0]=t,a[1]=e}}),Object(me.h)(Je,{init:t=>{i[0]=-t.canvas.width/2,i[1]=-t.canvas.height/2,a[0]=a[1]=1/64,e=(t=>{var e,n;const r=t.createProgram();if(!r)throw"Missing program";const o=null===(e=document.getElementById("fragmentShader"))||void 0===e?void 0:e.textContent;if(!o)throw"Missing fragmentShaderSource";const i=Dn(t,t.FRAGMENT_SHADER,o);t.attachShader(r,i);const a=null===(n=document.getElementById("vertexShader"))||void 0===n?void 0:n.textContent;if(!a)throw"Missing vertexShaderSource";const s=Dn(t,t.VERTEX_SHADER,a);var u;if(t.attachShader(r,s),t.linkProgram(r),!t.getProgramParameter(r,t.LINK_STATUS))throw null!==(u=t.getProgramInfoLog(r))&&void 0!==u?u:"Error from getProgramParameter";return t.useProgram(r),r})(t),((t,e)=>{const i=t.getAttribLocation(e,"a_position"),a=new Float32Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0]),s=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,s),t.bufferData(t.ARRAY_BUFFER,a,t.STATIC_DRAW),t.vertexAttribPointer(i,3,t.FLOAT,!1,0,0),t.bindBuffer(t.ARRAY_BUFFER,null),t.enableVertexAttribArray(i),n=t.getUniformLocation(e,"u_time"),r=t.getUniformLocation(e,"u_translate"),o=t.getUniformLocation(e,"u_scale")})(t,e);const s=new Mn(12n);console.log(s.label)},onResize:t=>{t.viewport(0,0,t.canvas.width,t.canvas.height),t.clear(t.COLOR_BUFFER_BIT)},draw:(t,e)=>{t.uniform1f(n,e),t.uniform2f(r,i[0],i[1]),t.uniform2f(o,a[0],a[1]),t.drawArrays(t.TRIANGLE_STRIP,0,4)}}))},Nn="out__qHbLz";var Fn=t=>{const{outRef:e,out:n}=t,r=null!=e?e:Object(me.createRef)();return Object(me.h)("pre",{class:Nn,ref:r},n)};const Ln="undefined"!=typeof window,jn=Ln&&!!window.DeviceMotionEvent,Bn=Ln&&!!window.DeviceOrientationEvent,Wn=(t,e,n)=>{const r=t.createShader(e);if(!r)throw"Missing shader";if(t.shaderSource(r,n),t.compileShader(r),!t.getShaderParameter(r,t.COMPILE_STATUS))throw t.getShaderInfoLog(r);return r};var Un=()=>{const t=Object(me.createRef)(),e=Object(me.createRef)();let n,r,o,i;const a=[0,0],s=[1,1];Object(De.d)((()=>{if(!Ln)return;const t=e.current,n=(...e)=>{console.log(...e),t.innerHTML=`${e.join(" ")}\n`},r=t=>{var e,r,o;return n(`(${+t.absolute}, ${null!==(e=t.alpha)&&void 0!==e?e:"?"}, ${null!==(r=t.beta)&&void 0!==r?r:"?"}, ${null!==(o=t.gamma)&&void 0!==o?o:"?"})`),t.preventDefault(),!1};window.addEventListener("deviceorientation",r);const o=t=>{var e,r,o;return n(`(${t.acceleration&&null!==(e=t.acceleration.x)&&void 0!==e?e:"?"}, ${t.accelerationIncludingGravity&&null!==(r=t.accelerationIncludingGravity.x)&&void 0!==r?r:"?"}, ${t.interval}, ${t.rotationRate&&null!==(o=t.rotationRate.alpha)&&void 0!==o?o:"?"})`),t.preventDefault(),!1};return window.addEventListener("devicemotion",o),n(`init ➜ ${Math.random()}`),jn||alert("Error: Motion not available"),Bn||alert("Error: Orientation not available"),()=>{window.removeEventListener("deviceorientation",r),window.removeEventListener("devicemotion",o)}}),[]);const u=Ue.a.untilted;return Object(me.h)("section",{ref:t,class:Ge},Object(me.h)(be.a,null,Object(me.h)("title",null,u.title)),Object(me.h)("div",{class:"d-none"},Object(me.h)(We.b,{art:u})),Object(me.h)("div",{class:"offcanvas offcanvas-start","data-bs-scroll":"true","data-bs-backdrop":"false",id:"shaders","aria-labelledby":"shadersLabel"},Object(me.h)("div",{class:"offcanvas-header"},Object(me.h)("h5",{class:"offcanvas-title",id:"shadersLabel"},"Shaders"),Object(me.h)("button",{type:"button",class:"btn-close text-reset","data-bs-dismiss":"parameterPanel","aria-label":"Close"})),Object(me.h)("div",{class:"offcanvas-body"},Object(me.h)("form",null,Object(me.h)("div",{class:"mb-3"},Object(me.h)("label",{for:"vertexShader"},"Vertex Shader"),Object(me.h)("textarea",{class:"form-control",id:"vertexShader",rows:6},"#version 300 es\nin vec2 a_position;\nin vec4 a_color;\nout vec4 v_color;\n\nvoid main(void) {\n  gl_Position = vec4(a_position, 0.0, 1.0);\n  v_color = a_color;\n}\n")),Object(me.h)("div",{class:"mb-3"},Object(me.h)("label",{for:"fragmentShader"},"Fragment Shader"),Object(me.h)("textarea",{class:"form-control",id:"fragmentShader",rows:20},"#version 300 es\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n\nuniform float u_time;\nuniform vec2 u_translate;\nuniform vec2 u_scale;\nout vec4 fragmentColor;\n\nvoid main() {\n  float m_0 = ( gl_FragCoord.x + u_translate.x ) * u_scale.x;\n  float m_1 = ( gl_FragCoord.y + u_translate.y ) * u_scale.y;\n  float z = m_0 / m_1;\n  fragmentColor.r = fragmentColor.g = fragmentColor.b = z < 1.0 ? z : 1.0 / z;\n}\n"))))),Object(me.h)("div",{style:"display:none;"},Object(me.h)(Tn,{setTranslate:(t,e)=>{a[0]=t,a[1]=e},setScale:(t,e)=>{s[0]=t,s[1]=e}})),Object(me.h)(Fn,{outRef:e}),Object(me.h)(Je,{init:t=>{a[0]=-t.canvas.width/2,a[1]=-t.canvas.height/2,s[0]=s[1]=1/64,n=(t=>{var e,n;const r=t.createProgram();if(!r)throw"Missing program";const o=null===(e=document.getElementById("fragmentShader"))||void 0===e?void 0:e.textContent;if(!o)throw"Missing fragmentShaderSource";const i=Wn(t,t.FRAGMENT_SHADER,o);t.attachShader(r,i);const a=null===(n=document.getElementById("vertexShader"))||void 0===n?void 0:n.textContent;if(!a)throw"Missing vertexShaderSource";const s=Wn(t,t.VERTEX_SHADER,a);var u;if(t.attachShader(r,s),t.linkProgram(r),!t.getProgramParameter(r,t.LINK_STATUS))throw null!==(u=t.getProgramInfoLog(r))&&void 0!==u?u:"Error from getProgramParameter";return t.useProgram(r),r})(t),((t,e)=>{const n=t.getAttribLocation(e,"a_position"),a=new Float32Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0]),s=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,s),t.bufferData(t.ARRAY_BUFFER,a,t.STATIC_DRAW),t.vertexAttribPointer(n,3,t.FLOAT,!1,0,0),t.bindBuffer(t.ARRAY_BUFFER,null),t.enableVertexAttribArray(n),r=t.getUniformLocation(e,"u_time"),o=t.getUniformLocation(e,"u_translate"),i=t.getUniformLocation(e,"u_scale")})(t,n)},onResize:t=>{t.viewport(0,0,t.canvas.width,t.canvas.height),t.clear(t.COLOR_BUFFER_BIT)},draw:(t,e)=>{t.uniform1f(r,e),t.uniform2f(o,a[0],a[1]),t.uniform2f(i,s[0],s[1]),t.drawArrays(t.TRIANGLE_STRIP,0,4)}}))};const Gn=(t,e,n)=>{const r=t.createShader(e);if(!r)throw"Missing shader";if(t.shaderSource(r,n),t.compileShader(r),!t.getShaderParameter(r,t.COMPILE_STATUS))throw t.getShaderInfoLog(r);return r};var zn=()=>{const t=Object(me.createRef)();let e,n,r,o;const i=[0,0],a=[1,1],s=(t,e)=>{i[0]=t,i[1]=e},u=(t,e)=>{t.uniform1f(n,e),t.uniform2f(r,i[0],i[1]),t.uniform2f(o,a[0],a[1]),t.drawArrays(t.TRIANGLE_STRIP,0,4)},c=Ue.a.lemnisgo;return Object(me.h)("section",{ref:t,class:Ge},Object(me.h)(be.a,null,Object(me.h)("title",null,c.title)),Object(me.h)("div",{class:"d-none"},Object(me.h)(We.b,{art:c})),Object(me.h)("div",{class:"offcanvas offcanvas-start","data-bs-scroll":"true","data-bs-backdrop":"false",id:"shaders","aria-labelledby":"shadersLabel"},Object(me.h)("div",{class:"offcanvas-header"},Object(me.h)("h5",{class:"offcanvas-title",id:"shadersLabel"},"Shaders"),Object(me.h)("button",{type:"button",class:"btn-close text-reset","data-bs-dismiss":"parameterPanel","aria-label":"Close"})),Object(me.h)("div",{class:"offcanvas-body"},Object(me.h)("form",null,Object(me.h)("div",{class:"mb-3"},Object(me.h)("label",{for:"vertexShader"},"Vertex Shader"),Object(me.h)("textarea",{class:"form-control",id:"vertexShader",rows:6},"#version 300 es\nin vec2 a_position;\nin vec4 a_color;\nout vec4 v_color;\n\nvoid main(void) {\n  gl_Position = vec4(a_position, 0.0, 1.0);\n  v_color = a_color;\n}\n")),Object(me.h)("div",{class:"mb-3"},Object(me.h)("label",{for:"fragmentShader"},"Fragment Shader"),Object(me.h)("textarea",{class:"form-control",id:"fragmentShader",rows:20},"#version 300 es\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n\nuniform float u_time;\nuniform vec2 u_translate;\nuniform vec2 u_scale;\nout vec4 fragmentColor;\n\nvoid main() {\n  float x = ( gl_FragCoord.x + u_translate.x ) * u_scale.x;\n  float y = ( gl_FragCoord.y + u_translate.y ) * u_scale.y;\n  float x2 = x*x;\n  float y2 = y*y;\n\n  // lemniscate of bernoulli (0 = -2x² + x⁴ + 2y² + 2x²y² + y⁴)\n  float z = -2.0*x2 + x2*x2 + 2.0*y2 + 2.0*x2*y2 + y2*y2;\n\n  fragmentColor.r = mod(z + u_time / 43.0, 1.0);\n  fragmentColor.g = z < 1.0 ? z : 1.0 / z;\n  fragmentColor.b = mod(z - u_time / 73.0, 1.0);\n}\n"))))),Object(me.h)("div",{style:"display:none;"},Object(me.h)(Tn,{setTranslate:s,setScale:(t,e)=>{a[0]=t,a[1]=e,s(0,0)}})),Object(me.h)(Je,{init:t=>{i[0]=-t.canvas.width/2,i[1]=-t.canvas.height/2,e=(t=>{var e,n;const r=t.createProgram();if(!r)throw"Missing program";const o=null===(e=document.getElementById("fragmentShader"))||void 0===e?void 0:e.textContent;if(!o)throw"Missing fragmentShaderSource";const i=Gn(t,t.FRAGMENT_SHADER,o);t.attachShader(r,i);const a=null===(n=document.getElementById("vertexShader"))||void 0===n?void 0:n.textContent;if(!a)throw"Missing vertexShaderSource";const s=Gn(t,t.VERTEX_SHADER,a);var u;if(t.attachShader(r,s),t.linkProgram(r),!t.getProgramParameter(r,t.LINK_STATUS))throw null!==(u=t.getProgramInfoLog(r))&&void 0!==u?u:"Error from getProgramParameter";return t.useProgram(r),r})(t),((t,e)=>{const i=t.getAttribLocation(e,"a_position"),a=new Float32Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0]),s=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,s),t.bufferData(t.ARRAY_BUFFER,a,t.STATIC_DRAW),t.vertexAttribPointer(i,3,t.FLOAT,!1,0,0),t.bindBuffer(t.ARRAY_BUFFER,null),t.enableVertexAttribArray(i),n=t.getUniformLocation(e,"u_time"),r=t.getUniformLocation(e,"u_translate"),o=t.getUniformLocation(e,"u_scale")})(t,e)},onResize:t=>{t.viewport(0,0,t.canvas.width,t.canvas.height),t.clear(t.COLOR_BUFFER_BIT),u(t,-1)},draw:u}))};const Vn=(t,e,n)=>{const r=t.createShader(e);if(!r)throw"Missing shader";if(t.shaderSource(r,n),t.compileShader(r),!t.getShaderParameter(r,t.COMPILE_STATUS))throw t.getShaderInfoLog(r);return r};var Hn=()=>{const t=Object(me.createRef)();let e,n,r,o;const i=[0,0],a=[1,1],s=(t,e)=>{i[0]=t,i[1]=e},u=(t,e)=>{t.uniform1f(n,e),t.uniform2f(r,i[0],i[1]),t.uniform2f(o,a[0],a[1]),t.drawArrays(t.TRIANGLE_STRIP,0,4)},c=Ue.a.hyperbollick;return Object(me.h)("section",{ref:t,class:Ge},Object(me.h)(be.a,null,Object(me.h)("title",null,c.title)),Object(me.h)("div",{class:"d-none"},Object(me.h)(We.b,{art:c})),Object(me.h)("div",{class:"offcanvas offcanvas-start","data-bs-scroll":"true","data-bs-backdrop":"false",id:"shaders","aria-labelledby":"shadersLabel"},Object(me.h)("div",{class:"offcanvas-header"},Object(me.h)("h5",{class:"offcanvas-title",id:"shadersLabel"},"Shaders"),Object(me.h)("button",{type:"button",class:"btn-close text-reset","data-bs-dismiss":"parameterPanel","aria-label":"Close"})),Object(me.h)("div",{class:"offcanvas-body"},Object(me.h)("form",null,Object(me.h)("div",{class:"mb-3"},Object(me.h)("label",{for:"vertexShader"},"Vertex Shader"),Object(me.h)("textarea",{class:"form-control",id:"vertexShader",rows:6},"#version 300 es\nin vec2 a_position;\nin vec4 a_color;\nout vec4 v_color;\n\nvoid main(void) {\n  gl_Position = vec4(a_position, 0.0, 1.0);\n  v_color = a_color;\n}\n")),Object(me.h)("div",{class:"mb-3"},Object(me.h)("label",{for:"fragmentShader"},"Fragment Shader"),Object(me.h)("textarea",{class:"form-control",id:"fragmentShader",rows:20},"#version 300 es\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n\nuniform float u_time;\nuniform vec2 u_translate;\nuniform vec2 u_scale;\nout vec4 fragmentColor;\n\nvoid main() {\n  float x = ( gl_FragCoord.x + u_translate.x ) * u_scale.x;\n  float y = ( gl_FragCoord.y + u_translate.y ) * u_scale.y;\n\n  // hyperbola (xy = 1)\n  float z = x * y - 1.0;\n\n  fragmentColor.r = mod(z - u_time / 96911.0 * 94111.0, 1.0);\n  fragmentColor.g = z < 1.0 ? z : 1.0 / z;\n  fragmentColor.b = mod(z - u_time / 96931.0 * 94111.0, 1.0);\n}\n"))))),Object(me.h)("div",{style:"display:none;"},Object(me.h)(Tn,{setTranslate:s,setScale:(t,e)=>{a[0]=t,a[1]=e,s(0,0)},initialScale:.77})),Object(me.h)(Je,{init:t=>{i[0]=-t.canvas.width/2,i[1]=-t.canvas.height/2,e=(t=>{var e,n;const r=t.createProgram();if(!r)throw"Missing program";const o=null===(e=document.getElementById("fragmentShader"))||void 0===e?void 0:e.textContent;if(!o)throw"Missing fragmentShaderSource";const i=Vn(t,t.FRAGMENT_SHADER,o);t.attachShader(r,i);const a=null===(n=document.getElementById("vertexShader"))||void 0===n?void 0:n.textContent;if(!a)throw"Missing vertexShaderSource";const s=Vn(t,t.VERTEX_SHADER,a);var u;if(t.attachShader(r,s),t.linkProgram(r),!t.getProgramParameter(r,t.LINK_STATUS))throw null!==(u=t.getProgramInfoLog(r))&&void 0!==u?u:"Error from getProgramParameter";return t.useProgram(r),r})(t),((t,e)=>{const i=t.getAttribLocation(e,"a_position"),a=new Float32Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0]),s=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,s),t.bufferData(t.ARRAY_BUFFER,a,t.STATIC_DRAW),t.vertexAttribPointer(i,3,t.FLOAT,!1,0,0),t.bindBuffer(t.ARRAY_BUFFER,null),t.enableVertexAttribArray(i),n=t.getUniformLocation(e,"u_time"),r=t.getUniformLocation(e,"u_translate"),o=t.getUniformLocation(e,"u_scale")})(t,e)},onResize:t=>{t.viewport(0,0,t.canvas.width,t.canvas.height),t.clear(t.COLOR_BUFFER_BIT),u(t,-1)},draw:u}))};const qn=2*Math.PI,Kn={animate:!0},Xn=(t,e)=>{switch(e.type){case"start":return g(g({},t),{},{animate:!0});case"stop":return g(g({},t),{},{animate:!1});default:throw'Undefined action "action.type"'}};var Jn=()=>{const[t,e]=Object(De.i)(Xn,Kn),n=function*(){const t=new Uint8Array([255,0,0]);yield t;for(let e=1;e<90;e++)e<16?t[1]+=17:e<31?t[0]-=17:e<46?t[2]+=17:e<61?t[1]-=17:e<76?t[0]+=17:t[2]-=17,yield t}(),r=[];for(let t=0;t<90;t++)r[t]=Fe(n.next().value);let o=!1;"undefined"!=typeof window&&window.addEventListener("click",(()=>{o=!o}));const i=Ue.a.vcock;return Object(me.h)("section",{class:Ge},Object(me.h)(be.a,null,Object(me.h)("title",null,i.title)),Object(me.h)("div",{class:"d-none"},Object(me.h)(We.b,{art:i})),Object(me.h)(Ne,{draw:(t,e)=>{t.clearRect(0,0,t.canvas.width,t.canvas.height),t.strokeStyle="#fff";const n=t.canvas.width/2,o=t.canvas.height,i=t.canvas.height-n;t.beginPath(),t.moveTo(n,o),t.lineTo(0,i),t.moveTo(n,o),t.lineTo(t.canvas.width,i),t.stroke();for(let n=0;n<90;n++){t.fillStyle=r[n],t.beginPath();const o=e/60*qn*(n+90)/90,i=-Math.cos(o),a=16*n*.6222222222222222,s=t.canvas.height-a-32/Math.SQRT2-Math.abs(16*Math.sin(o)*Math.sqrt(n+8));t.arc(t.canvas.width/2+a*i,s,16,0,qn,!0),t.fill()}},animate:t.animate}))};const Yn=(t,e,n)=>{const r=t.createShader(e);if(!r)throw"Missing shader";if(t.shaderSource(r,n),t.compileShader(r),!t.getShaderParameter(r,t.COMPILE_STATUS))throw t.getShaderInfoLog(r);return r};var Qn,$n,Zn=()=>{const t=Object(me.createRef)();let e,n,r,o;const i=[0,0],a=[1,1],s=(t,e)=>{i[0]=t,i[1]=e},u=(t,e)=>{t.uniform1f(n,e),t.uniform2f(r,i[0],i[1]),t.uniform2f(o,a[0],a[1])},c=Ue.a.gravity;return Object(me.h)("section",{ref:t,class:Ge},Object(me.h)(be.a,null,Object(me.h)("title",null,c.title)),Object(me.h)("div",{class:"d-none"},Object(me.h)(We.b,{art:c})),Object(me.h)("div",{class:"offcanvas offcanvas-start","data-bs-scroll":"true","data-bs-backdrop":"false",id:"shaders","aria-labelledby":"shadersLabel"},Object(me.h)("div",{class:"offcanvas-header"},Object(me.h)("h5",{class:"offcanvas-title",id:"shadersLabel"},"Shaders"),Object(me.h)("button",{type:"button",class:"btn-close text-reset","data-bs-dismiss":"parameterPanel","aria-label":"Close"})),Object(me.h)("div",{class:"offcanvas-body"},Object(me.h)("form",null,Object(me.h)("div",{class:"mb-3"},Object(me.h)("label",{for:"vertexShader"},"Vertex Shader"),Object(me.h)("textarea",{class:"form-control",id:"vertexShader",rows:6},"#version 300 es\n\nin vec3 aVertexPosition;\nin vec3 aVertexNormal;\nin vec2 aTextureCoord;\n\nuniform mat4 uMVMatrix;\nuniform mat4 uPMatrix;\nuniform mat3 uNMatrix;\n\nuniform vec3 uAmbientColor;\n\nuniform vec3 uLightingDirection;\nuniform vec3 uDirectionalColor;\n\nuniform bool uUseLighting;\n\nout vec2 vTextureCoord;\nout vec3 vLightWeighting;\n\nvoid main(void) {\n    gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);\n    vTextureCoord = aTextureCoord;\n\n    if (!uUseLighting) {\n        vLightWeighting = vec3(1.0, 1.0, 1.0);\n    } else {\n        vec3 transformedNormal = uNMatrix * aVertexNormal;\n        float directionalLightWeighting = max(dot(transformedNormal, uLightingDirection), 0.0);\n        vLightWeighting = uAmbientColor + uDirectionalColor * directionalLightWeighting;\n    }\n}\n\n")),Object(me.h)("div",{class:"mb-3"},Object(me.h)("label",{for:"fragmentShader"},"Fragment Shader"),Object(me.h)("textarea",{class:"form-control",id:"fragmentShader",rows:20},"#version 300 es\n\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n\nin vec2 vTextureCoord;\nin vec3 vLightWeighting;\nin vec4 myOutputColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void) {\n  vec4 textureColor = texture(uSampler, vec2(vTextureCoord.s, vTextureCoord.t));\n  // myOutputColor = vec4(textureColor.rgb * vLightWeighting, textureColor.a);\n}\n\n"))))),Object(me.h)("div",{style:"display:none;"},Object(me.h)(Tn,{setTranslate:s,setScale:(t,e)=>{a[0]=t,a[1]=e,s(0,0)}})),Object(me.h)(Je,{init:t=>{i[0]=-t.canvas.width/2,i[1]=-t.canvas.height/2,e=(t=>{var e,n;const r=t.createProgram();if(!r)throw"Missing program";const o=null===(e=document.getElementById("fragmentShader"))||void 0===e?void 0:e.textContent;if(!o)throw"Missing fragmentShaderSource";const i=Yn(t,t.FRAGMENT_SHADER,o);t.attachShader(r,i);const a=null===(n=document.getElementById("vertexShader"))||void 0===n?void 0:n.textContent;if(!a)throw"Missing vertexShaderSource";const s=Yn(t,t.VERTEX_SHADER,a);var u;if(t.attachShader(r,s),t.linkProgram(r),!t.getProgramParameter(r,t.LINK_STATUS))throw null!==(u=t.getProgramInfoLog(r))&&void 0!==u?u:"Error from getProgramParameter";return t.useProgram(r),r})(t),((t,e)=>{const i=t.getAttribLocation(e,"a_position"),a=[],s=[],u=[];for(let t=0;t<=30;t++){const e=t*Math.PI/30,n=Math.sin(e),r=Math.cos(e);for(let e=0;e<=30;e++){const o=2*e*Math.PI/30,i=Math.sin(o),c=Math.cos(o)*n,l=r,f=i*n,h=1-e/30,d=1-t/30;a.push(c),a.push(l),a.push(f),s.push(h),s.push(d),u.push(3*c),u.push(3*l),u.push(3*f)}}const c=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,c),t.bufferData(t.ARRAY_BUFFER,new Float32Array(s),t.STATIC_DRAW),t.bufferData(t.ARRAY_BUFFER,new Float32Array(u),t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,null),t.enableVertexAttribArray(i),n=t.getUniformLocation(e,"u_time"),r=t.getUniformLocation(e,"u_translate"),o=t.getUniformLocation(e,"u_scale")})(t,e)},onResize:t=>{t.viewport(0,0,t.canvas.width,t.canvas.height),t.clear(t.COLOR_BUFFER_BIT),u(t,-1)},draw:u}))},tr=n("vJbi"),er=n("D4BR"),nr=function(){function t(t,e){if(!O(t)||!O(e))throw new Error("Dimensions.constructor - expected width and height to be valid numbers, instead have "+JSON.stringify({width:t,height:e}));this._width=t,this._height=e}return Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),t.prototype.reverse=function(){return new t(1/this.width,1/this.height)},t}(),rr=function(){function t(t,e){this._x=t,this._y=e}return Object.defineProperty(t.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),t.prototype.add=function(e){return new t(this.x+e.x,this.y+e.y)},t.prototype.sub=function(e){return new t(this.x-e.x,this.y-e.y)},t.prototype.mul=function(e){return new t(this.x*e.x,this.y*e.y)},t.prototype.div=function(e){return new t(this.x/e.x,this.y/e.y)},t.prototype.abs=function(){return new t(Math.abs(this.x),Math.abs(this.y))},t.prototype.magnitude=function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))},t.prototype.floor=function(){return new t(Math.floor(this.x),Math.floor(this.y))},t}(),or=function(){function t(e,n){void 0===n&&(n=!0);var r=e||{},o=[r.left,r.top,r.right,r.bottom].every(O),i=[r.x,r.y,r.width,r.height].every(O);if(!i&&!o)throw new Error("Box.constructor - expected box to be IBoundingBox | IRect, instead have "+JSON.stringify(r));var a=i?[r.x,r.y,r.width,r.height]:[r.left,r.top,r.right-r.left,r.bottom-r.top],s=a[0],u=a[1],c=a[2],l=a[3];t.assertIsValidBox({x:s,y:u,width:c,height:l},"Box.constructor",n),this._x=s,this._y=u,this._width=c,this._height=l}return t.isRect=function(t){return!!t&&[t.x,t.y,t.width,t.height].every(O)},t.assertIsValidBox=function(e,n,r){if(void 0===r&&(r=!1),!t.isRect(e))throw new Error(n+" - invalid box: "+JSON.stringify(e)+", expected object with properties x, y, width, height");if(!r&&(e.width<0||e.height<0))throw new Error(n+" - width ("+e.width+") and height ("+e.height+") must be positive numbers")},Object.defineProperty(t.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){return this.x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this.y},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this.x+this.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"area",{get:function(){return this.width*this.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"topLeft",{get:function(){return new rr(this.left,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"topRight",{get:function(){return new rr(this.right,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottomLeft",{get:function(){return new rr(this.left,this.bottom)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottomRight",{get:function(){return new rr(this.right,this.bottom)},enumerable:!0,configurable:!0}),t.prototype.round=function(){var e=[this.x,this.y,this.width,this.height].map((function(t){return Math.round(t)}));return new t({x:e[0],y:e[1],width:e[2],height:e[3]})},t.prototype.floor=function(){var e=[this.x,this.y,this.width,this.height].map((function(t){return Math.floor(t)}));return new t({x:e[0],y:e[1],width:e[2],height:e[3]})},t.prototype.toSquare=function(){var e=this,n=e.x,r=e.y,o=e.width,i=e.height,a=Math.abs(o-i);return o<i&&(n-=a/2,o+=a),i<o&&(r-=a/2,i+=a),new t({x:n,y:r,width:o,height:i})},t.prototype.rescale=function(e){var n=R(e)?e.width:e,r=R(e)?e.height:e;return new t({x:this.x*n,y:this.y*r,width:this.width*n,height:this.height*r})},t.prototype.pad=function(e,n){var r=[this.x-e/2,this.y-n/2,this.width+e,this.height+n];return new t({x:r[0],y:r[1],width:r[2],height:r[3]})},t.prototype.clipAtImageBorders=function(e,n){var r=this,o=r.y,i=r.right,a=r.bottom,s=Math.max(r.x,0),u=Math.max(o,0),c=a-u;return new t({x:s,y:u,width:Math.min(i-s,e-s),height:Math.min(c,n-u)}).floor()},t.prototype.shift=function(e,n){return new t({x:this.x+e,y:this.y+n,width:this.width,height:this.height})},t.prototype.padAtBorders=function(t,e){var n=this.width+1,r=this.height+1,o=n,i=r,a=this.left,s=this.top,u=this.right,c=this.bottom;return u>e&&(o=-u+e+n,u=e),c>t&&(i=-c+t+r,c=t),a<1&&(i=2-a,a=1),s<1&&(i=2-s,s=1),{dy:1,edy:i,dx:1,edx:o,y:s,ey:c,x:a,ex:u,w:n,h:r}},t.prototype.calibrate=function(e){return new t({left:this.left+e.left*this.width,top:this.top+e.top*this.height,right:this.right+e.right*this.width,bottom:this.bottom+e.bottom*this.height}).toSquare().round()},t}(),ir=function(t){function e(e,n,r,o,i){return void 0===i&&(i=!1),t.call(this,{left:e,top:n,right:r,bottom:o},i)||this}return Object(er.c)(e,t),e}(or),ar=function(){function t(t,e,n,r,o){this._imageDims=new nr(o.width,o.height),this._score=t,this._classScore=e,this._className=n,this._box=new or(r).rescale(this._imageDims)}return Object.defineProperty(t.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"className",{get:function(){return this._className},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"box",{get:function(){return this._box},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageDims",{get:function(){return this._imageDims},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageWidth",{get:function(){return this.imageDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageHeight",{get:function(){return this.imageDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"relativeBox",{get:function(){return new or(this._box).rescale(this.imageDims.reverse())},enumerable:!0,configurable:!0}),t.prototype.forSize=function(e,n){return new t(this.score,this.classScore,this.className,this.relativeBox,{width:e,height:n})},t}(),sr=function(t){function e(e,n,r){return t.call(this,e,e,"",n,r)||this}return Object(er.c)(e,t),e.prototype.forSize=function(n,r){var o=t.prototype.forSize.call(this,n,r);return new e(o.score,o.relativeBox,o.imageDims)},e}(ar),ur=function(t){function e(e,n,r,o,i){return void 0===i&&(i=!1),t.call(this,{x:e,y:n,width:r,height:o},i)||this}return Object(er.c)(e,t),e}(or),cr=function(){function t(t,e,n){void 0===n&&(n=new rr(0,0));var r=e.width,o=e.height;this._imgDims=new nr(r,o),this._shift=n,this._positions=t.map((function(t){return t.mul(new rr(r,o)).add(n)}))}return Object.defineProperty(t.prototype,"shift",{get:function(){return new rr(this._shift.x,this._shift.y)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageWidth",{get:function(){return this._imgDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageHeight",{get:function(){return this._imgDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"positions",{get:function(){return this._positions},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"relativePositions",{get:function(){var t=this;return this._positions.map((function(e){return e.sub(t._shift).div(new rr(t.imageWidth,t.imageHeight))}))},enumerable:!0,configurable:!0}),t.prototype.forSize=function(t,e){return new this.constructor(this.relativePositions,{width:t,height:e})},t.prototype.shiftBy=function(t,e){return new this.constructor(this.relativePositions,this._imgDims,new rr(t,e))},t.prototype.shiftByPoint=function(t){return this.shiftBy(t.x,t.y)},t.prototype.align=function(t,e){if(void 0===e&&(e={}),t){var n=t instanceof sr?t.box.floor():new or(t);return this.shiftBy(n.x,n.y).align(null,e)}var r=D({},{useDlibAlignment:!1,minBoxPadding:.2},e),o=r.minBoxPadding;return r.useDlibAlignment?this.alignDlib():this.alignMinBbox(o)},t.prototype.alignDlib=function(){var t=this.getRefPointsForAlignment(),e=t[1],n=t[2],r=function(t){return n.sub(t).magnitude()},o=(r(t[0])+r(e))/2,i=Math.floor(o/.45),a=C(t),s=Math.floor(Math.max(0,a.x-.5*i)),u=Math.floor(Math.max(0,a.y-.43*i));return new ur(s,u,Math.min(i,this.imageWidth+s),Math.min(i,this.imageHeight+u))},t.prototype.alignMinBbox=function(t){var e,n,r,o,i,a,s,u=(n=(e=this.positions).map((function(t){return t.x})),r=e.map((function(t){return t.y})),o=n.reduce((function(t,e){return e<t?e:t}),1/0),i=r.reduce((function(t,e){return e<t?e:t}),1/0),a=n.reduce((function(t,e){return t<e?e:t}),0),s=r.reduce((function(t,e){return t<e?e:t}),0),new ir(o,i,a,s));return u.pad(u.width*t,u.height*t)},t.prototype.getRefPointsForAlignment=function(){throw new Error("getRefPointsForAlignment not implemented by base class")},t}(),lr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(er.c)(e,t),e.prototype.getRefPointsForAlignment=function(){var t=this.positions;return[t[0],t[1],C([t[3],t[4]])]},e}(cr),fr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(er.c)(e,t),e.prototype.getJawOutline=function(){return this.positions.slice(0,17)},e.prototype.getLeftEyeBrow=function(){return this.positions.slice(17,22)},e.prototype.getRightEyeBrow=function(){return this.positions.slice(22,27)},e.prototype.getNose=function(){return this.positions.slice(27,36)},e.prototype.getLeftEye=function(){return this.positions.slice(36,42)},e.prototype.getRightEye=function(){return this.positions.slice(42,48)},e.prototype.getMouth=function(){return this.positions.slice(48,68)},e.prototype.getRefPointsForAlignment=function(){return[this.getLeftEye(),this.getRightEye(),this.getMouth()].map(C)},e}(cr),hr=function(){function t(t,e){this._label=t,this._distance=e}return Object.defineProperty(t.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"distance",{get:function(){return this._distance},enumerable:!0,configurable:!0}),t.prototype.toString=function(t){return void 0===t&&(t=!0),this.label+(t?" ("+E(this.distance)+")":"")},t}(),dr=function(t){function e(e,n){var r=t.call(this,e)||this;return r._label=n,r}return Object(er.c)(e,t),e.assertIsValidLabeledBox=function(t,e){if(or.assertIsValidBox(t,e),!O(t.label))throw new Error(e+" - expected property label ("+t.label+") to be a number")},Object.defineProperty(e.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),e}(or),pr=function(){function t(t,e){if("string"!=typeof t)throw new Error("LabeledFaceDescriptors - constructor expected label to be a string");if(!Array.isArray(e)||e.some((function(t){return!(t instanceof Float32Array)})))throw new Error("LabeledFaceDescriptors - constructor expected descriptors to be an array of Float32Array");this._label=t,this._descriptors=e}return Object.defineProperty(t.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"descriptors",{get:function(){return this._descriptors},enumerable:!0,configurable:!0}),t.prototype.toJSON=function(){return{label:this.label,descriptors:this.descriptors.map((function(t){return Array.from(t)}))}},t.fromJSON=function(e){var n=e.descriptors.map((function(t){return new Float32Array(t)}));return new t(e.label,n)},t}(),vr=(function(t){function e(e,n,r,o){var i=t.call(this,e,n)||this;return i._score=r,i._classScore=o,i}Object(er.c)(e,t),e.assertIsValidPredictedBox=function(t,e){if(dr.assertIsValidLabeledBox(t,e),!A(t.score)||!A(t.classScore))throw new Error(e+" - expected properties score ("+t.score+") and ("+t.classScore+") to be a number between [0, 1]")},Object.defineProperty(e.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0})}(dr),n("D4qn")),gr=n("OPLh"),mr=n("NdLR"),yr={getEnv:function(){if(!Qn)throw new Error("getEnv - environment is not defined, check isNodejs() and isBrowser()");return Qn},setEnv:B,initialize:W,createBrowserEnv:L,createFileSystem:vr.a,createNodejsEnv:gr.a,monkeyPatch:function(t){if(Qn||W(),!Qn)throw new Error("monkeyPatch - environment is not defined, check isNodejs() and isBrowser()");var e=t.Canvas,n=void 0===e?Qn.Canvas:e,r=t.Image,o=void 0===r?Qn.Image:r;Qn.Canvas=n,Qn.Image=o,Qn.createCanvasElement=t.createCanvasElement||function(){return new n},Qn.createImageElement=t.createImageElement||function(){return new o},Qn.ImageData=t.ImageData||Qn.ImageData,Qn.Video=t.Video||Qn.Video,Qn.fetch=t.fetch||Qn.fetch,Qn.readFile=t.readFile||Qn.readFile},isBrowser:j,isNodejs:mr.a};W(),function(t){t.TOP_LEFT="TOP_LEFT",t.TOP_RIGHT="TOP_RIGHT",t.BOTTOM_LEFT="BOTTOM_LEFT",t.BOTTOM_RIGHT="BOTTOM_RIGHT"}($n||($n={}));var br,xr=function(t){void 0===t&&(t={});var e=t.backgroundColor,n=t.fontColor,r=t.fontSize,o=t.fontStyle,i=t.padding;this.anchorPosition=t.anchorPosition||$n.TOP_LEFT,this.backgroundColor=e||"rgba(0, 0, 0, 0.5)",this.fontColor=n||"rgba(255, 255, 255, 1)",this.fontSize=r||14,this.fontStyle=o||"Georgia",this.padding=i||4},wr=function(){function t(e,n,r){void 0===r&&(r={}),this.text="string"==typeof e?[e]:e instanceof t?e.text:e,this.anchor=n,this.options=new xr(r)}return t.prototype.measureWidth=function(t){var e=this.options.padding;return this.text.map((function(e){return t.measureText(e).width})).reduce((function(t,e){return t<e?e:t}),0)+2*e},t.prototype.measureHeight=function(){var t=this.options;return this.text.length*t.fontSize+2*t.padding},t.prototype.getUpperLeft=function(t,e){var n=this.options.anchorPosition,r=n===$n.BOTTOM_RIGHT||n===$n.TOP_RIGHT,o=n===$n.BOTTOM_LEFT||n===$n.BOTTOM_RIGHT,i=this.measureWidth(t),a=this.measureHeight(),s=r?this.anchor.x-i:this.anchor.x,u=o?this.anchor.y-a:this.anchor.y;if(e){var c=e.height;return{x:Math.max(Math.min(s,e.width-i),0),y:Math.max(Math.min(u,c-a),0)}}return{x:s,y:u}},t.prototype.draw=function(t){var e=U(t),n=G(e),r=this.options,o=r.backgroundColor,i=r.fontColor,a=r.fontSize,s=r.padding;n.font=a+"px "+r.fontStyle;var u=this.measureWidth(n),c=this.measureHeight();n.fillStyle=o;var l=this.getUpperLeft(n,e);n.fillRect(l.x,l.y,u,c),n.fillStyle=i,this.text.forEach((function(t,e){n.fillText(t,s+l.x,s+l.y+(e+1)*a)}))},t}(),_r=function(t){void 0===t&&(t={});var e=t.lineWidth,n=t.label,r=t.drawLabelOptions;this.boxColor=t.boxColor||"rgba(0, 0, 255, 1)",this.lineWidth=e||2,this.label=n,this.drawLabelOptions=new xr(z({},{anchorPosition:$n.BOTTOM_LEFT,backgroundColor:this.boxColor},r))},Er=(function(){function t(t,e){void 0===e&&(e={}),this.box=new or(t),this.options=new _r(e)}t.prototype.draw=function(t){var e=G(t),n=this.options,r=n.lineWidth,o=this.box,i=o.x,a=o.y,s=o.width,u=o.height;e.strokeStyle=n.boxColor,e.lineWidth=r,e.strokeRect(i,a,s,u);var c=this.options.label;c&&new wr([c],{x:i-r/2,y:a},this.options.drawLabelOptions).draw(t)}}(),function(){function t(t,e){var n=this;if(void 0===e&&(e=!1),this._imageTensors=[],this._canvases=[],this._treatAsBatchInput=!1,this._inputDimensions=[],!Array.isArray(t))throw new Error("NetInput.constructor - expected inputs to be an Array of TResolvedNetInput or to be instanceof tf.Tensor4D, instead have "+t);this._treatAsBatchInput=e,this._batchSize=t.length,t.forEach((function(t,e){if(x(t))return n._imageTensors[e]=t,void(n._inputDimensions[e]=t.shape);if(w(t)){var r=t.shape[0];if(1!==r)throw new Error("NetInput - tf.Tensor4D with batchSize "+r+" passed, but not supported in input array");return n._imageTensors[e]=t,void(n._inputDimensions[e]=t.shape.slice(1))}var o=t instanceof yr.getEnv().Canvas?t:K(t);n._canvases[e]=o,n._inputDimensions[e]=[o.height,o.width,3]}))}return Object.defineProperty(t.prototype,"imageTensors",{get:function(){return this._imageTensors},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"canvases",{get:function(){return this._canvases},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isBatchInput",{get:function(){return this.batchSize>1||this._treatAsBatchInput},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"batchSize",{get:function(){return this._batchSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputDimensions",{get:function(){return this._inputDimensions},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"reshapedInputDimensions",{get:function(){var t=this;return S(this.batchSize,0,1).map((function(e,n){return t.getReshapedInputDimensions(n)}))},enumerable:!0,configurable:!0}),t.prototype.getInput=function(t){return this.canvases[t]||this.imageTensors[t]},t.prototype.getInputDimensions=function(t){return this._inputDimensions[t]},t.prototype.getInputHeight=function(t){return this._inputDimensions[t][0]},t.prototype.getInputWidth=function(t){return this._inputDimensions[t][1]},t.prototype.getReshapedInputDimensions=function(t){if("number"!=typeof this.inputSize)throw new Error("getReshapedInputDimensions - inputSize not set, toBatchTensor has not been called yet");return function(t,e){var n=t.width,r=t.height,o=e/Math.max(r,n);return new nr(Math.round(n*o),Math.round(r*o))}({width:this.getInputWidth(t),height:this.getInputHeight(t)},this.inputSize)},t.prototype.toBatchTensor=function(t,e){var n=this;return void 0===e&&(e=!0),this._inputSize=t,tr.L((function(){var r=S(n.batchSize,0,1).map((function(r){var o=n.getInput(r);if(o instanceof tr.a){var i=w(o)?o:o.expandDims();return(i=function(t,e){return void 0===e&&(e=!1),tr.L((function(){var n=t.shape.slice(1),r=n[0],o=n[1];if(r===o)return t;var i=Math.abs(r-o),a=Math.round(i*(e?.5:1)),s=r>o?2:1,u=function(e){var n=t.shape.slice();return n[s]=e,tr.n(n,0)},c=u(a),l=i-c.shape[s],f=[e&&l?u(l):null,t,c].filter((function(t){return!!t})).map((function(t){return t.toFloat()}));return tr.h(f,s)}))}(i,e)).shape[1]===t&&i.shape[2]===t||(i=tr.o.resizeBilinear(i,[t,t])),i.as3D(t,t,3)}if(o instanceof yr.getEnv().Canvas)return tr.f.fromPixels(function(t,e,n){void 0===n&&(n=!1);var r=yr.getEnv(),o=r.Canvas;if(!(t instanceof r.Image||t instanceof o))throw new Error("imageToSquare - expected arg0 to be HTMLImageElement | HTMLCanvasElement");var i=H(t),a=e/Math.max(i.height,i.width),s=a*i.width,u=a*i.height,c=q({width:e,height:e}),l=t instanceof o?t:K(t),f=Math.abs(s-u)/2,h=n&&s<u?f:0,d=n&&u<s?f:0;return G(c).drawImage(l,h,d,s,u),c}(o,t,e));throw new Error("toBatchTensor - at batchIdx "+r+", expected input to be instanceof tf.Tensor or instanceof HTMLCanvasElement, instead have "+o)}));return tr.E(r.map((function(t){return t.toFloat()}))).as4D(n.batchSize,t,t,3)}))},t}()),Rr=function(){function t(t){this._name=t,this._params=void 0,this._paramMappings=[]}return Object.defineProperty(t.prototype,"params",{get:function(){return this._params},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"paramMappings",{get:function(){return this._paramMappings},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isLoaded",{get:function(){return!!this.params},enumerable:!0,configurable:!0}),t.prototype.getParamFromPath=function(t){var e=this.traversePropertyPath(t);return e.obj[e.objProp]},t.prototype.reassignParamFromPath=function(t,e){var n=this.traversePropertyPath(t),r=n.obj,o=n.objProp;r[o].dispose(),r[o]=e},t.prototype.getParamList=function(){var t=this;return this._paramMappings.map((function(e){var n=e.paramPath;return{path:n,tensor:t.getParamFromPath(n)}}))},t.prototype.getTrainableParams=function(){return this.getParamList().filter((function(t){return t.tensor instanceof tr.b}))},t.prototype.getFrozenParams=function(){return this.getParamList().filter((function(t){return!(t.tensor instanceof tr.b)}))},t.prototype.variable=function(){var t=this;this.getFrozenParams().forEach((function(e){t.reassignParamFromPath(e.path,e.tensor.variable())}))},t.prototype.freeze=function(){var t=this;this.getTrainableParams().forEach((function(e){var n=e.path,r=e.tensor,o=tr.G(r.dataSync());r.dispose(),t.reassignParamFromPath(n,o)}))},t.prototype.dispose=function(t){void 0===t&&(t=!0),this.getParamList().forEach((function(e){if(t&&e.tensor.isDisposed)throw new Error("param tensor has already been disposed for path "+e.path);e.tensor.dispose()})),this._params=void 0},t.prototype.serializeParams=function(){return new Float32Array(this.getParamList().map((function(t){return Array.from(t.tensor.dataSync())})).reduce((function(t,e){return t.concat(e)})))},t.prototype.load=function(t){return Object(er.b)(this,void 0,void 0,(function(){return Object(er.d)(this,(function(e){switch(e.label){case 0:return t instanceof Float32Array?(this.extractWeights(t),[2]):[4,this.loadFromUri(t)];case 1:return e.sent(),[2]}}))}))},t.prototype.loadFromUri=function(t){return Object(er.b)(this,void 0,void 0,(function(){var e;return Object(er.d)(this,(function(n){switch(n.label){case 0:if(t&&"string"!=typeof t)throw new Error(this._name+".loadFromUri - expected model uri");return[4,nt(t,this.getDefaultModelName())];case 1:return e=n.sent(),this.loadFromWeightMap(e),[2]}}))}))},t.prototype.loadFromDisk=function(t){return Object(er.b)(this,void 0,void 0,(function(){var e,n,r,o,i,a,s,u,c,l;return Object(er.d)(this,(function(f){switch(f.label){case 0:if(t&&"string"!=typeof t)throw new Error(this._name+".loadFromDisk - expected model file path");return e=yr.getEnv().readFile,n=et(t,this.getDefaultModelName()),r=n.manifestUri,o=n.modelBaseUri,i=function(t){return Promise.all(t.map((function(t){return e(t).then((function(t){return t.buffer}))})))},a=tr.p.weightsLoaderFactory(i),c=(u=JSON).parse,[4,e(r)];case 1:return s=c.apply(u,[f.sent().toString()]),[4,a(s,o)];case 2:return l=f.sent(),this.loadFromWeightMap(l),[2]}}))}))},t.prototype.loadFromWeightMap=function(t){var e=this.extractParamsFromWeigthMap(t),n=e.params;this._paramMappings=e.paramMappings,this._params=n},t.prototype.extractWeights=function(t){var e=this.extractParams(t),n=e.params;this._paramMappings=e.paramMappings,this._params=n},t.prototype.traversePropertyPath=function(t){if(!this.params)throw new Error("traversePropertyPath - model has no loaded params");var e=t.split("/").reduce((function(e,n){if(!e.nextObj.hasOwnProperty(n))throw new Error("traversePropertyPath - object does not have property "+n+", for path "+t);return{obj:e.nextObj,objProp:n,nextObj:e.nextObj[n]}}),{nextObj:this.params}),n=e.obj,r=e.objProp;if(!(n&&r&&n[r]instanceof tr.a))throw new Error("traversePropertyPath - parameter is not a tensor, for path "+t);return{obj:n,objProp:r}},t}(),Cr=function(t,e,n){this.depthwise_filter=t,this.pointwise_filter=e,this.bias=n},Sr=function(t){function e(){return t.call(this,"FaceFeatureExtractor")||this}return Object(er.c)(e,t),e.prototype.forwardInput=function(t){var e=this.params;if(!e)throw new Error("FaceFeatureExtractor - load model before inference");return tr.L((function(){var n=it(T(t.toBatchTensor(112,!0),[122.782,117.001,104.298]).div(tr.y(255)),e.dense0,!0);return n=it(n,e.dense1),n=it(n,e.dense2),n=it(n,e.dense3),n=tr.d(n,[7,7],[2,2],"valid")}))},e.prototype.forward=function(t){return Object(er.b)(this,void 0,void 0,(function(){var e;return Object(er.d)(this,(function(n){switch(n.label){case 0:return e=this.forwardInput,[4,Y(t)];case 1:return[2,e.apply(this,[n.sent()])]}}))}))},e.prototype.getDefaultModelName=function(){return"face_feature_extractor_model"},e.prototype.extractParamsFromWeigthMap=function(t){return function(t){var e=[],n=gt(t,e).extractDenseBlock4Params,r={dense0:n("dense0",!0),dense1:n("dense1"),dense2:n("dense2"),dense3:n("dense3")};return st(t,e),{params:r,paramMappings:e}}(t)},e.prototype.extractParams=function(t){return function(t){var e=[],n=dt(t),r=n.getRemainingWeights,o=pt(n.extractWeights,e).extractDenseBlock4Params,i=o(3,32,"dense0",!0),a=o(32,64,"dense1"),s=o(64,128,"dense2"),u=o(128,256,"dense3");if(0!==r().length)throw new Error("weights remaing after extract: "+r().length);return{paramMappings:e,params:{dense0:i,dense1:a,dense2:s,dense3:u}}}(t)},e}(Rr),Or=function(t){function e(e,n){var r=t.call(this,e)||this;return r._faceFeatureExtractor=n,r}return Object(er.c)(e,t),Object.defineProperty(e.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),e.prototype.runNet=function(t){var e=this,n=this.params;if(!n)throw new Error(this._name+" - load model before inference");return tr.L((function(){var r=t instanceof Er?e.faceFeatureExtractor.forwardInput(t):t;return mt(r.as2D(r.shape[0],-1),n.fc)}))},e.prototype.dispose=function(e){void 0===e&&(e=!0),this.faceFeatureExtractor.dispose(e),t.prototype.dispose.call(this,e)},e.prototype.loadClassifierParams=function(t){var e=this.extractClassifierParams(t),n=e.paramMappings;this._params=e.params,this._paramMappings=n},e.prototype.extractClassifierParams=function(t){return function(t,e,n){var r=[],o=dt(t),i=o.getRemainingWeights,a=ct(o.extractWeights,r)(e,n,"fc");if(0!==i().length)throw new Error("weights remaing after extract: "+i().length);return{paramMappings:r,params:{fc:a}}}(t,this.getClassifierChannelsIn(),this.getClassifierChannelsOut())},e.prototype.extractParamsFromWeigthMap=function(t){var e=yt(t),n=e.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(e.featureExtractorMap),function(t){var e,n=[],r=ht(t,n),o={fc:(e="fc",{weights:r(e+"/weights",2),bias:r(e+"/bias",1)})};return st(t,n),{params:o,paramMappings:n}}(n)},e.prototype.extractParams=function(t){var e=this.getClassifierChannelsIn(),n=this.getClassifierChannelsOut(),r=n*e+n,o=t.slice(0,t.length-r),i=t.slice(t.length-r);return this.faceFeatureExtractor.extractWeights(o),this.extractClassifierParams(i)},e}(Rr),Ar=["neutral","happy","sad","angry","fearful","disgusted","surprised"],Ir=function(){function t(t){var e=this;if(7!==t.length)throw new Error("FaceExpressions.constructor - expected probabilities.length to be 7, have: "+t.length);Ar.forEach((function(n,r){e[n]=t[r]}))}return t.prototype.asSortedArray=function(){var t=this;return Ar.map((function(e){return{expression:e,probability:t[e]}})).sort((function(t,e){return e.probability-t.probability}))},t}(),kr=function(t){function e(e){return void 0===e&&(e=new Sr),t.call(this,"FaceExpressionNet",e)||this}return Object(er.c)(e,t),e.prototype.forwardInput=function(t){var e=this;return tr.L((function(){return tr.D(e.runNet(t))}))},e.prototype.forward=function(t){return Object(er.b)(this,void 0,void 0,(function(){var e;return Object(er.d)(this,(function(n){switch(n.label){case 0:return e=this.forwardInput,[4,Y(t)];case 1:return[2,e.apply(this,[n.sent()])]}}))}))},e.prototype.predictExpressions=function(t){return Object(er.b)(this,void 0,void 0,(function(){var e,n,r,o,i=this;return Object(er.d)(this,(function(a){switch(a.label){case 0:return[4,Y(t)];case 1:return e=a.sent(),[4,this.forwardInput(e)];case 2:return n=a.sent(),[4,Promise.all(tr.O(n).map((function(t){return Object(er.b)(i,void 0,void 0,(function(){var e;return Object(er.d)(this,(function(n){switch(n.label){case 0:return[4,t.data()];case 1:return e=n.sent(),t.dispose(),[2,e]}}))}))})))];case 3:return r=a.sent(),n.dispose(),o=r.map((function(t){return new Ir(t)})),[2,e.isBatchInput?o:o[0]]}}))}))},e.prototype.getDefaultModelName=function(){return"face_expression_model"},e.prototype.getClassifierChannelsIn=function(){return 256},e.prototype.getClassifierChannelsOut=function(){return 7},e}(Or),Tr=function(t){void 0===t&&(t={});var e=t.drawLines,n=t.drawPoints,r=void 0===n||n,o=t.lineWidth,i=t.lineColor,a=t.pointSize,s=t.pointColor;this.drawLines=void 0===e||e,this.drawPoints=r,this.lineWidth=o||1,this.pointSize=a||2,this.lineColor=i||"rgba(0, 255, 255, 1)",this.pointColor=s||"rgba(255, 0, 255, 1)"},Mr=(function(){function t(t,e){void 0===e&&(e={}),this.faceLandmarks=t,this.options=new Tr(e)}t.prototype.draw=function(t){var e=G(t),n=this.options,r=n.drawPoints,o=n.lineWidth,i=n.pointSize,a=n.pointColor;if(n.drawLines&&this.faceLandmarks instanceof fr&&(e.strokeStyle=n.lineColor,e.lineWidth=o,y(e,this.faceLandmarks.getJawOutline()),y(e,this.faceLandmarks.getLeftEyeBrow()),y(e,this.faceLandmarks.getRightEyeBrow()),y(e,this.faceLandmarks.getNose()),y(e,this.faceLandmarks.getLeftEye(),!0),y(e,this.faceLandmarks.getRightEye(),!0),y(e,this.faceLandmarks.getMouth(),!0)),r){e.strokeStyle=a,e.fillStyle=a;this.faceLandmarks.positions.forEach((function(t){e.beginPath(),e.arc(t.x,t.y,i,0,2*Math.PI),e.fill()}))}}}(),function(t){function e(e){var n=t.call(this,"TinyXception")||this;return n._numMainBlocks=e,n}return Object(er.c)(e,t),e.prototype.forwardInput=function(t){var e=this,n=this.params;if(!n)throw new Error("TinyXception - load model before inference");return tr.L((function(){var r=T(t.toBatchTensor(112,!0),[122.782,117.001,104.298]).div(tr.y(256)),o=tr.w(St(r,n.entry_flow.conv_in,[2,2]));return o=Ot(o,n.entry_flow.reduction_block_0,!1),o=Ot(o,n.entry_flow.reduction_block_1),S(e._numMainBlocks,0,1).forEach((function(t){o=function(t,e){var n=rt(tr.w(t),e.separable_conv0,[1,1]);return n=rt(tr.w(n),e.separable_conv1,[1,1]),n=rt(tr.w(n),e.separable_conv2,[1,1]),tr.c(n,t)}(o,n.middle_flow["main_block_"+t])})),o=Ot(o,n.exit_flow.reduction_block),o=tr.w(rt(o,n.exit_flow.separable_conv,[1,1]))}))},e.prototype.forward=function(t){return Object(er.b)(this,void 0,void 0,(function(){var e;return Object(er.d)(this,(function(n){switch(n.label){case 0:return e=this.forwardInput,[4,Y(t)];case 1:return[2,e.apply(this,[n.sent()])]}}))}))},e.prototype.getDefaultModelName=function(){return"tiny_xception_model"},e.prototype.extractParamsFromWeigthMap=function(t){return Ct(t,this._numMainBlocks)},e.prototype.extractParams=function(t){return Rt(t,this._numMainBlocks)},e}(Rr));!function(t){t.FEMALE="female",t.MALE="male"}(br||(br={}));var Dr,Pr=function(t){function e(e){void 0===e&&(e=new Mr(2));var n=t.call(this,"AgeGenderNet")||this;return n._faceFeatureExtractor=e,n}return Object(er.c)(e,t),Object.defineProperty(e.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),e.prototype.runNet=function(t){var e=this,n=this.params;if(!n)throw new Error(this._name+" - load model before inference");return tr.L((function(){var r=t instanceof Er?e.faceFeatureExtractor.forwardInput(t):t,o=tr.d(r,[7,7],[2,2],"valid").as2D(r.shape[0],-1);return{age:mt(o,n.fc.age).as1D(),gender:mt(o,n.fc.gender)}}))},e.prototype.forwardInput=function(t){var e=this;return tr.L((function(){var n=e.runNet(t);return{age:n.age,gender:tr.D(n.gender)}}))},e.prototype.forward=function(t){return Object(er.b)(this,void 0,void 0,(function(){var e;return Object(er.d)(this,(function(n){switch(n.label){case 0:return e=this.forwardInput,[4,Y(t)];case 1:return[2,e.apply(this,[n.sent()])]}}))}))},e.prototype.predictAgeAndGender=function(t){return Object(er.b)(this,void 0,void 0,(function(){var e,n,r,o,i,a,s=this;return Object(er.d)(this,(function(u){switch(u.label){case 0:return[4,Y(t)];case 1:return e=u.sent(),[4,this.forwardInput(e)];case 2:return n=u.sent(),r=tr.O(n.age),o=tr.O(n.gender),i=r.map((function(t,e){return{ageTensor:t,genderTensor:o[e]}})),[4,Promise.all(i.map((function(t){var e=t.ageTensor,n=t.genderTensor;return Object(er.b)(s,void 0,void 0,(function(){var t,r,o,i,a;return Object(er.d)(this,(function(s){switch(s.label){case 0:return[4,e.data()];case 1:return t=s.sent()[0],[4,n.data()];case 2:return r=s.sent()[0],i=(o=r>.5)?br.MALE:br.FEMALE,a=o?r:1-r,e.dispose(),n.dispose(),[2,{age:t,gender:i,genderProbability:a}]}}))}))})))];case 3:return a=u.sent(),n.age.dispose(),n.gender.dispose(),[2,e.isBatchInput?a:a[0]]}}))}))},e.prototype.getDefaultModelName=function(){return"age_gender_model"},e.prototype.dispose=function(e){void 0===e&&(e=!0),this.faceFeatureExtractor.dispose(e),t.prototype.dispose.call(this,e)},e.prototype.loadClassifierParams=function(t){var e=this.extractClassifierParams(t),n=e.paramMappings;this._params=e.params,this._paramMappings=n},e.prototype.extractClassifierParams=function(t){return function(t){var e=[],n=dt(t),r=n.getRemainingWeights,o=ct(n.extractWeights,e),i=o(512,1,"fc/age"),a=o(512,2,"fc/gender");if(0!==r().length)throw new Error("weights remaing after extract: "+r().length);return{paramMappings:e,params:{fc:{age:i,gender:a}}}}(t)},e.prototype.extractParamsFromWeigthMap=function(t){var e=yt(t),n=e.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(e.featureExtractorMap),function(t){function e(t){return{weights:r(t+"/weights",2),bias:r(t+"/bias",1)}}var n=[],r=ht(t,n),o={fc:{age:e("fc/age"),gender:e("fc/gender")}};return st(t,n),{params:o,paramMappings:n}}(n)},e.prototype.extractParams=function(t){var e=t.slice(0,t.length-1539),n=t.slice(t.length-1539);return this.faceFeatureExtractor.extractWeights(e),this.extractClassifierParams(n)},e}(Rr),Nr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(er.c)(e,t),e.prototype.postProcess=function(t,e,n){var r=n.map((function(t){var n=t.width,r=t.height,o=e/Math.max(r,n);return{width:n*o,height:r*o}})),o=r.length;return tr.L((function(){var n=function(t,e){return tr.E([tr.n([68],t),tr.n([68],e)],1).as2D(1,136).as1D()},i=function(t,e){var n=r[t],o=n.width,i=n.height;return e(o,i)?Math.abs(o-i)/2:0};return t.mul(tr.n([o,136],e)).sub(tr.E(Array.from(Array(o),(function(t,e){return n(function(t){return i(t,(function(t,e){return t<e}))}(e),function(t){return i(t,(function(t,e){return e<t}))}(e))})))).div(tr.E(Array.from(Array(o),(function(t,e){return n(r[e].width,r[e].height)}))))}))},e.prototype.forwardInput=function(t){var e=this;return tr.L((function(){var n=e.runNet(t);return e.postProcess(n,t.inputSize,t.inputDimensions.map((function(t){return{height:t[0],width:t[1]}})))}))},e.prototype.forward=function(t){return Object(er.b)(this,void 0,void 0,(function(){var e;return Object(er.d)(this,(function(n){switch(n.label){case 0:return e=this.forwardInput,[4,Y(t)];case 1:return[2,e.apply(this,[n.sent()])]}}))}))},e.prototype.detectLandmarks=function(t){return Object(er.b)(this,void 0,void 0,(function(){var e,n,r,o=this;return Object(er.d)(this,(function(i){switch(i.label){case 0:return[4,Y(t)];case 1:return e=i.sent(),n=tr.L((function(){return tr.O(o.forwardInput(e))})),[4,Promise.all(n.map((function(t,n){return Object(er.b)(o,void 0,void 0,(function(){var r,o,i,a,s;return Object(er.d)(this,(function(u){switch(u.label){case 0:return i=(o=Array).from,[4,t.data()];case 1:return r=i.apply(o,[u.sent()]),a=r.filter((function(t,e){return _(e)})),s=r.filter((function(t,e){return!_(e)})),[2,new fr(Array(68).fill(0).map((function(t,e){return new rr(a[e],s[e])})),{height:e.getInputHeight(n),width:e.getInputWidth(n)})]}}))}))})))];case 2:return r=i.sent(),n.forEach((function(t){return t.dispose()})),[2,e.isBatchInput?r:r[0]]}}))}))},e.prototype.getClassifierChannelsOut=function(){return 136},e}(Or),Fr=function(t){function e(e){return void 0===e&&(e=new Sr),t.call(this,"FaceLandmark68Net",e)||this}return Object(er.c)(e,t),e.prototype.getDefaultModelName=function(){return"face_landmark_68_model"},e.prototype.getClassifierChannelsIn=function(){return 256},e}(Nr),Lr=function(t){function e(){return t.call(this,"TinyFaceFeatureExtractor")||this}return Object(er.c)(e,t),e.prototype.forwardInput=function(t){var e=this.params;if(!e)throw new Error("TinyFaceFeatureExtractor - load model before inference");return tr.L((function(){var n=ot(T(t.toBatchTensor(112,!0),[122.782,117.001,104.298]).div(tr.y(255)),e.dense0,!0);return n=ot(n,e.dense1),n=ot(n,e.dense2),n=tr.d(n,[14,14],[2,2],"valid")}))},e.prototype.forward=function(t){return Object(er.b)(this,void 0,void 0,(function(){var e;return Object(er.d)(this,(function(n){switch(n.label){case 0:return e=this.forwardInput,[4,Y(t)];case 1:return[2,e.apply(this,[n.sent()])]}}))}))},e.prototype.getDefaultModelName=function(){return"face_feature_extractor_tiny_model"},e.prototype.extractParamsFromWeigthMap=function(t){return function(t){var e=[],n=gt(t,e).extractDenseBlock3Params,r={dense0:n("dense0",!0),dense1:n("dense1"),dense2:n("dense2")};return st(t,e),{params:r,paramMappings:e}}(t)},e.prototype.extractParams=function(t){return function(t){var e=[],n=dt(t),r=n.getRemainingWeights,o=pt(n.extractWeights,e).extractDenseBlock3Params,i=o(3,32,"dense0",!0),a=o(32,64,"dense1"),s=o(64,128,"dense2");if(0!==r().length)throw new Error("weights remaing after extract: "+r().length);return{paramMappings:e,params:{dense0:i,dense1:a,dense2:s}}}(t)},e}(Rr),jr=function(t){function e(e){return void 0===e&&(e=new Lr),t.call(this,"FaceLandmark68TinyNet",e)||this}return Object(er.c)(e,t),e.prototype.getDefaultModelName=function(){return"face_landmark_68_tiny_model"},e.prototype.getClassifierChannelsIn=function(){return 128},e}(Nr),Br=(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}Object(er.c)(e,t)}(Fr),function(t){function e(){return t.call(this,"FaceRecognitionNet")||this}return Object(er.c)(e,t),e.prototype.forwardInput=function(t){var e=this.params;if(!e)throw new Error("FaceRecognitionNet - load model before inference");return tr.L((function(){var n=kt(T(t.toBatchTensor(150,!0).toFloat(),[122.782,117.001,104.298]).div(tr.y(256)),e.conv32_down);n=Pt(n=tr.s(n,3,2,"valid"),e.conv32_1),n=Pt(n,e.conv32_2),n=Pt(n,e.conv32_3),n=Pt(n=Nt(n,e.conv64_down),e.conv64_1),n=Pt(n,e.conv64_2),n=Pt(n,e.conv64_3),n=Pt(n=Nt(n,e.conv128_down),e.conv128_1),n=Pt(n,e.conv128_2),n=Pt(n=Nt(n,e.conv256_down),e.conv256_1);var r=(n=Nt(n=Pt(n,e.conv256_2),e.conv256_down_out)).mean([1,2]);return tr.q(r,e.fc)}))},e.prototype.forward=function(t){return Object(er.b)(this,void 0,void 0,(function(){var e;return Object(er.d)(this,(function(n){switch(n.label){case 0:return e=this.forwardInput,[4,Y(t)];case 1:return[2,e.apply(this,[n.sent()])]}}))}))},e.prototype.computeFaceDescriptor=function(t){return Object(er.b)(this,void 0,void 0,(function(){var e,n,r,o=this;return Object(er.d)(this,(function(i){switch(i.label){case 0:return[4,Y(t)];case 1:return e=i.sent(),n=tr.L((function(){return tr.O(o.forwardInput(e))})),[4,Promise.all(n.map((function(t){return t.data()})))];case 2:return r=i.sent(),n.forEach((function(t){return t.dispose()})),[2,e.isBatchInput?r:r[0]]}}))}))},e.prototype.getDefaultModelName=function(){return"face_recognition_model"},e.prototype.extractParamsFromWeigthMap=function(t){return Dt(t)},e.prototype.extractParams=function(t){return function(t){var e=dt(t),n=e.extractWeights,r=e.getRemainingWeights,o=[],i=Tt(n,o),a=i.extractResidualLayerParams,s=(0,i.extractConvLayerParams)(4704,32,7,"conv32_down"),u=a(9216,32,3,"conv32_1"),c=a(9216,32,3,"conv32_2"),l=a(9216,32,3,"conv32_3"),f=a(36864,64,3,"conv64_down",!0),h=a(36864,64,3,"conv64_1"),d=a(36864,64,3,"conv64_2"),p=a(36864,64,3,"conv64_3"),v=a(147456,128,3,"conv128_down",!0),g=a(147456,128,3,"conv128_1"),m=a(147456,128,3,"conv128_2"),y=a(589824,256,3,"conv256_down",!0),b=a(589824,256,3,"conv256_1"),x=a(589824,256,3,"conv256_2"),w=a(589824,256,3,"conv256_down_out"),_=tr.L((function(){return tr.N(tr.I(n(32768),[128,256]),[1,0])}));if(o.push({paramPath:"fc"}),0!==r().length)throw new Error("weights remaing after extract: "+r().length);return{params:{conv32_down:s,conv32_1:u,conv32_2:c,conv32_3:l,conv64_down:f,conv64_1:h,conv64_2:d,conv64_3:p,conv128_down:v,conv128_1:g,conv128_2:m,conv256_down:y,conv256_1:b,conv256_2:x,conv256_down_out:w,fc:_},paramMappings:o}}(t)},e}(Rr)),Wr=function(){function t(t){var e=void 0===t?{}:t,n=e.minFaceSize,r=e.scaleFactor,o=e.maxNumScales,i=e.scoreThresholds,a=e.scaleSteps;if(this._name="MtcnnOptions",this._minFaceSize=n||20,this._scaleFactor=r||.709,this._maxNumScales=o||10,this._scoreThresholds=i||[.6,.7,.7],this._scaleSteps=a,"number"!=typeof this._minFaceSize||this._minFaceSize<0)throw new Error(this._name+" - expected minFaceSize to be a number > 0");if("number"!=typeof this._scaleFactor||this._scaleFactor<=0||this._scaleFactor>=1)throw new Error(this._name+" - expected scaleFactor to be a number between 0 and 1");if("number"!=typeof this._maxNumScales||this._maxNumScales<0)throw new Error(this._name+" - expected maxNumScales to be a number > 0");if(!Array.isArray(this._scoreThresholds)||3!==this._scoreThresholds.length||this._scoreThresholds.some((function(t){return"number"!=typeof t})))throw new Error(this._name+" - expected scoreThresholds to be an array of numbers of length 3");if(this._scaleSteps&&(!Array.isArray(this._scaleSteps)||this._scaleSteps.some((function(t){return"number"!=typeof t}))))throw new Error(this._name+" - expected scaleSteps to be an array of numbers")}return Object.defineProperty(t.prototype,"minFaceSize",{get:function(){return this._minFaceSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scaleFactor",{get:function(){return this._scaleFactor},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxNumScales",{get:function(){return this._maxNumScales},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scoreThresholds",{get:function(){return this._scoreThresholds},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scaleSteps",{get:function(){return this._scaleSteps},enumerable:!0,configurable:!0}),t}(),Ur=function(){function t(t){var e=void 0===t?{}:t,n=e.minConfidence,r=e.maxResults;if(this._name="SsdMobilenetv1Options",this._minConfidence=n||.5,this._maxResults=r||100,"number"!=typeof this._minConfidence||this._minConfidence<=0||this._minConfidence>=1)throw new Error(this._name+" - expected minConfidence to be a number between 0 and 1");if("number"!=typeof this._maxResults)throw new Error(this._name+" - expected maxResults to be a number")}return Object.defineProperty(t.prototype,"minConfidence",{get:function(){return this._minConfidence},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxResults",{get:function(){return this._maxResults},enumerable:!0,configurable:!0}),t}(),Gr=function(t){function e(){return t.call(this,"SsdMobilenetv1")||this}return Object(er.c)(e,t),e.prototype.forwardInput=function(t){var e=this.params;if(!e)throw new Error("SsdMobilenetv1 - load model before inference");return tr.L((function(){var n=t.toBatchTensor(512,!1).toFloat(),r=Ht(tr.F(tr.t(n,tr.y(.007843137718737125)),tr.y(1)),e.mobilenetv1),o=function(t,e,n){return tr.L((function(){var r=Vt(t,n.conv_0,[1,1]),o=Vt(r,n.conv_1,[2,2]),i=Vt(o,n.conv_2,[1,1]),a=Vt(i,n.conv_3,[2,2]),s=Vt(a,n.conv_4,[1,1]),u=Vt(s,n.conv_5,[2,2]),c=Vt(u,n.conv_6,[1,1]),l=Vt(c,n.conv_7,[2,2]),f=Xt(e,n.box_predictor_0),h=Xt(t,n.box_predictor_1),d=Xt(o,n.box_predictor_2),p=Xt(a,n.box_predictor_3),v=Xt(u,n.box_predictor_4),g=Xt(l,n.box_predictor_5);return{boxPredictions:tr.h([f.boxPredictionEncoding,h.boxPredictionEncoding,d.boxPredictionEncoding,p.boxPredictionEncoding,v.boxPredictionEncoding,g.boxPredictionEncoding],1),classPredictions:tr.h([f.classPrediction,h.classPrediction,d.classPrediction,p.classPrediction,v.classPrediction,g.classPrediction],1)}}))}(r.out,r.conv11,e.prediction_layer);return function(t,e,n){return tr.L((function(){var r=t.shape[0],o=Kt(tr.x(tr.M(n.extra_dim,[r,1,1]),[-1,4]),tr.x(t,[-1,4]));o=tr.x(o,[r,o.shape[0]/r,4]);var i=tr.A(tr.B(e,[0,0,1],[-1,-1,-1])),a=tr.B(i,[0,0,0],[-1,-1,1]);return a=tr.x(a,[r,a.shape[1]]),{boxes:tr.O(o),scores:tr.O(a)}}))}(o.boxPredictions,o.classPredictions,e.output_layer)}))},e.prototype.forward=function(t){return Object(er.b)(this,void 0,void 0,(function(){var e;return Object(er.d)(this,(function(n){switch(n.label){case 0:return e=this.forwardInput,[4,Y(t)];case 1:return[2,e.apply(this,[n.sent()])]}}))}))},e.prototype.locateFaces=function(t,e){return void 0===e&&(e={}),Object(er.b)(this,void 0,void 0,(function(){var n,r,o,i,a,s,u,c,l,f,h,d,p,v,g,m,y,b,x,w;return Object(er.d)(this,(function(_){switch(_.label){case 0:return n=new Ur(e),r=n.maxResults,o=n.minConfidence,[4,Y(t)];case 1:for(i=_.sent(),a=this.forwardInput(i),c=(s=a.boxes)[0],l=(u=a.scores)[0],f=1;f<s.length;f++)s[f].dispose(),u[f].dispose();return p=(d=Array).from,[4,l.data()];case 2:return h=p.apply(d,[_.sent()]),.5,v=function(t,e,n,r,o){var i=Math.min(n,t.shape[0]),a=e.map((function(t,e){return{score:t,boxIndex:e}})).filter((function(t){return t.score>o})).sort((function(t,e){return e.score-t.score})),s=[];return a.forEach((function(e){if(!(s.length>=i)){for(var n=e.score,a=s.length-1;a>=0;--a){var u=qt(t,e.boxIndex,s[a]);if(0!==u&&(e.score*=u<=r?1:0,e.score<=o))break}n===e.score&&s.push(e.boxIndex)}})),s}(c,h,r,.5,o),g=i.getReshapedInputDimensions(0),y=(m=i.inputSize)/g.width,b=m/g.height,x=c.arraySync(),w=v.map((function(t){var e=[Math.max(0,x[t][0]),Math.min(1,x[t][2])].map((function(t){return t*b})),n=e[0],r=e[1],o=[Math.max(0,x[t][1]),Math.min(1,x[t][3])].map((function(t){return t*y})),a=o[0];return new sr(h[t],new ur(a,n,o[1]-a,r-n),{height:i.getInputHeight(0),width:i.getInputWidth(0)})})),c.dispose(),l.dispose(),[2,w]}}))}))},e.prototype.getDefaultModelName=function(){return"ssd_mobilenetv1_model"},e.prototype.extractParamsFromWeigthMap=function(t){return zt(t)},e.prototype.extractParams=function(t){return function(t){var e=[],n=dt(t),r=n.extractWeights,o=n.getRemainingWeights,i=Gt(r,e),a=i.extractPredictionLayerParams,s=(0,i.extractMobilenetV1Params)(),u=a(),c={extra_dim:tr.J(r(20472),[1,5118,4])};if(e.push({paramPath:"output_layer/extra_dim"}),0!==o().length)throw new Error("weights remaing after extract: "+o().length);return{params:{mobilenetv1:s,prediction_layer:u,output_layer:c},paramMappings:e}}(t)},e}(Rr),zr=(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}Object(er.c)(e,t)}(Gr),[new rr(.738768,.874946),new rr(2.42204,2.65704),new rr(4.30971,7.04493),new rr(10.246,4.59428),new rr(12.6868,11.8741)]),Vr=[new rr(1.603231,2.094468),new rr(6.041143,7.080126),new rr(2.882459,3.518061),new rr(4.266906,5.178857),new rr(9.041765,10.66308)],Hr=[117.001,114.697,97.404],qr=function(t){return"number"==typeof t};!function(t){t[t.XS=224]="XS",t[t.SM=320]="SM",t[t.MD=416]="MD",t[t.LG=608]="LG"}(Dr||(Dr={}));var Kr=function(){function t(t){var e=void 0===t?{}:t,n=e.inputSize,r=e.scoreThreshold;if(this._name="TinyYolov2Options",this._inputSize=n||416,this._scoreThreshold=r||.5,"number"!=typeof this._inputSize||this._inputSize%32!=0)throw new Error(this._name+" - expected inputSize to be a number divisible by 32");if("number"!=typeof this._scoreThreshold||this._scoreThreshold<=0||this._scoreThreshold>=1)throw new Error(this._name+" - expected scoreThreshold to be a number between 0 and 1")}return Object.defineProperty(t.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scoreThreshold",{get:function(){return this._scoreThreshold},enumerable:!0,configurable:!0}),t}(),Xr=function(t){function e(e){var n=t.call(this,"TinyYolov2")||this;return function(t){if(!t)throw new Error("invalid config: "+t);if("boolean"!=typeof t.withSeparableConvs)throw new Error("config.withSeparableConvs has to be a boolean, have: "+t.withSeparableConvs);if(!qr(t.iouThreshold)||t.iouThreshold<0||t.iouThreshold>1)throw new Error("config.iouThreshold has to be a number between [0, 1], have: "+t.iouThreshold);if(!Array.isArray(t.classes)||!t.classes.length||!t.classes.every((function(t){return"string"==typeof t})))throw new Error("config.classes has to be an array class names: string[], have: "+JSON.stringify(t.classes));if(!Array.isArray(t.anchors)||!t.anchors.length||!t.anchors.map((function(t){return t||{}})).every((function(t){return qr(t.x)&&qr(t.y)})))throw new Error("config.anchors has to be an array of { x: number, y: number }, have: "+JSON.stringify(t.anchors));if(t.meanRgb&&(!Array.isArray(t.meanRgb)||3!==t.meanRgb.length||!t.meanRgb.every(qr)))throw new Error("config.meanRgb has to be an array of shape [number, number, number], have: "+JSON.stringify(t.meanRgb))}(e),n._config=e,n}return Object(er.c)(e,t),Object.defineProperty(e.prototype,"config",{get:function(){return this._config},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"withClassScores",{get:function(){return this.config.withClassScores||this.config.classes.length>1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"boxEncodingSize",{get:function(){return 5+(this.withClassScores?this.config.classes.length:0)},enumerable:!0,configurable:!0}),e.prototype.runTinyYolov2=function(t,e){var n=Yt(t,e.conv0);return n=Yt(n=tr.s(n,[2,2],[2,2],"same"),e.conv1),n=Yt(n=tr.s(n,[2,2],[2,2],"same"),e.conv2),n=Yt(n=tr.s(n,[2,2],[2,2],"same"),e.conv3),n=Yt(n=tr.s(n,[2,2],[2,2],"same"),e.conv4),n=Yt(n=tr.s(n,[2,2],[2,2],"same"),e.conv5),n=Yt(n=tr.s(n,[2,2],[1,1],"same"),e.conv6),at(n=Yt(n,e.conv7),e.conv8,"valid",!1)},e.prototype.runMobilenet=function(t,e){var n=this.config.isFirstLayerConv2d?Jt(at(t,e.conv0,"valid",!1)):Qt(t,e.conv0);return n=Qt(n=tr.s(n,[2,2],[2,2],"same"),e.conv1),n=Qt(n=tr.s(n,[2,2],[2,2],"same"),e.conv2),n=Qt(n=tr.s(n,[2,2],[2,2],"same"),e.conv3),n=Qt(n=tr.s(n,[2,2],[2,2],"same"),e.conv4),n=Qt(n=tr.s(n,[2,2],[2,2],"same"),e.conv5),n=tr.s(n,[2,2],[1,1],"same"),n=e.conv6?Qt(n,e.conv6):n,at(n=e.conv7?Qt(n,e.conv7):n,e.conv8,"valid",!1)},e.prototype.forwardInput=function(t,e){var n=this,r=this.params;if(!r)throw new Error("TinyYolov2 - load model before inference");return tr.L((function(){var o=t.toBatchTensor(e,!1).toFloat();return o=(o=n.config.meanRgb?T(o,n.config.meanRgb):o).div(tr.y(256)),n.config.withSeparableConvs?n.runMobilenet(o,r):n.runTinyYolov2(o,r)}))},e.prototype.forward=function(t,e){return Object(er.b)(this,void 0,void 0,(function(){var n;return Object(er.d)(this,(function(r){switch(r.label){case 0:return n=this.forwardInput,[4,Y(t)];case 1:return[4,n.apply(this,[r.sent(),e])];case 2:return[2,r.sent()]}}))}))},e.prototype.detect=function(t,e){return void 0===e&&(e={}),Object(er.b)(this,void 0,void 0,(function(){var n,r,o,i,a,s,u,c,l,f,h,d,p,v=this;return Object(er.d)(this,(function(g){switch(g.label){case 0:return n=new Kr(e),r=n.inputSize,o=n.scoreThreshold,[4,Y(t)];case 1:return i=g.sent(),[4,this.forwardInput(i,r)];case 2:return a=g.sent(),s=tr.L((function(){return tr.O(a)[0].expandDims()})),u={width:i.getInputWidth(0),height:i.getInputHeight(0)},[4,this.extractBoxes(s,i.getReshapedInputDimensions(0),o)];case 3:return c=g.sent(),a.dispose(),s.dispose(),l=c.map((function(t){return t.box})),f=c.map((function(t){return t.score})),h=c.map((function(t){return t.classScore})),d=c.map((function(t){return v.config.classes[t.label]})),p=k(l.map((function(t){return t.rescale(r)})),f,this.config.iouThreshold,!0),[2,p.map((function(t){return new ar(f[t],h[t],d[t],l[t],u)}))]}}))}))},e.prototype.getDefaultModelName=function(){return""},e.prototype.extractParamsFromWeigthMap=function(t){return function(t,e){var n,r=[],o=Zt(t,r),i=o.extractConvParams,a=o.extractConvWithBatchNormParams,s=o.extractSeparableConvParams;if(e.withSeparableConvs){var u=e.filterSizes&&e.filterSizes.length||9;n={conv0:e.isFirstLayerConv2d?i("conv0"):s("conv0"),conv1:s("conv1"),conv2:s("conv2"),conv3:s("conv3"),conv4:s("conv4"),conv5:s("conv5"),conv6:u>7?s("conv6"):void 0,conv7:u>8?s("conv7"):void 0,conv8:i("conv8")}}else n={conv0:a("conv0"),conv1:a("conv1"),conv2:a("conv2"),conv3:a("conv3"),conv4:a("conv4"),conv5:a("conv5"),conv6:a("conv6"),conv7:a("conv7"),conv8:i("conv8")};return st(t,r),{params:n,paramMappings:r}}(t,this.config)},e.prototype.extractParams=function(t){var n=this.config.filterSizes||e.DEFAULT_FILTER_SIZES,r=n?n.length:void 0;if(7!==r&&8!==r&&9!==r)throw new Error("TinyYolov2 - expected 7 | 8 | 9 convolutional filters, but found "+r+" filterSizes in config");return function(t,e,n,r){var o,i=dt(t),a=i.getRemainingWeights,s=[],u=$t(i.extractWeights,s),c=u.extractConvParams,l=u.extractConvWithBatchNormParams,f=u.extractSeparableConvParams;if(e.withSeparableConvs){var h=r[0],d=r[1],p=r[2],v=r[3],g=r[4],m=r[5],y=r[6],b=r[7],x=r[8];o={conv0:e.isFirstLayerConv2d?c(h,d,3,"conv0"):f(h,d,"conv0"),conv1:f(d,p,"conv1"),conv2:f(p,v,"conv2"),conv3:f(v,g,"conv3"),conv4:f(g,m,"conv4"),conv5:f(m,y,"conv5"),conv6:b?f(y,b,"conv6"):void 0,conv7:x?f(b,x,"conv7"):void 0,conv8:c(x||b||y,5*n,1,"conv8")}}else p=r[2],v=r[3],g=r[4],m=r[5],y=r[6],b=r[7],x=r[8],o={conv0:l(h=r[0],d=r[1],"conv0"),conv1:l(d,p,"conv1"),conv2:l(p,v,"conv2"),conv3:l(v,g,"conv3"),conv4:l(g,m,"conv4"),conv5:l(m,y,"conv5"),conv6:l(y,b,"conv6"),conv7:l(b,x,"conv7"),conv8:c(x,5*n,1,"conv8")};if(0!==a().length)throw new Error("weights remaing after extract: "+a().length);return{params:o,paramMappings:s}}(t,this.config,this.boxEncodingSize,n)},e.prototype.extractBoxes=function(t,e,n){return Object(er.b)(this,void 0,void 0,(function(){var r,o,i,a,s,u,c,l,f,h,d,p,v,g,m,y,b,x,w,_,E,R,C,S,O,A,I,k,T,D=this;return Object(er.d)(this,(function(P){switch(P.label){case 0:return r=e.width,o=e.height,i=Math.max(r,o),a=i/r,s=i/o,u=t.shape[1],c=this.config.anchors.length,l=tr.L((function(){var e=t.reshape([u,u,c,D.boxEncodingSize]);return[e.slice([0,0,0,0],[u,u,c,4]),e.slice([0,0,0,4],[u,u,c,1]),D.withClassScores?tr.D(e.slice([0,0,0,5],[u,u,c,D.config.classes.length]),3):tr.y(0)]})),f=l[0],d=l[2],p=[],[4,(h=l[1]).array()];case 1:return v=P.sent(),[4,f.array()];case 2:g=P.sent(),m=0,P.label=3;case 3:if(!(m<u))return[3,12];y=0,P.label=4;case 4:if(!(y<u))return[3,11];b=0,P.label=5;case 5:return b<c?(x=M(v[m][y][b][0]),!n||x>n?(w=(y+M(g[m][y][b][0]))/u*a,_=(m+M(g[m][y][b][1]))/u*s,E=Math.exp(g[m][y][b][2])*this.config.anchors[b].x/u*a,R=Math.exp(g[m][y][b][3])*this.config.anchors[b].y/u*s,C=w-E/2,S=_-R/2,O={row:m,col:y,anchor:b},this.withClassScores?[4,this.extractPredictedClass(d,O)]:[3,7]):[3,9]):[3,10];case 6:return T=P.sent(),[3,8];case 7:T={classScore:1,label:0},P.label=8;case 8:I=(A=T).classScore,k=A.label,p.push(Object(er.a)({box:new ir(C,S,C+E,S+R),score:x,classScore:x*I,label:k},O)),P.label=9;case 9:return b++,[3,5];case 10:return y++,[3,4];case 11:return m++,[3,3];case 12:return f.dispose(),h.dispose(),d.dispose(),[2,p]}}))}))},e.prototype.extractPredictedClass=function(t,e){return Object(er.b)(this,void 0,void 0,(function(){var n,r,o,i;return Object(er.d)(this,(function(a){switch(a.label){case 0:return n=e.row,r=e.col,o=e.anchor,[4,t.array()];case 1:return i=a.sent(),[2,Array(this.config.classes.length).fill(0).map((function(t,e){return i[n][r][o][e]})).map((function(t,e){return{classScore:t,label:e}})).reduce((function(t,e){return t.classScore>e.classScore?t:e}))]}}))}))},e.DEFAULT_FILTER_SIZES=[3,16,32,64,128,256,512,1024,1024],e}(Rr),Jr=function(t){function e(e){void 0===e&&(e=!0);var n=te({},{withSeparableConvs:e,iouThreshold:.4,classes:["face"]},e?{anchors:Vr,meanRgb:Hr}:{anchors:zr,withClassScores:!0});return t.call(this,n)||this}return Object(er.c)(e,t),Object.defineProperty(e.prototype,"withSeparableConvs",{get:function(){return this.config.withSeparableConvs},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),e.prototype.locateFaces=function(t,e){return Object(er.b)(this,void 0,void 0,(function(){return Object(er.d)(this,(function(n){switch(n.label){case 0:return[4,this.detect(t,e)];case 1:return[2,n.sent().map((function(t){return new sr(t.score,t.relativeBox,{width:t.imageWidth,height:t.imageHeight})}))]}}))}))},e.prototype.getDefaultModelName=function(){return this.withSeparableConvs?"tiny_yolov2_separable_conv_model":"tiny_yolov2_model"},e.prototype.extractParamsFromWeigthMap=function(e){return t.prototype.extractParamsFromWeigthMap.call(this,e)},e}(Xr),Yr=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._name="TinyFaceDetectorOptions",e}return Object(er.c)(e,t),e}(Kr),Qr=function(){function t(){}return t.prototype.then=function(t){return Object(er.b)(this,void 0,void 0,(function(){var e;return Object(er.d)(this,(function(n){switch(n.label){case 0:return e=t,[4,this.run()];case 1:return[2,e.apply(void 0,[n.sent()])]}}))}))},t.prototype.run=function(){return Object(er.b)(this,void 0,void 0,(function(){return Object(er.d)(this,(function(){throw new Error("ComposableTask - run is not implemented")}))}))},t}(),$r=function(t){function e(e,n,r,o){return t.call(this,{left:e,top:n,right:r,bottom:o},!0)||this}return Object(er.c)(e,t),e}(or),Zr=function(t){function e(){return t.call(this,"Mtcnn")||this}return Object(er.c)(e,t),e.prototype.load=function(e){return Object(er.b)(this,void 0,void 0,(function(){return Object(er.d)(this,(function(){return console.warn("mtcnn is deprecated and will be removed soon"),[2,t.prototype.load.call(this,e)]}))}))},e.prototype.loadFromDisk=function(e){return Object(er.b)(this,void 0,void 0,(function(){return Object(er.d)(this,(function(){return console.warn("mtcnn is deprecated and will be removed soon"),[2,t.prototype.loadFromDisk.call(this,e)]}))}))},e.prototype.forwardInput=function(t,e){return void 0===e&&(e={}),Object(er.b)(this,void 0,void 0,(function(){var n,r,o,i,a,s,u,c,l,f,h,d,p,v,g,m,y,b,x,w;return Object(er.d)(this,(function(_){switch(_.label){case 0:if(!(n=this.params))throw new Error("Mtcnn - load model before inference");if(!(r=t.canvases[0]))throw new Error("Mtcnn - inputCanvas is not defined, note that passing tensors into Mtcnn.forwardInput is not supported yet.");return o={},i=Date.now(),a=tr.L((function(){return t=tr.m(tr.f.fromPixels(r)).toFloat(),tr.L((function(){return tr.E(tr.O(t,3).reverse(),3)}));var t})),s=function(t){return a.dispose(),o.total=Date.now()-i,t},u=a.shape.slice(1),c=u[0],l=u[1],f=new Wr(e),h=f.minFaceSize,d=f.scaleFactor,p=f.maxNumScales,v=f.scoreThresholds,g=(f.scaleSteps||function(t,e,n){for(var r=12/t,o=[],i=Math.min(n[0],n[1])*r,a=0;i>=12;)o.push(r*Math.pow(e,a)),i*=e,a+=1;return o}(h,d,[c,l])).filter((function(t){var e=ie(t,[c,l]);return Math.min(e.width,e.height)>12})).slice(0,p),o.scales=g,o.pyramid=g.map((function(t){return ie(t,[c,l])})),m=Date.now(),[4,ce(a,g,v[0],n.pnet,o)];case 1:return y=_.sent(),o.total_stage1=Date.now()-m,y.boxes.length?(o.stage2_numInputBoxes=y.boxes.length,m=Date.now(),[4,fe(r,y.boxes,v[1],n.rnet,o)]):[2,s({results:[],stats:o})];case 2:return b=_.sent(),o.total_stage2=Date.now()-m,b.boxes.length?(o.stage3_numInputBoxes=b.boxes.length,m=Date.now(),[4,he(r,b.boxes,v[2],n.onet,o)]):[2,s({results:[],stats:o})];case 3:return x=_.sent(),o.total_stage3=Date.now()-m,w=x.boxes.map((function(t,e){return Et(F({},new sr(x.scores[e],new ur(t.left/l,t.top/c,t.width/l,t.height/c),{height:c,width:l})),new lr(x.points[e].map((function(e){return e.sub(new rr(t.left,t.top)).div(new rr(t.width,t.height))})),{width:t.width,height:t.height}))})),[2,s({results:w,stats:o})]}}))}))},e.prototype.forward=function(t,e){return void 0===e&&(e={}),Object(er.b)(this,void 0,void 0,(function(){var n;return Object(er.d)(this,(function(r){switch(r.label){case 0:return n=this.forwardInput,[4,Y(t)];case 1:return[4,n.apply(this,[r.sent(),e])];case 2:return[2,r.sent().results]}}))}))},e.prototype.forwardWithStats=function(t,e){return void 0===e&&(e={}),Object(er.b)(this,void 0,void 0,(function(){var n;return Object(er.d)(this,(function(r){switch(r.label){case 0:return n=this.forwardInput,[4,Y(t)];case 1:return[2,n.apply(this,[r.sent(),e])]}}))}))},e.prototype.getDefaultModelName=function(){return"mtcnn_model"},e.prototype.extractParamsFromWeigthMap=function(t){return oe(t)},e.prototype.extractParams=function(t){return re(t)},e}(Rr),to=[new rr(1.603231,2.094468),new rr(6.041143,7.080126),new rr(2.882459,3.518061),new rr(4.266906,5.178857),new rr(9.041765,10.66308)],eo=[117.001,114.697,97.404],no=function(t){function e(){return t.call(this,{withSeparableConvs:!0,iouThreshold:.4,classes:["face"],anchors:to,meanRgb:eo,isFirstLayerConv2d:!0,filterSizes:[3,16,32,64,128,256,512]})||this}return Object(er.c)(e,t),Object.defineProperty(e.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),e.prototype.locateFaces=function(t,e){return Object(er.b)(this,void 0,void 0,(function(){return Object(er.d)(this,(function(n){switch(n.label){case 0:return[4,this.detect(t,e)];case 1:return[2,n.sent().map((function(t){return new sr(t.score,t.relativeBox,{width:t.imageWidth,height:t.imageHeight})}))]}}))}))},e.prototype.getDefaultModelName=function(){return"tiny_face_detector_model"},e.prototype.extractParamsFromWeigthMap=function(e){return t.prototype.extractParamsFromWeigthMap.call(this,e)},e}(Xr),ro={ssdMobilenetv1:new Gr,tinyFaceDetector:new no,tinyYolov2:new Jr,mtcnn:new Zr,faceLandmark68Net:new Fr,faceLandmark68TinyNet:new jr,faceRecognitionNet:new Br,faceExpressionNet:new kr,ageGenderNet:new Pr},oo=function(t){function e(e,n,r){var o=t.call(this)||this;return o.parentTask=e,o.input=n,o.extractedFaces=r,o}return Object(er.c)(e,t),e}(Qr),io=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(er.c)(e,t),e.prototype.run=function(){return Object(er.b)(this,void 0,void 0,(function(){var t,e,n=this;return Object(er.d)(this,(function(r){switch(r.label){case 0:return[4,this.parentTask];case 1:return[4,ee(t=r.sent(),this.input,(function(t){return Object(er.b)(n,void 0,void 0,(function(){return Object(er.d)(this,(function(e){switch(e.label){case 0:return[4,Promise.all(t.map((function(t){return ro.faceExpressionNet.predictExpressions(t)})))];case 1:return[2,e.sent()]}}))}))}),this.extractedFaces)];case 2:return e=r.sent(),[2,t.map((function(t,n){return xt(t,e[n])}))]}}))}))},e.prototype.withAgeAndGender=function(){return new lo(this,this.input)},e}(oo),ao=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(er.c)(e,t),e.prototype.run=function(){return Object(er.b)(this,void 0,void 0,(function(){var t,e;return Object(er.d)(this,(function(n){switch(n.label){case 0:return[4,this.parentTask];case 1:return(t=n.sent())?[4,ne(t,this.input,(function(t){return ro.faceExpressionNet.predictExpressions(t)}),this.extractedFaces)]:[2];case 2:return e=n.sent(),[2,xt(t,e)]}}))}))},e.prototype.withAgeAndGender=function(){return new fo(this,this.input)},e}(oo),so=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(er.c)(e,t),e.prototype.withAgeAndGender=function(){return new ho(this,this.input)},e.prototype.withFaceDescriptors=function(){return new go(this,this.input)},e}(io),uo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(er.c)(e,t),e.prototype.withAgeAndGender=function(){return new po(this,this.input)},e.prototype.withFaceDescriptor=function(){return new mo(this,this.input)},e}(ao),co=function(t){function e(e,n,r){var o=t.call(this)||this;return o.parentTask=e,o.input=n,o.extractedFaces=r,o}return Object(er.c)(e,t),e}(Qr),lo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(er.c)(e,t),e.prototype.run=function(){return Object(er.b)(this,void 0,void 0,(function(){var t,e,n=this;return Object(er.d)(this,(function(r){switch(r.label){case 0:return[4,this.parentTask];case 1:return[4,ee(t=r.sent(),this.input,(function(t){return Object(er.b)(n,void 0,void 0,(function(){return Object(er.d)(this,(function(e){switch(e.label){case 0:return[4,Promise.all(t.map((function(t){return ro.ageGenderNet.predictAgeAndGender(t)})))];case 1:return[2,e.sent()]}}))}))}),this.extractedFaces)];case 2:return e=r.sent(),[2,t.map((function(t,n){var r=e[n],o=r.age;return Bt(Ut(t,r.gender,r.genderProbability),o)}))]}}))}))},e.prototype.withFaceExpressions=function(){return new io(this,this.input)},e}(co),fo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(er.c)(e,t),e.prototype.run=function(){return Object(er.b)(this,void 0,void 0,(function(){var t,e,n;return Object(er.d)(this,(function(r){switch(r.label){case 0:return[4,this.parentTask];case 1:return(t=r.sent())?[4,ne(t,this.input,(function(t){return ro.ageGenderNet.predictAgeAndGender(t)}),this.extractedFaces)]:[2];case 2:return e=r.sent(),n=e.age,[2,Bt(Ut(t,e.gender,e.genderProbability),n)]}}))}))},e.prototype.withFaceExpressions=function(){return new ao(this,this.input)},e}(co),ho=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(er.c)(e,t),e.prototype.withFaceExpressions=function(){return new so(this,this.input)},e.prototype.withFaceDescriptors=function(){return new go(this,this.input)},e}(lo),po=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(er.c)(e,t),e.prototype.withFaceExpressions=function(){return new uo(this,this.input)},e.prototype.withFaceDescriptor=function(){return new mo(this,this.input)},e}(fo),vo=function(t){function e(e,n){var r=t.call(this)||this;return r.parentTask=e,r.input=n,r}return Object(er.c)(e,t),e}(Qr),go=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(er.c)(e,t),e.prototype.run=function(){return Object(er.b)(this,void 0,void 0,(function(){var t;return Object(er.d)(this,(function(e){switch(e.label){case 0:return[4,this.parentTask];case 1:return[4,ee(t=e.sent(),this.input,(function(t){return Promise.all(t.map((function(t){return ro.faceRecognitionNet.computeFaceDescriptor(t)})))}),null,(function(t){return t.landmarks.align(null,{useDlibAlignment:!0})}))];case 2:return[2,e.sent().map((function(e,n){return Lt(t[n],e)}))]}}))}))},e.prototype.withFaceExpressions=function(){return new so(this,this.input)},e.prototype.withAgeAndGender=function(){return new ho(this,this.input)},e}(vo),mo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(er.c)(e,t),e.prototype.run=function(){return Object(er.b)(this,void 0,void 0,(function(){var t,e;return Object(er.d)(this,(function(n){switch(n.label){case 0:return[4,this.parentTask];case 1:return(t=n.sent())?[4,ne(t,this.input,(function(t){return ro.faceRecognitionNet.computeFaceDescriptor(t)}),null,(function(t){return t.landmarks.align(null,{useDlibAlignment:!0})}))]:[2];case 2:return e=n.sent(),[2,Lt(t,e)]}}))}))},e.prototype.withFaceExpressions=function(){return new uo(this,this.input)},e.prototype.withAgeAndGender=function(){return new po(this,this.input)},e}(vo),yo=function(t){function e(e,n,r){var o=t.call(this)||this;return o.parentTask=e,o.input=n,o.useTinyLandmarkNet=r,o}return Object(er.c)(e,t),Object.defineProperty(e.prototype,"landmarkNet",{get:function(){return this.useTinyLandmarkNet?ro.faceLandmark68TinyNet:ro.faceLandmark68Net},enumerable:!0,configurable:!0}),e}(Qr),bo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(er.c)(e,t),e.prototype.run=function(){return Object(er.b)(this,void 0,void 0,(function(){var t,e,n,r,o,i=this;return Object(er.d)(this,(function(a){switch(a.label){case 0:return[4,this.parentTask];case 1:return t=a.sent(),e=t.map((function(t){return t.detection})),this.input instanceof tr.a?[4,$(this.input,e)]:[3,3];case 2:return r=a.sent(),[3,5];case 3:return[4,Q(this.input,e)];case 4:r=a.sent(),a.label=5;case 5:return n=r,[4,Promise.all(n.map((function(t){return i.landmarkNet.detectLandmarks(t)})))];case 6:return o=a.sent(),n.forEach((function(t){return t instanceof tr.a&&t.dispose()})),[2,t.map((function(t,e){return Et(t,o[e])}))]}}))}))},e.prototype.withFaceExpressions=function(){return new so(this,this.input)},e.prototype.withAgeAndGender=function(){return new ho(this,this.input)},e.prototype.withFaceDescriptors=function(){return new go(this,this.input)},e}(yo),xo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(er.c)(e,t),e.prototype.run=function(){return Object(er.b)(this,void 0,void 0,(function(){var t,e,n,r,o;return Object(er.d)(this,(function(i){switch(i.label){case 0:return[4,this.parentTask];case 1:return(t=i.sent())?(e=t.detection,this.input instanceof tr.a?[4,$(this.input,[e])]:[3,3]):[2];case 2:return r=i.sent(),[3,5];case 3:return[4,Q(this.input,[e])];case 4:r=i.sent(),i.label=5;case 5:return[4,this.landmarkNet.detectLandmarks((n=r)[0])];case 6:return o=i.sent(),n.forEach((function(t){return t instanceof tr.a&&t.dispose()})),[2,Et(t,o)]}}))}))},e.prototype.withFaceExpressions=function(){return new uo(this,this.input)},e.prototype.withAgeAndGender=function(){return new po(this,this.input)},e.prototype.withFaceDescriptor=function(){return new mo(this,this.input)},e}(yo),wo=function(t){function e(e,n){void 0===n&&(n=new Ur);var r=t.call(this)||this;return r.input=e,r.options=n,r}return Object(er.c)(e,t),e}(Qr),_o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(er.c)(e,t),e.prototype.run=function(){return Object(er.b)(this,void 0,void 0,(function(){var t,e,n,r;return Object(er.d)(this,(function(o){switch(o.label){case 0:return e=(t=this).input,(n=t.options)instanceof Wr?[4,ro.mtcnn.forward(e,n)]:[3,2];case 1:return[2,o.sent().map((function(t){return t.detection}))];case 2:if(r=n instanceof Yr?function(t){return ro.tinyFaceDetector.locateFaces(t,n)}:n instanceof Ur?function(t){return ro.ssdMobilenetv1.locateFaces(t,n)}:n instanceof Kr?function(t){return ro.tinyYolov2.locateFaces(t,n)}:null,!r)throw new Error("detectFaces - expected options to be instance of TinyFaceDetectorOptions | SsdMobilenetv1Options | MtcnnOptions | TinyYolov2Options");return[2,r(e)]}}))}))},e.prototype.runAndExtendWithFaceDetections=function(){var t=this;return new Promise((function(e){return Object(er.b)(t,void 0,void 0,(function(){var t;return Object(er.d)(this,(function(n){switch(n.label){case 0:return[4,this.run()];case 1:return t=n.sent(),[2,e(t.map((function(t){return F({},t)})))]}}))}))}))},e.prototype.withFaceLandmarks=function(t){return void 0===t&&(t=!1),new bo(this.runAndExtendWithFaceDetections(),this.input,t)},e.prototype.withFaceExpressions=function(){return new io(this.runAndExtendWithFaceDetections(),this.input)},e.prototype.withAgeAndGender=function(){return new lo(this.runAndExtendWithFaceDetections(),this.input)},e}(wo),Eo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(er.c)(e,t),e.prototype.run=function(){return Object(er.b)(this,void 0,void 0,(function(){var t,e;return Object(er.d)(this,(function(n){switch(n.label){case 0:return[4,new _o(this.input,this.options)];case 1:return t=n.sent(),e=t[0],t.forEach((function(t){t.score>e.score&&(e=t)})),[2,e]}}))}))},e.prototype.runAndExtendWithFaceDetection=function(){var t=this;return new Promise((function(e){return Object(er.b)(t,void 0,void 0,(function(){var t;return Object(er.d)(this,(function(n){switch(n.label){case 0:return[4,this.run()];case 1:return t=n.sent(),[2,e(t?F({},t):void 0)]}}))}))}))},e.prototype.withFaceLandmarks=function(t){return void 0===t&&(t=!1),new xo(this.runAndExtendWithFaceDetection(),this.input,t)},e.prototype.withFaceExpressions=function(){return new ao(this.runAndExtendWithFaceDetection(),this.input)},e.prototype.withAgeAndGender=function(){return new fo(this.runAndExtendWithFaceDetection(),this.input)},e}(wo);!function(){function t(t,e){void 0===e&&(e=.6),this._distanceThreshold=e;var n=Array.isArray(t)?t:[t];if(!n.length)throw new Error("FaceRecognizer.constructor - expected atleast one input");var r=1,o=function(){return"person "+r++};this._labeledDescriptors=n.map((function(t){if(t instanceof pr)return t;if(t instanceof Float32Array)return new pr(o(),[t]);if(t.descriptor&&t.descriptor instanceof Float32Array)return new pr(o(),[t.descriptor]);throw new Error("FaceRecognizer.constructor - expected inputs to be of type LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array | Array<LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array>")}))}Object.defineProperty(t.prototype,"labeledDescriptors",{get:function(){return this._labeledDescriptors},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"distanceThreshold",{get:function(){return this._distanceThreshold},enumerable:!0,configurable:!0}),t.prototype.computeMeanDistance=function(t,e){return e.map((function(e){return function(t,e){if(t.length!==e.length)throw new Error("euclideanDistance: arr1.length !== arr2.length");var n=Array.from(t),r=Array.from(e);return Math.sqrt(n.map((function(t,e){return t-r[e]})).reduce((function(t,e){return t+Math.pow(e,2)}),0))}(e,t)})).reduce((function(t,e){return t+e}),0)/(e.length||1)},t.prototype.matchDescriptor=function(t){var e=this;return this.labeledDescriptors.map((function(n){return new hr(n.label,e.computeMeanDistance(t,n.descriptors))})).reduce((function(t,e){return t.distance<e.distance?t:e}))},t.prototype.findBestMatch=function(t){var e=this.matchDescriptor(t);return e.distance<this.distanceThreshold?e:new hr("unknown",e.distance)},t.prototype.toJSON=function(){return{distanceThreshold:this.distanceThreshold,labeledDescriptors:this.labeledDescriptors.map((function(t){return t.toJSON()}))}},t.fromJSON=function(e){return new t(e.labeledDescriptors.map((function(t){return pr.fromJSON(t)})),e.distanceThreshold)}}();const Ro=2*Math.PI;var Co=()=>{const t=Object(me.createRef)(),e=Object(me.createRef)(),n=[0,0],r=[0,0],o=[19,10],i=[];let a=1;const s=t=>{r[0]=n[0]=t.canvas.width/2,r[1]=n[1]=t.canvas.height/2,o[0]=Math.floor(n[0]/32),o[1]=Math.floor(n[1]/32),i.length=0;for(let t=0;t<=o[1];t++)for(let e=0;e<=o[0];e++)i.push([e/o[0],t/o[1]])};Object(De.d)((()=>{const e=t.current.base,n=t=>{a=1,r[0]=t.clientX,r[1]=t.clientY};e.addEventListener("mousemove",n);const o=t=>{a=1,r[0]=t.touches[0].pageX,r[1]=t.touches[0].pageY};return e.addEventListener("touchmove",o),()=>{e.removeEventListener("mousemove",n),e.removeEventListener("touchmove",o)}}),[t]),Object(De.d)((()=>{const t=e.current;if("undefined"==typeof window)return;const o=new Ur({minConfidence:.5}),i=ro.ssdMobilenetv1,s=async()=>{const e=await(i=t,u=o,void 0===u&&(u=new Ur),new Eo(i,u));var i,u;void 0!==e&&(a=65536/e.box.area,r[0]=2*(n[0]-e.box.x/640*n[0]),r[1]=e.box.y/480*n[1]*2),s()};(async()=>(await i.load("/assets/face-weights"),i))().then((()=>(async(e,n)=>{t.width=e,t.height=n;const r=await navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:"user",width:e,height:n}});return t.srcObject=r,new Promise((e=>{t.onloadedmetadata=()=>{e(t)}}))})(640,480))).then(s)}),[e]);const u=Ue.a.iball;return Object(me.h)("section",{class:Ge},Object(me.h)(be.a,null,Object(me.h)("title",null,u.title)),Object(me.h)("div",{class:"d-none"},Object(me.h)(We.b,{art:u})),Object(me.h)(dn,null),Object(me.h)("video",{ref:e,autoPlay:!0,muted:!0,playsInline:!0}),Object(me.h)(Ne,{ref:t,init:s,onResize:s,draw:t=>{t.clearRect(0,0,t.canvas.width,t.canvas.height);for(const[e,o]of i){const i=[n[0]*e*2,n[1]*o*2];t.fillStyle="white",t.beginPath(),t.arc(i[0],i[1],32,0,Ro),t.fill();const s=[r[0]-i[0],r[1]-i[1]],u=Math.sqrt(s[0]**2+s[1]**2);if(u>6){const t=6/u/a;s[0]*=t,s[1]*=t}t.fillStyle="black",t.beginPath(),t.arc(i[0]+s[0],i[1]+s[1],24,0,Ro),t.fill()}}}))};var So=()=>{const t=[0,0];let e=1;const n=n=>{t[0]=n.canvas.width/2,t[1]=n.canvas.height/2,e=t[0]**2+t[1]**2,n.fillStyle="purple"},r=Ue.a["canvas-template"];return Object(me.h)("section",{class:Ge},Object(me.h)(be.a,null,Object(me.h)("title",null,r.title)),Object(me.h)("div",{class:"d-none"},Object(me.h)(We.b,{art:r})),Object(me.h)(dn,null),Object(me.h)(Ne,{init:n,onResize:n,draw:(n,r)=>{n.clearRect(0,0,n.canvas.width,n.canvas.height),n.beginPath(),n.arc(t[0],t[1],Math.sqrt(e*Math.sin(r/60)**2),0,2*Math.PI),n.fill()}}))};const Oo=(t,e,n)=>{const r=t.createShader(e);if(!r)throw"Missing shader";if(t.shaderSource(r,n),t.compileShader(r),!t.getShaderParameter(r,t.COMPILE_STATUS))throw t.getShaderInfoLog(r);return r};var Ao=()=>{const t=Object(me.createRef)();let e,n,r,o;const i=[0,0],a=[1,1];let s=1;const u=(t,e)=>{i[0]=t,i[1]=e},c=Ue.a["webgl-template"];return Object(me.h)("section",{ref:t,class:Ge},Object(me.h)(be.a,null,Object(me.h)("title",null,c.title)),Object(me.h)("div",{class:"d-none"},Object(me.h)(We.b,{art:c})),Object(me.h)("div",{class:"offcanvas offcanvas-start","data-bs-scroll":"true","data-bs-backdrop":"false",id:"shaders","aria-labelledby":"shadersLabel"},Object(me.h)("div",{class:"offcanvas-header"},Object(me.h)("h5",{class:"offcanvas-title",id:"shadersLabel"},"Shaders"),Object(me.h)("button",{type:"button",class:"btn-close text-reset","data-bs-dismiss":"parameterPanel","aria-label":"Close"})),Object(me.h)("div",{class:"offcanvas-body"},Object(me.h)("form",null,Object(me.h)("div",{class:"mb-3"},Object(me.h)("label",{for:"vertexShader"},"Vertex Shader"),Object(me.h)("textarea",{class:"form-control",id:"vertexShader",rows:6},"#version 300 es\nin vec2 a_position;\nin vec4 a_color;\nout vec4 v_color;\n\nvoid main(void) {\n  gl_Position = vec4(a_position, 0.0, 1.0);\n  v_color = a_color;\n}\n")),Object(me.h)("div",{class:"mb-3"},Object(me.h)("label",{for:"fragmentShader"},"Fragment Shader"),Object(me.h)("textarea",{class:"form-control",id:"fragmentShader",rows:20},"#version 300 es\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n\nuniform float u_time;\nuniform vec2 u_translate;\nuniform vec2 u_scale;\nout vec4 fragmentColor;\n\nvoid main() {\n  float m_0 = ( gl_FragCoord.x + u_translate.x ) * u_scale.x;\n  float m_1 = ( gl_FragCoord.y + u_translate.y ) * u_scale.y;\n  float radiusSquared = pow(sin(u_time/60.0), 2.0);\n  bool inside = m_0*m_0 + m_1*m_1 < radiusSquared;\n  fragmentColor.r = fragmentColor.b = inside ? 0.5 : 0.0;\n}\n"))))),Object(me.h)(dn,null),Object(me.h)("div",{style:"display:none;"},Object(me.h)(Tn,{setTranslate:u,setScale:(t,e)=>{a[0]=t,a[1]=e,u(0,0)}})),Object(me.h)(Je,{init:t=>{s=Math.sqrt(t.canvas.width**2+t.canvas.height**2),i[0]=-t.canvas.width/2,i[1]=-t.canvas.height/2,a[0]=a[1]=2/s,e=(t=>{var e,n;const r=t.createProgram();if(!r)throw"Missing program";const o=null===(e=document.getElementById("fragmentShader"))||void 0===e?void 0:e.textContent;if(!o)throw"Missing fragmentShaderSource";const i=Oo(t,t.FRAGMENT_SHADER,o);t.attachShader(r,i);const a=null===(n=document.getElementById("vertexShader"))||void 0===n?void 0:n.textContent;if(!a)throw"Missing vertexShaderSource";const s=Oo(t,t.VERTEX_SHADER,a);var u;if(t.attachShader(r,s),t.linkProgram(r),!t.getProgramParameter(r,t.LINK_STATUS))throw null!==(u=t.getProgramInfoLog(r))&&void 0!==u?u:"Error from getProgramParameter";return t.useProgram(r),r})(t),((t,e)=>{const i=t.getAttribLocation(e,"a_position"),a=new Float32Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0]),s=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,s),t.bufferData(t.ARRAY_BUFFER,a,t.STATIC_DRAW),t.vertexAttribPointer(i,3,t.FLOAT,!1,0,0),t.bindBuffer(t.ARRAY_BUFFER,null),t.enableVertexAttribArray(i),n=t.getUniformLocation(e,"u_time"),r=t.getUniformLocation(e,"u_translate"),o=t.getUniformLocation(e,"u_scale")})(t,e)},onResize:t=>{t.viewport(0,0,t.canvas.width,t.canvas.height),t.clear(t.COLOR_BUFFER_BIT)},draw:(t,e)=>{t.uniform1f(n,e),t.uniform2f(r,i[0],i[1]),t.uniform2f(o,a[0],a[1]),t.drawArrays(t.TRIANGLE_STRIP,0,4)}}))};var Io=()=>{const t=Ue.a["canvas-template"];return Object(me.h)("section",{class:Ge},Object(me.h)(be.a,null,Object(me.h)("title",null,t.title)),Object(me.h)("div",{class:"d-none"},Object(me.h)(We.b,{art:t})),Object(me.h)(dn,null),Object(me.h)(Ne,{draw:(t,e)=>{t.clearRect(0,0,t.canvas.width,t.canvas.height);const n=t.canvas.width>>4,r=Math.ceil(5+n);t.font=`${n}px sans`,t.fillStyle="brown",t.fillText("Loading... is... done!",10,r),t.fillText(String(e),10,r+n)}}))};const ko=["className","getContext","init","ready","draw","onResize","animate","framesPerSecond"];var To=t=>{const{className:e,getContext:n,init:r,ready:o,draw:i,onResize:a,animate:s,framesPerSecond:u}=t,c=pe(t,ko),l=Object(me.createRef)(),f=u?1e3/u:void 0;return Object(De.d)((()=>{const t=l.current;let e,u=!1,c=-1;const h=n?n(t):t.getContext("2d"),d=()=>{t.parentElement?(h.canvas.width=t.parentElement.clientWidth,h.canvas.height=t.parentElement.clientHeight):(h.canvas.width=window.innerWidth,h.canvas.height=window.innerHeight),a&&a(h)},p=new ResizeObserver(d);p.observe(t.parentElement||t),d();const v=()=>{u=!0};t.addEventListener("blur",v);const g=()=>{u=!1};t.addEventListener("focus",g);const m=()=>{document.fullscreenElement||(document.body.requestFullscreen().catch((t=>{console.error("requestFullscreen",t)})),h.canvas.width=window.innerWidth,h.canvas.height=window.innerHeight,d())};t.addEventListener("dblclick",m),r&&r(h);const y=()=>{i(h,c++)},b=()=>{u?setTimeout(b,128):(c++,e=f?window.setTimeout(b,f):window.requestAnimationFrame(b),i(h,c))},x=()=>{!1===s?setTimeout(y):setTimeout(b)};return void 0===o?x():o(x),()=>{f?window.clearTimeout(e):window.cancelAnimationFrame(e),p.unobserve(t),t.removeEventListener("blur",v),t.removeEventListener("focus",g),t.removeEventListener("dblclick",m)}}),[n,r,o,i,a,l,t.canvasMethodRefs,s,f]),Object(me.h)("canvas",de({class:e,ref:l},c))};const Mo=["setTranslate","setScale"],Do=10,Po=1.1937766417144364,No=1.0055504070680625;let Fo=!0;const Lo=(t,e)=>{if(0===t)return"0";if(e<5){if(e>=0)return`${t}${"0".repeat(e)}`.replace(/\B(?=(\d{3})+(?!\d))/g,",");if(e>-5)return(t*Do**e).toFixed(-e)}return`${t}×⏨${e}`},jo=t=>{const{setTranslate:e,setScale:n}=t,r=ge(t,Mo),o=Object(me.createRef)(),i=[0,0],a=[0,0],s=[1,1],u=[0,0],c=[-2,10],l=[-4,-4];let f=0;const h=t=>{t.clearRect(0,0,t.canvas.width,t.canvas.height),u[0]*=.9,u[1]*=.9,Fo&&(a[0]+=u[0],a[1]-=u[1]);const n=Math.ceil(Math.log10(24*s[0])),r=Math.ceil(Math.log10(24*s[1])),o=10**n,i=10**r,f=o/s[0],h=i/s[1],d=Math.ceil(a[0]*s[0]/o),p=Math.ceil(a[1]*s[1]/i),v=d*o/s[0]-a[0],g=a[1]-p*i/s[1],m=Math.floor(t.canvas.width/f),y=Math.floor(t.canvas.height/h),b=Math.floor(m/2),x=Math.floor(y/2);t.beginPath();for(let e=0;e<=m;e++){const n=v+e*f;if(t.moveTo(n,0),t.lineTo(n,t.canvas.height),e===b)for(let e=0;e<=y;e++){const o=Lo(e+p,r);t.fillText(o,n+l[0],g+t.canvas.height-e*h+l[1])}}for(let e=0;e<=y;e++){const r=g+t.canvas.height-e*h;if(t.moveTo(0,r),t.lineTo(t.canvas.width,r),e===x)for(let e=0;e<=m;e++){const o=Lo(e+d,n),i=v+e*f;t.save(),t.translate(i+c[0],r+c[1]),t.rotate(-Math.PI/6),t.fillText(o,0,0),t.restore()}}t.stroke(),e&&e(a[0],a[1])};return Object(De.d)((()=>{const t=o.current.base;let c=0;const l=[0,0],h=[-1,-1],d=[-1,-1],p=t=>(c|=1<<t.button,l[0]=t.clientX,l[1]=t.clientY,u[0]=u[1]=0,Fo=!(1&c),t.preventDefault(),!1);t.addEventListener("mousedown",p);const v=t=>(c^=1<<t.button,t.preventDefault(),Fo=!(1&c),!1);t.addEventListener("mouseup",v);const g=t=>(t.preventDefault(),!1);t.addEventListener("contextmenu",g);const m=t=>{const r=l[0]-t.clientX,o=l[1]-t.clientY;if(1&c&&(u[0]=4*r,u[1]=4*o,a[0]+=r,a[1]-=o,e&&e(a[0],a[1])),2&c){const t=No**-o;s[0]*=t,s[1]*=t,n&&n(s[0],s[1])}if(4&c){const t=[(l[0]+a[0])*s[0],(f-l[1]+a[1])*s[1]],i=[t[0]/s[0]-a[0],t[1]/s[1]-a[1]];s[0]*=No**r,s[1]*=No**-o,n&&n(s[0],s[1]);const u=[t[0]/s[0]-a[0],t[1]/s[1]-a[1]];a[0]-=i[0]-u[0]-r,a[1]+=u[1]-i[1]-o,e&&e(a[0],a[1])}l[0]=t.clientX,l[1]=t.clientY};t.addEventListener("mousemove",m);const y=t=>(h[0]=t.touches[0].pageX,h[1]=t.touches[0].pageY,u[0]=u[1]=0,Fo=!1,!1);t.addEventListener("touchstart",y);const b=()=>(h[0]=h[1]=-1,Fo=!0,!1);t.addEventListener("touchend",b);const x=t=>{if(h[0]>-1)if(1===t.touches.length){const n=h[0]-t.touches[0].pageX,r=h[1]-t.touches[0].pageY;u[0]=n,u[1]=r,a[0]+=n,a[1]-=r,d[0]=d[1]=-1,e&&e(a[0],a[1])}else{if(d[0]>-1){const r=t.touches[0].pageX,o=t.touches[0].pageY,i=t.touches[1].pageX,u=t.touches[1].pageY,c=((h[0]-d[0])**2+(h[1]-d[1])**2)/((r-i)**2+(o-u)**2),l=[(r+i)/2,(o+u)/2],p=[(l[0]+a[0])*s[0],(f-l[1]+a[1])*s[1]],v=[p[0]/s[0]-a[0],p[1]/s[1]-a[1]];s[0]*=c,s[1]*=c,n&&n(s[0],s[1]);const g=[p[0]/s[0]-a[0],p[1]/s[1]-a[1]];a[0]-=v[0]-g[0],a[1]+=g[1]-v[1],e&&e(a[0],a[1])}d[0]=t.touches[1].pageX,d[1]=t.touches[1].pageY}h[0]=t.touches[0].pageX,h[1]=t.touches[0].pageY};t.addEventListener("touchmove",x);t.addEventListener("wheel",(t=>{const r=t.deltaY>0?Po:1/Po,o=[(l[0]+a[0])*s[0],(f-l[1]+a[1])*s[1]],i=[o[0]/s[0]-a[0],o[1]/s[1]-a[1]];s[0]*=r,s[1]*=r,n&&n(s[0],s[1]);const u=[o[0]/s[0]-a[0],o[1]/s[1]-a[1]];a[0]-=i[0]-u[0],a[1]+=u[1]-i[1],e&&e(a[0],a[1])}));const w=t=>{switch(t.code){case"KeyW":case"ArrowUp":case"Numpad8":a[1]-=19.100426267430983;break;case"KeyS":case"ArrowDown":case"Numpad2":a[1]+=19.100426267430983;break;case"KeyA":case"ArrowLeft":case"Numpad4":a[0]+=19.100426267430983;break;case"KeyD":case"ArrowRight":case"Numpad6":a[0]-=19.100426267430983;break;case"KeyE":case"Numpad9":a[1]-=19.100426267430983,a[0]-=19.100426267430983;break;case"KeyC":case"Numpad3":a[1]+=19.100426267430983,a[0]-=19.100426267430983;break;case"KeyZ":case"Numpad1":a[0]+=19.100426267430983,a[1]+=19.100426267430983;break;case"KeyQ":case"Numpad7":a[0]+=19.100426267430983,a[1]-=19.100426267430983;break;case"Space":case"KeyO":case"Numpad5":a[0]=-i[0],a[1]=-i[1];break;case"KeyX":case"Numpad0":a[0]=a[1]=0;break;case"NumpadSubtract":case"Minus":s[0]*=Po,s[1]*=Po,n&&n(s[0],s[1]);break;case"NumpadAdd":case"Equal":s[0]/=Po,s[1]/=Po,n&&n(s[0],s[1]);break;case"NumpadDivide":case"BracketRight":s[0]/=Do,s[1]/=Do,n&&n(s[0],s[1]);break;case"NumpadMultiply":case"BracketLeft":s[0]*=Do,s[1]*=Do,n&&n(s[0],s[1]);break;case"Period":case"NumpadDecimal":{var e;const t=null!==(e=r.initialScale)&&void 0!==e?e:8/i[0];s[0]=s[1]=t,n&&n(s[0],s[1])}break;case"Escape":case"Backspace":window.location.reload()}};return window.addEventListener("keydown",w),()=>{t.removeEventListener("mousedown",p),t.removeEventListener("mouseup",v),t.removeEventListener("contextmenu",g),t.removeEventListener("mousemove",m),t.removeEventListener("touchstart",y),t.removeEventListener("touchend",b),t.removeEventListener("touchmove",x),window.removeEventListener("keydown",w)}}),[o]),Object(me.h)(To,ve({ref:o,className:"jrid",init:t=>{var e;const o=null!==(e=r.initialScale)&&void 0!==e?e:16/t.canvas.width;s[0]=s[1]=o,n&&n(s[0],s[1]),h(t)},onResize:t=>{t.strokeStyle="#999",t.lineWidth=1,t.fillStyle="#999",t.textAlign="right",t.font="12px monospace",f=t.canvas.height;const e=t.canvas.width/2,n=t.canvas.height/2;if(0===i[0])i[0]=e,i[1]=n,a[0]=-i[0],a[1]=-i[1];else{const t=n-i[1];a[0]-=e-i[0],a[1]-=t,i[0]=e,i[1]=n}h(t)},draw:h,animate:!0},r))};const Bo=(t,e,n)=>{const r=t.createShader(e);if(!r)throw"Missing shader";if(t.shaderSource(r,n),t.compileShader(r),!t.getShaderParameter(r,t.COMPILE_STATUS))throw t.getShaderInfoLog(r);return r};var Wo=()=>{const t=Object(me.createRef)();let e,n,r,o;const i=[0,0],a=[1,1],s=(t,e)=>{i[0]=t,i[1]=e},u=(t,e)=>{t.uniform1f(n,e),t.uniform2f(r,i[0],i[1]),t.uniform2f(o,a[0],a[1]),t.drawArrays(t.TRIANGLE_STRIP,0,4)},c=Ue.a["grid-test"];return Object(me.h)("section",{ref:t,class:Ge},Object(me.h)(be.a,null,Object(me.h)("title",null,c.title)),Object(me.h)("div",{class:"d-none"},Object(me.h)(We.b,{art:c})),Object(me.h)("div",{class:"offcanvas offcanvas-start","data-bs-scroll":"true","data-bs-backdrop":"false",id:"shaders","aria-labelledby":"shadersLabel"},Object(me.h)("div",{class:"offcanvas-header"},Object(me.h)("h5",{class:"offcanvas-title",id:"shadersLabel"},"Shaders"),Object(me.h)("button",{type:"button",class:"btn-close text-reset","data-bs-dismiss":"parameterPanel","aria-label":"Close"})),Object(me.h)("div",{class:"offcanvas-body"},Object(me.h)("form",null,Object(me.h)("div",{class:"mb-3"},Object(me.h)("label",{for:"vertexShader"},"Vertex Shader"),Object(me.h)("textarea",{class:"form-control",id:"vertexShader",rows:6},"#version 300 es\nin vec2 a_position;\nin vec4 a_color;\nout vec4 v_color;\n\nvoid main(void) {\n  gl_Position = vec4(a_position, 0.0, 1.0);\n  v_color = a_color;\n}\n")),Object(me.h)("div",{class:"mb-3"},Object(me.h)("label",{for:"fragmentShader"},"Fragment Shader"),Object(me.h)("textarea",{class:"form-control",id:"fragmentShader",rows:20},"#version 300 es\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n\nuniform float u_time;\nuniform vec2 u_translate;\nuniform vec2 u_scale;\nout vec4 fragmentColor;\n\nvoid main() {\n  float m_0 = ( gl_FragCoord.x + u_translate.x ) * u_scale.x;\n  float m_1 = ( gl_FragCoord.y + u_translate.y ) * u_scale.y;\n  \n  // unit circle (0 = x² + y²)\n  float radius_squared = m_0*m_0 + m_1*m_1;\n  fragmentColor.r = fragmentColor.g = fragmentColor.b = radius_squared < 1.0 ? radius_squared : 1.0 / radius_squared;\n  fragmentColor.r = 1.0;\n}\n"))))),Object(me.h)(jo,{setTranslate:s,setScale:(t,e)=>{a[0]=t,a[1]=e,s(0,0)}}),Object(me.h)(Je,{init:t=>{i[0]=-t.canvas.width/2,i[1]=-t.canvas.height/2,e=(t=>{var e,n;const r=t.createProgram();if(!r)throw"Missing program";const o=null===(e=document.getElementById("fragmentShader"))||void 0===e?void 0:e.textContent;if(!o)throw"Missing fragmentShaderSource";const i=Bo(t,t.FRAGMENT_SHADER,o);t.attachShader(r,i);const a=null===(n=document.getElementById("vertexShader"))||void 0===n?void 0:n.textContent;if(!a)throw"Missing vertexShaderSource";const s=Bo(t,t.VERTEX_SHADER,a);var u;if(t.attachShader(r,s),t.linkProgram(r),!t.getProgramParameter(r,t.LINK_STATUS))throw null!==(u=t.getProgramInfoLog(r))&&void 0!==u?u:"Error from getProgramParameter";return t.useProgram(r),r})(t),((t,e)=>{const i=t.getAttribLocation(e,"a_position"),a=new Float32Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0]),s=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,s),t.bufferData(t.ARRAY_BUFFER,a,t.STATIC_DRAW),t.vertexAttribPointer(i,3,t.FLOAT,!1,0,0),t.bindBuffer(t.ARRAY_BUFFER,null),t.enableVertexAttribArray(i),n=t.getUniformLocation(e,"u_time"),r=t.getUniformLocation(e,"u_translate"),o=t.getUniformLocation(e,"u_scale")})(t,e)},onResize:t=>{t.viewport(0,0,t.canvas.width,t.canvas.height),t.clear(t.COLOR_BUFFER_BIT),u(t,-1)},draw:u}))},Uo=Object(xe.a)((function(t){n.e(6).then(function(){var e=n("liLl");"function"==typeof t&&t(e)}.bind(null,n)).catch(n.oe)})),Go=Object(xe.a)((function(t){n.e(13).then(function(){var e=n("dTTF");"function"==typeof t&&t(e)}.bind(null,n)).catch(n.oe)})),zo=Object(xe.a)((function(t){n.e(16).then(function(){var e=n("U/le");"function"==typeof t&&t(e)}.bind(null,n)).catch(n.oe)})),Vo=Object(xe.a)((function(t){n.e(4).then(function(){var e=n("mV8e");"function"==typeof t&&t(e)}.bind(null,n)).catch(n.oe)})),Ho=Object(xe.a)((function(t){n.e(18).then(function(){var e=n("pvpb");"function"==typeof t&&t(e)}.bind(null,n)).catch(n.oe)})),qo=n("z36D"),Ko=n("JBDq");var Xo=()=>{const[t,e]=Object(De.k)(!0),n=()=>e(!t);return Object(me.h)("header",null,Object(me.h)("nav",{class:"navbar navbar-expand-lg navbar-dark bg-dark"},Object(me.h)("div",{class:"container"},Object(me.h)("a",{class:"navbar-brand",href:"https://psilly.com/"},"Psilly.com ",Object(me.h)("span",{role:"img","aria-label":"psychedelic mushroom"},"🍄")),Object(me.h)("span",{class:"navbar-text text-white"},"Relax, get psilly..."),Object(me.h)("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#nav-menu","aria-controls":"nav-menu","aria-expanded":!t,"aria-label":"Toggle navigation",onClick:n},Object(me.h)("span",{class:"navbar-toggler-icon"})),Object(me.h)("div",{class:(t?"collapse":"")+" navbar-collapse",id:"nav-menu"},Object(me.h)("ul",{class:"navbar-nav ms-auto"},Object(me.h)("li",{class:"nav-item","data-bs-toggle":"collapse","data-bs-target":"#nav-menu"},Object(me.h)("a",{class:"nav-link text-white",href:"https://puff.psilly.com/login",onClick:n},"Login")),Object(me.h)("li",{class:"nav-item","data-bs-toggle":"collapse","data-bs-target":"#nav-menu"},Object(me.h)(Ko.a,{class:"nav-link text-white",href:"/art/",activeClassName:"active",onClick:n},"Art")),Object(me.h)("li",{class:"nav-item","data-bs-toggle":"collapse","data-bs-target":"#nav-menu"},Object(me.h)(Ko.a,{class:"nav-link text-white",href:"/listen/",activeClassName:"active",onClick:n},"Listen")),Object(me.h)("li",{class:"nav-item","data-bs-toggle":"collapse","data-bs-target":"#nav-menu"},Object(me.h)(Ko.a,{class:"nav-link text-white",href:"/watch/",activeClassName:"active",onClick:n},"Watch")),Object(me.h)("li",{class:"nav-item","data-bs-toggle":"collapse","data-bs-target":"#nav-menu"},Object(me.h)(Ko.a,{class:"nav-link text-white",href:"/read/",activeClassName:"active",onClick:n},"Read")),Object(me.h)("li",{class:"nav-item","data-bs-toggle":"collapse","data-bs-target":"#nav-menu"},Object(me.h)(Ko.a,{class:"nav-link text-white",href:"/play/",activeClassName:"active",onClick:n},"Play")),Object(me.h)("li",{class:"nav-item","data-bs-toggle":"collapse","data-bs-target":"#nav-menu"},Object(me.h)(Ko.a,{class:"nav-link text-white",href:"/talk/",activeClassName:"active",onClick:n},"Talk")),Object(me.h)("li",{class:"nav-item","data-bs-toggle":"collapse","data-bs-target":"#nav-menu"},Object(me.h)(Ko.a,{class:"nav-link text-white",href:"/chat/",activeClassName:"active",onClick:n},"Chat")),Object(me.h)("li",{class:"nav-item","data-bs-toggle":"collapse","data-bs-target":"#nav-menu"},Object(me.h)(Ko.a,{class:"nav-link text-white",href:"/jam/",activeClassName:"active",onClick:n},"Jam")),Object(me.h)("li",{class:"nav-item","data-bs-toggle":"collapse","data-bs-target":"#nav-menu"},Object(me.h)(Ko.a,{class:"nav-link text-white",href:"/faq/",activeClassName:"active",onClick:n},"FAQ")),Object(me.h)("li",{class:"nav-item","data-bs-toggle":"collapse","data-bs-target":"#nav-menu"},Object(me.h)(Ko.a,{class:"nav-link text-white",href:"/about/",activeClassName:"active",onClick:n},"About")),Object(me.h)("li",{class:"nav-item","data-bs-toggle":"collapse","data-bs-target":"#nav-menu"},Object(me.h)(Ko.a,{class:"nav-link text-white",href:"/contact/",activeClassName:"active",onClick:n},"Contact")))))))};var Jo=()=>Object(me.h)("footer",{class:"footer text-muted py-3 mt-5"},Object(me.h)("div",{class:"container"},Object(me.h)("div",{class:"row"},Object(me.h)("div",{class:"col-md-6"},Object(me.h)("p",{class:"mb-2"},"© ",Object(me.h)("time",{id:"copyright-year"},(new Date).getFullYear())," ",Object(me.h)("a",{class:"text-muted text-decoration-none",href:"https://psilly.com/"},"Psilly Corporation"),". Psilly™ is a trademark of ",Object(me.h)("a",{class:"text-muted text-decoration-none",href:"https://psilly.com/"},"Psilly Corporation"),". All rights reserved.")),Object(me.h)("div",{class:"col-md-6"},Object(me.h)("p",{class:"float-end mb-2"},Object(me.h)("a",{class:"text-muted text-decoration-none me-2",href:"/terms/",target:"_blank",rel:"noreferrer",title:"Website Terms of Use"},"Terms"),Object(me.h)("a",{class:"text-muted text-decoration-none me-2",href:"/privacy/",target:"_blank",rel:"noreferrer",title:"Privacy Policy"},"Privacy"),Object(me.h)("a",{class:"text-muted text-decoration-none me-2",href:"https://github.com/acerix/psilly",target:"_blank",rel:"noreferrer",title:"Source Code on GitHub",role:"img","aria-label":"Cat face in HTML source code tag"},"<🐱/>"),Object(me.h)("a",{class:"text-muted text-decoration-none me-2",href:"https://www.reddit.com/r/psilly/",target:"_blank",rel:"noreferrer",title:"/r/psilly on Reddit",role:"img","aria-label":"Extraterrestrial being"},"👽"),Object(me.h)("a",{class:"text-muted text-decoration-none",href:"https://www.youtube.com/channel/UCNYwYcc65kItw98wcqU0-Gg",target:"_blank",rel:"noreferrer",title:"Psilly on YouTube",role:"img","aria-label":"A day-dream stimulation"},"📺"))))));var Yo=t=>{const e=Object(me.createRef)();return Object(De.d)((()=>{const n=e.current,r=(null==t?void 0:t.sequins)||[38,38,40,40,37,39,37,39,66,65],o=(null==t?void 0:t.success)||function(t){t.innerHTML=atob("PGRpdiBjbGFzcz0iYWxlcnQgYWxlcnQtc3VjY2VzcyB0ZXh0LWRhcmsiIHJvbGU9ImFsZXJ0Ij5Hb2QgbW9kZSBlbmFibGVkPC9kaXY+"),window.setTimeout((()=>{t.innerHTML=""}),4096)},i=new Array(r.length),a=t=>{i.shift(),i.push(t.which),r.every(((t,e)=>t===i[e]))&&o(n)};return window.addEventListener("keydown",a),()=>{window.removeEventListener("keydown",a)}}),[t,e]),Object(me.h)("div",{ref:e})};const Qo=(t,e,n)=>{const r=t.createShader(e);if(!r)throw"Missing shader";if(t.shaderSource(r,n),t.compileShader(r),!t.getShaderParameter(r,t.COMPILE_STATUS))throw t.getShaderInfoLog(r);return r};var $o=()=>{const t=Object(me.createRef)();let e,n,r,o;const i=[0,0],a=[1,1],s=(t,e)=>{i[0]=t,i[1]=e},u=(t,e)=>{t.uniform1f(n,e),t.uniform2f(r,i[0],i[1]),t.uniform2f(o,a[0],a[1]),t.drawArrays(t.TRIANGLE_STRIP,0,4)},c=Ue.a["eye-of-newt"];return Object(me.h)("section",{ref:t,class:Ge},Object(me.h)(be.a,null,Object(me.h)("title",null,c.title)),Object(me.h)("div",{class:"d-none"},Object(me.h)(We.b,{art:c})),Object(me.h)("div",{class:"offcanvas offcanvas-start","data-bs-scroll":"true","data-bs-backdrop":"false",id:"shaders","aria-labelledby":"shadersLabel"},Object(me.h)("div",{class:"offcanvas-header"},Object(me.h)("h5",{class:"offcanvas-title",id:"shadersLabel"},"Shaders"),Object(me.h)("button",{type:"button",class:"btn-close text-reset","data-bs-dismiss":"parameterPanel","aria-label":"Close"})),Object(me.h)("div",{class:"offcanvas-body"},Object(me.h)("form",null,Object(me.h)("div",{class:"mb-3"},Object(me.h)("label",{for:"vertexShader"},"Vertex Shader"),Object(me.h)("textarea",{class:"form-control",id:"vertexShader",rows:6},"#version 300 es\nin vec2 a_position;\nin vec4 a_color;\nout vec4 v_color;\n\nvoid main(void) {\n  gl_Position = vec4(a_position, 0.0, 1.0);\n  v_color = a_color;\n}\n")),Object(me.h)("div",{class:"mb-3"},Object(me.h)("label",{for:"fragmentShader"},"Fragment Shader"),Object(me.h)("textarea",{class:"form-control",id:"fragmentShader",rows:20},"#version 300 es\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n\nuniform float u_time;\nuniform vec2 u_translate;\nuniform vec2 u_scale;\nout vec4 fragmentColor;\n\nvoid main() {\n  float x = ( gl_FragCoord.x + u_translate.x ) * u_scale.x;\n  float y = ( gl_FragCoord.y + u_translate.y ) * u_scale.y;\n  float x2 = x*x;\n  float y2 = y*y;\n\n  // lemniscate of bernoulli (0 = -2x² + x⁴ + 2y² + 2x²y² + y⁴)\n  float z = -2.0*x2 + x2*x2 + 2.0*y2 + 2.0*x2*y2 + y2*y2;\n\n  fragmentColor.r = mod(z + u_time / 43.0, 1.0);\n  fragmentColor.g = z < 1.0 ? z : 1.0 / z;\n  fragmentColor.b = mod(z - u_time / 73.0, 1.0);\n}\n"))))),Object(me.h)("div",{style:"display:none;"},Object(me.h)(Tn,{setTranslate:s,setScale:(t,e)=>{a[0]=t,a[1]=e,s(0,0)}})),Object(me.h)(Je,{init:t=>{i[0]=-t.canvas.width/2,i[1]=-t.canvas.height/2,e=(t=>{var e,n;const r=t.createProgram();if(!r)throw"Missing program";const o=null===(e=document.getElementById("fragmentShader"))||void 0===e?void 0:e.textContent;if(!o)throw"Missing fragmentShaderSource";const i=Qo(t,t.FRAGMENT_SHADER,o);t.attachShader(r,i);const a=null===(n=document.getElementById("vertexShader"))||void 0===n?void 0:n.textContent;if(!a)throw"Missing vertexShaderSource";const s=Qo(t,t.VERTEX_SHADER,a);var u;if(t.attachShader(r,s),t.linkProgram(r),!t.getProgramParameter(r,t.LINK_STATUS))throw null!==(u=t.getProgramInfoLog(r))&&void 0!==u?u:"Error from getProgramParameter";return t.useProgram(r),r})(t),((t,e)=>{const i=t.getAttribLocation(e,"a_position"),a=new Float32Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0]),s=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,s),t.bufferData(t.ARRAY_BUFFER,a,t.STATIC_DRAW),t.vertexAttribPointer(i,3,t.FLOAT,!1,0,0),t.bindBuffer(t.ARRAY_BUFFER,null),t.enableVertexAttribArray(i),n=t.getUniformLocation(e,"u_time"),r=t.getUniformLocation(e,"u_translate"),o=t.getUniformLocation(e,"u_scale")})(t,e)},onResize:t=>{t.viewport(0,0,t.canvas.width,t.canvas.height),t.clear(t.COLOR_BUFFER_BIT),u(t,-1)},draw:u}))};e.default=()=>Object(me.h)("div",null,Object(me.h)(be.a,{htmlAttributes:{lang:"en-CA"},title:"A page with no name",titleTemplate:"%s 🍄 Psilly",titleAttributes:{itemProp:"name",lang:"en-CA"},meta:[{name:"description",content:"Psilly is an online community dedicated to psychedelic research, therapy, harm-reduction, and advocacy. We deliver peace of mind through exceptional care and avant-garde advocacy of psychotropic therapies."}],link:[{rel:"canonical",href:"https://psilly.com/"}]},Object(me.h)("script",{type:"application/ld+json"},'\n        {\n            "@context": "https://schema.org",\n            "@type": "Organization",\n            "name": "Psilly",\n            "legalName" : "Psilly Corporation",\n            "url": "https://psilly.com",\n            "logo": "https://psilly.com/assets/Psilly.png",\n            "foundingDate": "2006",\n            "founders": [\n              {\n              "@type": "Person",\n              "name": "Dylan Ferris"\n              }\n            ],\n            "email": "dylan@psilly.com"\n        }\n    ')),Object(me.h)(Xo,null),Object(me.h)("main",null,Object(me.h)(Yo,null),Object(me.h)(ye.c,null,Object(me.h)(we,{path:"/"}),Object(me.h)(_e,{path:"/about/"}),Object(me.h)(Ee,{path:"/privacy/"}),Object(me.h)(Re,{path:"/terms/"}),Object(me.h)(Ce,{path:"/bylaws/"}),Object(me.h)(Se,{path:"/faq/"}),Object(me.h)(Oe,{path:"/contact/"}),Object(me.h)(Ae,{path:"/join/"}),Object(me.h)(Ie,{path:"/donate/"}),Object(me.h)(ke,{path:"/sober/",highness:"sober"}),Object(me.h)(ke,{path:"/high/",highness:"high"}),Object(me.h)(ke,{path:"/toohigh/",highness:"too high"}),Object(me.h)(Te,{path:"/experiments/"}),Object(me.h)(Me,{path:"/art/"}),Object(me.h)(qe,{path:"/art/polygonous/"}),Object(me.h)(Qe,{path:"/art/meld/"}),Object(me.h)($e,{path:"/art/circle/"}),Object(me.h)(Ze,{path:"/art/squibbo/"}),Object(me.h)(on,{path:"/art/golden-angle-donut/"}),Object(me.h)(an,{path:"/art/falls/"}),Object(me.h)(mn,{path:"/art/chillbert/"}),Object(me.h)(bn,{path:"/art/develop/"}),Object(me.h)(_n,{path:"/art/quadingle/"}),Object(me.h)(Rn,{path:"/art/oh-bezier/"}),Object(me.h)(Pn,{path:"/art/totally-modular-form-bro/"}),Object(me.h)(Un,{path:"/art/untilted/"}),Object(me.h)(zn,{path:"/art/lemnisgo/"}),Object(me.h)(Hn,{path:"/art/hyperbollick/"}),Object(me.h)(Jn,{path:"/art/vcock/"}),Object(me.h)(Zn,{path:"/art/gravity/"}),Object(me.h)(Co,{path:"/art/iball/"}),Object(me.h)($o,{path:"/art/eye-of-newt/"}),Object(me.h)(So,{path:"/art/canvas-template/"}),Object(me.h)(Ao,{path:"/art/webgl-template/"}),Object(me.h)(Io,{path:"/art/loading/"}),Object(me.h)(Wo,{path:"/art/grid-test/"}),Object(me.h)(Uo,{path:"/chat/"}),Object(me.h)(Go,{path:"/jam/"}),Object(me.h)(Ho,{path:"/spin/"}),Object(me.h)(qo.a,{path:"/404/"}),Object(me.h)(ye.b,{path:"/blog/:post/",component:Vo}),Object(me.h)(ye.b,{path:"/page/:page/",component:zo}),Object(me.h)(ye.b,{path:"/:page/",component:zo}),Object(me.h)(qo.a,{default:!0}))),Object(me.h)(Jo,null))},qoNQ:function(t,e,n){"use strict";var r,o=n("nEaP"),i=n("WGD3"),a=n("xxLW"),s=n("CwSR"),u=n("HZkJ"),c=n("2If+"),l=n("fT8P"),f=n("CLff"),h=n("SkE4").enforce,d=n("P2u4"),p=!o.ActiveXObject&&"ActiveXObject"in o,v=function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}},g=u("WeakMap",v,c);if(d&&p){r=c.getConstructor(v,"WeakMap",!0),s.enable();var m=g.prototype,y=i(m.delete),b=i(m.has),x=i(m.get),w=i(m.set);a(m,{delete:function(t){if(l(t)&&!f(t)){var e=h(this);return e.frozen||(e.frozen=new r),y(this,t)||e.frozen.delete(t)}return y(this,t)},has:function(t){if(l(t)&&!f(t)){var e=h(this);return e.frozen||(e.frozen=new r),b(this,t)||e.frozen.has(t)}return b(this,t)},get:function(t){if(l(t)&&!f(t)){var e=h(this);return e.frozen||(e.frozen=new r),b(this,t)?x(this,t):e.frozen.get(t)}return x(this,t)},set:function(t,e){if(l(t)&&!f(t)){var n=h(this);n.frozen||(n.frozen=new r),b(this,t)?w(this,t,e):n.frozen.set(t,e)}else w(this,t,e);return this}})}},qwoB:function(t,e,n){var r=n("JRM0"),o=n("nEaP"),i=n("m1e9"),a=n("sK41"),s=n("7DHN"),u=n("YxGO"),c=o.process;r({global:!0,enumerable:!0,noTargetGet:!0},{queueMicrotask:function(t){s(arguments.length,1),a(t);var e=u&&c.domain;i(e?e.bind(t):t)}})},rTzs:function(t,e,n){"use strict";n("HZkJ")("WeakSet",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),n("2If+"))},rk7W:function(t,e){e.f=Object.getOwnPropertySymbols},rken:function(t,e,n){"use strict";var r=n("9pAD"),o=n("glsI"),i=n("fr05");t.exports=function(t){for(var e=r(this),n=i(e),a=arguments.length,s=o(a>1?arguments[1]:void 0,n),u=a>2?arguments[2]:void 0,c=void 0===u?n:o(u,n);c>s;)e[s++]=t;return e}},rxbk:function(t,e,n){var r=n("UVdV");t.exports=r("navigator","userAgent")||""},s06e:function(t,e,n){var r=n("rxbk");t.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(r)},s3NK:function(t){t.exports={}},s5En:function(t,e,n){"use strict";var r=n("Xiyl"),o=n("SmY9").right,i=r.aTypedArray;(0,r.exportTypedArrayMethod)("reduceRight",(function(t){var e=arguments.length;return o(i(this),t,e,e>1?arguments[1]:void 0)}))},sK41:function(t,e,n){var r=n("nEaP"),o=n("PGFG"),i=n("Xki7"),a=r.TypeError;t.exports=function(t){if(o(t))return t;throw a(i(t)+" is not a function")}},sLmC:function(t,e,n){"use strict";var r=n("R/cv"),o=n("M/tt"),i=n("ZK/t"),a=n("fr05"),s=n("fK/z"),u=Math.min,c=[].lastIndexOf,l=!!c&&1/[1].lastIndexOf(1,-0)<0,f=s("lastIndexOf");t.exports=l||!f?function(t){if(l)return r(c,this,arguments)||0;var e=o(this),n=a(e),s=n-1;for(arguments.length>1&&(s=u(s,i(arguments[1]))),s<0&&(s=n+s);s>=0;s--)if(s in e&&e[s]===t)return s||0;return-1}:c},sRXP:function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"a",(function(){return s}));var r,o=n("hosL"),i=n("+COX");!function(t){t[t.Art=0]="Art",t[t.Template=1]="Template",t[t.Test=2]="Test",t[t.WIP=3]="WIP"}(r||(r={}));const a=t=>{const{art:e}=t,n=Object(o.createRef)();return e.displayUrl=`/art/${e.path}/`,e.thumbnailUrl=`/assets/art/thumbnails/${e.path}.webp`,e.thumbnailLegacyUrl=`/assets/art/thumbnails/${e.path}.png`,Object(o.h)("div",{class:"card art_plaque",ref:n},Object(o.h)("a",{href:e.displayUrl,"aria-label":"Experience"},Object(o.h)("picture",null,Object(o.h)("source",{srcset:e.thumbnailUrl,type:"image/webp"}),Object(o.h)("source",{srcset:e.thumbnailLegacyUrl,type:"image/png"}),Object(o.h)("img",{src:e.thumbnailLegacyUrl,class:"card-img-top",alt:`Preview of ${e.title}`}))),Object(o.h)("div",{class:"card-body"},Object(o.h)("h5",{class:"card-title"},Object(o.h)("strong",null,Object(o.h)("em",null,e.title)),", ",e.created),Object(o.h)("p",{class:"card-text"},Object(o.h)("strong",null,e.medium)),Object(o.h)("p",{class:"card-text"},e.description),Object(o.h)("p",{class:"card-text"},Object(o.h)("a",{href:`//github.com/acerix/psilly/tree/main/src/routes/art/${e.path}`,title:"Source Code on GitHub"},"<sauce/>"))),Object(o.h)("noscript",null,Object(o.h)("p",null,"This art requires JavaScript.")))},s=()=>{const t=Object(o.createRef)();return Object(o.h)("div",{class:"row my-4",ref:t},Object(o.h)("h2",null,"Artwork"),Object.values(i.a).filter((t=>"Art"===t.type)).map(((t,e)=>Object(o.h)("div",{key:e,class:"col-sm-6 col-md-4 mb-4"},Object(o.h)(a,{art:t})))),Object(o.h)("h2",null,"Templates"),Object.values(i.a).filter((t=>"Template"===t.type)).map(((t,e)=>Object(o.h)("div",{key:e,class:"col-sm-6 col-md-4 mb-4"},Object(o.h)(a,{art:t})))),Object(o.h)("h2",null,"Debug Tests"),Object.values(i.a).filter((t=>"Test"===t.type)).map(((t,e)=>Object(o.h)("div",{key:e,class:"col-sm-6 col-md-4 mb-4"},Object(o.h)(a,{art:t})))))}},soU3:function(t,e,n){"use strict";var r=n("Xiyl"),o=n("5q7I").map,i=n("RN4W"),a=r.aTypedArray;(0,r.exportTypedArrayMethod)("map",(function(t){return o(a(this),t,arguments.length>1?arguments[1]:void 0,(function(t,e){return new(i(t))(e)}))}))},tPpl:function(t){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},ti6M:function(t,e,n){"use strict";var r=n("nEaP"),o=n("WGD3"),i=n("+iL7"),a=n("mEUw").start,s=r.RangeError,u=Math.abs,c=Date.prototype,l=c.toISOString,f=o(c.getTime),h=o(c.getUTCDate),d=o(c.getUTCFullYear),p=o(c.getUTCHours),v=o(c.getUTCMilliseconds),g=o(c.getUTCMinutes),m=o(c.getUTCMonth),y=o(c.getUTCSeconds);t.exports=i((function(){return"0385-07-25T07:06:39.999Z"!=l.call(new Date(-50000000000001))}))||!i((function(){l.call(new Date(NaN))}))?function(){if(!isFinite(f(this)))throw s("Invalid time value");var t=this,e=d(t),n=v(t),r=e<0?"-":e>9999?"+":"";return r+a(u(e),r?6:4,0)+"-"+a(m(t)+1,2,0)+"-"+a(h(t),2,0)+"T"+a(p(t),2,0)+":"+a(g(t),2,0)+":"+a(y(t),2,0)+"."+a(n,3,0)+"Z"}:l},tlZM:function(t,e,n){var r=n("+iL7");t.exports=!r((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")}))},"u/xS":function(t,e,n){var r=n("JRM0"),o=n("b82F"),i=n("+iL7"),a=n("fT8P"),s=n("CwSR").onFreeze,u=Object.freeze;r({target:"Object",stat:!0,forced:i((function(){u(1)})),sham:!o},{freeze:function(t){return u&&a(t)?u(s(t)):t}})},u1l9:function(t,e,n){n("B3nq")("matchAll")},u5rE:function(t,e,n){var r=n("nEaP"),o=n("UVdV"),i=n("PGFG"),a=n("+n59"),s=n("B/3V"),u=r.Object;t.exports=s?function(t){return"symbol"==typeof t}:function(t){var e=o("Symbol");return i(e)&&a(e.prototype,u(t))}},uAsx:function(t,e,n){n("JRM0")({target:"Math",stat:!0},{sign:n("BRZg")})},uHfv:function(t,e,n){var r=n("rxbk"),o=n("nEaP");t.exports=/ipad|iphone|ipod/i.test(r)&&void 0!==o.Pebble},uJcu:function(t,e,n){var r=n("JRM0"),o=n("Xv5+"),i=Math.exp;r({target:"Math",stat:!0},{tanh:function(t){var e=o(t=+t),n=o(-t);return e==1/0?1:n==1/0?-1:(e-n)/(i(t)+i(-t))}})},uQK7:function(t,e,n){"use strict";var r=n("JRM0"),o=n("WGD3"),i=n("kMPr").indexOf,a=n("fK/z"),s=o([].indexOf),u=!!s&&1/s([1],1,-0)<0,c=a("indexOf");r({target:"Array",proto:!0,forced:u||!c},{indexOf:function(t){var e=arguments.length>1?arguments[1]:void 0;return u?s(this,t,e)||0:i(this,t,e)}})},uTy6:function(t,e,n){n("j8ZG")("Int8",(function(t){return function(e,n,r){return t(this,e,n,r)}}))},uXbS:function(t,e,n){"use strict";var r=n("JRM0"),o=n("mEUw").end;r({target:"String",proto:!0,forced:n("uz20")},{padEnd:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}})},ujzH:function(t,e,n){var r=n("8OJN"),o=n("ek/P");t.exports=Object.keys||function(t){return r(t,o)}},"ume/":function(t,e,n){var r=n("JRM0"),o=n("UVdV"),i=n("R/cv"),a=n("+iL7"),s=n("Nk1t"),u="AggregateError",c=o(u),l=!a((function(){return 1!==c([1]).errors[0]}))&&a((function(){return 7!==c([1],u,{cause:7}).cause}));r({global:!0,forced:l},{AggregateError:s(u,(function(t){return function(e,n){return i(t,this,arguments)}}),l,!0)})},uz20:function(t,e,n){var r=n("rxbk");t.exports=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(r)},"v+MS":function(t,e,n){n("V2sW")("Array")},v0JE:function(t,e,n){var r=n("jP2f"),o=n("LMdw"),i=n("Fup7"),a=n("nRc6");t.exports=function(t,e,n){for(var s=o(e),u=a.f,c=i.f,l=0;l<s.length;l++){var f=s[l];r(t,f)||n&&r(n,f)||u(t,f,c(e,f))}}},v78j:function(t,e,n){"use strict";var r=n("JRM0"),o=n("nEaP"),i=n("+n59"),a=n("XOJ6"),s=n("hQLn"),u=n("v0JE"),c=n("w/Ji"),l=n("nHIk"),f=n("VSW8"),h=n("oa+t"),d=n("8ZZt"),p=n("maYj"),v=n("QvVa"),g=n("GHf2"),m=n("52tz"),y=g("toStringTag"),b=o.Error,x=[].push,w=function(t,e){var n,r=arguments.length>2?arguments[2]:void 0,o=i(_,this);s?n=s(new b,o?a(this):_):(n=o?this:c(_),l(n,y,"Error")),void 0!==e&&l(n,"message",v(e)),m&&l(n,"stack",h(n.stack,1)),d(n,r);var u=[];return p(t,x,{that:u}),l(n,"errors",u),n};s?s(w,b):u(w,b,{name:!0});var _=w.prototype=c(b.prototype,{constructor:f(1,w),message:f(1,""),name:f(1,"AggregateError")});r({global:!0},{AggregateError:w})},vJbi:function(t,e,n){"use strict";(function(t){function r(){return r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},r.apply(this,arguments)}function o(t,e){function n(){this.constructor=t}eo(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function i(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){t.done?o(t.value):new n((function(e){e(t.value)})).then(a,s)}u((r=r.apply(t,e||[])).next())}))}function a(t,e){function n(n){return function(a){return function(n){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(i=2&n[0]?o.return:n[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,n[1])).done)return i;switch(o=0,i&&(n=[2&n[0],i.value]),n[0]){case 0:case 1:i=n;break;case 4:return s.label++,{value:n[1],done:!1};case 5:s.label++,o=n[1],n=[0];continue;case 7:n=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===n[0]||2===n[0])){s=0;continue}if(3===n[0]&&(!i||n[1]>i[0]&&n[1]<i[3])){s.label=n[1];break}if(6===n[0]&&s.label<i[1]){s.label=i[1],i=n;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(n);break}i[2]&&s.ops.pop(),s.trys.pop();continue}n=e.call(t,s)}catch(t){n=[6,t],o=0}finally{r=i=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,a])}}var r,o,i,a,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a}function s(t,e,n){t[decodeURIComponent(e)]=decodeURIComponent(n||"")}function u(){return ro}function c(t,e){var n=d(t,e);return oo.get(n)}function l(t){for(var e=oo.entries(),n=[];;){var r=e.next(),o=r.value;if(r.done)break;var i=o[1];o[0].split("_")[0]===t&&n.push(i)}return n}function f(t){var e=t.kernelName,n=t.backendName,r=d(e,n);if(oo.has(r))throw new Error("The kernel '"+e+"' for backend '"+n+"' is already registered");oo.set(r,t)}function h(t){var e=t.kernelName;io.has(e)&&console.warn("Overriding the gradient for '"+e+"'"),io.set(e,t)}function d(t,e){return e+"_"+t}function p(t,e,n){return Math.max(t,Math.min(e,n))}function v(t){return t%2==0?t:t+1}function g(t){for(var e=0,n=0;n<t.length;n++)e+=t[n];return e}function m(t,e){if(!t)throw new Error("string"==typeof e?e:e())}function y(t,e,n){void 0===n&&(n=""),m(_(t,e),(function(){return n+" Shapes "+t+" and "+e+" must match"}))}function b(t){m(null!=t,(function(){return"The input to the tensor constructor must be a non-null value."}))}function x(t,e,n){if(void 0===e&&(e=[]),void 0===n&&(n=!1),null==e&&(e=[]),Array.isArray(t)||F(t)&&!n)for(var r=0;r<t.length;++r)x(t[r],e,n);else e.push(t);return e}function w(t){if(0===t.length)return 1;for(var e=t[0],n=1;n<t.length;n++)e*=t[n];return e}function _(t,e){if(t===e)return!0;if(null==t||null==e)return!1;if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function E(t){return t%1==0}function R(t){if(null!=Math.tanh)return Math.tanh(t);if(t===1/0)return 1;if(t===-1/0)return-1;var e=Math.exp(2*t);return(e-1)/(e+1)}function C(t){var e=Math.ceil(Math.sqrt(t));return[e,Math.ceil(t/e)]}function S(t,e){return e<=t.length?t:t+" ".repeat(e-t.length)}function O(t,e,n){return void 0===e&&(e=function(){return 0}),new Promise((function(r,o){var i=0;!function a(){if(t())r();else{i++;var s=e(i);null!=n&&i>=n?o():setTimeout(a,s)}}()}))}function A(t,e){for(var n=1,r=-1,o=0;o<t.length;++o)if(t[o]>=0)n*=t[o];else if(-1===t[o]){if(-1!==r)throw Error("Shapes can only have 1 implicit size. Found -1 at dim "+r+" and dim "+o);r=o}else if(t[o]<0)throw Error("Shapes can not be < 0. Found "+t[o]+" at dim "+o);if(-1===r){if(e>0&&e!==n)throw Error("Size("+e+") must match the product of shape "+t);return t}if(0===n)throw Error("Cannot infer the missing size in ["+t+"] when there are 0 elements");if(e%n!=0)throw Error("The implicit shape can't be a fractional number. Got "+e+" / "+n);var i=t.slice();return i[r]=e/n,i}function I(t,e){var n=e.length;return m((t=null==t?e.map((function(t,e){return e})):[].concat(t)).every((function(t){return t>=-n&&t<n})),(function(){return"All values in axis param must be in range [-"+n+", "+n+") but got axis "+t})),m(t.every((function(t){return E(t)})),(function(){return"All values in axis param must be integers but got axis "+t})),t.map((function(t){return t<0?n+t:t}))}function k(t,e){for(var n=[],r=[],o=null!=e&&Array.isArray(e)&&0===e.length,i=null==e||o?null:I(e,t).sort(),a=0,s=0;s<t.length;++s){if(null!=i){if(i[a]===s&&1!==t[s])throw new Error("Can't squeeze axis "+s+" since its dim '"+t[s]+"' is not 1");(null==i[a]||i[a]>s)&&1===t[s]&&(n.push(t[s]),r.push(s)),i[a]<=s&&a++}1!==t[s]&&(n.push(t[s]),r.push(s))}return{newShape:n,keptDims:r}}function T(t,e){var n=null;if(null==t||"float32"===t)n=new Float32Array(e);else if("int32"===t)n=new Int32Array(e);else{if("bool"!==t)throw new Error("Unknown data type "+t);n=new Uint8Array(e)}return n}function M(t,e){var n=null;if(null==t||"float32"===t)n=new Float32Array(e);else if("int32"===t)n=new Int32Array(e);else if("bool"===t)n=new Uint8Array(e);else{if("string"!==t)throw new Error("Unknown data type "+t);n=new Array(e)}return n}function D(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(isNaN(r)||!isFinite(r))throw Error("A tensor of type "+e+" being uploaded contains "+r+".")}}function P(t){return"bool"===t||"complex64"===t||"float32"===t||"int32"===t||"string"===t}function N(t,e){return!("complex64"===e||"float32"===e&&"complex64"!==t||"int32"===e&&"float32"!==t&&"complex64"!==t||"bool"===e&&"bool"===t)}function F(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array}function L(t){if("float32"===t||"int32"===t)return 4;if("complex64"===t)return 8;if("bool"===t)return 1;throw new Error("Unknown dtype "+t)}function j(t){if(null==t)return 0;var e=0;return t.forEach((function(t){return e+=t.length})),e}function B(t){return"string"==typeof t||t instanceof String}function W(t){return"boolean"==typeof t}function U(t){return"number"==typeof t}function G(t){return Array.isArray(t)?G(t[0]):t instanceof Float32Array?"float32":t instanceof Int32Array||t instanceof Uint8Array?"int32":U(t)?"float32":B(t)?"string":W(t)?"bool":"float32"}function z(t){return!!(t&&t.constructor&&t.call&&t.apply)}function V(t,e){for(var n=e;n<t;++n)if(t%n==0)return n;return t}function H(t){var e=t.length;if(e<2)return[];var n=new Array(e-1);n[e-2]=t[e-1];for(var r=e-3;r>=0;--r)n[r]=n[r+1]*t[r+1];return n}function q(t,e,n){if("string"===e)throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(t)&&(t=x(t)),n&&D(t,e),function(t,e){return t instanceof Float32Array&&"float32"===e||t instanceof Int32Array&&"int32"===e||t instanceof Uint8Array&&"bool"===e}(t,e))return t;if(null==e||"float32"===e||"complex64"===e)return new Float32Array(t);if("int32"===e)return new Int32Array(t);if("bool"===e){for(var r=new Uint8Array(t.length),o=0;o<r.length;++o)0!==Math.round(t[o])&&(r[o]=1);return r}throw new Error("Unknown data type "+e)}function K(t,e){if(0===t.length)return e[0];var n=t.reduce((function(t,e){return t*e}));if(0===n)return[];if(n!==e.length)throw new Error("["+t+"] does not match the input size.");return function t(e,n,r){var o=new Array;if(1===n.length)for(var i=n[0],a=0;a<i;a++)o[a]=r[e+a];else{i=n[0];var s=n.slice(1),u=s.reduce((function(t,e){return t*e}));for(a=0;a<i;a++)o[a]=t(e+a*u,s,r)}return o}(0,t,e)}function X(t,e){for(var n=J(t,e),r=0;r<n.length;r++)n[r]=1;return n}function J(t,e){if(null==e||"float32"===e||"complex64"===e)return new Float32Array(t);if("int32"===e)return new Int32Array(t);if("bool"===e)return new Uint8Array(t);throw new Error("Unknown data type "+e)}function Y(){return u().platform.now()}function Q(t){t.forEach((function(e){m(Number.isInteger(e)&&e>=0,(function(){return"Tensor must have a shape comprised of positive integers but got shape ["+t+"]."}))}))}function $(t,e){return void 0===e&&(e="utf-8"),e=e||"utf-8",u().platform.encode(t,e)}function Z(t,e){return void 0===e&&(e="utf-8"),e=e||"utf-8",u().platform.decode(t,e)}function tt(t,e,n){if(0===e)return 0;if(1===e)return t[0];for(var r=t[t.length-1],o=0;o<t.length-1;++o)r+=n[o]*t[o];return r}function et(t,e,n){if(0===e)return[];if(1===e)return[t];for(var r=new Array(e),o=0;o<r.length-1;++o)r[o]=Math.floor(t/n[o]),t-=r[o]*n[o];return r[r.length-1]=t,r}function nt(t,e,n){return S(Array.isArray(t)?parseFloat(t[0].toFixed(7))+" + "+parseFloat(t[1].toFixed(7))+"j":B(t)?"'"+t+"'":"bool"===n?rt(t):parseFloat(t.toFixed(7)).toString(),e)}function rt(t){return 0===t?"false":"true"}function ot(t){for(var e=[],n=0;n<t.length;n+=2)e.push([t[n],t[n+1]]);return e}function it(t,e){if("string"===t||"string"===e){if("string"===t&&"string"===e)return"string";throw new Error("Can not upcast "+t+" with "+e)}return _o[t][e]}function at(t){return it(t,"int32")}function st(t,e){if(t.dtype===e.dtype)return[t,e];var n=it(t.dtype,e.dtype);return[t.cast(n),e.cast(n)]}function ut(t,e){m(t.dtype===e.dtype,(function(){return"The dtypes of the first("+t.dtype+") and second("+e.dtype+") input must match"}))}function ct(t){var e=[];return function t(e,n,r){if(null!=e)if(e instanceof ho)n.push(e);else if(o=e,Array.isArray(o)||"object"==typeof o){var o,i=e;for(var a in i){var s=i[a];r.has(s)||(r.add(s),t(s,n,r))}}}(t,e,new Set),e}function lt(){return"undefined"!=typeof window&&null!=window.document||"undefined"!=typeof WorkerGlobalScope}function ft(t,e){ko[t]=e}function ht(t){t in ko||(ko[t]=function(t){if(1!==t&&2!==t)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var e=function(t){if("undefined"!=typeof OffscreenCanvas&&2===t)return new OffscreenCanvas(300,150);if("undefined"!=typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}(t);return e.addEventListener("webglcontextlost",(function(e){e.preventDefault(),delete ko[t]}),!1),1===t?e.getContext("webgl",To)||e.getContext("experimental-webgl",To):e.getContext("webgl2",To)}(t));var e=ko[t];return e.isContextLost()?(delete ko[t],ht(t)):(e.disable(e.DEPTH_TEST),e.disable(e.STENCIL_TEST),e.disable(e.BLEND),e.disable(e.DITHER),e.disable(e.POLYGON_OFFSET_FILL),e.disable(e.SAMPLE_COVERAGE),e.enable(e.SCISSOR_TEST),e.enable(e.CULL_FACE),e.cullFace(e.BACK),ko[t])}function dt(t,e){return[e,t]}function pt(t){var e=w(t);return C(Math.ceil(e/4))}function vt(t,e){return[Math.max(1,Math.ceil(e/2)),Math.max(1,Math.ceil(t/2))]}function gt(t,e){var n,r,o,i,a,s,c,l,f,h=t;return 2===u().getNumber("WEBGL_VERSION")?(n=h.R32F,r=h.R16F,o=h.RGBA16F,i=h.RGBA32F,a=h.RED,s=4,c=1,l=h.HALF_FLOAT,f=h.FLOAT):(n=t.RGBA,r=t.RGBA,o=t.RGBA,i=h.RGBA,a=t.RGBA,s=4,c=4,l=null!=e?e.HALF_FLOAT_OES:null,f=t.FLOAT),{internalFormatFloat:n,internalFormatHalfFloat:r,internalFormatPackedHalfFloat:o,internalFormatPackedFloat:i,textureFormatFloat:a,downloadTextureFormat:t.RGBA,downloadUnpackNumChannels:s,defaultNumChannels:c,textureTypeHalfFloat:l,textureTypeFloat:f}}function mt(t,e,n){var r=n();return e&&function(t){var e=t.getError();if(e!==t.NO_ERROR)throw new Error("WebGL Error: "+bt(t,e))}(t),r}function yt(t){return!!(u().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||0===t||5.96e-8<Math.abs(t)&&Math.abs(t)<65504)}function bt(t,e){switch(e){case t.NO_ERROR:return"NO_ERROR";case t.INVALID_ENUM:return"INVALID_ENUM";case t.INVALID_VALUE:return"INVALID_VALUE";case t.INVALID_OPERATION:return"INVALID_OPERATION";case t.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case t.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case t.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code "+e}}function xt(t,e,n){return Wt(t,e,(function(){return t.getExtension(n)}),'Extension "'+n+'" not supported on this browser.')}function wt(t,e,n){var r=Wt(t,e,(function(){return t.createShader(t.VERTEX_SHADER)}),"Unable to create vertex WebGLShader.");if(mt(t,e,(function(){return t.shaderSource(r,n)})),mt(t,e,(function(){return t.compileShader(r)})),!1===t.getShaderParameter(r,t.COMPILE_STATUS))throw console.log(t.getShaderInfoLog(r)),new Error("Failed to compile vertex shader.");return r}function _t(t,e,n){var r=Wt(t,e,(function(){return t.createShader(t.FRAGMENT_SHADER)}),"Unable to create fragment WebGLShader.");if(mt(t,e,(function(){return t.shaderSource(r,n)})),mt(t,e,(function(){return t.compileShader(r)})),!1===t.getShaderParameter(r,t.COMPILE_STATUS))throw function(t,e){var n=Po.exec(e);if(null==n)return console.log("Couldn't parse line number in error: "+e),void console.log(t);for(var r=+n[1],o=t.split("\n"),i=o.length.toString().length+2,a=o.map((function(t,e){return S((e+1).toString(),i)+t})),s=0,u=0;u<a.length;u++)s=Math.max(a[u].length,s);var c=a.slice(0,r-1),l=a.slice(r-1,r),f=a.slice(r);console.log(c.join("\n")),console.log(e.split("\n")[0]),console.log("%c "+S(l[0],s),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(f.join("\n"))}(n,t.getShaderInfoLog(r)),new Error("Failed to compile fragment shader.");return r}function Et(t,e){return Wt(t,e,(function(){return t.createProgram()}),"Unable to create WebGLProgram.")}function Rt(t,e,n){if(mt(t,e,(function(){return t.linkProgram(n)})),!1===t.getProgramParameter(n,t.LINK_STATUS))throw console.log(t.getProgramInfoLog(n)),new Error("Failed to link vertex and fragment shaders.")}function Ct(t,e,n){if(mt(t,e,(function(){return t.validateProgram(n)})),!1===t.getProgramParameter(n,t.VALIDATE_STATUS))throw console.log(t.getProgramInfoLog(n)),new Error("Shader program validation failed.")}function St(t,e,n){var r=Wt(t,e,(function(){return t.createBuffer()}),"Unable to create WebGLBuffer");return mt(t,e,(function(){return t.bindBuffer(t.ARRAY_BUFFER,r)})),mt(t,e,(function(){return t.bufferData(t.ARRAY_BUFFER,n,t.STATIC_DRAW)})),r}function Ot(t,e,n){var r=Wt(t,e,(function(){return t.createBuffer()}),"Unable to create WebGLBuffer");return mt(t,e,(function(){return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,r)})),mt(t,e,(function(){return t.bufferData(t.ELEMENT_ARRAY_BUFFER,n,t.STATIC_DRAW)})),r}function At(t,e){return Wt(t,e,(function(){return t.createTexture()}),"Unable to create WebGLTexture.")}function It(t,e){var n=u().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t<=0||e<=0){var r="["+t+"x"+e+"]";throw new Error("Requested texture size "+r+" is invalid.")}if(t>n||e>n)throw r="["+t+"x"+e+"]",new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU ["+n+"x"+n+"].")}function kt(t,e){return Wt(t,e,(function(){return t.createFramebuffer()}),"Unable to create WebGLFramebuffer.")}function Tt(t,e,n,r,o,i,a,s){var u=t.getAttribLocation(n,r);return-1!==u&&(mt(t,e,(function(){return t.bindBuffer(t.ARRAY_BUFFER,o)})),mt(t,e,(function(){return t.vertexAttribPointer(u,i,t.FLOAT,!1,a,s)})),mt(t,e,(function(){return t.enableVertexAttribArray(u)})),!0)}function Mt(t,e,n,r){Ut(t,r),mt(t,e,(function(){return t.activeTexture(t.TEXTURE0+r)})),mt(t,e,(function(){return t.bindTexture(t.TEXTURE_2D,n)}))}function Dt(t,e,n,r){return Wt(t,e,(function(){return t.getUniformLocation(n,r)}),'uniform "'+r+'" not present in program.')}function Pt(t,e,n){return t.getUniformLocation(e,n)}function Nt(t,e,n,r,o,i){mt(t,e,(function(){return Mt(t,e,r,i)})),mt(t,e,(function(){return t.uniform1i(o,i)}))}function Ft(t,e,n,r){mt(t,e,(function(){return t.bindFramebuffer(t.FRAMEBUFFER,r)})),mt(t,e,(function(){return t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0)}))}function Lt(t,e,n){mt(t,e,(function(){return t.bindFramebuffer(t.FRAMEBUFFER,n)})),mt(t,e,(function(){return t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0)}))}function jt(t){var e=t.checkFramebufferStatus(t.FRAMEBUFFER);if(e!==t.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+Bt(t,e))}function Bt(t,e){switch(e){case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case t.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error "+e}}function Wt(t,e,n,r){var o=mt(t,e,(function(){return n()}));if(null==o)throw new Error(r);return o}function Ut(t,e){var n=t.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=e+t.TEXTURE0;if(r<t.TEXTURE0||r>n)throw new Error("textureUnit must be in [gl.TEXTURE0, gl.TEXTURE"+n+"].")}function Gt(t,e){return void 0===e&&(e=2),w(t.slice(0,t.length-e))}function zt(t){if(0===t.length)throw Error("Cannot get rows and columns of an empty shape array.");return[t.length>1?t[t.length-2]:1,t[t.length-1]]}function Vt(t){var e=[1,1,1];return 0===t.length||1===t.length&&1===t[0]||(e=[Gt(t)].concat(zt(t))),e}function Ht(t,e){var n;void 0===e&&(e=!1);var r=u().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e&&(r*=2,1===(t=t.map((function(e,n){return n>=t.length-2?v(t[n]):t[n]}))).length&&(t=[2,t[0]])),2!==t.length){var o=k(t);t=o.newShape}var i=w(t);if(t.length<=1&&i<=r)return[1,i];if(2===t.length&&t[0]<=r&&t[1]<=r)return t;if(3===t.length&&t[0]*t[1]<=r&&t[2]<=r)return[t[0]*t[1],t[2]];if(3===t.length&&t[0]<=r&&t[1]*t[2]<=r)return[t[0],t[1]*t[2]];if(4===t.length&&t[0]*t[1]*t[2]<=r&&t[3]<=r)return[t[0]*t[1]*t[2],t[3]];if(4===t.length&&t[0]<=r&&t[1]*t[2]*t[3]<=r)return[t[0],t[1]*t[2]*t[3]];if(e){var a=Gt(t),s=2,c=2;return t.length&&(s=(n=zt(t))[0],c=n[1]),C(i=a*(s/2)*(c/2)).map((function(t){return 2*t}))}return C(i)}function qt(t){return t%2==0}function Kt(t,e){if(_(t=t.slice(-2),e=e.slice(-2)))return!0;if(!t.length||!e.length)return!0;if(0===t[0]||0===t[1]||0===e[0]||0===e[1])return!0;if(t.length!==e.length){var n=t.slice(-1)[0],r=e.slice(-1)[0];if(n===r)return!0;if(qt(n)&&qt(r)&&(1===t[0]||1===e[0]))return!0}return t[1]===e[1]&&qt(t[0])&&qt(e[0])}function Xt(t){if(null==Mo){var e=ht(t);Mo=e.getParameter(e.MAX_TEXTURE_SIZE)}return Mo}function Jt(t){if(null==Do){var e=ht(t);Do=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,Do)}function Yt(t){if(0===t)return 0;var e=ht(t);return Qt(e,"EXT_disjoint_timer_query_webgl2")&&2===t?2:Qt(e,"EXT_disjoint_timer_query")?1:0}function Qt(t,e){return null!=t.getExtension(e)}function $t(t){try{if(null!=ht(t))return!0}catch(t){return!1}return!1}function Zt(t){if(0===t)return!1;var e=ht(t);if(1===t){if(!Qt(e,"OES_texture_float"))return!1}else if(!Qt(e,"EXT_color_buffer_float"))return!1;return ee(e)}function te(t){if(0===t)return!1;var e=ht(t);if(1!==t){if(Qt(e,"EXT_color_buffer_float"))return ee(e);if(Qt(e,"EXT_color_buffer_half_float")){var n=e.getExtension("EXT_color_buffer_half_float");return function(t,e){var n=gt(t,e),r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r),t.texImage2D(t.TEXTURE_2D,0,n.internalFormatHalfFloat,1,1,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);var o=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,o),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0);var i=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(r),t.deleteFramebuffer(o),i}(e,n)}return!1}return!!Qt(e,"OES_texture_float")&&!!Qt(e,"WEBGL_color_buffer_float")&&ee(e)}function ee(t){var e=gt(t),n=t.createTexture();t.bindTexture(t.TEXTURE_2D,n),t.texImage2D(t.TEXTURE_2D,0,e.internalFormatFloat,1,1,0,e.textureFormatFloat,e.textureTypeFloat,null);var r=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,r),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0);var o=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(n),t.deleteFramebuffer(r),o}function ne(t){return 2===t&&null!=ht(t).fenceSync}function re(t){u().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(t+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function oe(t,e){return Co.tidy(t,e)}function ie(t){ct(t).forEach((function(t){return t.dispose()}))}function ae(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];u().getBool("IS_TEST")||console.warn.apply(console,t)}function se(t,e){var n=t;if(F(t))return"string"===e?[]:[t.length];if(!Array.isArray(t))return[];for(var r=[];Array.isArray(n)||F(n)&&"string"!==e;)r.push(n.length),n=n[0];return Array.isArray(t)&&u().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&function t(e,n,r){if(r=r||[],Array.isArray(e)||F(e)){m(n.length>0,(function(){return"Element arr["+r.join("][")+"] should be a primitive, but is an array of "+e.length+" elements"})),m(e.length===n[0],(function(){return"Element arr["+r.join("][")+"] should have "+n[0]+" elements, but has "+e.length+" elements"}));for(var o=n.slice(1),i=0;i<e.length;++i)t(e[i],o,r.concat(i))}else m(0===n.length,(function(){return"Element arr["+r.join("][")+"] is a primitive, but should be an array/TypedArray of "+n[0]+" elements"}))}(t,r,[]),r}function ue(t,e,n,r){if(null!=t&&("numeric"!==t&&t!==e||"numeric"===t&&"string"===e))throw new Error("Argument '"+n+"' passed to '"+r+"' must be "+t+" tensor, but got "+e+" tensor")}function ce(t,e,n,r){if(void 0===r&&(r="numeric"),t instanceof ho)return ue(r,t.dtype,e,n),t;var o=G(t);if("string"!==o&&["bool","int32","float32"].indexOf(r)>=0&&(o=r),ue(r,o,e,n),null==t||!F(t)&&!Array.isArray(t)&&"number"!=typeof t&&"boolean"!=typeof t&&"string"!=typeof t)throw new Error("Argument '"+e+"' passed to '"+n+"' must be a Tensor or TensorLike, but got '"+(null==t?"null":t.constructor.name)+"'");var i=se(t,o);F(t)||Array.isArray(t)||(t=[t]);var a="string"!==o?q(t,o,u().getBool("DEBUG")):x(t,[],!0);return Co.makeTensor(a,i,o)}function le(t,e,n,r){if(void 0===r&&(r="numeric"),!Array.isArray(t))throw new Error("Argument "+e+" passed to "+n+" must be a `Tensor[]` or `TensorLike[]`");return t.map((function(t,r){return ce(t,e+"["+r+"]",n)}),r)}function fe(t,e){for(var n=0;n<t.length;++n)if(t[t.length-n-1]!==e-1-n)return!1;return!0}function he(t,e,n){for(var r=t.length+e.length,o=[],i=0,a=0,s=0;s<r;s++)-1===n.indexOf(s)?o.push(t[i++]):o.push(e[a++]);return o}function de(t,e){for(var n=[],r=t.length,o=0;o<r;o++)-1===e.indexOf(o)&&n.push(t[o]);return[n,e.map((function(e){return t[e]}))]}function pe(t,e){return he(t,e.map((function(){return 1})),e)}function ve(t,e,n){m(fe(e,n),(function(){return t+" supports only inner-most axes for now. Got axes "+e+" and rank-"+n+" input."}))}function ge(t,e){if(fe(t,e))return null;for(var n=[],r=0;r<e;++r)-1===t.indexOf(r)&&n.push(r);return t.forEach((function(t){return n.push(t)})),n}function me(t){return t.map((function(t,e){return[e,t]})).sort((function(t,e){return t[1]-e[1]})).map((function(t){return t[0]}))}function ye(t,e){for(var n=[],r=e-t;r<e;++r)n.push(r);return n}function be(t,e){var n=t[0].length;t.forEach((function(t,e){m(t.length===n,(function(){return"Error in concat"+n+"D: rank of tensors["+e+"] must be the same as the rank of the rest ("+n+")"}))})),m(e>=0&&e<n,(function(){return"Error in concat"+n+"D: axis must be between 0 and "+(n-1)+"."}));var r=t[0];t.forEach((function(t,o){for(var i=0;i<n;i++)m(i===e||t[i]===r[i],(function(){return"Error in concat"+n+"D: Shape of tensors["+o+"] ("+t+") does not match the shape of the rest ("+r+") along the non-concatenated axis "+o+"."}))}))}function xe(t,e){for(var n=t[0].slice(),r=1;r<t.length;r++)n[e]+=t[r][e];return n}function we(t){var e=Object.keys(t);if(1!==e.length)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+e.length+" keys.");var n=e[0],r=t[n];n.endsWith("_")&&(n=n.substring(0,n.length-1));var o=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];Co.startScope(n);try{var o=r.apply(void 0,t);return o instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),Co.endScope(o),o}catch(t){throw Co.endScope(null),t}};return Object.defineProperty(o,"name",{value:n,configurable:!0}),o}function _e(t,e,n){return Ee(t,e,se(t,n),n)}function Ee(t,e,n,r){if(null==r&&(r=G(t)),"complex64"===r)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!F(t)&&!Array.isArray(t)&&"number"!=typeof t&&"boolean"!=typeof t&&"string"!=typeof t)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=e){Q(e);var o=w(e),i=w(n);m(o===i,(function(){return"Based on the provided shape, ["+e+"], the tensor should have "+o+" values but has "+i}));for(var a=0;a<n.length;++a){var s=a!==n.length-1||n[a]!==w(e.slice(a));m(n[a]===e[a]||!s,(function(){return"Error creating a new Tensor. Inferred shape ("+n+") does not match the provided shape ("+e+"). "}))}}return F(t)||Array.isArray(t)||(t=[t]),e=e||n,t="string"!==r?q(t,r,u().getBool("DEBUG")):x(t,[],!0),Co.makeTensor(t,e,r)}function Re(t,e){if((F(t)&&"string"!==e||Array.isArray(t))&&"complex64"!==e)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"===e&&F(t)&&!(t instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return Ee(t,[],[],e)}function Ce(t,e){b(t);var n=se(t,e);if(1!==n.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");return Ee(t,null,n,e)}function Se(t,e,n){if(b(t),null!=e&&2!==e.length)throw new Error("tensor2d() requires shape to have two numbers");var r=se(t,n);if(2!==r.length&&1!==r.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===r.length&&null==e)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return Ee(t,e,r,n)}function Oe(t,e,n){if(b(t),null!=e&&3!==e.length)throw new Error("tensor3d() requires shape to have three numbers");var r=se(t,n);if(3!==r.length&&1!==r.length)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(1===r.length&&null==e)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return Ee(t,e,r,n)}function Ae(t,e,n){if(b(t),null!=e&&4!==e.length)throw new Error("tensor4d() requires shape to have four numbers");var r=se(t,n);if(4!==r.length&&1!==r.length)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(1===r.length&&null==e)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return Ee(t,e,r,n)}function Ie(t,e){if(void 0===e&&(e="float32"),"complex64"===e){var n=Ie(t,"float32"),r=ke(t,"float32");return Fo(n,r)}var o=X(w(t),e);return Co.makeTensor(o,t,e)}function ke(t,e){if(void 0===e&&(e="float32"),"complex64"===e){var n=ke(t,"float32"),r=ke(t,"float32");return Fo(n,r)}var o=J(w(t),e);return Co.makeTensor(o,t,e)}function Te(t,e,n){return Co.runKernelFunc((function(r){return r.fill(t,e,n)}),{})}function Me(t,e,n,r){if(void 0===n&&(n=1),void 0===r&&(r="float32"),0===n)throw new Error("Cannot have a step of zero");if(t===e||t<e&&n<0||e<t&&n>1)return ke([0],r);var o=J(Math.abs(Math.ceil((e-t)/n)),r);e<t&&1===n&&(n=-1),o[0]=t;for(var i=1;i<o.length;i++)o[i]=o[i-1]+n;return Ce(o,r)}function De(t,e){return t(e={exports:{}},e.exports),e.exports}function Pe(t,e,n){return void 0===e&&(e="float32"),e=e||"float32",Q(t),new uo(t,e,n)}function Ne(t,e,n,r){void 0===r&&(r=!0);var o=[];if(r)(o=o.concat(e.slice(0))).push(t[0]/n),o=o.concat(t.slice(1));else{o=o.concat(t[0]);for(var i=e.length,a=0;a<i;++a)o=o.concat([t[a+1]/e[a],e[a]]);o=o.concat(t.slice(i+1))}return o}function Fe(t,e,n){void 0===n&&(n=!0);var r=[];if(n){r.push(e);for(var o=e+1;o<t;++o)o<=2*e?(r.push(o),r.push(o-(e+1))):r.push(o)}else{var i=[],a=[];for(o=1;o<t;++o)o>=2*e+1||o%2==1?a.push(o):i.push(o);r.push.apply(r,i),r.push(0),r.push.apply(r,a)}return r}function Le(t,e,n,r){void 0===r&&(r=!0);var o=[];o.push(r?t[0]/n:t[0]*n);for(var i=1;i<t.length;++i)o.push(i<=e.length?r?e[i-1]*t[i]:t[i]/e[i-1]:t[i]);return o}function je(t,e){for(var n=[0],r=0;r<e;++r)n.push(t[r][0]);return n}function Be(t,e,n){for(var r=t.slice(0,1),o=0;o<n;++o)r.push(t[o+1]-e[o][0]-e[o][1]);return r}function We(t,e){if(t.rank<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher, but the rank was "+t.rank+".");if(e.rank<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher, but the rank was "+e.rank+".");if("int32"!==e.dtype)throw new Error("tf.gatherND() expects the indices to be int32 type, but the dtype was "+e.dtype+".");if(e.shape[e.rank-1]>t.rank)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+e.shape[e.rank-1]+" vs. "+t.rank);if(0===t.size)throw new Error("Requested more than 0 entries, but input is empty. Input shape: "+t.shape+".");for(var n=e.shape,r=n[n.length-1],o=1,i=0;i<n.length-1;++i)o*=n[i];var a=t.shape,s=n.slice();s.pop();var u=1;for(i=r;i<t.rank;++i)u*=a[i],s.push(a[i]);var c=H(t.shape).map((function(t){return t/u})).concat([1]).slice(0,r);return[s,o,u,c]}function Ue(t){return t<=30?t:V(t,Math.floor(Math.sqrt(t)))}function Ge(t,e,n){var r=e.rank>1?e.shape[e.rank-1]:1,o=e.rank>1?e.rank-1:1,i="Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: "+n.shape+", indices.shape: "+e.shape+", shape: "+t+", sliceDim: "+r+", and batchDim: "+o+".";if(n.rank<o)throw new Error(i+" update.rank < "+o+". ");if(t.length<r+(n.rank-o))throw new Error(i+" Output shape length < "+(r+(n.rank-o)));if(n.rank!==o+t.length-r)throw new Error(i+" update.rank != "+(o+t.length-r));for(var a=0;a<o;++a)if(n.shape[a]!==e.shape[a])throw new Error(i+" updates.shape["+a+"] ("+n.shape[a]+") != indices.shape["+a+"] ("+e.shape[a]+").");for(a=0;a<n.rank-o;++a)if(n.shape[a+o]!==t[a+r])throw new Error(i+" updates.shape["+(a+o)+"] ("+n.shape[a+o]+") != shape["+(a+o)+"] ("+t[a+o]+")")}function ze(t,e,n){if(e.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher, but the rank was "+e.rank+".");if(t.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher, but the rank was "+t.rank+".");if("int32"!==e.dtype)throw new Error("The dtype of 'indices' should be int32, but got dtype: "+e.dtype);if(n.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: "+n);if(0===n.length){if(0===e.size)throw new Error("Indices specified for empty output. indices shape: "+e.shape);if(0===t.size)throw new Error("Updates specified for empty output. updates shape: "+t.shape)}Ge(n,e,t)}function Ve(t,e,n){for(var r=e.shape.length,o=r>1?e.shape[r-1]:1,i=n.length,a=1,s=o;s<i;++s)a*=n[s];var u=o<1?1:o;return{sliceRank:o,numUpdates:w(e.shape)/u,sliceSize:a,strides:H(n.slice(0,o)).concat([1]),outputSize:w(n)}}function He(t,e,n){m(t.rank===e.length,(function(){return"Error in slice"+t.rank+"D: Length of begin "+e+" must match the rank of the array ("+t.rank+")."})),m(t.rank===n.length,(function(){return"Error in slice"+t.rank+"D: Length of size "+n+" must match the rank of the array ("+t.rank+")."}));for(var r=function(r){m(e[r]+n[r]<=t.shape[r],(function(){return"Error in slice"+t.rank+"D: begin["+r+"] + size["+r+"] ("+(e[r]+n[r])+") would overflow input.shape["+r+"] ("+t.shape[r]+")"}))},o=0;o<t.rank;++o)r(o)}function qe(t){for(var e=[],n=0;t>0;)1&t&&e.push(n),t/=2,n++;return e}function Ke(t,e,n){for(var r=[],o=0;o<t.length;o++)r[o]=Math.ceil((e[o]-t[o])/n[o]);return r}function Xe(t,e,n,r,o){var i=e[o];(t&1<<o||null==i)&&(i=(n[o]||1)>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);var a=r[o];return i<0&&(i+=a),p(0,i,a-1)}function Je(t,e,n,r,o){var i=e[o],a=n[o]||1;(t&1<<o||null==i)&&(i=a>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);var s=r[o];return i<0&&(i+=s),a>0?p(0,i,s):p(-1,i,s-1)}function Ye(t,e,n){for(var r=n.length,o=0;o<n.length;o++)if(n[o]>1){r=o;break}for(o=r+1;o<n.length;o++)if(e[o]>0||n[o]!==t[o])return!1;return!0}function Qe(t,e){for(var n=t.length>0?t[t.length-1]:1,r=0;r<t.length-1;r++)n+=t[r]*e[r];return n}function $e(t){return Co.customGrad(t)}function Ze(t){throw new Error("'"+t+"' not yet implemented or not found in the registry. Did you forget to import the kernel?")}function tn(t,e){for(var n=t.length,r=[],o=0;o<n;o++){var i=n-1-o;(e[e.length-1-o]||1)>1&&1===(t[i]||1)&&r.unshift(i)}return r}function en(t,e){for(var n=[],r=0;r<e.length;r++){var o=t[t.length-r-1],i=e.length-r-1;(null==o||1===o&&e[i]>1)&&n.unshift(i)}return n}function nn(t,e){for(var n=[],r=Math.max(t.length,e.length),o=0;o<r;o++){var i=t[t.length-o-1];null==i&&(i=1);var a=e[e.length-o-1];if(null==a&&(a=1),1===i)n.unshift(a);else if(1===a)n.unshift(i);else{if(i!==a)throw Error("Operands could not be broadcast together with shapes "+t+" and "+e+".");n.unshift(i)}}return n}function rn(t,e,n,r,o,i,a){void 0===a&&(a="channelsLast");var s,u=cn(e),c=u[0],l=u[1];if("channelsLast"===a)s=[c,l,t[3],t[3]];else{if("channelsFirst"!==a)throw new Error("Unknown dataFormat "+a);s=[c,l,t[1],t[1]]}return an(t,s,n,r,o,i,!1,a)}function on(t,e,n,r,o,i,a){void 0===a&&(a="NDHWC");var s,u,c=ln(e),l=c[0],f=c[1],h=c[2];if("NDHWC"===a)u="channelsLast",s=[l,f,h,t[4],t[4]];else{if("NCDHW"!==a)throw new Error("Unknown dataFormat "+a);u="channelsFirst",s=[l,f,h,t[1],t[1]]}return sn(t,s,n,r,o,!1,u,i)}function an(t,e,n,r,o,i,a,s){void 0===a&&(a=!1),void 0===s&&(s="channelsLast");var u=[-1,-1,-1,-1],c=u[0],l=u[1],f=u[2],h=u[3];if("channelsLast"===s)c=t[0],l=t[1],f=t[2],h=t[3];else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat "+s);c=t[0],h=t[1],l=t[2],f=t[3]}var d,p=e[0],v=e[1],g=e[3],y=cn(n),b=y[0],x=y[1],w=cn(r),_=w[0],R=w[1],C=fn(p,_),S=fn(v,R),O=function(t,e,n,r,o,i,a,s){var u,c,l;if("number"==typeof t){u={top:t,bottom:t,left:t,right:t,type:0===t?"VALID":"NUMBER"};var f=function(t,e,n,r,o){null==r&&(r=un(t,e,n));var i=t[1],a=hn((t[0]-e+2*r)/n+1,o);m(E(a),(function(){return"The output # of rows ("+a+") must be an integer. Change the stride and/or zero pad parameters"}));var s=hn((i-e+2*r)/n+1,o);return m(E(s),(function(){return"The output # of columns ("+s+") must be an integer. Change the stride and/or zero pad parameters"})),[a,s]}([e,n],i,r,t,s);c=f[0],l=f[1]}else if("same"===t){c=Math.ceil(e/r),l=Math.ceil(n/o);var h=Math.max(0,(c-1)*r+i-e),d=Math.max(0,(l-1)*o+a-n),p=Math.floor(h/2),v=h-p,g=Math.floor(d/2);u={top:p,bottom:v,left:g,right:d-g,type:"SAME"}}else{if("valid"!==t)throw Error("Unknown padding parameter: "+t);u={top:0,bottom:0,left:0,right:0,type:"VALID"},c=Math.ceil((e-i+1)/r),l=Math.ceil((n-a+1)/o)}return{padInfo:u,outHeight:c,outWidth:l}}(o,l,f,b,x,C,S,i),A=O.outHeight,I=O.outWidth,k=a?g*h:g;return"channelsFirst"===s?d=[c,k,A,I]:"channelsLast"===s&&(d=[c,A,I,k]),{batchSize:c,dataFormat:s,inHeight:l,inWidth:f,inChannels:h,outHeight:A,outWidth:I,outChannels:k,padInfo:O.padInfo,strideHeight:b,strideWidth:x,filterHeight:p,filterWidth:v,effectiveFilterHeight:C,effectiveFilterWidth:S,dilationHeight:_,dilationWidth:R,inShape:t,outShape:d,filterShape:e}}function sn(t,e,n,r,o,i,a,s){void 0===i&&(i=!1),void 0===a&&(a="channelsLast");var u=[-1,-1,-1,-1,-1],c=u[0],l=u[1],f=u[2],h=u[3],d=u[4];if("channelsLast"===a)c=t[0],l=t[1],f=t[2],h=t[3],d=t[4];else{if("channelsFirst"!==a)throw new Error("Unknown dataFormat "+a);c=t[0],d=t[1],l=t[2],f=t[3],h=t[4]}var p,v=e[0],g=e[1],y=e[2],b=e[4],x=ln(n),w=x[0],_=x[1],R=x[2],C=ln(r),S=C[0],O=C[1],A=C[2],I=fn(v,S),k=fn(g,O),T=fn(y,A),M=function(t,e,n,r,o,i,a,s,u,c,l){var f,h,d,p;if("number"==typeof t){f={top:t,bottom:t,left:t,right:t,front:t,back:t,type:0===t?"VALID":"NUMBER"};var v=function(t,e,n,r,o,i){null==o&&(o=un(t,e,r));var a=t[1],s=t[2],u=hn((t[0]-e+2*o)/r+1,i);m(E(u),(function(){return"The output # of depths ("+u+") must be an integer. Change the stride and/or zero pad parameters"}));var c=hn((a-e+2*o)/r+1,i);m(E(c),(function(){return"The output # of rows ("+c+") must be an integer. Change the stride and/or zero pad parameters"}));var l=hn((s-e+2*o)/r+1,i);return m(E(l),(function(){return"The output # of columns ("+l+") must be an integer. Change the stride and/or zero pad parameters"})),[u,c,l,1]}([e,n,r,1],s,0,o,t,l);h=v[0],d=v[1],p=v[2]}else if("same"===t){var g=((h=Math.ceil(e/o))-1)*o+s-e,y=((d=Math.ceil(n/i))-1)*i+u-n,b=((p=Math.ceil(r/a))-1)*a+c-r,x=Math.floor(g/2),w=g-x,_=Math.floor(y/2),R=y-_,C=Math.floor(b/2);f={top:_,bottom:R,left:C,right:b-C,front:x,back:w,type:"SAME"}}else{if("valid"!==t)throw Error("Unknown padding parameter: "+t);f={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},h=Math.ceil((e-s+1)/o),d=Math.ceil((n-u+1)/i),p=Math.ceil((r-c+1)/a)}return{padInfo:f,outDepth:h,outHeight:d,outWidth:p}}(o,l,f,h,w,_,R,I,k,T,s),D=M.outDepth,P=M.outHeight,N=M.outWidth,F=i?b*d:b;return"channelsFirst"===a?p=[c,F,D,P,N]:"channelsLast"===a&&(p=[c,D,P,N,F]),{batchSize:c,dataFormat:a,inDepth:l,inHeight:f,inWidth:h,inChannels:d,outDepth:D,outHeight:P,outWidth:N,outChannels:F,padInfo:M.padInfo,strideDepth:w,strideHeight:_,strideWidth:R,filterDepth:v,filterHeight:g,filterWidth:y,effectiveFilterDepth:I,effectiveFilterHeight:k,effectiveFilterWidth:T,dilationDepth:S,dilationHeight:O,dilationWidth:A,inShape:t,outShape:p,filterShape:e}}function un(t,e,n,r){void 0===r&&(r=1);var o=fn(e,r);return Math.floor((t[0]*(n-1)-n+o)/2)}function cn(t){return"number"==typeof t?[t,t,t]:2===t.length?[t[0],t[1],1]:t}function ln(t){return"number"==typeof t?[t,t,t]:t}function fn(t,e){return e<=1?t:t+(t-1)*(e-1)}function hn(t,e){if(!e)return t;switch(e){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error("Unknown roundingMode "+e)}}function dn(t){var e=cn(t);return 1===e[0]&&1===e[1]&&1===e[2]}function pn(t,e){return dn(t)||dn(e)}function vn(t){if("NHWC"===t)return"channelsLast";if("NCHW"===t)return"channelsFirst";throw new Error("Unknown dataFormat "+t)}function gn(t,e,n){if("complex64"===e){if("complex64"===t.dtype)return t.clone();var r=ke(t.shape),o=t.toFloat(),i=n.complex(o,r);return r.dispose(),o.dispose(),i}if(!N(t.dtype,e))return Co.makeTensorFromDataId(t.dataId,t.shape,e);if("complex64"===t.dtype){var a=n.real(t);return i=a.cast(e),a.dispose(),i}if("int32"===e)return n.int(t);if("bool"===e){var s=Re(0,t.dtype);return i=n.notEqual(t,s),s.dispose(),i}throw new Error("Error in Cast: failed to cast "+t.dtype+" to "+e)}function mn(t,e){return Co.makeTensorFromDataId(t.dataId,e,t.dtype)}function yn(t,e,n){var r=(e-t)/(n-1),o=J(n,"float32");o[0]=t;for(var i=1;i<o.length;i++)o[i]=o[i-1]+r;return Ce(o,"float32")}function bn(t,e){if(t.length!==e.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+t.length+", imag: "+e.length+".");for(var n=new Float32Array(2*t.length),r=0;r<n.length;r+=2)n[r]=t[r/2],n[r+1]=e[r/2];return n}function xn(t,e){return{real:t[2*e],imag:t[2*e+1]}}function wn(t,e,n,r){t[2*r]=e,t[2*r+1]=n}function _n(t,e,n){var r=(n?2:-2)*Math.PI*(t/e);return{real:Math.cos(r),imag:Math.sin(r)}}function En(t,e,n){var r=function(t,e,n){return function(t,e,n){for(var r=0,o=t.length,i=0,a=!1;r<o;){var s=n(e,t[i=r+(o-r>>>1)]);s>0?r=i+1:(o=i,a=!s)}return a?r:-r-1}(t,e,n||Rn)}(t,e,n);t.splice(r<0?-(r+1):r,0,e)}function Rn(t,e){return t>e?1:t<e?-1:0}function Cn(t,e,n,r,o){return On(t,e,n,r,o,0).selectedIndices}function Sn(t,e,n,r,o,i){var a=On(t,e,n,r,o,i,!0);return a.numValidOutputs.dispose(),{selectedIndices:a.selectedIndices,selectedScores:a.selectedScores}}function On(t,e,n,r,o,i,a,s){void 0===a&&(a=!1),void 0===s&&(s=!1);for(var u=Array.from(e).map((function(t,e){return{score:t,boxIndex:e,suppressBeginIndex:0}})).filter((function(t){return t.score>o})).sort(kn),c=i>0?-.5/i:0,l=[],f=[];l.length<n&&u.length>0;){var h=u.pop(),d=h.score,p=h.boxIndex,v=h.suppressBeginIndex;if(d<o)break;for(var g=!1,m=l.length-1;m>=v;--m){var y=An(t,p,l[m]);if(y>=r){g=!0;break}if(h.score=h.score*In(r,c,y),h.score<=o)break}h.suppressBeginIndex=l.length,g||(h.score===d?(l.push(p),f.push(h.score)):h.score>o&&En(u,h,kn))}var b=l.length;return s&&(l.fill(0,b),f.fill(0,b)),{selectedIndices:Ce(l,"int32"),selectedScores:Ce(f,"float32"),numValidOutputs:Re(b,"int32")}}function An(t,e,n){var r=t.subarray(4*e,4*e+4),o=t.subarray(4*n,4*n+4),i=Math.min(r[0],r[2]),a=Math.min(r[1],r[3]),s=Math.max(r[0],r[2]),u=Math.max(r[1],r[3]),c=Math.min(o[0],o[2]),l=Math.min(o[1],o[3]),f=Math.max(o[0],o[2]),h=Math.max(o[1],o[3]),d=(s-i)*(u-a),p=(f-c)*(h-l);if(d<=0||p<=0)return 0;var v=Math.max(i,c),g=Math.max(a,l),m=Math.min(s,f),y=Math.min(u,h),b=Math.max(m-v,0)*Math.max(y-g,0);return b/(d+p-b)}function In(t,e,n){var r=Math.exp(e*n*n);return n<=t?r:0}function kn(t,e){return t.score-e.score||t.score===e.score&&e.boxIndex-t.boxIndex}function Tn(t,e,n){var r=new Array(t.rank).fill(0),o=t.shape.slice();return e.map((function(e){o[n]=e;var i=t.slice(r,o);return r[n]+=e,i}))}function Mn(t,e){for(var n=new Array(t.rank),r=0;r<n.length;r++)n[r]=t.shape[r]*e[r];var o=Pe(n,t.dtype);for(r=0;r<o.values.length;++r){for(var i=o.indexToLoc(r),a=new Array(t.rank),s=0;s<a.length;s++)a[s]=i[s]%t.shape[s];var u=t.locToIndex(a);o.values[r]=t.values[u]}return o.toTensor()}function Dn(t,e,n,r){for(var o=e[e.length-1],i=[t.length/o,o],a=i[0],s=i[1],u=T(n,a*r),c=T("int32",a*r),l=0;l<a;l++){for(var f=l*s,h=t.subarray(f,f+s),d=[],p=0;p<h.length;p++)d.push({value:h[p],index:p});d.sort((function(t,e){return e.value-t.value}));var v=l*r,g=u.subarray(v,v+r),m=c.subarray(v,v+r);for(p=0;p<r;p++)g[p]=d[p].value,m[p]=d[p].index}var y=e.slice();return y[y.length-1]=r,[_e(u,y,n),_e(c,y,"int32")]}function Pn(t,e){for(var n=[],r=0;r<e.length;r++)e[r]&&n.push(r);var o=Pe(t,"int32"),i=Pe([n.length,t.length],"int32");for(r=0;r<n.length;r++){var a=o.indexToLoc(n[r]);i.values.set(a,r*t.length)}return i.toTensor()}function Nn(t,e){return["x","y","z","w","u","v"].slice(0,e).map((function(e){return t+"."+e}))}function Fn(t,e){return 1===e?[t]:Nn(t,e)}function Ln(){var t,e,n,r,o,i,a,s,c,l;return 2===u().getNumber("WEBGL_VERSION")?(t="#version 300 es",e="in",n="out",r="in",o="texture",i="outputColor",a="out vec4 outputColor;",s="\n      bool isnan_custom(float val) {\n        return (val > 0.0 || val < 0.0) ? false : val != 0.0;\n      }\n\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan_custom(val.x),\n          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));\n      }\n\n      #define isnan(value) isnan_custom(value)\n    ",c="",l="\n      #define round(value) newRound(value)\n      int newRound(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 newRound(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "):(t="",e="attribute",n="varying",r="varying",o="texture2D",i="gl_FragColor",a="",s="\n      #define isnan(value) isnan_custom(value)\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 1. || val == 0.) ? false : true;\n      }\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));\n      }\n    ",c="\n      uniform float INFINITY;\n\n      bool isinf(float val) {\n        return abs(val) == INFINITY;\n      }\n      bvec4 isinf(vec4 val) {\n        return equal(abs(val), vec4(INFINITY));\n      }\n    ",l="\n      int round(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 round(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "),{version:t,attribute:e,varyingVs:n,varyingFs:r,texture2D:o,output:i,defineOutput:a,defineSpecialNaN:s,defineSpecialInf:c,defineRound:l}}function jn(t,e,n){void 0===n&&(n="index");var r=H(e);return r.map((function(e,o){return"int "+t[o]+" = "+n+" / "+e+"; "+(o===r.length-1?"int "+t[o+1]+" = "+n+" - "+t[o]+" * "+e:"index -= "+t[o]+" * "+e)+";"})).join("")}function Bn(t){var e=H(t).map((function(t){return t.toString()}));return"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * "+e[0]+" + coords.y * "+e[1]+" + coords.z;\n  }\n"}function Wn(t,e,n,r){var o=[];t.forEach((function(t){var e=w(t.shapeInfo.logicalShape);t.shapeInfo.isUniform?o.push("uniform float "+t.name+(e>1?"["+e+"]":"")+";"):(o.push("uniform sampler2D "+t.name+";"),o.push("uniform int offset"+t.name+";"))}));var i,a,s=o.join("\n"),u=t.map((function(t){return function(t,e,n){void 0===n&&(n=!1);var r="";return r+=n?Gn(t):Un(t),t.shapeInfo.logicalShape.length<=e.logicalShape.length&&(r+=n?function(t,e){var n,r=t.name,o=r.charAt(0).toUpperCase()+r.slice(1),i="get"+o+"AtOutCoords",a=t.shapeInfo.logicalShape.length,s=e.logicalShape.length,u=tn(t.shapeInfo.logicalShape,e.logicalShape),c=Hn(s),l=s-a,f=["x","y","z","w","u","v"];n=0===a?"":s<2&&u.length>=1?"coords = 0;":u.map((function(t){return"coords."+f[t+l]+" = 0;"})).join("\n");var h;h=s<2&&a>0?"coords":t.shapeInfo.logicalShape.map((function(t,e){return"coords."+f[e+l]})).join(", ");var d="return outputValue;",p=1===w(t.shapeInfo.logicalShape),v=1===w(e.logicalShape);if(1!==a||p||v){if(p&&!v)d=1===s?"\n        return vec4(outputValue.x, outputValue.x, 0., 0.);\n      ":"\n        return vec4(outputValue.x);\n      ";else if(u.length){var g=a-2,m=a-1;u.indexOf(g)>-1&&u.indexOf(m)>-1?d="return vec4(outputValue.x);":u.indexOf(g)>-1?d="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":u.indexOf(m)>-1&&(d="return vec4(outputValue.xx, outputValue.zz);")}}else d="\n      return vec4(outputValue.xy, outputValue.xy);\n    ";return"\n    vec4 "+i+"() {\n      "+c+" coords = getOutputCoords();\n      "+n+"\n      vec4 outputValue = get"+o+"("+h+");\n      "+d+"\n    }\n  "}(t,e):function(t,e){var n=t.name,r=n.charAt(0).toUpperCase()+n.slice(1),o="get"+r+"AtOutCoords",i=t.shapeInfo.logicalShape.length,a=e.logicalShape.length;if(!t.shapeInfo.isUniform&&i===a&&null==t.shapeInfo.flatOffset&&_(t.shapeInfo.texShape,e.texShape))return"\n      float "+o+"() {\n        return sampleTexture("+n+", resultUV);\n      }\n    ";var s,u=Hn(a),c=tn(t.shapeInfo.logicalShape,e.logicalShape),l=a-i,f=["x","y","z","w","u","v"];s=0===i?"":a<2&&c.length>=1?"coords = 0;":c.map((function(t){return"coords."+f[t+l]+" = 0;"})).join("\n");var h;return h=a<2&&i>0?"coords":t.shapeInfo.logicalShape.map((function(t,e){return"coords."+f[e+l]})).join(", "),"\n    float "+o+"() {\n      "+u+" coords = getOutputCoords();\n      "+s+"\n      return get"+r+"("+h+");\n    }\n  "}(t,e)),r}(t,e,r)})).join("\n"),c=e.texShape,l=Ln(),f=function(t){return"\n    float sampleTexture(sampler2D textureSampler, vec2 uv) {\n      return "+t.texture2D+"(textureSampler, uv).r;\n    }\n  "}(l),h=function(t){return t.version+"\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    "+t.varyingFs+" vec2 resultUV;\n    "+t.defineOutput+"\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    uniform float NAN;\n    "+t.defineSpecialNaN+"\n    "+t.defineSpecialInf+"\n    "+t.defineRound+"\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    int idiv(int a, int b, float sign) {\n      int res = a / b;\n      int mod = imod(a, b);\n      if (sign < 0. && mod != 0) {\n        res -= 1;\n      }\n      return res;\n    }\n\n    //Based on the work of Dave Hoskins\n    //https://www.shadertoy.com/view/4djSRW\n    #define HASHSCALE1 443.8975\n    float random(float seed){\n      vec2 p = resultUV * seed;\n      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n      p3 += dot(p3, p3.yzx + 19.19);\n      return fract((p3.x + p3.y) * p3.z);\n    }\n\n    "+ji+"\n    "+Bi+"\n    "+Wi+"\n  "}(l);return e.isPacked?(i=function(t,e){switch(t.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(t,e){var n=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];return 1===n[0]?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * "+n[1]+".0);\n      }\n    ":1===n[1]?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * "+n[0]+".0);\n      }\n    ":"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+n[0]+", "+n[1]+"));\n      return 2 * (resTexRC.x * "+n[1]+" + resTexRC.y);\n    }\n  "}(0,e);case 2:return function(t,e){var n=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];if(_(t,e))return"\n      ivec2 getOutputCoords() {\n        return 2 * ivec2(resultUV.yx * vec2("+n[0]+", "+n[1]+"));\n      }\n    ";var r=Math.ceil(t[1]/2);return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+n[0]+", "+n[1]+"));\n\n      int index = resTexRC.x * "+n[1]+" + resTexRC.y;\n      int r = 2 * (index / "+r+");\n      int c = imod(index, "+r+") * 2;\n\n      return ivec2(r, c);\n    }\n  "}(t,e);case 3:return n=t,r=e,o=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)],a=(i=Math.ceil(n[2]/2))*Math.ceil(n[1]/2),"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+o[0]+", "+o[1]+"));\n      int index = resTexRC.x * "+o[1]+" + resTexRC.y;\n\n      int b = index / "+a+";\n      index -= b * "+a+";\n\n      int r = 2 * (index / "+i+");\n      int c = imod(index, "+i+") * 2;\n\n      return ivec3(b, r, c);\n    }\n  ";default:return function(t,e){for(var n=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],r=Math.ceil(t[t.length-1]/2),o=r*Math.ceil(t[t.length-2]/2),i=o,a="",s="b, r, c",u=2;u<t.length-1;u++)a="\n      int b"+u+" = index / "+(i*=t[t.length-u-1])+";\n      index -= b"+u+" * "+i+";\n    "+a,s="b"+u+", "+s;return"\n    ivec"+t.length+" getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+n[0]+", "+n[1]+"));\n      int index = resTexRC.x * "+n[1]+" + resTexRC.y;\n\n      "+a+"\n\n      int b = index / "+o+";\n      index -= b * "+o+";\n\n      int r = 2 * (index / "+r+");\n      int c = imod(index, "+r+") * 2;\n\n      return ivec"+t.length+"("+s+");\n    }\n  "}(t,e)}var n,r,o,i,a}(e.logicalShape,c),a=function(t){return"\n    void setOutput(vec4 val) {\n      "+t.output+" = val;\n    }\n  "}(l)):(i=function(t,e){switch(t.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(t,e){return 1===e[0]?"\n      int getOutputCoords() {\n        return int(resultUV.x * "+e[1]+".0);\n      }\n    ":1===e[1]?"\n      int getOutputCoords() {\n        return int(resultUV.y * "+e[0]+".0);\n      }\n    ":"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+e[0]+", "+e[1]+"));\n      return resTexRC.x * "+e[1]+" + resTexRC.y;\n    }\n  "}(0,e);case 2:return function(t,e){return _(t,e)?"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2("+e[0]+", "+e[1]+"));\n      }\n    ":1===t[1]?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2("+e[0]+", "+e[1]+"));\n        int index = resTexRC.x * "+e[1]+" + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ":1===t[0]?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2("+e[0]+", "+e[1]+"));\n        int index = resTexRC.x * "+e[1]+" + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ":"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+e[0]+", "+e[1]+"));\n      int index = resTexRC.x * "+e[1]+" + resTexRC.y;\n      int r = index / "+t[1]+";\n      int c = index - r * "+t[1]+";\n      return ivec2(r, c);\n    }\n  "}(t,e);case 3:return n=e,r=jn(["r","c","d"],t),"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+n[0]+", "+n[1]+"));\n      int index = resTexRC.x * "+n[1]+" + resTexRC.y;\n      "+r+"\n      return ivec3(r, c, d);\n    }\n  ";case 4:return function(t,e){var n=jn(["r","c","d","d2"],t);return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2("+e[0]+", "+e[1]+"));\n      int index = resTexRC.x * "+e[1]+" + resTexRC.y;\n      "+n+"\n      return ivec4(r, c, d, d2);\n    }\n  "}(t,e);case 5:return function(t,e){var n=jn(["r","c","d","d2","d3"],t);return"\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2("+e[0]+",\n                             "+e[1]+"));\n\n      int index = resTexRC.x * "+e[1]+" + resTexRC.y;\n\n      "+n+"\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  "}(t,e);case 6:return function(t,e){var n=jn(["r","c","d","d2","d3","d4"],t);return"\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2("+e[0]+", "+e[1]+"));\n      int index = resTexRC.x * "+e[1]+" + resTexRC.y;\n\n      "+n+"\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  "}(t,e);default:throw new Error(t.length+"-D output sampling is not yet supported")}var n,r}(e.logicalShape,c),a=function(t){return"\n    void setOutput(float val) {\n      "+t.output+" = vec4(val, 0, 0, 0);\n    }\n  "}(l)),r&&(h+=Ui),[h,f,a,s,i,u,n].join("\n")}function Un(t){var e=t.shapeInfo.logicalShape;switch(e.length){case 0:return function(t){var e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1);if(t.shapeInfo.isUniform)return"float "+n+"() {return "+e+";}";var r=t.shapeInfo.texShape;if(1===r[0]&&1===r[1])return"\n      float "+n+"() {\n        return sampleTexture("+e+", halfCR);\n      }\n    ";var o=t.shapeInfo.texShape;return"\n    float "+n+"() {\n      vec2 uv = uvFromFlat("+o[0]+", "+o[1]+", "+zn(e)+");\n      return sampleTexture("+e+", uv);\n    }\n  "}(t);case 1:return function(t){var e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1);if(t.shapeInfo.isUniform)return"\n      float "+n+"(int index) {\n        "+Vn(t)+"\n      }\n    ";var r=t.shapeInfo.texShape,o=r[0],i=r[1];if(1===i&&1===o)return"\n      float "+n+"(int index) {\n        return sampleTexture("+e+", halfCR);\n      }\n    ";var a=zn(e);return 1===i?"\n      float "+n+"(int index) {\n        vec2 uv = vec2(0.5, (float(index + "+a+") + 0.5) / "+o+".0);\n        return sampleTexture("+e+", uv);\n      }\n    ":1===o?"\n      float "+n+"(int index) {\n        vec2 uv = vec2((float(index + "+a+") + 0.5) / "+i+".0, 0.5);\n        return sampleTexture("+e+", uv);\n      }\n    ":"\n    float "+n+"(int index) {\n      vec2 uv = uvFromFlat("+o+", "+i+", index + "+a+");\n      return sampleTexture("+e+", uv);\n    }\n  "}(t);case 2:return function(t){var e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=t.shapeInfo.texShape;if(null!=o&&_(e,o))return"\n    float "+r+"(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2("+o[1]+".0, "+o[0]+".0);\n      return sampleTexture("+n+", uv);\n    }\n  ";var i=k(e),a=i.newShape,s=i.keptDims;if(a.length<e.length)return"\n      "+Un(qn(t,a))+"\n      float "+r+"(int row, int col) {\n        return "+r+"("+Kn(["row","col"],s)+");\n      }\n    ";if(t.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col) {\n        int index = round(dot(vec2(row, col), vec2("+e[1]+", 1)));\n        "+Vn(t)+"\n      }\n    ";var u=o[0],c=o[1],l=zn(n);return 1===c?"\n    float "+r+"(int row, int col) {\n      float index = dot(vec3(row, col, "+l+"), vec3("+e[1]+", 1, 1));\n      vec2 uv = vec2(0.5, (index + 0.5) / "+u+".0);\n      return sampleTexture("+n+", uv);\n    }\n  ":1===u?"\n    float "+r+"(int row, int col) {\n      float index = dot(vec3(row, col, "+l+"), vec3("+e[1]+", 1, 1));\n      vec2 uv = vec2((index + 0.5) / "+c+".0, 0.5);\n      return sampleTexture("+n+", uv);\n    }\n  ":"\n  float "+r+"(int row, int col) {\n    // Explicitly use integer operations as dot() only works on floats.\n    int index = row * "+e[1]+" + col + "+l+";\n    vec2 uv = uvFromFlat("+u+", "+c+", index);\n    return sampleTexture("+n+", uv);\n  }\n"}(t);case 3:return function(t){var e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=e[1]*e[2],i=e[2],a=k(e),s=a.newShape,u=a.keptDims;if(s.length<e.length)return"\n        "+Un(qn(t,s))+"\n        float "+r+"(int row, int col, int depth) {\n          return "+r+"("+Kn(["row","col","depth"],u)+");\n        }\n      ";if(t.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col, int depth) {\n        int index = round(dot(vec3(row, col, depth),\n                          vec3("+o+", "+i+", 1)));\n        "+Vn(t)+"\n      }\n    ";var c=t.shapeInfo.texShape,l=c[0],f=c[1],h=t.shapeInfo.flatOffset;return f===o&&null==h?"\n        float "+r+"(int row, int col, int depth) {\n          float texR = float(row);\n          float texC = dot(vec2(col, depth), vec2("+i+", 1));\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2("+f+".0, "+l+".0);\n          return sampleTexture("+n+", uv);\n        }\n      ":f===i&&null==h?"\n    float "+r+"(int row, int col, int depth) {\n      float texR = dot(vec2(row, col), vec2("+e[1]+", 1));\n      float texC = float(depth);\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2("+f+".0, "+l+".0);\n      return sampleTexture("+n+", uv);\n    }\n  ":"\n      float "+r+"(int row, int col, int depth) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * "+o+" + col * "+i+" + depth + "+zn(n)+";\n        vec2 uv = uvFromFlat("+l+", "+f+", index);\n        return sampleTexture("+n+", uv);\n      }\n  "}(t);case 4:return function(t){var e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=e[3],i=e[2]*o,a=e[1]*i,s=k(e),u=s.newShape,c=s.keptDims;if(u.length<e.length)return"\n      "+Un(qn(t,u))+"\n      float "+r+"(int row, int col, int depth, int depth2) {\n        return "+r+"("+Kn(["row","col","depth","depth2"],c)+");\n      }\n    ";if(t.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col, int depth, int depth2) {\n        int index = round(dot(vec4(row, col, depth, depth2),\n                          vec4("+a+", "+i+", "+o+", 1)));\n        "+Vn(t)+"\n      }\n    ";var l=t.shapeInfo.flatOffset,f=t.shapeInfo.texShape,h=f[0],d=f[1];return d===a&&null==l?"\n      float "+r+"(int row, int col, int depth, int depth2) {\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3("+i+", "+o+", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2("+d+".0, "+h+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":d===o&&null==l?"\n      float "+r+"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3("+e[1]*e[2]+", "+e[2]+", 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2("+d+".0, "+h+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":"\n    float "+r+"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * "+a+" + col * "+i+" +\n          depth * "+o+" + depth2;\n      vec2 uv = uvFromFlat("+h+", "+d+", index + "+zn(n)+");\n      return sampleTexture("+n+", uv);\n    }\n  "}(t);case 5:return function(t){var e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=e[4],i=e[3]*o,a=e[2]*i,s=e[1]*a,u=k(e),c=u.newShape,l=u.keptDims;if(c.length<e.length)return"\n      "+Un(qn(t,c))+"\n      float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n        return "+r+"("+Kn(["row","col","depth","depth2","depth3"],l)+");\n      }\n    ";if(t.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n        float index = dot(\n          vec4(row, col, depth, depth2),\n          vec4("+s+", "+a+", "+i+", "+o+")) +\n          depth3;\n        "+Vn(t)+"\n      }\n    ";var f=t.shapeInfo.flatOffset,h=t.shapeInfo.texShape,d=h[0],p=h[1];return p===s&&null==f?"\n      float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n                         vec4("+a+", "+i+", "+o+", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2("+p+".0, "+d+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":p===o&&null==f?"\n      float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n        float texR = dot(\n          vec4(row, col, depth, depth2),\n          vec4("+e[1]*e[2]*e[3]+",\n               "+e[2]*e[3]+", "+e[3]+", 1));\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2("+p+".0, "+d+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":"\n    float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * "+s+" + col * "+a+" + depth * "+i+" +\n          depth2 * "+o+" + depth3 + "+zn(n)+";\n      vec2 uv = uvFromFlat("+d+", "+p+", index);\n      return sampleTexture("+n+", uv);\n    }\n  "}(t);case 6:return function(t){var e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=k(e),i=o.newShape,a=o.keptDims;if(i.length<e.length)return"\n      "+Un(qn(t,i))+"\n      float "+r+"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return "+r+"("+Kn(["row","col","depth","depth2","depth3","depth4"],a)+");\n      }\n    ";var s=e[5],u=e[4]*s,c=e[3]*u,l=e[2]*c,f=e[1]*l;if(t.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = round(dot(\n          vec4(row, col, depth, depth2),\n          vec4("+f+", "+l+", "+c+", "+u+")) +\n          dot(\n            vec2(depth3, depth4),\n            vec2("+s+", 1)));\n        "+Vn(t)+"\n      }\n    ";var h=t.shapeInfo.flatOffset,d=t.shapeInfo.texShape,p=d[0],v=d[1];return v===f&&null==h?"\n      float "+r+"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n          vec4("+l+", "+c+", "+u+", "+s+")) +\n               float(depth4);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2("+v+".0, "+p+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":v===s&&null==h?"\n      float "+r+"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        float texR = dot(vec4(row, col, depth, depth2),\n          vec4("+e[1]*e[2]*e[3]*e[4]+",\n               "+e[2]*e[3]*e[4]+",\n               "+e[3]*e[4]+",\n               "+e[4]+")) + float(depth3);\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2("+v+".0, "+p+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":"\n    float "+r+"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * "+f+" + col * "+l+" + depth * "+c+" +\n          depth2 * "+u+" + depth3 * "+s+" + depth4 + "+zn(n)+";\n      vec2 uv = uvFromFlat("+p+", "+v+", index);\n      return sampleTexture("+n+", uv);\n    }\n  "}(t);default:throw new Error(e.length+"-D input sampling is not yet supported")}}function Gn(t){var e;switch(t.shapeInfo.logicalShape.length){case 0:return"\n    vec4 "+("get"+(e=t.name).charAt(0).toUpperCase()+e.slice(1))+"() {\n      return "+Ln().texture2D+"("+e+", halfCR);\n    }\n  ";case 1:return function(t){var e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1),r=t.shapeInfo.texShape,o=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)],i=Ln();return"\n    vec4 "+n+"(int index) {\n      vec2 uv = packedUVfrom1D(\n        "+o[0]+", "+o[1]+", index);\n      return "+i.texture2D+"("+e+", uv);\n    }\n  "}(t);case 2:return function(t){var e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=t.shapeInfo.texShape,i=o[0],a=o[1],s=Ln();if(null!=o&&_(e,o))return"\n      vec4 "+r+"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2("+a+".0, "+i+".0);\n\n        return "+s.texture2D+"("+n+", uv);\n      }\n    ";var u=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)];return"\n    vec4 "+r+"(int row, int col) {\n      vec2 uv = packedUVfrom2D("+Math.ceil(e[1]/2)+", "+u[0]+", "+u[1]+", row, col);\n      return "+s.texture2D+"("+n+", uv);\n    }\n  "}(t);case 3:return function(t){var e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=t.shapeInfo.texShape,i=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)];if(1===e[0])return"\n        "+Gn(qn(t,e.slice(1)))+"\n        vec4 "+r+"(int b, int row, int col) {\n          return "+r+"("+Kn(["b","row","col"],[1,2])+");\n        }\n      ";var a=i[0],s=i[1],u=Math.ceil(e[2]/2);return"\n    vec4 "+r+"(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        "+a+", "+s+", "+u*Math.ceil(e[1]/2)+", "+u+", b, row, col);\n      return "+Ln().texture2D+"("+n+", uv);\n    }\n  "}(t);default:return function(t){for(var e=t.shapeInfo.logicalShape,n=e.length,r=t.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),i=t.shapeInfo.texShape,a=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)],s=a[0],u=a[1],c=Math.ceil(e[n-1]/2),l=c*Math.ceil(e[n-2]/2),f="int b, int row, int col",h="b * "+l+" + (row / 2) * "+c+" + (col / 2)",d=2;d<n-1;d++)f="int b"+d+", "+f,h="b"+d+" * "+(l*=e[n-d-1])+" + "+h;return"\n    vec4 "+o+"("+f+") {\n      int index = "+h+";\n      int texR = index / "+u+";\n      int texC = index - texR * "+u+";\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2("+u+", "+s+");\n      return "+Ln().texture2D+"("+r+", uv);\n    }\n  "}(t)}}function zn(t){return"offset"+t}function Vn(t){var e=t.name,n=w(t.shapeInfo.logicalShape);return n<2?"return "+e+";":"\n    for (int i = 0; i < "+n+"; i++) {\n      if (i == index) {\n        return "+e+"[i];\n      }\n    }\n  "}function Hn(t){if(t<=1)return"int";if(2===t)return"ivec2";if(3===t)return"ivec3";if(4===t)return"ivec4";if(5===t)return"ivec5";if(6===t)return"ivec6";throw Error("GPU for rank "+t+" is not yet supported")}function qn(t,e){var n=JSON.parse(JSON.stringify(t));return n.shapeInfo.logicalShape=e,n}function Kn(t,e){return e.map((function(e){return t[e]})).join(", ")}function Xn(t,e,n){var r=t.indexOf(e);return t.map((function(t,e){return e===r?t+" - "+n:t})).join()}function Jn(t,e){if(1===t)return""+e;if(2===t)return e+".y";if(3===t)return e+".z";if(4===t)return e+".w";throw Error("Cumulative sum for rank "+t+" is not yet supported")}function Yn(t,e){var n=Ln();return wt(t,e,n.version+"\n    precision highp float;\n    "+n.attribute+" vec3 clipSpacePos;\n    "+n.attribute+" vec2 uv;\n    "+n.varyingVs+" vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }")}function Qn(t,e){return St(t,e,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function $n(t,e){return Ot(t,e,new Uint16Array([0,1,2,2,1,3]))}function Zn(t,e,n,r,o,i,a){It(n,r);var s=At(t,e),u=t.TEXTURE_2D;return mt(t,e,(function(){return t.bindTexture(u,s)})),mt(t,e,(function(){return t.texParameteri(u,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE)})),mt(t,e,(function(){return t.texParameteri(u,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)})),mt(t,e,(function(){return t.texParameteri(u,t.TEXTURE_MIN_FILTER,t.NEAREST)})),mt(t,e,(function(){return t.texParameteri(u,t.TEXTURE_MAG_FILTER,t.NEAREST)})),mt(t,e,(function(){return t.texImage2D(u,0,o,n,r,0,i,a,null)})),mt(t,e,(function(){return t.bindTexture(t.TEXTURE_2D,null)})),s}function tr(t,e,n,r,o){var i=dt(n,r);return Zn(t,e,i[0],i[1],o.internalFormatFloat,o.textureFormatFloat,t.FLOAT)}function er(t,e,n,r,o){var i=dt(n,r);return Zn(t,e,i[0],i[1],o.internalFormatHalfFloat,o.textureFormatFloat,o.textureTypeHalfFloat)}function nr(t,e,n,r){var o=dt(n,r);return Zn(t,e,o[0],o[1],t.RGBA,t.RGBA,t.UNSIGNED_BYTE)}function rr(t,e,n,r,o){var i=vt(n,r);return Zn(t,e,i[0],i[1],o.internalFormatPackedFloat,t.RGBA,t.FLOAT)}function or(t,e,n,r,o){var i=vt(n,r);return Zn(t,e,i[0],i[1],o.internalFormatPackedHalfFloat,t.RGBA,o.textureTypeHalfFloat)}function ir(t,e,n,r){return mt(t,e,(function(){return t.bindBuffer(t.ARRAY_BUFFER,r)})),Tt(t,e,n,"clipSpacePos",r,3,20,0)&&Tt(t,e,n,"uv",r,2,20,12)}function ar(t,e,n,r,o,i,a){var s,u,c;mt(t,e,(function(){return t.bindTexture(t.TEXTURE_2D,n)})),i instanceof Uint8Array?(s=new Uint8Array(r*o*4),u=t.UNSIGNED_BYTE,c=t.RGBA):(s=new Float32Array(r*o*4),u=t.FLOAT,c=a.internalFormatPackedFloat),s.set(i),mt(t,e,(function(){return t.texImage2D(t.TEXTURE_2D,0,c,r,o,0,t.RGBA,u,s)})),mt(t,e,(function(){return t.bindTexture(t.TEXTURE_2D,null)}))}function sr(t,e,n,r){mt(t,e,(function(){return t.bindTexture(t.TEXTURE_2D,n)})),r.data instanceof Uint8Array?mt(t,e,(function(){return t.texImage2D(t.TEXTURE_2D,0,t.RGBA,r.width,r.height,0,t.RGBA,t.UNSIGNED_BYTE,r.data)})):mt(t,e,(function(){return t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,r)})),mt(t,e,(function(){return t.bindTexture(t.TEXTURE_2D,null)}))}function ur(t,e,n,r){var o=t.createBuffer();mt(t,e,(function(){return t.bindBuffer(t.PIXEL_PACK_BUFFER,o)}));var i=16*n*r;return mt(t,e,(function(){return t.bufferData(t.PIXEL_PACK_BUFFER,i,t.STREAM_READ)})),mt(t,e,(function(){return t.readPixels(0,0,r,n,t.RGBA,t.FLOAT,0)})),mt(t,e,(function(){return t.bindBuffer(t.PIXEL_PACK_BUFFER,null)})),o}function cr(t,e,n){var r=t,o=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,e),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,o),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),o}function lr(t,e,n,r,o){var i=dt(n,r),a=i[0],s=i[1],u=new Uint8Array(n*r*4);return mt(t,e,(function(){return t.readPixels(0,0,a,s,o.downloadTextureFormat,t.UNSIGNED_BYTE,u)})),new Float32Array(u.buffer)}function fr(t,e,n,r,o,i,a){var s=t,u=new Float32Array(function(t,e){var n=vt(t,e);return n[0]*n[1]*4}(i,a));return s.bindBuffer(s.PIXEL_PACK_BUFFER,e),s.getBufferSubData(s.PIXEL_PACK_BUFFER,0,u),s.bindBuffer(s.PIXEL_PACK_BUFFER,null),u}function hr(t,e,n,r){var o=new Float32Array(n*r*4);return mt(t,e,(function(){return t.readPixels(0,0,r,n,t.RGBA,t.FLOAT,o)})),o}function dr(t,e){if(t.length!==e.length)throw Error("Binary was compiled with "+t.length+" inputs, but was executed with "+e.length+" inputs");t.forEach((function(t,n){var r=t.logicalShape,o=e[n],i=o.shape;if(!_(r,i))throw Error("Binary was compiled with different shapes than the current args. Shapes "+r+" and "+i+" must match");if(!t.isUniform||!o.isUniform){var a=t.texShape,s=o.isUniform?null:o.texData.texShape;if(!_(a,s))throw Error("Binary was compiled with different texture shapes than the current args. Shape "+a+" and "+s+" must match")}}))}function pr(t,e){if(t===Ao.UPLOAD)return Io.PACKED_2X2_FLOAT32;if(t===Ao.RENDER||null==t)return function(t){return u().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?t?Io.PACKED_2X2_FLOAT32:Io.UNPACKED_FLOAT32:t?Io.PACKED_2X2_FLOAT16:Io.UNPACKED_FLOAT16}(e);if(t===Ao.DOWNLOAD||t===Ao.PIXELS)return Io.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type "+t)}function vr(t,e,n){return t[0]+"_"+t[1]+"_"+e+"_"+n}function gr(t,e){if(void 0===e&&(e=!1),"linear"===t)return"return x;";if("relu"===t)return e?Cs:gs;if("elu"===t)return e?Os:ys;if("relu6"===t)return e?Ss:ms;if("prelu"===t)return e?Zi:Qi;throw new Error("Activation "+t+" has not been implemented for the WebGL backend.")}function mr(t,e,n,r,o,i){var a,s,u=ce(t,"x","batchNorm"),c=ce(e,"mean","batchNorm"),l=ce(n,"variance","batchNorm");return null!=o&&(a=ce(o,"scale","batchNorm")),null!=r&&(s=ce(r,"offset","batchNorm")),m(2===u.rank,(function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+u.rank+"."})),m(2===c.rank||1===c.rank,(function(){return"Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank "+c.rank+"."})),m(2===l.rank||1===l.rank,(function(){return"Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank "+l.rank+"."})),null!=a&&m(2===a.rank||1===a.rank,(function(){return"Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank "+a.rank+"."})),null!=s&&m(2===s.rank||1===s.rank,(function(){return"Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank "+s.rank+"."})),xr(u,c,l,s,a,i)}function yr(t,e,n,r,o,i){var a,s,u=ce(t,"x","batchNorm"),c=ce(e,"mean","batchNorm"),l=ce(n,"variance","batchNorm");return null!=o&&(a=ce(o,"scale","batchNorm")),null!=r&&(s=ce(r,"offset","batchNorm")),m(3===u.rank,(function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+u.rank+"."})),m(3===c.rank||1===c.rank,(function(){return"Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank "+c.rank+"."})),m(3===l.rank||1===l.rank,(function(){return"Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank "+l.rank+"."})),null!=a&&m(3===a.rank||1===a.rank,(function(){return"Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank "+a.rank+"."})),null!=s&&m(3===s.rank||1===s.rank,(function(){return"Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank "+s.rank+"."})),xr(u,c,l,s,a,i)}function br(t,e,n,r,o,i){var a,s,u=ce(t,"x","batchNorm"),c=ce(e,"mean","batchNorm"),l=ce(n,"variance","batchNorm");return null!=o&&(a=ce(o,"scale","batchNorm")),null!=r&&(s=ce(r,"offset","batchNorm")),m(4===u.rank,(function(){return"Error in batchNorm4D: x must be rank 4 but got rank "+u.rank+"."})),m(4===c.rank||1===c.rank,(function(){return"Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank "+c.rank+"."})),m(4===l.rank||1===l.rank,(function(){return"Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank "+l.rank+"."})),null!=a&&m(4===a.rank||1===a.rank,(function(){return"Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank "+a.rank+"."})),null!=s&&m(4===s.rank||1===s.rank,(function(){return"Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank "+s.rank+"."})),xr(u,c,l,s,a,i)}function xr(t,e,n,r,o,i){null==i&&(i=.001);var a,s,u,c=ce(t,"x","batchNorm"),l=ce(e,"mean","batchNorm"),f=ce(n,"variance","batchNorm");return null!=o&&(a=ce(o,"scale","batchNorm")),null!=r&&(s=ce(r,"offset","batchNorm")),m(l.rank===f.rank,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),m(null==s||l.rank===s.rank,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),m(null==a||l.rank===a.rank,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."})),u=0===c.rank||1===c.rank?c.as4D(1,1,1,c.size):2===c.rank?c.as4D(1,1,c.shape[0],c.shape[1]):3===c.rank?c.as4D(1,c.shape[0],c.shape[1],c.shape[2]):c,Co.runKernelFunc((function(t,e){var n=t.batchNormalization(u,wr(l),wr(f),i,wr(a),wr(s));return e([c,l,f,a]),n}),{x:c,mean:l,variance:f,scale:a,offset:s},(function(t,e){var n=e[0],r=e[1],o=e[2],a=e[3],s=null==a?Re(1):a,c=en(r.shape,u.shape),l=[];if(1===r.rank){for(var f=0;f<u.shape.length-1;++f)l.push(u.shape[f]);l.push(1)}var h=n.sub(r),d=t.mul(s),p=ru(o.add(Re(i))),v=p.mul(p).mul(p).mul(Re(-.5));return{x:function(){return 1===r.rank?t.mul(Oi(p.as4D(1,1,1,r.shape[0]),l)).mul(s).reshape(n.shape):t.mul(p).mul(s).reshape(n.shape)},mean:function(){var t=p.mul(Re(-1)).mul(d);return 1===r.rank&&(t=t.sum(c)),t.reshape(r.shape)},variance:function(){var t=v.mul(h).mul(d);return 1===r.rank&&(t=t.sum(c)),t.reshape(r.shape)},scale:function(){var e=h.mul(p),n=t.mul(e);return 1===r.rank&&(n=n.sum(c)),n.reshape(r.shape)},offset:function(){var e=t;return 1===r.rank&&(e=e.sum(c)),e.reshape(r.shape)}}}),"BatchNormalization",{varianceEpsilon:i},[c,l,f,a]).reshape(c.shape)}function wr(t){return null==t?null:0===t.rank?t.as1D():1===t.rank?t:2===t.rank?t.as4D(1,1,t.shape[0],t.shape[1]):3===t.rank?t.as4D(1,t.shape[0],t.shape[1],t.shape[2]):t}function _r(){re("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon")}function Er(t,e){for(var n=[],r=t;r<e;++r)n.push(r);return n}function Rr(t){for(var e=[],n=0;n<t.length;++n)for(var r=0;r<t[n].length;++r)e.push(t[n][r]);return e}function Cr(t,e,n,r,o,i,a){void 0===i&&(i="NHWC"),m(t.length===e.rank,(function(){return"Length of inShape ("+t.length+") and rank of dy ("+e.rank+") must match"}));var s=t,u=e,c=!1;3===e.rank&&(c=!0,u=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]),s=[1,t[0],t[1],t[2]]),m(4===s.length,(function(){return"Error in conv2dDerInput: inShape must be length 4, but got length "+s.length+"."})),m(4===u.rank,(function(){return"Error in conv2dDerInput: dy must be rank 4, but got rank "+u.rank})),m(4===n.rank,(function(){return"Error in conv2dDerInput: filter must be rank 4, but got rank "+n.rank}));var l="NHWC"===i?s[3]:s[1],f="NHWC"===i?u.shape[3]:u.shape[1];m(l===n.shape[2],(function(){return"Error in conv2dDerInput: depth of input ("+l+") must match input depth for filter "+n.shape[2]+"."})),m(f===n.shape[3],(function(){return"Error in conv2dDerInput: depth of output ("+f+") must match output depth for filter "+n.shape[3]+"."})),null!=a&&m(E(o),(function(){return"Error in conv2dDerInput: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+o+"."}));var h=vn(i),d=an(s,n.shape,r,1,o,a,!1,h),p=Co.runKernelFunc((function(t,e){var r=t.conv2dDerInput(u,n,d);return e([n,u]),r}),{dy4D:u,filter:n},(function(t,e){var n=e[0],s=e[1];return{dy4D:function(){return hc(t,n,r,o,i,1,a)},filter:function(){return pc(t,s,n.shape,r,o,i,a)}}}));return c?p.as3D(p.shape[1],p.shape[2],p.shape[3]):p}function Sr(t){var e=function(t){return"number"==typeof t?[t,t,t]:2===t.length?[t[0],t[1],1]:t}(t);return 1===e[0]&&1===e[1]&&1===e[2]}function Or(t,e,n,r,o){m(t.length===e.rank,(function(){return"Length of inShape ("+t.length+") and rank of dy ("+e.rank+") must match"}));var i=t,a=e,s=!1;4===e.rank&&(s=!0,a=e.as5D(1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]),i=[1,t[0],t[1],t[2],t[3]]);var u=i[4],c=a.shape[4];m(5===i.length,(function(){return"Error in conv3dDerInput: inShape must be length 5, but got length "+i.length+"."})),m(5===a.rank,(function(){return"Error in conv3dDerInput: dy must be rank 5, but got rank "+a.rank})),m(5===n.rank,(function(){return"Error in conv3dDerInput: filter must be rank 5, but got rank "+n.rank})),m(u===n.shape[3],(function(){return"Error in conv3dDerInput: depth of input ("+u+") must match input depth for filter "+n.shape[3]+"."})),m(c===n.shape[4],(function(){return"Error in conv3dDerInput: depth of output ("+c+") must match output depth for filter "+n.shape[4]+"."}));var l=sn(i,n.shape,r,1,o),f=Co.runKernelFunc((function(t){return t.conv3dDerInput(a,n,l)}),{dy5D:a});return s?f.as4D(f.shape[1],f.shape[2],f.shape[3],f.shape[4]):f}function Ar(t,e,n,r,o,i){var a=ce(t,"x","maxPool"),s=a,u=!1;3===a.rank&&(u=!0,s=a.as4D(1,a.shape[0],a.shape[1],a.shape[2])),null==r&&(r=[1,1]),m(4===s.rank,(function(){return"Error in maxPool: input must be rank 4 but got rank "+s.rank+"."})),m(pn(n,r),(function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+r+"'"})),null!=i&&m(E(o),(function(){return"Error in maxPool: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+o+"."}));var c=rn(s.shape,e,n,r,o,i);if(1===c.filterWidth&&1===c.filterHeight&&_(c.inShape,c.outShape))return a.clone();var l=Co.runKernelFunc((function(t,e){var n=t.maxPool(s,c);return e([s,n]),n}),{x:s},(function(t,i){var a=i[0],s=i[1];return{x:function(){return function(t,e,n,r,o,i,a,s){var u=ce(t,"dy","maxPoolBackprop"),c=ce(e,"input","maxPoolBackprop"),l=ce(n,"output","maxPoolBackprop");m(c.rank===u.rank,(function(){return"Rank of input ("+c.rank+") does not match rank of dy ("+u.rank+")"})),null==i&&(i=[1,1]),m(pn(o,i),(function(){return"Error in maxPoolBackProp: Either strides or dilations must be 1. Got strides "+o+" and dilations '"+i+"'"})),m(4===u.rank,(function(){return"Error in maxPoolBackprop: dy must be rank 4 but got rank "+u.rank+"."})),m(4===c.rank,(function(){return"Error in maxPoolBackprop: input must be rank 4 but got rank "+c.rank+"."}));var f=rn(c.shape,r,o,i,a,s);return Co.runKernelFunc((function(t){return t.maxPoolBackprop(u,c,l,f)}),{$dy:u,$input:c})}(t,a,s,e,n,r,o)}}}),"MaxPool",c,[s]);return u?l.as3D(l.shape[1],l.shape[2],l.shape[3]):l}function Ir(t,e,n,r,o,i){var a=ce(t,"x","avgPool","float32");null==r&&(r=[1,1]),m(pn(n,r),(function(){return"Error in avgPool: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+r+"'"}));var s=a,u=!1;3===a.rank&&(u=!0,s=a.as4D(1,a.shape[0],a.shape[1],a.shape[2])),m(4===s.rank,(function(){return"Error in avgPool: x must be rank 4 but got rank "+s.rank+"."})),null!=i&&m(E(o),(function(){return"Error in avgPool: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+o+"."}));var c=rn(s.shape,e,n,r,o,i);if(1===c.filterWidth&&1===c.filterHeight&&_(c.inShape,c.outShape))return a.clone();var l=Co.runKernelFunc((function(t){return t.avgPool(s,c)}),{x:s},(function(t){return{x:function(){return function(t,e,n,r,o,i){var a=ce(t,"dy","avgPoolBackprop"),s=ce(e,"input","avgPoolBackprop");m(s.rank===a.rank,(function(){return"Rank of input ("+s.rank+") does not match rank of dy ("+a.rank+")"})),null==o&&(o=[1,1]),m(pn(r,o),(function(){return"Error in avgPoolBackprop: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+o+"'"}));var u=s,c=a,l=!1;3===s.rank&&(l=!0,u=s.as4D(1,s.shape[0],s.shape[1],s.shape[2]),c=a.as4D(1,a.shape[0],a.shape[1],a.shape[2])),m(4===c.rank,(function(){return"Error in avgPoolBackprop: dy must be rank 4 but got rank "+c.rank+"."})),m(4===u.rank,(function(){return"Error in avgPoolBackprop: input must be rank 4 but got rank "+u.rank+"."}));var f=rn(u.shape,n,r,o,i),h=Co.runKernelFunc((function(t){return t.avgPoolBackprop(c,u,f)}),{dy4D:c,input4D:u});return l?h.as3D(h.shape[1],h.shape[2],h.shape[3]):h}(t,s,e,n,r,o)}}}),"AvgPool",c);return l=l.cast(a.dtype),u?l.as3D(l.shape[1],l.shape[2],l.shape[3]):l}function kr(t,e,n,r,o){return e.rank<n.rank&&(e=e.reshape(pe(e.shape,r))),t.rank<n.rank&&(t=t.reshape(pe(t.shape,r))),{x:function(){var r=t.mul(n.equal(e).cast(t.dtype));return null==o?r:r.transpose(o)}}}function Tr(t,e,n){for(var r=1-t%2,o=new Float32Array(t),i=0;i<t;++i){var a=2*Math.PI*i/(t+r-1);o[i]=e-n*Math.cos(a)}return Ce(o,"float32")}function Mr(t,e){return void 0===e&&(e=!1),Co.tidy((function(){if(2!==t.shape.length)throw new Error("qr2d() requires a 2D Tensor, but got a "+t.shape.length+"D Tensor.");for(var n=t.shape[0],r=t.shape[1],o=fi(n),i=t.clone(),a=Se([[1]],[1,1]),s=a.clone(),u=n>=r?r:n,c=function(t){var e,u=i,c=s,l=o;e=Co.tidy((function(){var e=i.slice([t,t],[n-t,1]),u=e.norm(),c=i.slice([t,t],[1,1]),l=Se([[-1]]).where(c.greater(0),Se([[1]])),f=c.sub(l.mul(u)),h=e.div(f);s=1===h.shape[0]?a.clone():a.concat(h.slice([1,0],[h.shape[0]-1,h.shape[1]]),0);var d=l.matMul(f).div(u).neg(),p=i.slice([t,0],[n-t,r]),v=d.mul(s);if(0===t)i=p.sub(v.matMul(s.transpose().matMul(p)));else{var g=p.sub(v.matMul(s.transpose().matMul(p)));i=i.slice([0,0],[t,r]).concat(g,0)}var m=o.slice([0,t],[n,o.shape[1]-t]);if(0===t)o=m.sub(m.matMul(s).matMul(v.transpose()));else{var y=m.sub(m.matMul(s).matMul(v.transpose()));o=o.slice([0,0],[n,t]).concat(y,1)}return[s,i,o]})),s=e[0],i=e[1],o=e[2],ie([u,c,l])},l=0;l<u;++l)c(l);return!e&&n>r&&(o=o.slice([0,0],[n,r]),i=i.slice([0,0],[r,r])),[o,i]}))}function Dr(t,e,n,r,o,i){null==r&&(r=.5),null==o&&(o=Number.NEGATIVE_INFINITY),null==i&&(i=0);var a=t.shape[0];return n=Math.min(n,a),m(0<=r&&r<=1,(function(){return"iouThreshold must be in [0, 1], but was '"+r+"'"})),m(2===t.rank,(function(){return"boxes must be a 2D tensor, but was of rank '"+t.rank+"'"})),m(4===t.shape[1],(function(){return"boxes must have 4 columns, but 2nd dimension was "+t.shape[1]})),m(1===e.rank,(function(){return"scores must be a 1D tensor"})),m(e.shape[0]===a,(function(){return"scores has incompatible shape with boxes. Expected "+a+", but was "+e.shape[0]})),m(0<=i&&i<=1,(function(){return"softNmsSigma must be in [0, 1], but was '"+i+"'"})),{maxOutputSize:n,iouThreshold:r,scoreThreshold:o,softNmsSigma:i}}function Pr(t,e){Array.isArray(t)||(t=[t]),t.forEach((function(t){null!=t&&m("complex64"!==t.dtype,(function(){return e+" does not support complex64 tensors."}))}))}function Nr(t,e,n,r){if("linear"===n)return t.linear(e);if("relu"===n)return t.relu(e);if("elu"===n)return t.elu(e);if("relu6"===n)return t.relu6(e);if("prelu"===n)return t.prelu(e,r);throw new Error("Activation "+n+" has not been implemented for the CPU backend.")}function Fr(t,e){for(var n={},r=0,o=function(e){var o=e.name,i=e.dtype,a=e.shape,s=w(a),u=void 0;if("quantization"in e){var c=e.quantization;if("uint8"!==c.dtype&&"uint16"!==c.dtype)throw new Error("Weight "+e.name+" has unknown quantization dtype "+c.dtype+". Supported quantization dtypes are: 'uint8' and 'uint16'.");var l=pf[c.dtype],f=t.slice(r,r+s*l),h="uint8"===c.dtype?new Uint8Array(f):new Uint16Array(f);if("float32"===i)u=Float32Array.from(h,(function(t){return t*c.scale+c.min}));else{if("int32"!==i)throw new Error("Unsupported dtype in weight '"+o+"': "+i);u=Int32Array.from(h,(function(t){return Math.round(t*c.scale+c.min)}))}r+=s*l}else if("string"===i){var d=w(e.shape);u=[];for(var p=0;p<d;p++){var v=new Uint32Array(t.slice(r,r+4))[0];r+=4;var g=new Uint8Array(t.slice(r,r+v));u.push(g),r+=v}}else{var m=pf[i];if(f=t.slice(r,r+s*m),"float32"===i)u=new Float32Array(f);else if("int32"===i)u=new Int32Array(f);else{if("bool"!==i)throw new Error("Unsupported dtype in weight '"+o+"': "+i);u=new Uint8Array(f)}r+=s*m}n[o]=_e(u,a,i)},i=0,a=e;i<a.length;i++)o(a[i]);return n}function Lr(t){if(null===t)throw new Error("Invalid input value: "+JSON.stringify(t));var e=0,n=[];t.forEach((function(t){if(e+=t.byteLength,n.push(t.byteLength===t.buffer.byteLength?t:new t.constructor(t)),!(t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: "+t.constructor.name)}));var r=new Uint8Array(e),o=0;return n.forEach((function(t){r.set(new Uint8Array(t.buffer),o),o+=t.byteLength})),r.buffer}function jr(t){return vf?Buffer.byteLength(t):new Blob([t]).size}function Br(t){var e=0;t.forEach((function(t){e+=t.byteLength}));var n=new Uint8Array(e),r=0;return t.forEach((function(t){n.set(new Uint8Array(t),r),r+=t.byteLength})),n.buffer}function Wr(t){for(t=t.trim();t.endsWith("/");)t=t.slice(0,t.length-1);var e=t.split("/");return e[e.length-1]}function Ur(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==t.modelTopology?0:jr(JSON.stringify(t.modelTopology)),weightSpecsBytes:null==t.weightSpecs?0:jr(JSON.stringify(t.weightSpecs)),weightDataBytes:null==t.weightData?0:t.weightData.byteLength}}function Gr(t){if(-1===t.indexOf(mf))throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+yf.getSchemes().join(","));return{scheme:t.split(mf)[0],path:t.split(mf)[1]}}function zr(t,e,n){return void 0===n&&(n=!1),i(this,void 0,void 0,(function(){var r,o,i,s,u,c,l,f,h;return a(this,(function(a){switch(a.label){case 0:return m(t!==e,(function(){return"Old path and new path are the same: '"+t+"'"})),m((r=gf.getLoadHandlers(t)).length>0,(function(){return"Copying failed because no load handler is found for source URL "+t+"."})),m(r.length<2,(function(){return"Copying failed because more than one ("+r.length+") load handlers for source URL "+t+"."})),o=r[0],m((i=gf.getSaveHandlers(e)).length>0,(function(){return"Copying failed because no save handler is found for destination URL "+e+"."})),m(i.length<2,(function(){return"Copying failed because more than one ("+r.length+") save handlers for destination URL "+e+"."})),s=i[0],u=Gr(t).scheme,c=Gr(t).path,l=u===Gr(t).scheme,[4,o.load()];case 1:return f=a.sent(),n&&l?[4,yf.getManager(u).removeModel(c)]:[3,3];case 2:a.sent(),a.label=3;case 3:return[4,s.save(f)];case 4:return h=a.sent(),!n||l?[3,6]:[4,yf.getManager(u).removeModel(c)];case 5:a.sent(),a.label=6;case 6:return[2,h.modelArtifactsInfo]}}))}))}function Vr(){if(!u().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var t=window||self,e=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB||t.shimIndexedDB;if(null==e)throw new Error("The current browser does not appear to support IndexedDB.");return e}function Hr(t){var e=t.result;e.createObjectStore(bf,{keyPath:"modelPath"}),e.createObjectStore(xf,{keyPath:"modelPath"})}function qr(t){return{info:[Cf,t,Sf].join(Rf),topology:[Cf,t,Of].join(Rf),weightSpecs:[Cf,t,Af].join(Rf),weightData:[Cf,t,If].join(Rf),modelMetadata:[Cf,t,kf].join(Rf)}}function Kr(t){var e=t.split(Rf);if(e.length<3)throw new Error("Invalid key format: "+t);return e.slice(1,e.length-1).join(Rf)}function Xr(t){return new Promise((function(t){return setTimeout(t)})).then(t)}function Jr(t,e,n,r){!function(t){m(null!=t&&Array.isArray(t)&&t.length>0,(function(){return"promises must be a none empty array"}))}(t),function(t,e){m(t>=0&&t<=1,(function(){return"Progress fraction must be in range [0, 1], but got startFraction "+t})),m(e>=0&&e<=1,(function(){return"Progress fraction must be in range [0, 1], but got endFraction "+e})),m(e>=t,(function(){return"startFraction must be no more than endFraction, but got startFraction "+t+" and endFraction "+e}))}(n=null==n?0:n,r=null==r?1:r);var o=0;return Promise.all(t.map((function(i){return i.then((function(i){var a=n+ ++o/t.length*(r-n);return e(a),i})),i})))}function Yr(t,e){return i(this,void 0,void 0,(function(){var n,r,o,i,s,c,l,f,h;return a(this,(function(a){switch(a.label){case 0:return null==e&&(e={}),n=null==e.fetchFunc?u().platform.fetch:e.fetchFunc,r=t.map((function(t){return n(t,e.requestInit,{isBinary:!0})})),o=0,i=.5,null!=e.onProgress?[3,2]:[4,Promise.all(r)];case 1:return s=a.sent(),[3,4];case 2:return[4,Jr(r,e.onProgress,o,i)];case 3:s=a.sent(),a.label=4;case 4:return c=s.map((function(t){return t.arrayBuffer()})),l=.5,f=1,null!=e.onProgress?[3,6]:[4,Promise.all(c)];case 5:return h=a.sent(),[3,8];case 6:return[4,Jr(c,e.onProgress,l,f)];case 7:h=a.sent(),a.label=8;case 8:return[2,h]}}))}))}function Qr(t){var e=this;return function(n,r,o){return void 0===r&&(r=""),i(e,void 0,void 0,(function(){var e,i,s,u,c,l,f,h,d,p;return a(this,(function(a){switch(a.label){case 0:if(e=n.map((function(){return!1})),i={},s=null!=o?o.map((function(){return!1})):[],u=[],n.forEach((function(t,n){var r=0;t.weights.forEach((function(t){var a=pf["quantization"in t?t.quantization.dtype:t.dtype]*w(t.shape),c=function(){e[n]=!0,null==i[n]&&(i[n]=[]),i[n].push({manifestEntry:t,groupOffset:r,sizeBytes:a})};null!=o?o.forEach((function(e,n){e===t.name&&(c(),s[n]=!0)})):c(),u.push(t.name),r+=a}))})),!s.every((function(t){return t})))throw c=o.filter((function(t,e){return!s[e]})),new Error("Could not find weights in manifest with names: "+c.join(", ")+". \nManifest JSON has weights with names: "+u.join(", ")+".");return l=e.reduce((function(t,e,n){return e&&t.push(n),t}),[]),f=[],l.forEach((function(t){n[t].paths.forEach((function(t){var e=r+(r.endsWith("/")?"":"/")+t;f.push(e)}))})),[4,t(f)];case 1:return h=a.sent(),d={},p=0,l.forEach((function(t){for(var e=n[t].paths.length,r=0,o=0;o<e;o++)r+=h[p+o].byteLength;for(var a=new ArrayBuffer(r),s=new Uint8Array(a),u=0,c=0;c<e;c++){var l=new Uint8Array(h[p+c]);s.set(l,u),u+=l.byteLength}i[t].forEach((function(t){var e=Fr(a.slice(t.groupOffset,t.groupOffset+t.sizeBytes),[t.manifestEntry]);for(var n in e)d[n]=e[n]})),p+=e})),[2,d]}}))}))}}function $r(t){return null!=t.match(Ff.URL_SCHEME_REGEX)}function Zr(t,e){return new Ff(t,e)}function to(t){m(null!=t.className,(function(){return"Class being registered does not have the static className property defined."})),m("string"==typeof t.className,(function(){return"className is required to be a string, but got type "+typeof t.className})),m(t.className.length>0,(function(){return"Class being registered has an empty-string as its className, which is disallowed."})),Hf.register(t)}n.d(e,"a",(function(){return ho})),n.d(e,"b",(function(){return xo})),n.d(e,"c",(function(){return ku})),n.d(e,"d",(function(){return Tc})),n.d(e,"e",(function(){return xu})),n.d(e,"f",(function(){return zf})),n.d(e,"g",(function(){return Vs})),n.d(e,"h",(function(){return Uo})),n.d(e,"i",(function(){return hc})),n.d(e,"j",(function(){return gc})),n.d(e,"k",(function(){return Pu})),n.d(e,"l",(function(){return Xs})),n.d(e,"m",(function(){return li})),n.d(e,"n",(function(){return Te})),n.d(e,"o",(function(){return Hl})),n.d(e,"p",(function(){return Uf})),n.d(e,"q",(function(){return _c})),n.d(e,"r",(function(){return Hc})),n.d(e,"s",(function(){return kc})),n.d(e,"t",(function(){return Vu})),n.d(e,"u",(function(){return tu})),n.d(e,"v",(function(){return pi})),n.d(e,"w",(function(){return tl})),n.d(e,"x",(function(){return Ei})),n.d(e,"y",(function(){return Re})),n.d(e,"z",(function(){return bc})),n.d(e,"A",(function(){return ou})),n.d(e,"B",(function(){return Nc})),n.d(e,"C",(function(){return jc})),n.d(e,"D",(function(){return ki})),n.d(e,"E",(function(){return Si})),n.d(e,"F",(function(){return Ju})),n.d(e,"G",(function(){return _e})),n.d(e,"H",(function(){return Ce})),n.d(e,"I",(function(){return Se})),n.d(e,"J",(function(){return Oe})),n.d(e,"K",(function(){return Ae})),n.d(e,"L",(function(){return oe})),n.d(e,"M",(function(){return Oi})),n.d(e,"N",(function(){return rl})),n.d(e,"O",(function(){return Ii})),n.d(e,"P",(function(){return ke}));var eo=function(t,e){return(eo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},no=function(){function t(t){this.global=t,this.flags={},this.flagRegistry={},this.urlFlags={},this.populateURLFlags()}return t.prototype.setPlatform=function(t,e){null!=this.platform&&console.warn("Platform "+this.platformName+" has already been set. Overwriting the platform with "+e+"."),this.platformName=t,this.platform=e},t.prototype.registerFlag=function(t,e,n){if(this.flagRegistry[t]={evaluationFn:e,setHook:n},null!=this.urlFlags[t]){var r=this.urlFlags[t];console.warn("Setting feature override from URL "+t+": "+r+"."),this.set(t,r)}},t.prototype.get=function(t){return t in this.flags||(this.flags[t]=this.evaluateFlag(t)),this.flags[t]},t.prototype.getNumber=function(t){return this.get(t)},t.prototype.getBool=function(t){return this.get(t)},t.prototype.getFlags=function(){return this.flags},Object.defineProperty(t.prototype,"features",{get:function(){return this.flags},enumerable:!0,configurable:!0}),t.prototype.set=function(t,e){if(null==this.flagRegistry[t])throw new Error("Cannot set flag "+t+" as it has not been registered.");this.flags[t]=e,null!=this.flagRegistry[t].setHook&&this.flagRegistry[t].setHook(e)},t.prototype.evaluateFlag=function(t){if(null==this.flagRegistry[t])throw new Error("Cannot evaluate flag '"+t+"': no evaluation function found.");return this.flagRegistry[t].evaluationFn()},t.prototype.setFlags=function(t){this.flags=r({},t)},t.prototype.reset=function(){this.flags={},this.urlFlags={},this.populateURLFlags()},t.prototype.populateURLFlags=function(){var t=this;if(void 0!==this.global&&void 0!==this.global.location&&void 0!==this.global.location.search){var e,n=(this.global.location.search,e={},"".replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];return s(e,n[0],n[1]),n.join("=")})),e);"tfjsflags"in n&&n.tfjsflags.split(",").forEach((function(e){var n=e.split(":"),r=n[0];t.urlFlags[r]=function(t,e){if("true"===(e=e.toLowerCase())||"false"===e)return"true"===e;if(""+ +e===e)return+e;throw new Error("Could not parse value flag value "+e+" for flag "+t+".")}(r,n[1])}))}},t}(),ro=null,oo=new Map,io=new Map,ao=function(){function t(t,e){this.backendTimer=t,this.logger=e,null==e&&(this.logger=new so)}return t.prototype.profileKernel=function(t,e,n){var r,o=this,i=this.backendTimer.time((function(){r=n()}));return r.forEach((function(n){n.data().then((function(r){!function(t,e,n){if("float32"!==e)return!1;for(var r=0;r<t.length;r++){var o=t[r];if(isNaN(o)||!isFinite(o))return console.warn("Found "+o+" in the result of '"+n+"'"),!0}}(r,n.dtype,t),i.then((function(i){var a="";null!=i.getExtraProfileInfo&&(a=i.getExtraProfileInfo()),o.logger.logKernelProfile(t,n,r,i.kernelMs,e,a)}))}))})),r},t}(),so=function(){function t(){}return t.prototype.logKernelProfile=function(t,e,n,r,o,i){var a="number"==typeof r?S(r+"ms",9):r.error,s=S(t,25),u=e.rank,c=e.size,l=S(e.shape.toString(),14),f="";for(var h in o){var d=o[h].shape||e.shape,p=d.length;f+=h+": "+p+"D "+(p>0?d:"")+" "}console.log("%c"+s+"\t%c"+a+"\t%c"+u+"D "+l+"\t%c"+c+"\t%c"+f+"\t%c"+i,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")},t}(),uo=function(){function t(t,e,n){var r=this;if(this.dtype=e,this.shape=t.slice(),this.size=w(t),null!=n){var o=n.length;m(o===this.size,(function(){return"Length of values '"+o+"' does not match the size inferred by the shape '"+r.size+"'."}))}if("complex64"===e)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=n||M(e,this.size),this.strides=H(t)}return t.prototype.set=function(t){for(var e=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];0===n.length&&(n=[0]),m(n.length===this.rank,(function(){return"The number of provided coordinates ("+n.length+") must match the rank ("+e.rank+")"}));var o=this.locToIndex(n);this.values[o]=t},t.prototype.get=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];0===t.length&&(t=[0]);for(var n=0,r=0,o=t;r<o.length;r++){var i=o[r];if(i<0||i>=this.shape[n]){var a="Requested out of range element at "+t+".   Buffer shape="+this.shape;throw new Error(a)}n++}for(var s=t[t.length-1],u=0;u<t.length-1;++u)s+=this.strides[u]*t[u];return this.values[s]},t.prototype.locToIndex=function(t){if(0===this.rank)return 0;if(1===this.rank)return t[0];for(var e=t[t.length-1],n=0;n<t.length-1;++n)e+=this.strides[n]*t[n];return e},t.prototype.indexToLoc=function(t){if(0===this.rank)return[];if(1===this.rank)return[t];for(var e=new Array(this.shape.length),n=0;n<e.length-1;++n)e[n]=Math.floor(t/this.strides[n]),t-=e[n]*this.strides[n];return e[e.length-1]=t,e},Object.defineProperty(t.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),t.prototype.toTensor=function(){return co().makeTensor(this.values,this.shape,this.dtype)},t}(),co=null,lo=null,fo=null,ho=function(){function t(t,e,n,r){this.kept=!1,this.isDisposedInternal=!1,this.shape=t.slice(),this.dtype=e||"float32",this.size=w(t),this.strides=H(t),this.dataId=n,this.id=r,this.rankType=this.rank<5?this.rank.toString():"higher"}return t.prototype.flatten=function(){return this.throwIfDisposed(),this.as1D()},t.prototype.asScalar=function(){return this.throwIfDisposed(),m(1===this.size,(function(){return"The array must have only 1 element."})),this.reshape([])},t.prototype.as1D=function(){return this.throwIfDisposed(),this.reshape([this.size])},t.prototype.as2D=function(t,e){return this.throwIfDisposed(),this.reshape([t,e])},t.prototype.as3D=function(t,e,n){return this.throwIfDisposed(),this.reshape([t,e,n])},t.prototype.as4D=function(t,e,n,r){return this.throwIfDisposed(),this.reshape([t,e,n,r])},t.prototype.as5D=function(t,e,n,r,o){return this.throwIfDisposed(),this.reshape([t,e,n,r,o])},t.prototype.asType=function(t){return this.throwIfDisposed(),lo.cast(this,t)},Object.defineProperty(t.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),t.prototype.buffer=function(){return i(this,void 0,void 0,(function(){var t;return a(this,(function(e){switch(e.label){case 0:return[4,this.data()];case 1:return t=e.sent(),[2,lo.buffer(this.shape,this.dtype,t)]}}))}))},t.prototype.bufferSync=function(){return lo.buffer(this.shape,this.dtype,this.dataSync())},t.prototype.array=function(){return i(this,void 0,void 0,(function(){var t;return a(this,(function(e){switch(e.label){case 0:return[4,this.data()];case 1:return t=e.sent(),[2,K(this.shape,t)]}}))}))},t.prototype.arraySync=function(){return K(this.shape,this.dataSync())},t.prototype.data=function(){return i(this,void 0,void 0,(function(){var t,e;return a(this,(function(n){switch(n.label){case 0:return this.throwIfDisposed(),t=co().read(this.dataId),"string"!==this.dtype?[3,2]:[4,t];case 1:e=n.sent();try{return[2,e.map((function(t){return Z(t)}))]}catch(t){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}n.label=2;case 2:return[2,t]}}))}))},t.prototype.dataSync=function(){this.throwIfDisposed();var t=co().readSync(this.dataId);if("string"===this.dtype)try{return t.map((function(t){return Z(t)}))}catch(t){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return t},t.prototype.bytes=function(){return i(this,void 0,void 0,(function(){var t;return a(this,(function(e){switch(e.label){case 0:return this.throwIfDisposed(),[4,co().read(this.dataId)];case 1:return t=e.sent(),"string"===this.dtype?[2,t]:[2,new Uint8Array(t.buffer)]}}))}))},t.prototype.dispose=function(){this.isDisposed||(co().disposeTensor(this),this.isDisposedInternal=!0)},Object.defineProperty(t.prototype,"isDisposed",{get:function(){return this.isDisposedInternal},enumerable:!0,configurable:!0}),t.prototype.throwIfDisposed=function(){if(this.isDisposed)throw new Error("Tensor is disposed.")},t.prototype.toFloat=function(){return this.asType("float32")},t.prototype.toInt=function(){return this.asType("int32")},t.prototype.toBool=function(){return this.asType("bool")},t.prototype.print=function(t){return void 0===t&&(t=!1),lo.print(this,t)},t.prototype.reshape=function(t){return this.throwIfDisposed(),lo.reshape(this,t)},t.prototype.reshapeAs=function(t){return this.throwIfDisposed(),this.reshape(t.shape)},t.prototype.expandDims=function(t){return void 0===t&&(t=0),lo.expandDims(this,t)},t.prototype.cumsum=function(t,e,n){return void 0===t&&(t=0),void 0===e&&(e=!1),void 0===n&&(n=!1),lo.cumsum(this,t,e,n)},t.prototype.squeeze=function(t){return this.throwIfDisposed(),lo.squeeze(this,t)},t.prototype.clone=function(){return this.throwIfDisposed(),lo.clone(this)},t.prototype.oneHot=function(t,e,n){return this.throwIfDisposed(),lo.oneHot(this,t,e,n)},t.prototype.toString=function(t){return void 0===t&&(t=!1),function(t,e,n,r){var o=H(e),i=function(t,e,n,r){var o=w(e),i=r[r.length-1],a=new Array(i).fill(0),s=e.length,u="complex64"===n?ot(t):t;if(s>1)for(var c=0;c<o/i;c++)for(var l=c*i,f=0;f<i;f++)a[f]=Math.max(a[f],nt(u[l+f],0,n).length);return a}(t,e,n,o),a=e.length,s=function t(e,n,r,o,i,a){void 0===a&&(a=!0);var s="complex64"===r?2:1,u=n[0],c=n.length;if(0===c)return"complex64"===r?[nt(ot(e)[0],0,r)]:"bool"===r?[rt(e[0])]:[e[0].toString()];if(1===c){if(u>20){var l=Array.from(e.slice(0,3*s)),f=Array.from(e.slice((u-3)*s,u*s));return"complex64"===r&&(l=ot(l),f=ot(f)),["["+l.map((function(t,e){return nt(t,i[e],r)})).join(", ")+", ..., "+f.map((function(t,e){return nt(t,i[u-3+e],r)})).join(", ")+"]"]}return["["+("complex64"===r?ot(e):Array.from(e)).map((function(t,e){return nt(t,i[e],r)})).join(", ")+"]"]}var h=n.slice(1),d=o.slice(1),p=o[0]*s,v=[];if(u>20){for(var g=0;g<3;g++){var m=(y=g*p)+p;v.push.apply(v,t(e.slice(y,m),h,r,d,i,!1))}for(v.push("..."),g=u-3;g<u;g++)m=(y=g*p)+p,v.push.apply(v,t(e.slice(y,m),h,r,d,i,g===u-1))}else for(g=0;g<u;g++){var y;m=(y=g*p)+p,v.push.apply(v,t(e.slice(y,m),h,r,d,i,g===u-1))}var b=2===c?",":"";for(v[0]="["+v[0]+b,g=1;g<v.length-1;g++)v[g]=" "+v[g]+b;var x=",\n";for(g=2;g<c;g++)x+="\n";return v[v.length-1]=" "+v[v.length-1]+"]"+(a?"":x),v}(t,e,n,o,i),u=["Tensor"];return r&&(u.push("  dtype: "+n),u.push("  rank: "+a),u.push("  shape: ["+e+"]"),u.push("  values:")),u.push(s.map((function(t){return"    "+t})).join("\n")),u.join("\n")}(this.dataSync(),this.shape,this.dtype,t)},t.prototype.tile=function(t){return this.throwIfDisposed(),lo.tile(this,t)},t.prototype.gather=function(t,e){return void 0===e&&(e=0),this.throwIfDisposed(),lo.gather(this,t,e)},t.prototype.matMul=function(t,e,n){return void 0===e&&(e=!1),void 0===n&&(n=!1),this.throwIfDisposed(),lo.matMul(this,t,e,n)},t.prototype.dot=function(t){return this.throwIfDisposed(),lo.dot(this,t)},t.prototype.norm=function(t,e,n){return void 0===t&&(t="euclidean"),void 0===e&&(e=null),void 0===n&&(n=!1),this.throwIfDisposed(),lo.norm(this,t,e,n)},t.prototype.slice=function(t,e){return this.throwIfDisposed(),lo.slice(this,t,e)},t.prototype.reverse=function(t){return this.throwIfDisposed(),lo.reverse(this,t)},t.prototype.concat=function(e,n){return void 0===n&&(n=0),this.throwIfDisposed(),e instanceof t&&(e=[e]),lo.concat([this].concat(e),n)},t.prototype.split=function(t,e){return void 0===e&&(e=0),this.throwIfDisposed(),lo.split(this,t,e)},t.prototype.stack=function(t,e){return void 0===e&&(e=0),lo.stack([this,t],e)},t.prototype.unstack=function(t){return void 0===t&&(t=0),lo.unstack(this,t)},t.prototype.pad=function(t,e){return void 0===e&&(e=0),lo.pad(this,t,e)},t.prototype.batchNormalization=function(t,e,n,r,o){return void 0===n&&(n=.001),fo("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon"),this.batchNorm(t,e,o,r,n)},t.prototype.batchNorm=function(t,e,n,r,o){return void 0===o&&(o=.001),this.throwIfDisposed(),lo.batchNorm(this,t,e,n,r,o)},t.prototype.all=function(t,e){return void 0===t&&(t=null),void 0===e&&(e=!1),this.throwIfDisposed(),lo.all(this,t,e)},t.prototype.any=function(t,e){return void 0===t&&(t=null),void 0===e&&(e=!1),this.throwIfDisposed(),lo.any(this,t,e)},t.prototype.logSumExp=function(t,e){return void 0===t&&(t=null),void 0===e&&(e=!1),this.throwIfDisposed(),lo.logSumExp(this,t,e)},t.prototype.sum=function(t,e){return void 0===t&&(t=null),void 0===e&&(e=!1),this.throwIfDisposed(),lo.sum(this,t,e)},t.prototype.prod=function(t,e){return void 0===t&&(t=null),void 0===e&&(e=!1),this.throwIfDisposed(),lo.prod(this,t,e)},t.prototype.mean=function(t,e){return void 0===t&&(t=null),void 0===e&&(e=!1),this.throwIfDisposed(),lo.mean(this,t,e)},t.prototype.min=function(t,e){return void 0===t&&(t=null),void 0===e&&(e=!1),this.throwIfDisposed(),lo.min(this,t,e)},t.prototype.max=function(t,e){return void 0===t&&(t=null),void 0===e&&(e=!1),this.throwIfDisposed(),lo.max(this,t,e)},t.prototype.argMin=function(t){return void 0===t&&(t=null),this.throwIfDisposed(),lo.argMin(this,t)},t.prototype.argMax=function(t){return void 0===t&&(t=null),this.throwIfDisposed(),lo.argMax(this,t)},t.prototype.cast=function(t){return this.throwIfDisposed(),lo.cast(this,t)},t.prototype.add=function(t){return this.throwIfDisposed(),lo.add(this,t)},t.prototype.addStrict=function(t){return this.throwIfDisposed(),lo.addStrict(this,t)},t.prototype.atan2=function(t){return this.throwIfDisposed(),lo.atan2(this,t)},t.prototype.sub=function(t){return this.throwIfDisposed(),lo.sub(this,t)},t.prototype.subStrict=function(t){return this.throwIfDisposed(),lo.subStrict(this,t)},t.prototype.pow=function(t){return this.throwIfDisposed(),lo.pow(this,t)},t.prototype.powStrict=function(t){return this.throwIfDisposed(),lo.powStrict(this,t)},t.prototype.mul=function(t){return this.throwIfDisposed(),lo.mul(this,t)},t.prototype.mulStrict=function(t){return this.throwIfDisposed(),lo.mulStrict(this,t)},t.prototype.div=function(t){return this.throwIfDisposed(),lo.div(this,t)},t.prototype.divNoNan=function(t){return this.throwIfDisposed(),lo.divNoNan(this,t)},t.prototype.floorDiv=function(t){return this.throwIfDisposed(),lo.floorDiv(this,t)},t.prototype.divStrict=function(t){return this.throwIfDisposed(),lo.divStrict(this,t)},t.prototype.minimum=function(t){return this.throwIfDisposed(),lo.minimum(this,t)},t.prototype.minimumStrict=function(t){return this.throwIfDisposed(),lo.minimumStrict(this,t)},t.prototype.maximum=function(t){return this.throwIfDisposed(),lo.maximum(this,t)},t.prototype.maximumStrict=function(t){return this.throwIfDisposed(),lo.maximumStrict(this,t)},t.prototype.mod=function(t){return this.throwIfDisposed(),lo.mod(this,t)},t.prototype.modStrict=function(t){return this.throwIfDisposed(),lo.modStrict(this,t)},t.prototype.squaredDifferenceStrict=function(t){return this.throwIfDisposed(),lo.squaredDifferenceStrict(this,t)},t.prototype.transpose=function(t){return this.throwIfDisposed(),lo.transpose(this,t)},t.prototype.notEqual=function(t){return this.throwIfDisposed(),lo.notEqual(this,t)},t.prototype.notEqualStrict=function(t){return this.throwIfDisposed(),lo.notEqualStrict(this,t)},t.prototype.less=function(t){return this.throwIfDisposed(),lo.less(this,t)},t.prototype.lessStrict=function(t){return this.throwIfDisposed(),lo.lessStrict(this,t)},t.prototype.equal=function(t){return this.throwIfDisposed(),lo.equal(this,t)},t.prototype.equalStrict=function(t){return this.throwIfDisposed(),lo.equalStrict(this,t)},t.prototype.lessEqual=function(t){return this.throwIfDisposed(),lo.lessEqual(this,t)},t.prototype.lessEqualStrict=function(t){return this.throwIfDisposed(),lo.lessEqualStrict(this,t)},t.prototype.greater=function(t){return this.throwIfDisposed(),lo.greater(this,t)},t.prototype.greaterStrict=function(t){return this.throwIfDisposed(),lo.greaterStrict(this,t)},t.prototype.greaterEqual=function(t){return this.throwIfDisposed(),lo.greaterEqual(this,t)},t.prototype.greaterEqualStrict=function(t){return this.throwIfDisposed(),lo.greaterEqualStrict(this,t)},t.prototype.logicalAnd=function(t){return this.throwIfDisposed(),lo.logicalAnd(this,t)},t.prototype.logicalOr=function(t){return this.throwIfDisposed(),lo.logicalOr(this,t)},t.prototype.logicalNot=function(){return this.throwIfDisposed(),lo.logicalNot(this)},t.prototype.logicalXor=function(t){return this.throwIfDisposed(),lo.logicalXor(this,t)},t.prototype.where=function(t,e){return this.throwIfDisposed(),lo.where(t,this,e)},t.prototype.neg=function(){return this.throwIfDisposed(),lo.neg(this)},t.prototype.ceil=function(){return this.throwIfDisposed(),lo.ceil(this)},t.prototype.floor=function(){return this.throwIfDisposed(),lo.floor(this)},t.prototype.sign=function(){return this.throwIfDisposed(),lo.sign(this)},t.prototype.isNaN=function(){return this.throwIfDisposed(),lo.isNaN(this)},t.prototype.isInf=function(){return this.throwIfDisposed(),lo.isInf(this)},t.prototype.isFinite=function(){return this.throwIfDisposed(),lo.isFinite(this)},t.prototype.exp=function(){return this.throwIfDisposed(),lo.exp(this)},t.prototype.expm1=function(){return this.throwIfDisposed(),lo.expm1(this)},t.prototype.log=function(){return this.throwIfDisposed(),lo.log(this)},t.prototype.log1p=function(){return this.throwIfDisposed(),lo.log1p(this)},t.prototype.sqrt=function(){return this.throwIfDisposed(),lo.sqrt(this)},t.prototype.rsqrt=function(){return this.throwIfDisposed(),lo.rsqrt(this)},t.prototype.square=function(){return this.throwIfDisposed(),lo.square(this)},t.prototype.reciprocal=function(){return this.throwIfDisposed(),lo.reciprocal(this)},t.prototype.abs=function(){return this.throwIfDisposed(),lo.abs(this)},t.prototype.clipByValue=function(t,e){return this.throwIfDisposed(),lo.clipByValue(this,t,e)},t.prototype.relu=function(){return this.throwIfDisposed(),lo.relu(this)},t.prototype.relu6=function(){return this.throwIfDisposed(),lo.relu6(this)},t.prototype.elu=function(){return this.throwIfDisposed(),lo.elu(this)},t.prototype.selu=function(){return this.throwIfDisposed(),lo.selu(this)},t.prototype.leakyRelu=function(t){return void 0===t&&(t=.2),this.throwIfDisposed(),lo.leakyRelu(this,t)},t.prototype.prelu=function(t){return this.throwIfDisposed(),lo.prelu(this,t)},t.prototype.sigmoid=function(){return this.throwIfDisposed(),lo.sigmoid(this)},t.prototype.logSigmoid=function(){return this.throwIfDisposed(),lo.logSigmoid(this)},t.prototype.softplus=function(){return this.throwIfDisposed(),lo.softplus(this)},t.prototype.zerosLike=function(){return this.throwIfDisposed(),lo.zerosLike(this)},t.prototype.onesLike=function(){return this.throwIfDisposed(),lo.onesLike(this)},t.prototype.sin=function(){return this.throwIfDisposed(),lo.sin(this)},t.prototype.cos=function(){return this.throwIfDisposed(),lo.cos(this)},t.prototype.tan=function(){return this.throwIfDisposed(),lo.tan(this)},t.prototype.asin=function(){return this.throwIfDisposed(),lo.asin(this)},t.prototype.acos=function(){return this.throwIfDisposed(),lo.acos(this)},t.prototype.atan=function(){return this.throwIfDisposed(),lo.atan(this)},t.prototype.sinh=function(){return this.throwIfDisposed(),lo.sinh(this)},t.prototype.cosh=function(){return this.throwIfDisposed(),lo.cosh(this)},t.prototype.tanh=function(){return this.throwIfDisposed(),lo.tanh(this)},t.prototype.asinh=function(){return this.throwIfDisposed(),lo.asinh(this)},t.prototype.acosh=function(){return this.throwIfDisposed(),lo.acosh(this)},t.prototype.atanh=function(){return this.throwIfDisposed(),lo.atanh(this)},t.prototype.erf=function(){return this.throwIfDisposed(),lo.erf(this)},t.prototype.round=function(){return this.throwIfDisposed(),lo.round(this)},t.prototype.step=function(t){return void 0===t&&(t=0),this.throwIfDisposed(),lo.step(this,t)},t.prototype.softmax=function(t){return void 0===t&&(t=-1),this.throwIfDisposed(),lo.softmax(this,t)},t.prototype.logSoftmax=function(t){return void 0===t&&(t=-1),this.throwIfDisposed(),lo.logSoftmax(this,t)},t.prototype.resizeBilinear=function(t,e){return void 0===e&&(e=!1),this.throwIfDisposed(),lo.image.resizeBilinear(this,t,e)},t.prototype.resizeNearestNeighbor=function(t,e){return void 0===e&&(e=!1),this.throwIfDisposed(),lo.image.resizeNearestNeighbor(this,t,e)},t.prototype.conv1d=function(t,e,n,r,o,i){return void 0===r&&(r="NWC"),void 0===o&&(o=1),this.throwIfDisposed(),lo.conv1d(this,t,e,n,r,o,i)},t.prototype.conv2d=function(t,e,n,r,o,i){return void 0===r&&(r="NHWC"),void 0===o&&(o=[1,1]),this.throwIfDisposed(),lo.conv2d(this,t,e,n,r,o,i)},t.prototype.conv2dTranspose=function(t,e,n,r,o){return this.throwIfDisposed(),lo.conv2dTranspose(this,t,e,n,r,o)},t.prototype.depthwiseConv2D=function(t,e,n,r,o,i){return void 0===r&&(r="NHWC"),void 0===o&&(o=[1,1]),this.throwIfDisposed(),lo.depthwiseConv2d(this,t,e,n,r,o,i)},t.prototype.separableConv2d=function(t,e,n,r,o,i){return void 0===o&&(o=[1,1]),void 0===i&&(i="NHWC"),this.throwIfDisposed(),lo.separableConv2d(this,t,e,n,r,o,i)},t.prototype.avgPool=function(t,e,n,r){return this.throwIfDisposed(),lo.avgPool(this,t,e,n,r)},t.prototype.maxPool=function(t,e,n,r){return this.throwIfDisposed(),lo.maxPool(this,t,e,n,r)},t.prototype.localResponseNormalization=function(t,e,n,r){return void 0===t&&(t=5),void 0===e&&(e=1),void 0===n&&(n=1),void 0===r&&(r=.5),lo.localResponseNormalization(this,t,e,n,r)},t.prototype.pool=function(t,e,n,r,o){return this.throwIfDisposed(),lo.pool(this,t,e,n,r,o)},t.prototype.variable=function(t,e,n){return void 0===t&&(t=!0),this.throwIfDisposed(),co().makeVariable(this,t,e,n)},t.prototype.unsortedSegmentSum=function(t,e){return this.throwIfDisposed(),lo.unsortedSegmentSum(this,t,e)},t.prototype.batchToSpaceND=function(t,e){return this.throwIfDisposed(),lo.batchToSpaceND(this,t,e)},t.prototype.spaceToBatchND=function(t,e){return this.throwIfDisposed(),lo.spaceToBatchND(this,t,e)},t.prototype.topk=function(t,e){return void 0===t&&(t=1),void 0===e&&(e=!0),this.throwIfDisposed(),lo.topk(this,t,e)},t.prototype.stridedSlice=function(t,e,n,r,o,i,a,s){return void 0===r&&(r=0),void 0===o&&(o=0),void 0===i&&(i=0),void 0===a&&(a=0),void 0===s&&(s=0),this.throwIfDisposed(),lo.stridedSlice(this,t,e,n,r,o,i,a,s)},t.prototype.depthToSpace=function(t,e){return this.throwIfDisposed(),lo.depthToSpace(this,t,e)},t.prototype.fft=function(){return this.throwIfDisposed(),lo.spectral.fft(this)},t.prototype.ifft=function(){return this.throwIfDisposed(),lo.spectral.ifft(this)},t.prototype.rfft=function(){return this.throwIfDisposed(),lo.spectral.rfft(this)},t.prototype.irfft=function(){return this.throwIfDisposed(),lo.spectral.irfft(this)},t}();Object.defineProperty(ho,Symbol.hasInstance,{value:function(t){return!!t&&null!=t.dataId&&null!=t.shape&&null!=t.dtype}});var po,vo,go,mo,yo,bo,xo=function(t){function e(e,n,r,o){var i=t.call(this,e.shape,e.dtype,e.dataId,o)||this;return i.trainable=n,i.name=r,i}return o(e,t),e.prototype.assign=function(t){if(t.dtype!==this.dtype)throw new Error("dtype of the new value ("+t.dtype+") and previous value ("+this.dtype+") must match");if(!_(t.shape,this.shape))throw new Error("shape of the new value ("+t.shape+") and previous value ("+this.shape+") must match");co().disposeTensor(this),this.dataId=t.dataId,co().incRef(this,null)},e.prototype.dispose=function(){co().disposeVariable(this),this.isDisposedInternal=!0},e}(ho);Object.defineProperty(xo,Symbol.hasInstance,{value:function(t){return t instanceof ho&&null!=t.assign&&t.assign instanceof Function}}),(bo=po||(po={})).R0="R0",bo.R1="R1",bo.R2="R2",bo.R3="R3",bo.R4="R4",bo.R5="R5",bo.R6="R6",function(t){t.float32="float32",t.int32="int32",t.bool="int32",t.complex64="complex64"}(vo||(vo={})),function(t){t.float32="float32",t.int32="int32",t.bool="bool",t.complex64="complex64"}(go||(go={})),function(t){t.float32="float32",t.int32="float32",t.bool="float32",t.complex64="complex64"}(mo||(mo={})),function(t){t.float32="complex64",t.int32="complex64",t.bool="complex64",t.complex64="complex64"}(yo||(yo={}));var wo,_o={float32:mo,int32:vo,bool:go,complex64:yo},Eo=function(){function t(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null}}return t.prototype.dispose=function(){for(var t in this.registeredVariables)this.registeredVariables[t].dispose()},t}(),Ro=function(){function t(t){this.ENV=t,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new Eo}return t.prototype.ready=function(){return i(this,void 0,void 0,(function(){var t,e,n;return a(this,(function(r){switch(r.label){case 0:if(null!=this.pendingBackendInit)return[2,this.pendingBackendInit.then((function(){}))];if(null!=this.backendInstance)return[2];t=this.getSortedBackends(),e=0,r.label=1;case 1:return e<t.length?[4,this.initializeBackend(n=t[e]).success]:[3,5];case 2:return r.sent()?[4,this.setBackend(n)]:[3,4];case 3:return r.sent(),[2];case 4:return e++,[3,1];case 5:throw new Error("Could not initialize any backends, all backend initializations failed.")}}))}))},Object.defineProperty(t.prototype,"backend",{get:function(){if(null!=this.pendingBackendInit)throw new Error("Backend '"+this.backendName+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");if(null==this.backendInstance){var t=this.initializeBackendsAndReturnBest(),e=t.name;if(t.asyncInit)throw new Error("The highest priority backend '"+e+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(e)}return this.backendInstance},enumerable:!0,configurable:!0}),t.prototype.backendNames=function(){return Object.keys(this.registryFactory)},t.prototype.findBackend=function(t){if(!(t in this.registry)){if(!(t in this.registryFactory))return null;if(this.initializeBackend(t).asyncInit)return null}return this.registry[t]},t.prototype.findBackendFactory=function(t){return t in this.registryFactory?this.registryFactory[t].factory:null},t.prototype.registerBackend=function(t,e,n){return void 0===n&&(n=1),t in this.registryFactory?(console.warn(t+" backend was already registered. Reusing existing backend factory."),!1):(this.registryFactory[t]={factory:e,priority:n},!0)},t.prototype.setBackend=function(t){return i(this,void 0,void 0,(function(){var e,n,r;return a(this,(function(o){switch(o.label){case 0:if(null==this.registryFactory[t])throw new Error("Backend name '"+t+"' not found in registry");return this.backendName=t,null!=this.registry[t]?[3,4]:(this.backendInstance=null,e=this.initializeBackend(t),n=e.success,e.asyncInit?[4,n]:[3,2]);case 1:return r=o.sent(),[3,3];case 2:r=n,o.label=3;case 3:if(!r)return[2,!1];o.label=4;case 4:return this.backendInstance=this.registry[t],this.setupRegisteredKernels(),this.profiler=new ao(this.backendInstance),[2,!0]}}))}))},t.prototype.setupRegisteredKernels=function(){var t=this;l(this.backendName).forEach((function(e){null!=e.setupFunc&&e.setupFunc(t.backendInstance)}))},t.prototype.disposeRegisteredKernels=function(t){var e=this;l(t).forEach((function(n){null!=n.disposeFunc&&n.disposeFunc(e.registry[t])}))},t.prototype.initializeBackend=function(t){var e=this,n=this.registryFactory[t];if(null==n)throw new Error("Cannot initialize backend "+t+", no registration found.");try{var r=n.factory();if(Promise.resolve(r)===r){var o=++this.pendingBackendInitId,i=r.then((function(n){return!(o<e.pendingBackendInitId||(e.registry[t]=n,e.pendingBackendInit=null,0))})).catch((function(n){return!(o<e.pendingBackendInitId||(e.pendingBackendInit=null,console.warn("Initialization of backend "+t+" failed"),console.warn(n.stack||n.message),1))}));return this.pendingBackendInit=i,{success:i,asyncInit:!0}}return this.registry[t]=r,{success:!0,asyncInit:!1}}catch(e){return console.warn("Initialization of backend "+t+" failed"),console.warn(e.stack||e.message),{success:!1,asyncInit:!1}}},t.prototype.removeBackend=function(t){if(!(t in this.registryFactory))throw new Error(t+" backend not found in registry");this.backendName===t&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,t in this.registry&&(this.disposeRegisteredKernels(t),this.registry[t].dispose(),delete this.registry[t]),delete this.registryFactory[t],this.backendName===t&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)},t.prototype.getSortedBackends=function(){var t=this;if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((function(e,n){return t.registryFactory[n].priority-t.registryFactory[e].priority}))},t.prototype.initializeBackendsAndReturnBest=function(){for(var t=this.getSortedBackends(),e=0;e<t.length;e++){var n=t[e],r=this.initializeBackend(n),o=r.asyncInit;if(o||r.success)return{name:n,asyncInit:o}}throw new Error("Could not initialize any backends, all backend initializations failed.")},t.prototype.moveData=function(t,e){var n=this.state.tensorInfo.get(e),r=n.backend,o=this.readSync(e);r.disposeData(e),n.backend=t,t.move(e,o,n.shape,n.dtype),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++},t.prototype.tidy=function(t,e){var n,r=this,o=null;if(null==e){if("function"!=typeof t)throw new Error("Please provide a function to tidy()");e=t}else{if("string"!=typeof t&&!(t instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!=typeof e)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");o=t}return this.scopedRun((function(){return r.startScope(o)}),(function(){return r.endScope(n)}),(function(){return(n=e())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),n}))},t.prototype.scopedRun=function(t,e,n){t();try{var r=n();return e(),r}catch(t){throw e(),t}},t.prototype.nextTensorId=function(){return t.nextTensorId++},t.prototype.nextVariableId=function(){return t.nextVariableId++},t.prototype.clone=function(t){var e=this.makeTensorFromDataId(t.dataId,t.shape,t.dtype);return this.addTapeNode(this.state.activeScope.name,{x:t},[e],(function(t){return{x:function(){return t.toFloat()}}}),[]),e},t.prototype.runKernel=function(t,e,n,r,o){return this.runKernelFunc(null,e,null,t,n,r,o)},t.prototype.shouldCheckForMemLeaks=function(){return this.ENV.getBool("IS_TEST")},t.prototype.checkKernelForMemLeak=function(t,e,n){var r=this.backend.numDataIds(),o=0;n.forEach((function(t){o+="complex64"===t.dtype?3:1}));var i=r-e-o-this.state.numDataMovesStack[this.state.numDataMovesStack.length-1];if(i>0)throw new Error("Backend '"+this.backendName+"' has an internal memory leak ("+i+" data ids) after running '"+t+"'")},t.prototype.runKernelFunc=function(t,e,n,r,o,i,a){var s,u=this;void 0===i&&(i=[]),void 0===a&&(a=[]);var l=[],f=this.isTapeOn();null==r&&(r=null!=this.state.activeScope?this.state.activeScope.name:"");var h,d=function(t){f&&(l=t.map((function(t){return u.keep(u.clone(t))})))},p=this.state.numBytes,v=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);var g,m=c(r,this.backendName);return h=null!=m?function(){var t=u.backend.numDataIds();g=m.kernelFunc({inputs:e,attrs:o,backend:u.backend});var n=Array.isArray(g)?g:[g];u.shouldCheckForMemLeaks()&&u.checkKernelForMemLeak(r,t,n);var s=n.map((function(t){return u.makeTensorFromDataId(t.dataId,t.shape,t.dtype)})),c=s.filter((function(t,e){return a[e]}));return d((i||[]).slice().concat(c)),s}:function(){var e=u.backend.numDataIds();g=u.tidy((function(){return t(u.backend,d)}));var n=Array.isArray(g)?g:[g];return u.shouldCheckForMemLeaks()&&u.checkKernelForMemLeak(r,e,n),n},this.scopedRun((function(){return u.state.kernelDepth++}),(function(){return u.state.kernelDepth--}),(function(){s=u.ENV.getBool("DEBUG")?u.profiler.profileKernel(r,e,(function(){return h()})):h()})),f&&this.addTapeNode(r,e,s,n,l),this.state.profiling&&this.state.activeProfile.kernels.push({name:r,bytesAdded:this.state.numBytes-p,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-v,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(e).map((function(t){return e[t].shape})),outputShapes:s.map((function(t){return t.shape}))}),Array.isArray(g)?s:s[0]},t.prototype.makeTensor=function(t,e,n,r){if(null==t)throw new Error("Values passed to engine.makeTensor() are null");r=r||this.backend;var o=t;"string"===(n=n||"float32")&&B(t[0])&&(o=t.map((function(t){return $(t)})));var i=r.write(o,e,n),a=new ho(e,n,i,this.nextTensorId());if(this.incRef(a,r),"string"===n){var s=this.state.tensorInfo.get(i),u=j(o);this.state.numBytes+=u-s.bytes,s.bytes=u}return a},t.prototype.makeTensorFromDataId=function(t,e,n,r){var o=new ho(e,n=n||"float32",t,this.nextTensorId());return this.incRef(o,r),o},t.prototype.makeVariable=function(t,e,n,r){void 0===e&&(e=!0),n=n||this.nextVariableId().toString(),null!=r&&r!==t.dtype&&(t=t.asType(r));var o=new xo(t,e,n,this.nextTensorId());if(null!=this.state.registeredVariables[o.name])throw new Error("Variable with name "+o.name+" was already registered");return this.state.registeredVariables[o.name]=o,this.incRef(o,this.backend),o},t.prototype.incRef=function(t,e){var n=this.state.tensorInfo.has(t.dataId)?this.state.tensorInfo.get(t.dataId).refCount:0;if(this.state.numTensors++,"string"===t.dtype&&this.state.numStringTensors++,0===n){this.state.numDataBuffers++;var r=0;"complex64"!==t.dtype&&"string"!==t.dtype&&(r=t.size*L(t.dtype)),this.state.tensorInfo.set(t.dataId,{backend:e||this.backend,dtype:t.dtype,shape:t.shape,bytes:r,refCount:0}),this.state.numBytes+=r}this.state.tensorInfo.get(t.dataId).refCount++,t instanceof xo||this.track(t)},t.prototype.disposeTensor=function(t){if(this.state.tensorInfo.has(t.dataId)){this.state.numTensors--,"string"===t.dtype&&this.state.numStringTensors--;var e=this.state.tensorInfo.get(t.dataId);e.refCount<=1?("complex64"!==t.dtype&&(this.state.numBytes-=e.bytes),this.state.numDataBuffers--,e.backend.disposeData(t.dataId),this.state.tensorInfo.delete(t.dataId)):this.state.tensorInfo.get(t.dataId).refCount--}},t.prototype.disposeVariables=function(){for(var t in this.state.registeredVariables){this.disposeVariable(this.state.registeredVariables[t])}},t.prototype.disposeVariable=function(t){this.disposeTensor(t),null!=this.state.registeredVariables[t.name]&&delete this.state.registeredVariables[t.name]},t.prototype.memory=function(){var t=this.backend.memory();return t.numTensors=this.state.numTensors,t.numDataBuffers=this.state.numDataBuffers,t.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(t.unreliable=!0,null==t.reasons&&(t.reasons=[]),t.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),t},t.prototype.profile=function(t){return i(this,void 0,void 0,(function(){var e,n;return a(this,(function(){return this.state.profiling=!0,e=this.state.numBytes,n=this.state.numTensors,this.state.activeProfile.kernels=[],this.state.activeProfile.result=t(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,this.state.activeProfile.kernels.map((function(t){return t.totalBytesSnapshot}))),this.state.activeProfile.newBytes=this.state.numBytes-e,this.state.activeProfile.newTensors=this.state.numTensors-n,[2,this.state.activeProfile]}))}))},t.prototype.isTapeOn=function(){return this.state.gradientDepth>0&&0===this.state.kernelDepth},t.prototype.addTapeNode=function(t,e,n,r,o){var i=this,a={id:this.state.nextTapeNodeId++,kernelName:t,inputs:e,outputs:n,saved:o},s=function(t){return io.get(t)}(t);null!=s&&(r=s.gradFunc),null!=r&&(a.gradient=function(t){return t=t.map((function(t,e){if(null==t){var r=n[e],o=J(r.size,r.dtype);return i.makeTensor(o,r.shape,r.dtype)}return t})),r(t.length>1?t:t[0],o)}),this.state.activeTape.push(a)},t.prototype.keep=function(t){return t.kept=!0,t},t.prototype.startTape=function(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++},t.prototype.endTape=function(){this.state.gradientDepth--},t.prototype.startScope=function(t){var e={track:[],name:"unnamed scope",id:this.state.nextScopeId++};t&&(e.name=t),this.state.scopeStack.push(e),this.state.activeScope=e},t.prototype.endScope=function(t){for(var e=this,n=ct(t),r=new Set(n.map((function(t){return t.id}))),o=0;o<this.state.activeScope.track.length;o++){var i=this.state.activeScope.track[o];i.kept||r.has(i.id)||i.dispose()}var a=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach((function(t){t.kept||t.scopeId!==a.id||e.track(t)}))},t.prototype.gradients=function(t,e,n,o){var i=this;if(void 0===o&&(o=!1),m(e.length>0,(function(){return"gradients() received an empty list of xs."})),null!=n&&"float32"!==n.dtype)throw new Error("dy must have 'float32' dtype, but has '"+n.dtype+"'");var a=this.scopedRun((function(){return i.startTape()}),(function(){return i.endTape()}),(function(){return i.tidy("forward",t)}));m(a instanceof ho,(function(){return"The result y returned by f() must be a tensor."}));var s=function(t,e,n){for(var o={},i={},a=0;a<e.length;a++)o[e[a].id]=!0;for(a=0;a<t.length;a++){var s=(v=t[a]).inputs;for(var u in s){for(var c=s[u],l=!1,f=0;f<e.length;f++)if(o[c.id]){v.outputs.forEach((function(t){return o[t.id]=!0})),l=!0,i[v.id]=!0;break}if(l)break}}var h={};h[n.id]=!0;var d={};for(a=t.length-1;a>=0;a--)for(s=(v=t[a]).inputs,f=0;f<v.outputs.length;f++)if(h[v.outputs[f].id]){for(var u in s)h[s[u].id]=!0,d[v.id]=!0;break}var p=[];for(a=0;a<t.length;a++){var v;if(i[(v=t[a]).id]&&d[v.id]){var g={};for(var u in v.inputs){var m=v.inputs[u];o[m.id]&&(g[u]=m)}var y=r({},v);y.inputs=g,y.outputs=v.outputs,p.push(y)}}return p}(this.state.activeTape,e,a);if(!o&&0===s.length&&e.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",(function(){var t,r,o={};o[a.id]=null==n?(r=X(w(t=a.shape),"float32"),Co.makeTensor(r,t,"float32")):n,function(t,e,n){for(var r=function(r){var o=e[r],i=[];if(o.outputs.forEach((function(e){var n=t[e.id];i.push(null!=n?n:null)})),null==o.gradient)throw new Error("Cannot compute gradient: gradient function not found for "+o.kernelName+".");var a=o.gradient(i),s=function(e){if(!(e in a))throw new Error("Cannot backprop through input "+e+". Available gradients found: "+Object.keys(a)+".");var r=n((function(){return a[e]()}));if("float32"!==r.dtype)throw new Error("Error in gradient for op "+o.kernelName+". The gradient of input "+e+" must have 'float32' dtype, but has '"+r.dtype+"'");var i=o.inputs[e];if(!_(r.shape,i.shape))throw new Error("Error in gradient for op "+o.kernelName+". The gradient of input '"+e+"' has shape '"+r.shape+"', which does not match the shape of the input '"+i.shape+"'");if(null==t[i.id])t[i.id]=r;else{var s=t[i.id];t[i.id]=s.add(r),s.dispose()}};for(var u in o.inputs)s(u)},o=e.length-1;o>=0;o--)r(o)}(o,s,(function(t){return i.tidy(t)}));var u=e.map((function(t){return o[t.id]}));return 0===i.state.gradientDepth&&(i.state.activeTape.forEach((function(t){for(var e=0,n=t.saved;e<n.length;e++)n[e].dispose()})),i.state.activeTape=null),{value:a,grads:u}}))},t.prototype.customGrad=function(t){var e=this;return m(z(t),(function(){return"The f passed in customGrad(f) must be a function."})),function(){for(var n,r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];m(r.every((function(t){return t instanceof ho})),(function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"}));var i={};return r.forEach((function(t,e){i[e]=t})),e.runKernelFunc((function(e,o){return m((n=t.apply(void 0,r.concat([o]))).value instanceof ho,(function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"})),m(z(n.gradFunc),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."})),n.value}),i,(function(t,e){var o=n.gradFunc(t,e),i=Array.isArray(o)?o:[o];m(i.length===r.length,(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."})),m(i.every((function(t){return t instanceof ho})),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."}));var a={};return i.forEach((function(t,e){a[e]=function(){return t}})),a}))}},t.prototype.readSync=function(t){return this.state.tensorInfo.get(t).backend.readSync(t)},t.prototype.read=function(t){return this.state.tensorInfo.get(t).backend.read(t)},t.prototype.time=function(t){return i(this,void 0,void 0,(function(){var e,n;return a(this,(function(r){switch(r.label){case 0:return e=Y(),[4,this.backend.time(t)];case 1:return(n=r.sent()).wallMs=Y()-e,[2,n]}}))}))},t.prototype.track=function(t){return null!=this.state.activeScope&&(t.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(t)),t},Object.defineProperty(t.prototype,"registeredVariables",{get:function(){return this.state.registeredVariables},enumerable:!0,configurable:!0}),t.prototype.reset=function(){for(var t in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new Eo,this.registry)this.disposeRegisteredKernels(t),this.registry[t].dispose(),delete this.registry[t];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null},t.nextTensorId=0,t.nextVariableId=0,t}(),Co=function(){var e=function(){if(null==wo){var e=void 0;if("undefined"!=typeof window)e=window;else if(void 0!==t)e=t;else if("undefined"!=typeof process)e=process;else{if("undefined"==typeof self)throw new Error("Could not find a global object");e=self}wo=e}return wo}();if(null==e._tfengine){var n=new no(e);e._tfengine=new Ro(n)}return function(t){ro=t}(e._tfengine.ENV),co=function(){return e._tfengine},e._tfengine}(),So=u();So.registerFlag("DEBUG",(function(){return!1}),(function(t){t&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")})),So.registerFlag("IS_BROWSER",(function(){return lt()})),So.registerFlag("IS_NODE",(function(){return"undefined"!=typeof process&&void 0!==process.versions&&void 0!==process.versions.node})),So.registerFlag("IS_CHROME",(function(){return"undefined"!=typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)})),So.registerFlag("PROD",(function(){return!1})),So.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",(function(){return So.getBool("DEBUG")})),So.registerFlag("DEPRECATION_WARNINGS_ENABLED",(function(){return!0})),So.registerFlag("IS_TEST",(function(){return!1}));var Oo,Ao,Io,ko={},To={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};!function(t){t[t.DENSE=0]="DENSE",t[t.SHARED_BATCH=1]="SHARED_BATCH"}(Oo||(Oo={})),function(t){t[t.RENDER=0]="RENDER",t[t.UPLOAD=1]="UPLOAD",t[t.PIXELS=2]="PIXELS",t[t.DOWNLOAD=3]="DOWNLOAD"}(Ao||(Ao={})),function(t){t[t.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",t[t.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",t[t.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",t[t.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",t[t.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(Io||(Io={}));var Mo,Do,Po=/ERROR: [0-9]+:([0-9]+):/g,No=u();No.registerFlag("HAS_WEBGL",(function(){return No.getNumber("WEBGL_VERSION")>0})),No.registerFlag("WEBGL_VERSION",(function(){return $t(2)?2:$t(1)?1:0})),No.registerFlag("WEBGL_BUFFER_SUPPORTED",(function(){return 2===No.get("WEBGL_VERSION")})),No.registerFlag("WEBGL_CPU_FORWARD",(function(){return!0})),No.registerFlag("WEBGL_FORCE_F16_TEXTURES",(function(){return!1})),No.registerFlag("WEBGL_PACK",(function(){return No.getBool("HAS_WEBGL")})),No.registerFlag("WEBGL_PACK_NORMALIZATION",(function(){return No.getBool("WEBGL_PACK")})),No.registerFlag("WEBGL_PACK_CLIP",(function(){return No.getBool("WEBGL_PACK")})),No.registerFlag("WEBGL_PACK_DEPTHWISECONV",(function(){return!1})),No.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",(function(){return No.getBool("WEBGL_PACK")})),No.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",(function(){return No.getBool("WEBGL_PACK")})),No.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",(function(){return No.getBool("WEBGL_PACK")})),No.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",(function(){return No.getBool("WEBGL_PACK")})),No.registerFlag("WEBGL_PACK_REDUCE",(function(){return No.getBool("WEBGL_PACK")})),No.registerFlag("WEBGL_LAZILY_UNPACK",(function(){return No.getBool("WEBGL_PACK")})),No.registerFlag("WEBGL_CONV_IM2COL",(function(){return No.getBool("WEBGL_PACK")})),No.registerFlag("WEBGL_MAX_TEXTURE_SIZE",(function(){return Xt(No.getNumber("WEBGL_VERSION"))})),No.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",(function(){return Jt(No.getNumber("WEBGL_VERSION"))})),No.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",(function(){var t=No.getNumber("WEBGL_VERSION");return 0===t?0:Yt(t)})),No.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",(function(){return No.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&(t=navigator.userAgent||navigator.vendor||window.opera,!(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))));var t})),No.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",(function(){return Zt(No.getNumber("WEBGL_VERSION"))})),No.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",(function(){return!No.getBool("WEBGL_FORCE_F16_TEXTURES")&&No.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")})),No.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",(function(){return te(No.getNumber("WEBGL_VERSION"))})),No.registerFlag("WEBGL_FENCE_API_ENABLED",(function(){return ne(No.getNumber("WEBGL_VERSION"))})),No.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",(function(){return No.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0})),fo=re;var Fo=we({complex_:function(t,e){var n=ce(t,"real","complex"),r=ce(e,"imag","complex");return y(n.shape,r.shape,"real and imag shapes, "+n.shape+" and "+r.shape+", must match in call to tf.complex()."),Co.runKernelFunc((function(t){return t.complex(n,r)}),{$real:n,$imag:r})}}),Lo=we({real_:function(t){var e=ce(t,"input","real");return Co.runKernelFunc((function(t){return t.real(e)}),{$input:e})}}),jo=we({imag_:function(t){var e=ce(t,"input","imag");return Co.runKernelFunc((function(t){return t.imag(e)}),{$input:e})}}),Bo=we({onesLike_:function(t){var e=ce(t,"x","onesLike");if("complex64"===e.dtype){var n=Bo(Lo(e)),r=Wo(jo(e));return Fo(n,r)}return Co.runKernelFunc((function(t){return t.onesLike(e)}),{$x:e},(function(t){return{$x:function(){return Wo(t)}}}))}}),Wo=we({zerosLike_:function(t){var e=ce(t,"x","zerosLike");return Co.runKernelFunc((function(t){return t.zerosLike(e)}),{$x:e},(function(t){return{$x:function(){return Wo(t)}}}))}}),Uo=we({concat_:function(t,e){void 0===e&&(e=0),m(t.length>=1,(function(){return"Pass at least one tensor to concat"}));var n=le(t,"tensors","concat");"complex64"===n[0].dtype&&n.forEach((function(t){if("complex64"!==t.dtype)throw new Error("Cannot concatenate complex64 tensors with a tensor\n          with dtype "+t.dtype+". ")})),e=I(e,n[0].shape)[0];var r=xe(n.map((function(t){return t.shape})),e);if(0===w(r))return _e([],r);if(1===(n=n.filter((function(t){return t.size>0}))).length)return n[0];var o=n.map((function(t){return t.shape}));return be(o,e),Co.runKernelFunc((function(t){return t.concat(n,e)}),n,(function(t){var n=o.map((function(t){return t[e]}));return qo(t,n,e).map((function(t){return function(){return t}}))}),"Concat",{axis:e})}}),Go=we({concat1d_:function(t){return Uo(t,0)}}),zo=we({concat2d_:function(t,e){return Uo(t,e)}}),Vo=we({concat3d_:function(t,e){return Uo(t,e)}}),Ho=we({concat4d_:function(t,e){return Uo(t,e)}}),qo=we({split_:function(t,e,n){void 0===n&&(n=0);var r,o=ce(t,"x","split");return n=I(n,o.shape)[0],"number"==typeof e?(m(o.shape[n]%e==0,(function(){return"Number of splits must evenly divide the axis."})),r=new Array(e).fill(o.shape[n]/e)):(m(o.shape[n]===e.reduce((function(t,e){return t+e})),(function(){return"The sum of sizes must match the size of the axis dimension."})),r=e),Co.runKernelFunc((function(t){return t.split(o,r,n)}),{$x:o},(function(t){return{$x:function(){return Uo(t,n)}}}))}});"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==t||"undefined"!=typeof self&&self;var Ko=De((function(t){!function(t,e){function n(t){var e,n=this,r=(e=4022871197,function(t){t=t.toString();for(var n=0;n<t.length;n++){var r=.02519603282416938*(e+=t.charCodeAt(n));r-=e=r>>>0,e=(r*=e)>>>0,e+=4294967296*(r-=e)}return 2.3283064365386963e-10*(e>>>0)});n.next=function(){var t=2091639*n.s0+2.3283064365386963e-10*n.c;return n.s0=n.s1,n.s1=n.s2,n.s2=t-(n.c=0|t)},n.c=1,n.s0=r(" "),n.s1=r(" "),n.s2=r(" "),n.s0-=r(t),n.s0<0&&(n.s0+=1),n.s1-=r(t),n.s1<0&&(n.s1+=1),n.s2-=r(t),n.s2<0&&(n.s2+=1),r=null}function r(t,e){return e.c=t.c,e.s0=t.s0,e.s1=t.s1,e.s2=t.s2,e}function o(t,e){var o=new n(t),i=e&&e.state,a=o.next;return a.int32=function(){return 4294967296*o.next()|0},a.double=function(){return a()+11102230246251565e-32*(2097152*a()|0)},a.quick=a,i&&("object"==typeof i&&r(i,o),a.state=function(){return r(o,{})}),a}e&&e.exports?e.exports=o:this.alea=o}(0,t)})),Xo=De((function(t){!function(t,e){function n(t){var e=this,n="";e.x=0,e.y=0,e.z=0,e.w=0,e.next=function(){var t=e.x^e.x<<11;return e.x=e.y,e.y=e.z,e.z=e.w,e.w^=e.w>>>19^t^t>>>8},t===(0|t)?e.x=t:n+=t;for(var r=0;r<n.length+64;r++)e.x^=0|n.charCodeAt(r),e.next()}function r(t,e){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e}function o(t,e){var o=new n(t),i=e&&e.state,a=function(){return(o.next()>>>0)/4294967296};return a.double=function(){do{var t=((o.next()>>>11)+(o.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},a.int32=o.next,a.quick=a,i&&("object"==typeof i&&r(i,o),a.state=function(){return r(o,{})}),a}e&&e.exports?e.exports=o:this.xor128=o}(0,t)})),Jo=De((function(t){!function(t,e){function n(t){var e=this,n="";e.next=function(){var t=e.x^e.x>>>2;return e.x=e.y,e.y=e.z,e.z=e.w,e.w=e.v,(e.d=e.d+362437|0)+(e.v=e.v^e.v<<4^t^t<<1)|0},e.x=0,e.y=0,e.z=0,e.w=0,e.v=0,t===(0|t)?e.x=t:n+=t;for(var r=0;r<n.length+64;r++)e.x^=0|n.charCodeAt(r),r==n.length&&(e.d=e.x<<10^e.x>>>4),e.next()}function r(t,e){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e.v=t.v,e.d=t.d,e}function o(t,e){var o=new n(t),i=e&&e.state,a=function(){return(o.next()>>>0)/4294967296};return a.double=function(){do{var t=((o.next()>>>11)+(o.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},a.int32=o.next,a.quick=a,i&&("object"==typeof i&&r(i,o),a.state=function(){return r(o,{})}),a}e&&e.exports?e.exports=o:this.xorwow=o}(0,t)})),Yo=De((function(t){!function(t,e){function n(t){var e=this;e.next=function(){var t,n,r=e.x,o=e.i;return t=r[o],n=(t^=t>>>7)^t<<24,n^=(t=r[o+1&7])^t>>>10,n^=(t=r[o+3&7])^t>>>3,n^=(t=r[o+4&7])^t<<7,t=r[o+7&7],n^=(t^=t<<13)^t<<9,r[o]=n,e.i=o+1&7,n},function(t,e){var n,r=[];if(e===(0|e))r[0]=e;else for(e=""+e,n=0;n<e.length;++n)r[7&n]=r[7&n]<<15^e.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n&&(r[7]=-1),t.x=r,t.i=0,n=256;n>0;--n)t.next()}(e,t)}function r(t,e){return e.x=t.x.slice(),e.i=t.i,e}function o(t,e){null==t&&(t=+new Date);var o=new n(t),i=e&&e.state,a=function(){return(o.next()>>>0)/4294967296};return a.double=function(){do{var t=((o.next()>>>11)+(o.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},a.int32=o.next,a.quick=a,i&&(i.x&&r(i,o),a.state=function(){return r(o,{})}),a}e&&e.exports?e.exports=o:this.xorshift7=o}(0,t)})),Qo=De((function(t){!function(t,e){function n(t){var e=this;e.next=function(){var t,n,r=e.w,o=e.X,i=e.i;return e.w=r=r+1640531527|0,n=o[i+34&127],t=o[i=i+1&127],n^=n<<13,t^=t<<17,n=o[i]=(n^=n>>>15)^(t^=t>>>12),e.i=i,n+(r^r>>>16)|0},function(t,e){var n,r,o,i,a,s=[],u=128;for(e===(0|e)?(r=e,e=null):(e+="\0",r=0,u=Math.max(u,e.length)),o=0,i=-32;i<u;++i)e&&(r^=e.charCodeAt((i+32)%e.length)),0===i&&(a=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,i>=0&&(o=0==(n=s[127&i]^=r+(a=a+1640531527|0))?o+1:0);for(o>=128&&(s[127&(e&&e.length||0)]=-1),o=127,i=512;i>0;--i)r=s[o+34&127],n=s[o=o+1&127],r^=r<<13,n^=n<<17,s[o]=(r^=r>>>15)^(n^=n>>>12);t.w=a,t.X=s,t.i=o}(e,t)}function r(t,e){return e.i=t.i,e.w=t.w,e.X=t.X.slice(),e}function o(t,e){null==t&&(t=+new Date);var o=new n(t),i=e&&e.state,a=function(){return(o.next()>>>0)/4294967296};return a.double=function(){do{var t=((o.next()>>>11)+(o.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},a.int32=o.next,a.quick=a,i&&(i.X&&r(i,o),a.state=function(){return r(o,{})}),a}e&&e.exports?e.exports=o:this.xor4096=o}(0,t)})),$o=De((function(t){!function(t,e){function n(t){var e=this,n="";e.next=function(){var t=e.b,n=e.c,r=e.d,o=e.a;return t=t<<25^t>>>7^n,n=n-r|0,r=r<<24^r>>>8^o,o=o-t|0,e.b=t=t<<20^t>>>12^n,e.c=n=n-r|0,e.d=r<<16^n>>>16^o,e.a=o-t|0},e.a=0,e.b=0,e.c=-1640531527,e.d=1367130551,t===Math.floor(t)?(e.a=t/4294967296|0,e.b=0|t):n+=t;for(var r=0;r<n.length+20;r++)e.b^=0|n.charCodeAt(r),e.next()}function r(t,e){return e.a=t.a,e.b=t.b,e.c=t.c,e.d=t.d,e}function o(t,e){var o=new n(t),i=e&&e.state,a=function(){return(o.next()>>>0)/4294967296};return a.double=function(){do{var t=((o.next()>>>11)+(o.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},a.int32=o.next,a.quick=a,i&&("object"==typeof i&&r(i,o),a.state=function(){return r(o,{})}),a}e&&e.exports?e.exports=o:this.tychei=o}(0,t)})),Zo=De((function(t){!function(e,r){function o(t,n,o){var g=[],m=s(function t(e,n){var r,o=[],i=typeof e;if(n&&"object"==i)for(r in e)try{o.push(t(e[r],n-1))}catch(t){}return o.length?o:"string"==i?e:e+"\0"}((n=1==n?{entropy:!0}:n||{}).entropy?[t,u(e)]:null==t?function(){try{var t;return c&&(t=c.randomBytes)?t=t(f):(t=new Uint8Array(f),(l.crypto||l.msCrypto).getRandomValues(t)),u(t)}catch(t){var n=l.navigator,r=n&&n.plugins;return[+new Date,l,r,l.screen,u(e)]}}():t,3),g),y=new i(g),b=function(){for(var t=y.g(6),e=d,n=0;t<p;)t=(t+n)*f,e*=f,n=y.g(1);for(;t>=v;)t/=2,e/=2,n>>>=1;return(t+n)/e};return b.int32=function(){return 0|y.g(4)},b.quick=function(){return y.g(4)/4294967296},b.double=b,s(u(y.S),e),(n.pass||o||function(t,e,n,o){return o&&(o.S&&a(o,y),t.state=function(){return a(y,{})}),n?(r[h]=t,e):t})(b,m,"global"in n?n.global:this==r,n.state)}function i(t){var e,n=t.length,r=this,o=0,i=r.i=r.j=0,a=r.S=[];for(n||(t=[n++]);o<f;)a[o]=o++;for(o=0;o<f;o++)a[o]=a[i=g&i+t[o%n]+(e=a[o])],a[i]=e;(r.g=function(t){for(var e,n=0,o=r.i,i=r.j,a=r.S;t--;)e=a[o=g&o+1],n=n*f+a[g&(a[o]=a[i=g&i+e])+(a[i]=e)];return r.i=o,r.j=i,n})(f)}function a(t,e){return e.i=t.i,e.j=t.j,e.S=t.S.slice(),e}function s(t,e){for(var n,r=t+"",o=0;o<r.length;)e[g&o]=g&(n^=19*e[g&o])+r.charCodeAt(o++);return u(e)}function u(t){return String.fromCharCode.apply(0,t)}var c,l=this,f=256,h="random",d=r.pow(f,6),p=r.pow(2,52),v=2*p,g=255;if(r["seed"+h]=o,s(r.random(),e),t.exports){t.exports=o;try{c=n(0)}catch(t){}}}([],Math)}));Zo.alea=Ko,Zo.xor128=Xo,Zo.xorwow=Jo,Zo.xorshift7=Yo,Zo.xor4096=Qo,Zo.tychei=$o;var ti=Zo.alea,ei=function(){function t(t,e,n,r,o){this.mean=t,this.stdDev=e,this.dtype=n,this.nextVal=NaN,this.truncated=r,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var i=o||Math.random();this.random=ti(i.toString())}return t.prototype.nextValue=function(){if(!isNaN(this.nextVal)){var t=this.nextVal;return this.nextVal=NaN,t}for(var e,n,r=!1;!r;){var o=void 0,i=void 0,a=void 0;do{a=(o=2*this.random()-1)*o+(i=2*this.random()-1)*i}while(a>=1||0===a);var s=Math.sqrt(-2*Math.log(a)/a);e=this.mean+this.stdDev*o*s,n=this.mean+this.stdDev*i*s,this.truncated&&!this.isValidTruncated(e)||(r=!0)}return this.truncated&&!this.isValidTruncated(n)||(this.nextVal=this.convertValue(n)),this.convertValue(e)},t.prototype.convertValue=function(t){return null==this.dtype||"float32"===this.dtype?t:Math.round(t)},t.prototype.isValidTruncated=function(t){return t<=this.upper&&t>=this.lower},t}(),ni=function(){function t(t,e,n,r){this.alpha=t,this.beta=1/e,this.dtype=n;var o=r||Math.random();this.randu=ti(o.toString()),this.randn=new ei(0,1,n,!1,this.randu()),this.d=t<1?t+2/3:t-1/3,this.c=1/Math.sqrt(9*this.d)}return t.prototype.nextValue=function(){for(var t,e,n,r,o,i;;){do{r=this.randn.nextValue(),i=1+this.c*r}while(i<=0);if(e=1-.331*(t=r*r)*t,n=.5*t+this.d*(1-(i*=i*i)+Math.log(i)),(o=this.randu())<e||Math.log(o)<n)break}return i*=1/this.beta*this.d,this.alpha<1&&(i*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(i)},t.prototype.convertValue=function(t){return"float32"===this.dtype?t:Math.round(t)},t}(),ri=function(){function t(t,e,n,r){var o=this;if(void 0===t&&(t=0),void 0===e&&(e=1),this.canReturnFloat=function(){return null==o.dtype||"float32"===o.dtype},this.min=t,this.range=e-t,this.dtype=n,null==r&&(r=Math.random()),"number"==typeof r&&(r=r.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between "+t+" - "+e+" <= 1 and dtype is not float");this.random=ti(r)}return t.prototype.convertValue=function(t){return this.canReturnFloat()?t:Math.round(t)},t.prototype.nextValue=function(){return this.convertValue(this.min+this.range*this.random())},t}(),oi=we({batchToSpaceND_:function(t,e,n){var r=ce(t,"x","batchToSpaceND"),o=e.reduce((function(t,e){return t*e}));return m(r.rank>=1+e.length,(function(){return"input rank is "+r.rank+" but should be > than blockShape.length "+e.length})),m(n.length===e.length,(function(){return"crops.length is "+n.length+" but should be equal to blockShape.length  "+e.length})),m(r.shape[0]%o==0,(function(){return"input tensor batch is "+r.shape[0]+" but is not divisible by the product of the elements of blockShape "+e.join(" * ")+" === "+o})),Co.runKernelFunc((function(t){return t.batchToSpaceND(r,e,n)}),{$x:r},(function(t){return{$x:function(){return t.spaceToBatchND(e,n)}}}))}}),ii=we({broadcastTo_:function(t,e){var n=ce(t,"broadcastTo","x"),r=n.shape;if(e.some((function(t){return!(t>0)||t%1!=0})))throw new Error("broadcastTo(): Invalid broadcast shape ["+e+"].");if(e.length<n.rank)throw new Error("broadcastTo(): shape.length="+e.length+" < input.rank="+n.rank+".");if(e.length>n.rank){for(var o=n.shape.slice();o.length<e.length;)o.unshift(1);n=n.reshape(o)}for(var i=Array.from(e),a=e.length-1;a>=0;a--)if(n.shape[a]===e[a])i[a]=1;else if(1!==n.shape[a])throw new Error("broadcastTo(): ["+r+"] cannot be broadcast to ["+e+"].");var s=i.map((function(t,e){return t>1?e:-1})).filter((function(t){return t>=0}));return 0===s.length?n.clone():Co.runKernelFunc((function(t){return t.tile(n,i)}),{input:n},(function(t){return{input:function(){return t.sum(s,!0)}}}))}}),ai=we({cast_:function(t,e){var n=ce(t,"x","cast");if(!P(e))throw new Error("Failed to cast to unknown dtype "+e);if("string"===e&&"string"!==n.dtype||"string"!==e&&"string"===n.dtype)throw new Error("Only strings can be casted to strings");return Co.runKernelFunc((function(t){return t.cast(n,e)}),{x:n},(function(t){return{x:function(){return t.clone()}}}),"Cast",{dtype:e})}}),si=we({clone_:function(t){var e=ce(t,"x","clone",null);return Co.runKernelFunc((function(){return Co.makeTensorFromDataId(e.dataId,e.shape,e.dtype)}),{$x:e},(function(t){return{$x:function(){return t.toFloat()}}}))}}),ui=we({cumsum_:function(t,e,n,r){void 0===e&&(e=0),void 0===n&&(n=!1),void 0===r&&(r=!1);var o=ce(t,"x","cumsum"),i=ge([e|=0],o.rank),a=o;null!=i&&(a=o.transpose(i));var s=ye(1,o.rank)[0],u=Co.runKernelFunc((function(t){return t.cumsum(a,s,n,r)}),{permutedX:a},(function(t){return{permutedX:function(){return t.cumsum(e,n,!r)}}}));return null!=i&&(u=u.transpose(i)),u}}),ci=we({depthToSpace_:function(t,e,n){void 0===n&&(n="NHWC");var r=ce(t,"x","depthToSpace"),o="NHWC"===n?r.shape[1]:r.shape[2],i="NHWC"===n?r.shape[2]:r.shape[3],a="NHWC"===n?r.shape[3]:r.shape[1];return m(o*e>=0,(function(){return"Negative dimension size caused by overflow when multiplying\n      "+o+" and "+e+"  for depthToSpace with input shape\n      "+r.shape})),m(i*e>=0,(function(){return"Negative dimension size caused by overflow when multiplying\n      "+i+" and "+e+" for depthToSpace with input shape\n          "+r.shape})),m(a%(e*e)==0,(function(){return"Dimension size must be evenly divisible by "+e*e+" but is "+a+" for depthToSpace with input shape "+r.shape})),Co.runKernelFunc((function(t){return t.depthToSpace(r,e,n)}),{$x:r})}}),li=we({expandDims_:function(t,e){void 0===e&&(e=0);var n=ce(t,"x","expandDims",null);m(e<=n.rank,(function(){return"Axis must be <= rank of the tensor"}));var r=n.shape.slice();return e<0&&(m(-(n.rank+1)<=e,(function(){return"Axis must be in the interval ["+-(n.rank+1)+", "+n.rank+"]"})),e=n.rank+e+1),r.splice(e,0,1),Ei(n,r)}}),fi=we({eye_:function(t,e,n,r){void 0===r&&(r="float32"),null==e&&(e=t);for(var o=Pe([t,e],r),i=t<=e?t:e,a=0;a<i;++a)o.set(1,a,a);var s=o.toTensor().as2D(t,e);if(null==n)return s;if(1===n.length)return Oi(li(s,0),[n[0],1,1]);if(2===n.length)return Oi(li(li(s,0),0),[n[0],n[1],1,1]);if(3===n.length)return Oi(li(li(li(s,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error("eye() currently supports only 1D and 2D batchShapes, but received "+n.length+"D.")}}),hi=we({multinomial_:function(t,e,n,r){void 0===r&&(r=!1);var o=ce(t,"logits","multinomial"),i=o.size,a=o.rank;if(i<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+i+".");if(a>2)throw new Error("Rank of probabilities must be 1 or 2, but is "+a);n=n||Math.random();var s=1===a?o.as2D(1,-1):o,u=Co.runKernelFunc((function(t){return t.multinomial(s,r,e,n)}),{logits2D:s});return 1===a?u.as1D():u}}),di=we({oneHot_:function(t,e,n,r){if(void 0===n&&(n=1),void 0===r&&(r=0),e<2)throw new Error("Error in oneHot: depth must be >=2, but it is "+e);var o=ce(t,"indices","oneHot","int32"),i=o.shape.concat([e]);return o=o.flatten(),Co.runKernelFunc((function(t){return t.oneHot(o,e,n,r)}),{$indices:o},(function(){return{$indices:function(){return ke(o.shape,"float32")}}})).reshape(i)}}),pi=we({pad_:function(t,e,n){void 0===n&&(n=0);var r=ce(t,"x","pad");if(0===r.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");return Co.runKernelFunc((function(t){return t.pad(r,e,n)}),{x:r},(function(t){var n=e.map((function(t){return t[0]}));return{x:function(){return t.slice(n,r.shape)}}}),"PadV2",{paddings:e,constantValue:n})}}),vi=we({pad1d_:function(t,e,n){return void 0===n&&(n=0),m(2===e.length,(function(){return"Invalid number of paddings. Must be length of 2."})),pi(t,[e],n)}}),gi=we({pad2d_:function(t,e,n){return void 0===n&&(n=0),m(2===e.length&&2===e[0].length&&2===e[1].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),pi(t,e,n)}}),mi=we({pad3d_:function(t,e,n){return void 0===n&&(n=0),m(3===e.length&&2===e[0].length&&2===e[1].length&&2===e[2].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),pi(t,e,n)}}),yi=we({pad4d_:function(t,e,n){return void 0===n&&(n=0),m(4===e.length&&2===e[0].length&&2===e[1].length&&2===e[2].length&&2===e[3].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),pi(t,e,n)}}),bi=we({rand_:function(t,e,n){var r=w(t),o=null;if(null==n||"float32"===n)o=new Float32Array(r);else if("int32"===n)o=new Int32Array(r);else{if("bool"!==n)throw new Error("Unknown data type "+n);o=new Uint8Array(r)}for(var i=0;i<r;i++)o[i]=e();return Co.makeTensor(o,t,n)}}),xi=we({randomNormal_:function(t,e,n,r,o){if(void 0===e&&(e=0),void 0===n&&(n=1),null!=r&&"bool"===r)throw new Error("Unsupported data type "+r);for(var i=new ei(e,n,r,!1,o),a=Pe(t,r),s=0;s<a.values.length;s++)a.values[s]=i.nextValue();return a.toTensor()}}),wi=we({randomGamma_:function(t,e,n,r,o){if(void 0===n&&(n=1),void 0===r&&(r="float32"),null==n&&(n=1),null==r&&(r="float32"),"float32"!==r&&"int32"!==r)throw new Error("Unsupported data type "+r);for(var i=new ni(e,n,r,o),a=Pe(t,r),s=0;s<a.values.length;s++)a.values[s]=i.nextValue();return a.toTensor()}}),_i=we({randomUniform_:function(t,e,n,r,o){void 0===e&&(e=0),void 0===n&&(n=1),void 0===r&&(r="float32");for(var i=Pe(t,r),a=new ri(e,n,null,o),s=0;s<i.values.length;s++)i.values[s]=a.nextValue();return i.toTensor()}}),Ei=we({reshape_:function(t,e){var n=ce(t,"x","reshape",null);return e=A(e,n.size),m(n.size===w(e),(function(){return"new shape and old shape must have the same number of elements."})),Co.runKernelFunc((function(t){return t.reshape(n,e)}),{x:n},(function(t){return{x:function(){return t.reshape(n.shape)}}}),"Reshape",{shape:e})}}),Ri=we({spaceToBatchND_:function(t,e,n){var r=ce(t,"x","spaceToBatchND");return m(r.rank>=1+e.length,(function(){return"input rank "+r.rank+" should be > than [blockShape] "+e.length})),m(n.length===e.length,(function(){return"paddings.shape[0] "+n.length+" must be equal to [blockShape] "+e.length})),m(r.shape.reduce((function(t,r,o){return o>0&&o<=e.length?t&&(r+n[o-1][0]+n[o-1][1])%e[o-1]==0:t}),!0),(function(){return"input spatial dimensions "+r.shape.slice(1)+" with paddings "+n.toString()+" must be divisible by blockShapes "+e.toString()})),Co.runKernelFunc((function(t){return t.spaceToBatchND(r,e,n)}),{$x:r},(function(t){return{$x:function(){return t.batchToSpaceND(e,n)}}}))}}),Ci=we({squeeze_:function(t,e){var n=ce(t,"x","squeeze");return Ei(n,k(n.shape,e).newShape)}}),Si=we({stack_:function(t,e){void 0===e&&(e=0);var n=le(t,"tensors","stack");if(m(n.length>=1,(function(){return"Pass at least one tensor to tf.stack"})),1===n.length)return n[0].expandDims(e);var r=n[0].shape,o=n[0].dtype;m(e<=n[0].rank,(function(){return"Axis must be <= rank of the tensor"})),n.forEach((function(t){y(r,t.shape,"All tensors passed to stack must have matching shapes")})),n.forEach((function(t){m(o===t.dtype,(function(){return"All tensors passed to stack must have matching dtypes"}))}));var i=n.map((function(t){return t.expandDims(e)}));return Uo(i,e)}}),Oi=we({tile_:function(t,e){var n=ce(t,"x","tile",null);return m(n.rank===e.length,(function(){return"Error in transpose: rank of input "+n.rank+" must match length of reps "+e+"."})),Co.runKernelFunc((function(t,r){var o=t.tile(n,e);return r([n]),o}),{x:n},(function(t,n){var r=n[0];return{x:function(){var n=Wo(r);if(1===r.rank)for(var o=0;o<e[0];++o)n=n.add(t.slice([o*r.shape[0]],[r.shape[0]]));else if(2===r.rank)for(o=0;o<e[0];++o)for(var i=0;i<e[1];++i)n=n.add(t.slice([o*r.shape[0],i*r.shape[1]],[r.shape[0],r.shape[1]]));else if(3===r.rank)for(o=0;o<e[0];++o)for(i=0;i<e[1];++i)for(var a=0;a<e[2];++a)n=n.add(t.slice([o*r.shape[0],i*r.shape[1],a*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else{if(4!==r.rank)throw new Error("Gradient for tile operation is not implemented for rank-"+r.rank+" tensors yet.");for(o=0;o<e[0];++o)for(i=0;i<e[1];++i)for(a=0;a<e[2];++a)for(var s=0;s<e[3];++s)n=n.add(t.slice([o*r.shape[0],i*r.shape[1],a*r.shape[2],s*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]))}return n}}}),"Tile",{reps:e},[n])}}),Ai=we({truncatedNormal_:function(t,e,n,r,o){if(void 0===e&&(e=0),void 0===n&&(n=1),null!=r&&"bool"===r)throw new Error("Unsupported data type "+r);for(var i=new ei(e,n,r,!0,o),a=Pe(t,r),s=0;s<a.values.length;s++)a.values[s]=i.nextValue();return a.toTensor()}}),Ii=we({unstack_:function(t,e){void 0===e&&(e=0),e=e||0;var n=ce(t,"x","unstack");return m(e>=-n.shape.length&&e<n.shape.length,(function(){return"Axis = "+e+" is not in [-"+n.shape.length+", "+n.shape.length+")"})),e<0&&(e+=n.shape.length),Co.runKernelFunc((function(t){return t.unstack(n,e)}),{x:n},(function(t){return{x:function(){return Si(t,e)}}}),"Unpack",{axis:e})}}),ki=we({softmax_:function(t,e){void 0===e&&(e=-1);var n=ce(t,"logits","softmax","float32");if(-1===e&&(e=n.rank-1),e!==n.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. Logits was rank "+n.rank+" and dim was "+e);return Co.runKernelFunc((function(t,r){var o=t.softmax(n,e);return r([o]),o}),{logits:n},(function(t,n){var r=n[0],o=t.mul(r);return{logits:function(){return o.sub(o.sum([e],!0).mul(r))}}}),"Softmax",{dim:e},[],[!0])}}),Ti=we({logSoftmax_:function(t,e){void 0===e&&(e=-1);var n=ce(t,"logits","logSoftmax");if(-1===e&&(e=n.rank-1),e!==n.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. Logits was rank "+n.rank+" and axis was "+e);return $e((function(t,n){var r=t.max(e,!0),o=t.sub(r),i=o.toFloat().sub(o.exp().sum(e,!0).log());return n([i]),{value:i,gradFunc:function(t,n){var r=n[0].exp();return t.sub(t.sum(e,!0).mul(r))}}}))(n)}}),Mi=function(){function t(t,e){this.backend=t,this.dataMover=e,this.data=new WeakMap,this.dataIdsCount=0}return t.prototype.get=function(t){return this.data.has(t)||this.dataMover.moveData(this.backend,t),this.data.get(t)},t.prototype.set=function(t,e){this.dataIdsCount++,this.data.set(t,e)},t.prototype.has=function(t){return this.data.has(t)},t.prototype.delete=function(t){return this.dataIdsCount--,this.data.delete(t)},t.prototype.numDataIds=function(){return this.dataIdsCount},t}(),Di=function(){function t(){}return t.prototype.time=function(){return Ze("time")},t.prototype.read=function(){return Ze("read")},t.prototype.readSync=function(){return Ze("readSync")},t.prototype.numDataIds=function(){return Ze("numDataIds")},t.prototype.disposeData=function(){return Ze("disposeData")},t.prototype.write=function(){return Ze("write")},t.prototype.move=function(){return Ze("move")},t.prototype.memory=function(){return Ze("memory")},t.prototype.floatPrecision=function(){return Ze("floatPrecision")},t.prototype.epsilon=function(){return 32===this.floatPrecision()?1e-7:1e-4},t.prototype.batchMatMul=function(){return Ze("batchMatMul")},t.prototype.fusedBatchMatMul=function(){return Ze("fusedBatchMatMul")},t.prototype.slice=function(){return Ze("slice")},t.prototype.stridedSlice=function(){return Ze("stridedSlice")},t.prototype.unstack=function(){return Ze("unstack")},t.prototype.reverse=function(){return Ze("reverse")},t.prototype.concat=function(){return Ze("concat")},t.prototype.neg=function(){return Ze("neg")},t.prototype.add=function(){return Ze("add")},t.prototype.addN=function(){return Ze("addN")},t.prototype.subtract=function(){return Ze("subtract")},t.prototype.multiply=function(){return Ze("multiply")},t.prototype.realDivide=function(){return Ze("realDivide")},t.prototype.floorDiv=function(){return Ze("floorDiv")},t.prototype.sum=function(){return Ze("sum")},t.prototype.prod=function(){return Ze("prod")},t.prototype.unsortedSegmentSum=function(){return Ze("unsortedSegmentSum")},t.prototype.argMin=function(){return Ze("argMin")},t.prototype.argMax=function(){return Ze("argMax")},t.prototype.equal=function(){return Ze("equal")},t.prototype.notEqual=function(){return Ze("notEqual")},t.prototype.less=function(){return Ze("less")},t.prototype.lessEqual=function(){return Ze("lessEqual")},t.prototype.greater=function(){return Ze("greater")},t.prototype.greaterEqual=function(){return Ze("greaterEqual")},t.prototype.logicalNot=function(){return Ze("logicalNot")},t.prototype.logicalAnd=function(){return Ze("logicalAnd")},t.prototype.logicalOr=function(){return Ze("logicalOr")},t.prototype.where=function(){return Ze("where")},t.prototype.select=function(){return Ze("select")},t.prototype.topk=function(){return Ze("topk")},t.prototype.min=function(){return Ze("min")},t.prototype.minimum=function(){return Ze("minimum")},t.prototype.mod=function(){return Ze("mod")},t.prototype.max=function(){return Ze("max")},t.prototype.maximum=function(){return Ze("maximum")},t.prototype.all=function(){return Ze("all")},t.prototype.any=function(){return Ze("any")},t.prototype.squaredDifference=function(){return Ze("squaredDifference")},t.prototype.ceil=function(){return Ze("ceil")},t.prototype.floor=function(){return Ze("floor")},t.prototype.round=function(){return Ze("round")},t.prototype.sign=function(){return Ze("sign")},t.prototype.isNaN=function(){return Ze("isNaN")},t.prototype.isInf=function(){return Ze("isInf")},t.prototype.isFinite=function(){return Ze("isFinite")},t.prototype.pow=function(){return Ze("pow")},t.prototype.exp=function(){return Ze("exp")},t.prototype.expm1=function(){return Ze("expm1")},t.prototype.softmax=function(){return Ze("softmax")},t.prototype.log=function(){return Ze("log")},t.prototype.log1p=function(){return Ze("log1p")},t.prototype.sqrt=function(){return Ze("sqrt")},t.prototype.rsqrt=function(){return Ze("rsqrt")},t.prototype.square=function(){return Ze("square")},t.prototype.reciprocal=function(){return Ze("reciprocal")},t.prototype.relu=function(){return Ze("relu")},t.prototype.relu6=function(){return Ze("relu6")},t.prototype.prelu=function(){return Ze("prelu")},t.prototype.elu=function(){return Ze("elu")},t.prototype.eluDer=function(){return Ze("eluDer")},t.prototype.selu=function(){return Ze("selu")},t.prototype.int=function(){return Ze("int")},t.prototype.clip=function(){return Ze("clip")},t.prototype.abs=function(){return Ze("abs")},t.prototype.complexAbs=function(){return Ze("complexAbs")},t.prototype.sigmoid=function(){return Ze("sigmoid")},t.prototype.softplus=function(){return Ze("softplus")},t.prototype.sin=function(){return Ze("sin")},t.prototype.cos=function(){return Ze("cos")},t.prototype.tan=function(){return Ze("tan")},t.prototype.asin=function(){return Ze("asin")},t.prototype.acos=function(){return Ze("acos")},t.prototype.atan=function(){return Ze("atan")},t.prototype.atan2=function(){return Ze("atan2")},t.prototype.sinh=function(){return Ze("sinh")},t.prototype.cosh=function(){return Ze("cosh")},t.prototype.tanh=function(){return Ze("tanh")},t.prototype.asinh=function(){return Ze("asinh")},t.prototype.acosh=function(){return Ze("acosh")},t.prototype.atanh=function(){return Ze("atanh")},t.prototype.erf=function(){return Ze("erf")},t.prototype.step=function(){return Ze("step")},t.prototype.fusedConv2d=function(){return Ze("fusedConv2d")},t.prototype.conv2d=function(){return Ze("conv2d")},t.prototype.conv2dDerInput=function(){return Ze("conv2dDerInput")},t.prototype.conv2dDerFilter=function(){return Ze("conv2dDerFilter")},t.prototype.fusedDepthwiseConv2D=function(){return Ze("fusedDepthwiseConv2D")},t.prototype.depthwiseConv2D=function(){return Ze("depthwiseConv2D")},t.prototype.depthwiseConv2DDerInput=function(){return Ze("depthwiseConv2DDerInput")},t.prototype.depthwiseConv2DDerFilter=function(){return Ze("depthwiseConv2DDerFilter")},t.prototype.conv3d=function(){return Ze("conv3d")},t.prototype.conv3dDerInput=function(){return Ze("conv3dDerInput")},t.prototype.conv3dDerFilter=function(){return Ze("conv3dDerFilter")},t.prototype.maxPool=function(){return Ze("maxPool")},t.prototype.maxPoolBackprop=function(){return Ze("maxPoolBackprop")},t.prototype.avgPool=function(){return Ze("avgPool")},t.prototype.avgPoolBackprop=function(){return Ze("avgPoolBackprop")},t.prototype.avgPool3d=function(){return Ze("avgPool3d")},t.prototype.avgPool3dBackprop=function(){return Ze("avgPool3dBackprop")},t.prototype.maxPool3d=function(){return Ze("maxPool3d")},t.prototype.maxPool3dBackprop=function(){return Ze("maxPool3dBackprop")},t.prototype.reshape=function(){return Ze("reshape")},t.prototype.cast=function(){return Ze("cast")},t.prototype.tile=function(){return Ze("tile")},t.prototype.pad=function(){return Ze("pad")},t.prototype.transpose=function(){return Ze("transpose")},t.prototype.gather=function(){return Ze("gather")},t.prototype.gatherND=function(){return Ze("gatherND")},t.prototype.scatterND=function(){return Ze("scatterND")},t.prototype.batchToSpaceND=function(){return Ze("batchToSpaceND")},t.prototype.spaceToBatchND=function(){return Ze("spaceToBatchND")},t.prototype.resizeBilinear=function(){return Ze("resizeBilinear")},t.prototype.resizeBilinearBackprop=function(){return Ze("resizeBilinearBackprop")},t.prototype.resizeNearestNeighbor=function(){return Ze("resizeNearestNeighbor")},t.prototype.resizeNearestNeighborBackprop=function(){return Ze("resizeNearestNeighborBackprop")},t.prototype.batchNormalization=function(){return Ze("batchNormalization")},t.prototype.localResponseNormalization4D=function(){return Ze("localResponseNormalization4D")},t.prototype.LRNGrad=function(){return Ze("LRNGrad")},t.prototype.multinomial=function(){return Ze("multinomial")},t.prototype.oneHot=function(){return Ze("oneHot")},t.prototype.cumsum=function(){return Ze("cumsum")},t.prototype.nonMaxSuppression=function(){return Ze("nonMaxSuppression")},t.prototype.fft=function(){return Ze("fft")},t.prototype.ifft=function(){return Ze("ifft")},t.prototype.complex=function(){return Ze("complex")},t.prototype.real=function(){return Ze("real")},t.prototype.imag=function(){return Ze("imag")},t.prototype.cropAndResize=function(){return Ze("cropAndResize")},t.prototype.depthToSpace=function(){return Ze("depthToSpace")},t.prototype.split=function(){return Ze("split")},t.prototype.sparseToDense=function(){return Ze("sparseToDense")},t.prototype.diag=function(){return Ze("diag")},t.prototype.fill=function(){return Ze("fill")},t.prototype.onesLike=function(){return Ze("onesLike")},t.prototype.zerosLike=function(){return Ze("zerosLike")},t.prototype.linspace=function(){return Ze("linspace")},t.prototype.dispose=function(){return Ze("dispose")},t}(),Pi=function(t,e){this.outputShape=[],this.outputShape=t,this.variableNames=e.map((function(t,e){return"T"+e}));var n=[];this.variableNames.forEach((function(t){n.push("float v"+t+" = get"+t+"AtOutCoords();")}));var r=this.variableNames.map((function(t){return"v"+t})).join(" + ");this.userCode="\n      void main() {\n        "+n.join("\n        ")+"\n\n        float result = "+r+";\n        setOutput(result);\n      }\n    "},Ni=function(t,e){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.variableNames=e.map((function(t,e){return"T"+e}));var n=[];this.variableNames.forEach((function(t){n.push("vec4 v"+t+" = get"+t+"AtOutCoords();")}));var r=this.variableNames.map((function(t){return"v"+t})).join(" + ");this.userCode="\n      void main() {\n        "+n.join("\n        ")+"\n\n        vec4 result = "+r+";\n        setOutput(result);\n      }\n    "},Fi=function(t,e,n){this.variableNames=["A"];var r=t.windowSize,o=t.batchSize,i=Math.ceil(t.inSize/r);n||this.variableNames.push("bestIndicesA"),this.outputShape=[o,i],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * "+r+";\n\n        int bestIndex = inOffset;\n        float bestValue = getA(batch, bestIndex);\n\n        for (int i = 0; i < "+r+"; i++) {\n          int inIdx = "+(n?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));")+";\n          float candidate = getA(batch, inIdx);\n          if (candidate "+("max"===e?">":"<")+" bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    "},Li="\n  const float FLOAT_MAX = 1.70141184e38;\n  const float FLOAT_MIN = 1.17549435e-38;\n\n  lowp vec4 encode_float(highp float v) {\n    if (isnan(v)) {\n      return vec4(255, 255, 255, 255);\n    }\n\n    highp float av = abs(v);\n\n    if(av < FLOAT_MIN) {\n      return vec4(0.0, 0.0, 0.0, 0.0);\n    } else if(v > FLOAT_MAX) {\n      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n    } else if(v < -FLOAT_MAX) {\n      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n    }\n\n    highp vec4 c = vec4(0,0,0,0);\n\n    highp float e = floor(log2(av));\n    highp float m = exp2(fract(log2(av))) - 1.0;\n\n    c[2] = floor(128.0 * m);\n    m -= c[2] / 128.0;\n    c[1] = floor(32768.0 * m);\n    m -= c[1] / 32768.0;\n    c[0] = floor(8388608.0 * m);\n\n    highp float ebias = e + 127.0;\n    c[3] = floor(ebias / 2.0);\n    ebias -= c[3] * 2.0;\n    c[2] += floor(ebias) * 128.0;\n\n    c[3] += 128.0 * step(0.0, -v);\n\n    return c / 255.0;\n  }\n",ji="\nvec2 uvFromFlat(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\nvec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n  int texelIndex = index / 2;\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",Bi="\nvec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,\n  int texNumC, int row, int col) {\n  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",Wi="\nvec2 packedUVfrom3D(int texNumR, int texNumC,\n    int texelsInBatch, int texelsInLogicalRow, int b,\n    int row, int col) {\n  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",Ui="\n  float getChannel(vec4 frag, vec2 innerDims) {\n    vec2 modCoord = mod(innerDims, 2.);\n    return modCoord.x == 0. ?\n      (modCoord.y == 0. ? frag.r : frag.g) :\n      (modCoord.y == 0. ? frag.b : frag.a);\n  }\n  float getChannel(vec4 frag, int dim) {\n    float modCoord = mod(float(dim), 2.);\n    return modCoord == 0. ? frag.r : frag.g;\n  }\n",Gi=function(t,e,n,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,m(t.length>2,(function(){return"Packed arg"+(n.charAt(0).toUpperCase()+n.slice(1))+" supports only inputs with rank above 2."}));var o=Math.ceil(t[t.length-1]/e);this.outputShape=t.slice(0,-1),o>1&&this.outputShape.push(o),r||this.variableNames.push("bestIndicesA");var i,a,s=this.outputShape,u=s.length,c=Hn(u),l=Fn("coords",u);if(1===o){var f=Hn(a=u+1);i="\n        "+f+" sourceLocR = "+f+"("+l.join()+", 0);\n        ++"+l[u-1]+";\n        "+f+" sourceLocG = "+f+"("+l.join()+", 0);\n        ++"+l[u-2]+";\n        "+f+" sourceLocA = "+f+"("+l.join()+", 0);\n        --"+l[u-1]+";\n        "+f+" sourceLocB = "+f+"("+l.join()+", 0);\n        --"+l[u-2]+";"}else a=u,i="\n        "+c+" sourceLocR = coords;\n        ++"+l[u-1]+";\n        "+c+" sourceLocG = coords;\n        ++"+l[u-2]+";\n        "+c+" sourceLocA = coords;\n        --"+l[u-1]+";\n        "+c+" sourceLocB = coords;\n        --"+l[u-2]+";";var h=["x","y","z","w","u","v"].slice(0,a),d="."+h[a-1],p=h.map((function(t){return"int "+t})),v=Fn("sourceLocR",a-1).concat("inIdx.r"),g=Fn("sourceLocG",a-1).concat("inIdx.g"),y=Fn("sourceLocB",a-1).concat("inIdx.b"),b=Fn("sourceLocA",a-1).concat("inIdx.a"),x="max"===n?"greaterThan":"lessThan",w=r?"":"\n          inIdx = round(vec4(getBestIndicesAChannel("+v.join()+"),\n                             getBestIndicesAChannel("+g.join()+"),\n                             getBestIndicesAChannel("+y.join()+"),\n                             getBestIndicesAChannel("+b.join()+")));",_="vec4(\n            getAChannel("+v.join()+"),\n            hasNextCol ? getAChannel("+g.join()+") : 0.,\n            hasNextRow ? getAChannel("+y.join()+") : 0.,\n            hasNextRow && hasNextCol ? getAChannel("+b.join()+") : 0.)",E=r?"":"\n      float getBestIndicesAChannel("+p.join()+") {\n        return getChannel(getBestIndicesA("+h.join()+"),\n                                          vec2("+h.slice(-2).join()+"));\n      }";this.userCode="\n      float getAChannel("+p.join()+") {\n        return getChannel(getA("+h.join()+"),\n                               vec2("+h.slice(-2).join()+"));\n      }\n      "+E+"\n      void main() {\n        "+c+" coords = getOutputCoords();\n        bool hasNextCol = "+l[u-1]+" < "+(s[u-1]-1)+";\n        bool hasNextRow = "+l[u-2]+" < "+(s[u-2]-1)+";\n        "+i+"\n        ivec4 srcIdx = ivec4(sourceLocR"+d+", sourceLocG"+d+",\n          sourceLocB"+d+", sourceLocA"+d+") * "+e+";\n        ivec4 inIdx = srcIdx;\n        vec4 bestIndex = vec4(inIdx);\n        vec4 bestValue = "+_+";\n\n        for (int i = 0; i < "+e+"; i++) {\n          inIdx = srcIdx;\n          "+w+"\n          vec4 candidate = "+_+";\n          bvec4 nan = isnan(candidate);\n          bvec4 replace = bvec4(\n            vec4("+x+"(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));\n\n          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,\n                           replace.y  ? candidate.y : bestValue.y,\n                           replace.z  ? candidate.z : bestValue.z,\n                           replace.w  ? candidate.w : bestValue.w);\n          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));\n          srcIdx++;\n        }\n        setOutput(bestIndex);\n      }\n    "},zi=function(t){this.variableNames=["dy"],this.outputShape=t.inShape;var e=t.effectiveFilterHeight,n=t.effectiveFilterWidth;this.userCode="\n      const ivec2 pads = ivec2("+(e-1-t.padInfo.top)+", "+(n-1-t.padInfo.left)+");\n      const float avgMultiplier = float("+1/(t.filterHeight*t.filterWidth)+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+e+";\n            wR += "+t.dilationHeight+") {\n          float dyR = float(dyRCorner + wR) / "+t.strideHeight+".0;\n\n          if (dyR < 0.0 || dyR >= "+t.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < "+n+";\n            wC+= "+t.dilationWidth+") {\n            float dyC = float(dyCCorner + wC) / "+t.strideWidth+".0;\n\n            if (dyC < 0.0 || dyC >= "+t.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Vi=function(t){this.variableNames=["dy"],this.outputShape=t.inShape;var e=t.effectiveFilterDepth,n=t.effectiveFilterHeight,r=t.effectiveFilterWidth;this.userCode="\n      const ivec3 pads = ivec3("+(e-1-t.padInfo.front)+", "+(n-1-t.padInfo.top)+", "+(r-1-t.padInfo.left)+");\n      const float avgMultiplier = float("+1/(t.filterDepth*t.filterHeight*t.filterWidth)+");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < "+e+";\n            wD += "+t.dilationDepth+") {\n          float dyD = float(dyDCorner + wD) / "+t.strideDepth+".0;\n\n          if (dyD < 0.0 || dyD >= "+t.outDepth+".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < "+n+";\n              wR += "+t.dilationHeight+") {\n            float dyR = float(dyRCorner + wR) / "+t.strideHeight+".0;\n\n            if (dyR < 0.0 || dyR >= "+t.outHeight+".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < "+r+";\n                wC += "+t.dilationWidth+") {\n              float dyC = float(dyCCorner + wC) / "+t.strideWidth+".0;\n\n              if (dyC < 0.0 || dyC >= "+t.outWidth+".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n\n              dotProd += dyValue * avgMultiplier;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Hi=function(t,e,n,r,o,i){this.outputShape=[],this.variableNames=["x","mean","variance"],nn(t,e),nn(t,n);var a="0.0";null!=r&&(nn(t,r),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");var s="1.0";null!=o&&(nn(t,o),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=t,this.userCode="\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = "+a+";\n        float scale = "+s+";\n        float inv = scale * inversesqrt(variance + float("+i+"));\n        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));\n      }\n    "},qi=function(t,e,n,r,o,i){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],nn(t,e),nn(t,n);var a="vec4(0.0)";null!=r&&(nn(t,r),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");var s="vec4(1.0)";null!=o&&(nn(t,o),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=t,this.userCode="\n      void main() {\n        vec4 offset = "+a+";\n        vec4 scale = "+s+";\n\n        vec4 x = getXAtOutCoords();\n        vec4 mean = getMeanAtOutCoords();\n        vec4 variance = getVarianceAtOutCoords();\n\n        vec4 inv = scale * inversesqrt(variance + vec4("+i+"));\n\n        setOutput((x - mean) * inv + offset);\n      }\n    "},Ki=function(t,e,n){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=nn(e,n),this.userCode="\n      float binaryOpComplex(\n          float areal, float aimag, float breal, float bimag) {\n        "+t+"\n      }\n\n      void main() {\n        float areal = getARealAtOutCoords();\n        float aimag = getAImagAtOutCoords();\n        float breal = getBRealAtOutCoords();\n        float bimag = getBImagAtOutCoords();\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\n      }\n    "},Xi="return a + b;",Ji="return a - b;",Yi="return a * b;",Qi="return (a < 0.) ? b * a : a;",$i=function(t,e,n){this.variableNames=["A","B"],this.outputShape=nn(e,n),this.userCode="\n      float binaryOperation(float a, float b) {\n        "+t+"\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    "},Zi="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n",ta=function(t,e,n,r){void 0===r&&(r=!1),this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=nn(e,n);var o=this.outputShape.length,i="";if(r)if(0===o||1===w(this.outputShape))i="\n          result.y = 0.;\n          result.z = 0.;\n          result.w = 0.;\n        ";else if(i="\n          "+Hn(o)+" coords = getOutputCoords();\n        ",1===o)i+="\n            result.y = (coords + 1) >= "+this.outputShape[0]+" ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ";else{var a=Fn("coords",o);i+="\n            bool nextRowOutOfBounds =\n              ("+a[o-2]+" + 1) >= "+this.outputShape[o-2]+";\n            bool nextColOutOfBounds =\n              ("+a[o-1]+" + 1) >= "+this.outputShape[o-1]+";\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          "}this.userCode="\n      vec4 binaryOperation(vec4 a, vec4 b) {\n        "+t+"\n      }\n\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n\n        vec4 result = binaryOperation(a, b);\n        "+i+"\n\n        setOutput(result);\n      }\n    "},ea=function(){function t(t){this.variableNames=["A"],this.outputShape=t,this.userCode="\n      uniform float minVal;\n      uniform float maxVal;\n\n      void main() {\n        float value = getAAtOutCoords();\n        if (isnan(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, minVal, maxVal));\n      }\n    "}return t.prototype.getCustomSetupFunc=function(t,e){var n=this;return function(r,o){null==n.minLoc&&(n.minLoc=r.getUniformLocationNoThrow(o,"minVal"),n.maxLoc=r.getUniformLocationNoThrow(o,"maxVal")),r.gl.uniform1f(n.minLoc,t),r.gl.uniform1f(n.maxLoc,e)}},t}(),na=function(){function t(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.userCode="\n      uniform float minVal;\n      uniform float maxVal;\n\n      void main() {\n        vec4 value = getAAtOutCoords();\n\n        if (any(isnan(value))) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));\n      }\n    "}return t.prototype.getCustomSetupFunc=function(t,e){var n=this;return function(r,o){null==n.minLoc&&(n.minLoc=r.getUniformLocationNoThrow(o,"minVal"),n.maxLoc=r.getUniformLocationNoThrow(o,"maxVal")),r.gl.uniform1f(n.minLoc,t),r.gl.uniform1f(n.maxLoc,e)}},t}(),ra=function(t){this.variableNames=["real","imag"],this.outputShape=t,this.userCode="\n      void main() {\n        float re = abs(getRealAtOutCoords());\n        float im = abs(getImagAtOutCoords());\n        float mx = max(re, im);\n\n        // sadly the length function in glsl is not underflow-safe\n        // (at least not on Intel GPUs). So the safe solution is\n        // to ensure underflow-safety in all cases.\n        setOutput(\n          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))\n        );\n      }\n    "},oa=function(t){this.outputShape=[],this.outputShape=xe(t,1),this.variableNames=t.map((function(t,e){return"T"+e}));var e=new Array(t.length-1);e[0]=t[0][1];for(var n=1;n<e.length;n++)e[n]=e[n-1]+t[n][1];var r=["if (yC < "+e[0]+") setOutput(getT0(yR, yC));"];for(n=1;n<e.length;n++){r.push("else if (yC < "+e[n]+") setOutput(getT"+n+"(yR, yC-"+e[n-1]+"));")}r.push("else setOutput(getT"+e.length+"(yR, yC-"+e[e.length-1]+"));"),this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        "+r.join("\n        ")+"\n      }\n    "},ia=function(t,e){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=xe(t,e);var n=this.outputShape,r=n.length,o=Hn(r),i=Fn("coords",r),a=["x","y","z","w","u","v"].slice(0,r);this.variableNames=t.map((function(t,e){return"T"+e}));var s=new Array(t.length-1);s[0]=t[0][e];for(var u=1;u<s.length;u++)s[u]=s[u-1]+t[u][e];var c=a[e],l=a.slice(-2),f=a.join(),h="if ("+c+" < "+s[0]+") {\n        return getChannel(\n            getT0("+f+"), vec2("+l.join()+"));\n        }";for(u=1;u<s.length;u++){var d=s[u-1];h+="\n        if ("+c+" < "+s[u]+"  && "+c+" >= "+s[u-1]+") {\n          return getChannel(\n            getT"+u+"("+Xn(a,c,d)+"),\n            vec2("+Xn(l,c,d)+"));\n        }"}var p=s[s.length-1];h+="\n        return getChannel(\n          getT"+s.length+"("+Xn(a,c,p)+"),\n          vec2("+Xn(l,c,p)+"));",this.userCode="\n      float getValue("+a.map((function(t){return"int "+t}))+") {\n        "+h+"\n      }\n\n      void main() {\n        "+o+" coords = getOutputCoords();\n        vec4 result = vec4(getValue("+i+"), 0., 0., 0.);\n\n        "+i[r-1]+" = "+i[r-1]+" + 1;\n        if ("+i[r-1]+" < "+n[r-1]+") {\n          result.g = getValue("+i+");\n        }\n\n        "+i[r-2]+" = "+i[r-2]+" + 1;\n        if ("+i[r-2]+" < "+n[r-2]+") {\n          result.a = getValue("+i+");\n        }\n\n        "+i[r-1]+" = "+i[r-1]+" - 1;\n        if ("+i[r-2]+" < "+n[r-2]+" &&\n            "+i[r-1]+" < "+n[r-1]+") {\n          result.b = getValue("+i+");\n        }\n        setOutput(result);\n      }\n    "},aa=function(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape,this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < "+t.batchSize+"; b++) {\n          for (int yR = 0; yR < "+t.outHeight+"; yR++) {\n            int xR = wR + yR * "+t.strideHeight+" - "+t.padInfo.top+";\n\n            if (xR < 0 || xR >= "+t.inHeight+") {\n              continue;\n            }\n\n            for (int yC = 0; yC < "+t.outWidth+"; yC++) {\n              int xC = wC + yC * "+t.strideWidth+" - "+t.padInfo.left+";\n\n              if (xC < 0 || xC >= "+t.inWidth+") {\n                continue;\n              }\n\n              if ("+("channelsLast"===t.dataFormat)+") {\n                float dyValue = getDy(b, yR, yC, d2);\n                float xValue = getX(b, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              } else {\n                float dyValue = getDy(b, d2, yR, yC);\n                float xValue = getX(b, d1, xR, xC);\n                dotProd += (xValue * dyValue);\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},sa=function(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;var e=t.filterHeight,n=t.filterWidth,r="channelsLast"===t.dataFormat;this.userCode="\n      const ivec2 pads = ivec2("+(e-1-t.padInfo.top)+", "+(n-1-t.padInfo.left)+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords["+(r?3:1)+"];\n\n        ivec2 dyCorner = ivec2(coords["+(r?1:2)+"], coords["+(r?2:3)+"]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+e+"; wR++) {\n          float dyR = float(dyRCorner + wR) / "+t.strideHeight+".0;\n\n          if (dyR < 0.0 || dyR >= "+t.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = "+e+" - 1 - wR;\n\n          for (int wC = 0; wC < "+n+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+t.strideWidth+".0;\n\n            if (dyC < 0.0 || dyC >= "+t.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = "+n+" - 1 - wC;\n\n            for (int d2 = 0; d2 < "+t.outChannels+"; d2++) {\n\n              if ("+r+") {\n                float xValue = getDy(batch, idyR, idyC, d2);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              } else {\n                float xValue = getDy(batch, d2, idyR, idyC);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},ua=function(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape,this.userCode="\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int wF = coords.x;\n        int wR = coords.y;\n        int wC = coords.z;\n        int d1 = coords.w;\n        int d2 = coords.u;\n\n        float dotProd = 0.0;\n\n        for (int b = 0; b < "+t.batchSize+"; b++) {\n          for (int yF = 0; yF < "+t.outDepth+"; yF++) {\n            int xF = wF + yF * "+t.strideDepth+" - "+t.padInfo.front+";\n\n            if (xF < 0 || xF >= "+t.inDepth+") {\n              continue;\n            }\n\n            for (int yR = 0; yR < "+t.outHeight+"; yR++) {\n              int xR = wR + yR * "+t.strideHeight+" - "+t.padInfo.top+";\n\n              if (xR < 0 || xR >= "+t.inHeight+") {\n                continue;\n              }\n\n              for (int yC = 0; yC < "+t.outWidth+"; yC++) {\n                int xC = wC + yC * "+t.strideWidth+" - "+t.padInfo.left+";\n\n                if (xC < 0 || xC >= "+t.inWidth+") {\n                  continue;\n                }\n\n                float dyValue = getDy(b, yF, yR, yC, d2);\n                float xValue = getX(b, xF, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},ca=function(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;var e=t.filterDepth,n=t.filterHeight,r=t.filterWidth;this.userCode="\n      const ivec3 pads = ivec3("+(e-1-t.padInfo.front)+", "+(n-1-t.padInfo.top)+", "+(r-1-t.padInfo.left)+");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.u;\n\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyFCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        float dotProd = 0.0;\n        for (int wF = 0; wF < "+e+"; wF++) {\n          float dyF = float(dyFCorner + wF) / "+t.strideDepth+".0;\n\n          if (dyF < 0.0 || dyF >= "+t.outDepth+".0 || fract(dyF) > 0.0) {\n            continue;\n          }\n          int idyF = int(dyF);\n\n          int wFPerm = "+e+" - 1 - wF;\n\n          for (int wR = 0; wR < "+n+"; wR++) {\n            float dyR = float(dyRCorner + wR) / "+t.strideHeight+".0;\n\n            if (dyR < 0.0 || dyR >= "+t.outHeight+".0 ||\n              fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            int wRPerm = "+n+" - 1 - wR;\n\n            for (int wC = 0; wC < "+r+"; wC++) {\n              float dyC = float(dyCCorner + wC) / "+t.strideWidth+".0;\n\n              if (dyC < 0.0 || dyC >= "+t.outWidth+".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              int wCPerm = "+r+" - 1 - wC;\n\n              for (int d2 = 0; d2 < "+t.outChannels+"; d2++) {\n                float xValue = getDy(batch, idyF, idyR, idyC, d2);\n                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},la=function(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape,this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int dm = coords.w;\n        int d2 = d1 * "+t.outChannels/t.inChannels+" + dm;\n\n        float dotProd = 0.0;\n\n        // TO DO: Vec4 over the batch size\n        for (int b = 0; b < "+t.batchSize+"; b++) {\n          for (int yR = 0; yR < "+t.outHeight+"; yR++) {\n            int xR = wR + yR * "+t.strideHeight+" - "+t.padInfo.top+";\n\n            if (xR < 0 || xR >= "+t.inHeight+") {\n              continue;\n            }\n\n            for (int yC = 0; yC < "+t.outWidth+"; yC++) {\n              int xC = wC + yC * "+t.strideWidth+" - "+t.padInfo.left+";\n\n              if (xC < 0 || xC >= "+t.inWidth+") {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},fa=function(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;var e=t.filterHeight,n=t.filterWidth,r=t.outChannels/t.inChannels;this.userCode="\n      const ivec2 pads = ivec2("+(e-1-t.padInfo.top)+", "+(n-1-t.padInfo.left)+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        float dotProd = 0.0;\n\n        for (int wR = 0; wR < "+e+"; wR++) {\n          float dyR = float(dyRCorner + wR) / "+t.strideHeight+".0;\n\n          if (dyR < 0.0 || dyR >= "+t.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = "+e+" - 1 - wR;\n\n          for (int wC = 0; wC < "+n+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+t.strideWidth+".0;\n\n            if (dyC < 0.0 || dyC >= "+t.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = "+n+" - 1 - wC;\n\n            // TO DO: Vec4 over the channelMul\n            for (int dm = 0; dm < "+r+"; dm++) {\n              int d2 = d1 * "+r+" + dm;\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},ha=function(t,e,n,r){void 0===e&&(e=!1),void 0===n&&(n=null),void 0===r&&(r=!1),this.variableNames=["x","W"],this.outputShape=t.outShape;var o=t.padInfo.top,i=t.padInfo.left,a=t.strideHeight,s=t.strideWidth,u=t.dilationHeight,c=t.dilationWidth,l=t.filterHeight,f=t.filterWidth,h=4*Math.floor(t.inChannels/4),d=t.inChannels%4,p="channelsLast"===t.dataFormat,v=p?1:2,g=p?2:3,m=p?3:1,y="",b="";n&&(y=r?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          "+n+"\n        }":"\n          float activation(float x) {\n            "+n+"\n          }\n        ",b="result = activation(result);");var x=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode="\n      "+y+"\n\n      const ivec2 strides = ivec2("+a+", "+s+");\n      const ivec2 pads = ivec2("+o+", "+i+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords["+m+"];\n\n        ivec2 xRCCorner =\n            ivec2(coords["+v+"], coords["+g+"]) * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+l+"; wR++) {\n          int xR = xRCorner + wR * "+u+";\n\n          if (xR < 0 || xR >= "+t.inHeight+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+f+"; wC++) {\n            int xC = xCCorner + wC * "+c+";\n\n            if (xC < 0 || xC >= "+t.inWidth+") {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < "+h+"; d1 += 4) {\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              if ("+p+") {\n                vec4 xValues = vec4(\n                  getX(batch, xR, xC, d1),\n                  getX(batch, xR, xC, d1 + 1),\n                  getX(batch, xR, xC, d1 + 2),\n                  getX(batch, xR, xC, d1 + 3)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec4 xValues = vec4(\n                  getX(batch, d1, xR, xC),\n                  getX(batch, d1 + 1, xR, xC),\n                  getX(batch, d1 + 2, xR, xC),\n                  getX(batch, d1 + 3, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n\n            if ("+(1===d)+") {\n\n              if ("+p+") {\n                dotProd +=\n                    getX(batch, xR, xC, "+h+") *\n                    getW(wR, wC, "+h+", d2);\n              } else {\n                dotProd +=\n                    getX(batch, "+h+", xR, xC) *\n                    getW(wR, wC, "+h+", d2);\n              }\n\n            } else if ("+(2===d)+") {\n              vec2 wValues = vec2(\n                getW(wR, wC, "+h+", d2),\n                getW(wR, wC, "+h+" + 1, d2)\n              );\n\n              if ("+p+") {\n                vec2 xValues = vec2(\n                  getX(batch, xR, xC, "+h+"),\n                  getX(batch, xR, xC, "+h+" + 1)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec2 xValues = vec2(\n                  getX(batch, "+h+", xR, xC),\n                  getX(batch, "+h+" + 1, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            } else if ("+(3===d)+") {\n              vec3 wValues = vec3(\n                getW(wR, wC, "+h+", d2),\n                getW(wR, wC, "+h+" + 1, d2),\n                getW(wR, wC, "+h+" + 2, d2)\n              );\n\n              if ("+p+") {\n                vec3 xValues = vec3(\n                  getX(batch, xR, xC, "+h+"),\n                  getX(batch, xR, xC, "+h+" + 1),\n                  getX(batch, xR, xC, "+h+" + 2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec3 xValues = vec3(\n                  getX(batch, "+h+", xR, xC),\n                  getX(batch, "+h+" + 1, xR, xC),\n                  getX(batch, "+h+" + 2, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            }\n          }\n        }\n\n        float result = dotProd;\n        "+x+"\n        "+b+"\n        setOutput(result);\n      }\n    "},da=function(t){this.variableNames=["x","W"],this.outputShape=t.outShape;var e=t.padInfo.front,n=t.padInfo.top,r=t.padInfo.left,o=t.strideDepth,i=t.strideHeight,a=t.strideWidth,s=t.dilationDepth,u=t.dilationHeight,c=t.dilationWidth,l=t.filterDepth,f=t.filterHeight,h=t.filterWidth,d=4*Math.floor(t.inChannels/4),p=t.inChannels%4;this.userCode="\n      const ivec3 strides = ivec3("+o+", "+i+", "+a+");\n      const ivec3 pads = ivec3("+e+", "+n+", "+r+");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d2 = coords.u;\n\n        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xFCorner = xFRCCorner.x;\n        int xRCorner = xFRCCorner.y;\n        int xCCorner = xFRCCorner.z;\n\n        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get\n        // y(yF, yR, yC, d2). ? = to be determined. : = across all\n        // values in that axis.\n        float dotProd = 0.0;\n        for (int wF = 0; wF < "+l+"; wF++) {\n          int xF = xFCorner + wF * "+s+";\n\n          if (xF < 0 || xF >= "+t.inDepth+") {\n            continue;\n          }\n\n          for (int wR = 0; wR < "+f+"; wR++) {\n            int xR = xRCorner + wR * "+u+";\n\n            if (xR < 0 || xR >= "+t.inHeight+") {\n              continue;\n            }\n\n            for (int wC = 0; wC < "+h+"; wC++) {\n              int xC = xCCorner + wC * "+c+";\n\n              if (xC < 0 || xC >= "+t.inWidth+") {\n                continue;\n              }\n\n              for (int d1 = 0; d1 < "+d+"; d1 += 4) {\n                vec4 xValues = vec4(\n                  getX(batch, xF, xR, xC, d1),\n                  getX(batch, xF, xR, xC, d1 + 1),\n                  getX(batch, xF, xR, xC, d1 + 2),\n                  getX(batch, xF, xR, xC, d1 + 3)\n                );\n                vec4 wValues = vec4(\n                  getW(wF, wR, wC, d1, d2),\n                  getW(wF, wR, wC, d1 + 1, d2),\n                  getW(wF, wR, wC, d1 + 2, d2),\n                  getW(wF, wR, wC, d1 + 3, d2)\n                );\n\n                dotProd += dot(xValues, wValues);\n              }\n\n              if ("+(1===p)+") {\n                dotProd +=\n                  getX(batch, xF, xR, xC, "+d+") *\n                  getW(wF, wR, wC, "+d+", d2);\n              } else if ("+(2===p)+") {\n                vec2 xValues = vec2(\n                  getX(batch, xF, xR, xC, "+d+"),\n                  getX(batch, xF, xR, xC, "+d+" + 1)\n                );\n                vec2 wValues = vec2(\n                  getW(wF, wR, wC, "+d+", d2),\n                  getW(wF, wR, wC, "+d+" + 1, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else if ("+(3===p)+") {\n                vec3 xValues = vec3(\n                  getX(batch, xF, xR, xC, "+d+"),\n                  getX(batch, xF, xR, xC, "+d+" + 1),\n                  getX(batch, xF, xR, xC, "+d+" + 2)\n                );\n                vec3 wValues = vec3(\n                  getW(wF, wR, wC, "+d+", d2),\n                  getW(wF, wR, wC, "+d+" + 1, d2),\n                  getW(wF, wR, wC, "+d+" + 2, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},pa=function(t,e,n,r){void 0===e&&(e=!1),void 0===n&&(n=null),void 0===r&&(r=!1),this.variableNames=["x","W"],this.outputShape=t.outShape;var o=t.inHeight,i=t.inWidth,a=t.padInfo.top,s=t.padInfo.left,u=t.strideHeight,c=t.strideWidth,l=t.dilationHeight,f=t.dilationWidth,h=t.filterHeight,d=t.filterWidth,p=t.outChannels/t.inChannels,v="",g="";n&&(v=r?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          "+n+"\n        }":"\n          float activation(float x) {\n            "+n+"\n          }\n        ",g="result = activation(result);");var m=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode="\n      "+v+"\n\n      const ivec2 strides = ivec2("+u+", "+c+");\n      const ivec2 pads = ivec2("+a+", "+s+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / "+p+";\n        int q = d2 - d1 * "+p+";\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < "+h+"; wR++) {\n          int xR = xRCorner + wR * "+l+";\n\n          if (xR < 0 || xR >= "+o+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+d+"; wC++) {\n            int xC = xCCorner + wC * "+f+";\n\n            if (xC < 0 || xC >= "+i+") {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n\n        float result = dotProd;\n        "+m+"\n        "+g+"\n        setOutput(result);\n      }\n    "},va=function(t,e,n,r){void 0===e&&(e=!1),void 0===n&&(n=null),void 0===r&&(r=!1),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.outShape;for(var o=t.inHeight,i=t.inWidth,a=t.padInfo.top,s=t.padInfo.left,u=t.strideHeight,c=t.strideWidth,l=t.dilationHeight,f=t.dilationWidth,h=t.filterHeight,d=t.filterWidth,p=d,g="int xR; int xC; int xCOffset;",m=0;m<h;m++)for(var y=0;y<d;y++)g+="\n          vec4 xTexelR"+m+"C"+2*y+" = vec4(0.);\n          vec4 wR"+m+"C"+y+" = vec4(0.);\n          vec4 xR"+m+"C"+y+" = vec4(0.);";for(m=0;m<h;m++)for(var b=0;b<p;b++){if(g+="\n          xR = xRCorner + "+m*l+";\n          xC = xCCorner + "+(y=2*b)*f+";\n        ",1===c){if(y<d&&(g+=s%2==1?"\n                xCOffset = xC + 1;\n                if(xR >= 0 && xR < "+o+" && xCOffset >= 0 && xCOffset < "+i+") {\n                  xTexelR"+m+"C"+y+" = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if(xCOffset + 1 >= "+i+") {\n                    xTexelR"+m+"C"+y+".zw = vec2(0.);\n                  }\n                } else {\n                  xTexelR"+m+"C"+y+" = vec4(0.);\n                }\n\n                xCOffset = xC + 1 - 2;\n                if(xR >= 0 && xR < "+o+" && xCOffset >= 0 && xCOffset < "+i+") {\n                  vec4 previous = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if(xCOffset + 1 >= "+i+") {\n                    previous.zw = vec2(0.);\n                  }\n\n                  xR"+m+"C"+y+" = vec4(previous.zw, xTexelR"+m+"C"+y+".xy);\n                } else {\n                  xR"+m+"C"+y+" = vec4(0, 0, xTexelR"+m+"C"+y+".xy);\n                }\n              ":"\n                if(xR >= 0 && xR < "+o+" && xC >= 0 && xC < "+i+") {\n                  xTexelR"+m+"C"+y+" = getX(batch, xR, xC, d1);\n                } else {\n                  xTexelR"+m+"C"+y+" = vec4(0.);\n                }\n\n                xR"+m+"C"+y+" = xTexelR"+m+"C"+y+";\n              ",y+1<d)){var x=s%2==0?v(f):f;f%2==0&&s%2==1||f%2!=0&&s%2!=1?(g+="\n                  xCOffset = xC + "+s%2+" + "+x+";\n\n                  if(xR >= 0 && xR < "+o+" &&\n                    xCOffset >= 0 && xCOffset < "+i+") {\n                    xTexelR"+m+"C"+(y+2)+" = getX(batch, xR, xCOffset, d1);\n                  }\n                ",f>1&&(g+="\n                    xCOffset -= 2;\n                    if(xR >= 0 && xR < "+o+" &&\n                      xCOffset >= 0 && xCOffset < "+i+") {\n                      xTexelR"+m+"C"+y+" = getX(batch, xR, xCOffset, d1);\n                    } else {\n                      xTexelR"+m+"C"+y+" = vec4(0.);\n                    }\n                  "),g+="\n                  xR"+m+"C"+(y+1)+" = vec4(\n                    xTexelR"+m+"C"+y+".zw, xTexelR"+m+"C"+(y+2)+".xy);\n                "):g+="\n                  xCOffset = xC + "+x+";\n\n                  if(xR >= 0 && xR < "+o+" &&\n                    xCOffset >= 0 && xCOffset < "+i+") {\n                    xTexelR"+m+"C"+(y+2)+" = getX(batch, xR, xCOffset, d1);\n                  }\n\n                  xR"+m+"C"+(y+1)+" = xTexelR"+m+"C"+(y+2)+";\n                "}}else y<d&&(g+="\n              if(xR >= 0 && xR < "+o+") {\n            ",s%2==1?(g+="\n                xCOffset = xC + 1 - "+c+";\n                if(xCOffset >= 0 && xCOffset < "+i+") {\n                  xTexelR"+m+"C"+y+" = getX(batch, xR, xCOffset, d1);\n                } else {\n                  xTexelR"+m+"C"+y+" = vec4(0.);\n                }\n\n                if(xC + 1 >= 0 && xC + 1 < "+i+") {\n                  xTexelR"+m+"C"+(y+2)+" = getX(batch, xR, xC + 1, d1);\n                } else {\n                  xTexelR"+m+"C"+(y+2)+" = vec4(0.);\n                }\n\n                xR"+m+"C"+y+" = vec4(\n                  xTexelR"+m+"C"+y+".zw, xTexelR"+m+"C"+(y+2)+".zw);\n              ",y+1<d&&(g+="\n                  vec4 final = vec4(0.);\n                  xCOffset = xC + 1 + "+c+";\n                  if(xCOffset >= 0 && xCOffset < "+i+") {\n                    final = getX(batch, xR, xCOffset, d1);\n                  }\n                  xR"+m+"C"+(y+1)+" = vec4(xTexelR"+m+"C"+(y+2)+".xy, final.xy);\n                ")):(g+="\n                if(xC >= 0 && xC < "+i+") {\n                  xTexelR"+m+"C"+y+" = getX(batch, xR, xC, d1);\n                } else {\n                  xTexelR"+m+"C"+y+" = vec4(0.);\n                }\n\n                xCOffset = xC + "+c+";\n                if(xCOffset >= 0 && xCOffset < "+i+") {\n                  xTexelR"+m+"C"+(y+2)+" = getX(batch, xR, xCOffset, d1);\n                } else {\n                  xTexelR"+m+"C"+(y+2)+" = vec4(0.);\n                }\n\n                xR"+m+"C"+y+" = vec4(\n                  xTexelR"+m+"C"+y+".xy, xTexelR"+m+"C"+(y+2)+".xy);\n              ",y+1<d&&(g+="\n                  xR"+m+"C"+(y+1)+" = vec4(\n                    xTexelR"+m+"C"+y+".zw, xTexelR"+m+"C"+(y+2)+".zw);\n                ")),g+="}");y<d&&(g+="\n            vec4 wTexelR"+m+"C"+y+" = getW("+m+", "+y+", d1, q);\n            wR"+m+"C"+y+" = vec4(wTexelR"+m+"C"+y+".xz, wTexelR"+m+"C"+y+".xz);\n          ",y+1<d&&(g+="\n              vec4 wTexelR"+m+"C"+(y+1)+" = getW("+m+", "+(y+1)+", d1, q);\n              wR"+m+"C"+(y+1)+" =\n                vec4(wTexelR"+m+"C"+(y+1)+".xz, wTexelR"+m+"C"+(y+1)+".xz);"))}for(m=0;m<h;m++)for(y=0;y<d;y++)g+="dotProd += xR"+m+"C"+y+" * wR"+m+"C"+y+";";var w="",_="";n&&(w=r?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          "+n+"\n        }":"vec4 activation(vec4 x) {\n          "+n+"\n        }",_="result = activation(result);");var E=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode="\n      "+w+"\n\n      const ivec2 strides = ivec2("+u+", "+c+");\n      const ivec2 pads = ivec2("+a+", "+s+");\n\n      void main() {\n\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2;\n        int q = 0;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        vec4 dotProd = vec4(0.);\n\n        "+g+"\n\n        vec4 result = dotProd;\n        "+E+"\n        "+_+"\n        setOutput(result);\n      }\n    "},ga=function(t,e,n,r,o){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var i=t[0],a=t[1],s=t[2],u=n[0],c=n[1];this.outputShape=[e[0],u,c,t[3]];var l=[a-1+".0",s-1+".0"],f=l[0],h=l[1],d=u>1?[""+(a-1)/(u-1),"(y2-y1) * height_ratio","y1*"+f+" + float(y)*(height_scale)"]:["0.0","0.0","0.5 * (y1+y2) * "+f],p=c>1?[""+(s-1)/(c-1),"(x2-x1) * width_ratio","x1*"+h+" + float(x)*(width_scale)"]:["0.0","0.0","0.5 * (x1+x2) * "+h];this.userCode="\n      const float height_ratio = float("+d[0]+");\n      const float width_ratio = float("+p[0]+");\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int y = coords[1];\n        int x = coords[2];\n        int d = coords[3];\n\n        // get box vals\n        float y1 = getBoxes(b,0);\n        float x1 = getBoxes(b,1);\n        float y2 = getBoxes(b,2);\n        float x2 = getBoxes(b,3);\n\n        // get image in batch index\n        int bInd = round(getBoxInd(b));\n        if(bInd < 0 || bInd >= "+i+") {\n          return;\n        }\n\n        float height_scale = "+d[1]+";\n        float width_scale = "+p[1]+";\n\n        float in_y = "+d[2]+";\n        if( in_y < 0.0 || in_y > "+f+" ) {\n          setOutput(float("+o+"));\n          return;\n        }\n        float in_x = "+p[2]+";\n        if( in_x < 0.0 || in_x > "+h+" ) {\n          setOutput(float("+o+"));\n          return;\n        }\n\n        vec2 sourceFracIndexCR = vec2(in_x,in_y);\n        if("+("bilinear"===r?1:0)+" == 1) {\n          // Compute the four integer indices.\n          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);\n          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));\n\n          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);\n          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);\n          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);\n          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);\n\n          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);\n\n          float top = topLeft + (topRight - topLeft) * fracCR.x;\n          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\n          float newValue = top + (bottom - top) * fracCR.y;\n          setOutput(newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          ivec2 sourceNearestCR = ivec2(floor(\n            sourceFracIndexCR + vec2(0.5,0.5)));\n          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);\n          setOutput(newValue);\n        }\n      }\n    "},ma=function(t,e,n){this.variableNames=["x"],this.outputShape=t;var r=t.length,o=t[t.length-1],i=n?"<":">";this.userCode="\n      int getIndex(int i) {\n        "+(n?"return "+o+" -i - 1;":"return i;")+"\n      }\n\n      void main() {\n        "+Hn(r)+" coords = getOutputCoords();\n        int end = "+Jn(r,"coords")+";\n        float val = 0.0;\n        for (int i = "+o+" - 1; i >= 0; i -= 1) {\n          int idx = getIndex(i);\n          if (idx "+i+" end) {\n            continue;\n          }\n          if (idx == end && "+e+") {\n            continue;\n          }\n          "+Jn(r,"coords")+" = idx;\n          val += getX("+function(t,e){if(1===t)return""+e;if(2===t)return e+".x, "+e+".y";if(3===t)return e+".x, "+e+".y, "+e+".z";if(4===t)return e+".x, "+e+".y, "+e+".z, "+e+".w";throw Error("Cumulative sum for rank "+t+" is not yet supported")}(r,"coords")+");\n        }\n        setOutput(val);\n      }\n    "},ya=function(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=Oo.DENSE;var e=pt(t),n=Ln();this.outputShape=t,this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        "+jn(["r","c","d"],t)+"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n          vec2("+e[0]+", "+e[1]+"));\n        int index = 4 * (resTexRC.x * "+e[1]+" + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getA(rc.x, rc.y, rc.z);\n        }\n\n        "+n.output+" = result;\n      }\n    "},ba=function(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=Oo.DENSE;var e=pt(t),n=Ln();this.outputShape=t,this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        "+jn(["r","c","d"],t)+"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n          vec2("+e[0]+", "+e[1]+"));\n        int index = 4 * (resTexRC.x * "+e[1]+" + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));\n        }\n\n        "+n.output+" = result;\n      }\n    "},xa=function(){function t(t,e,n){this.variableNames=["x"],this.outputShape=[],this.outputShape=t,this.blockSize=e,this.dataFormat=n,this.userCode="\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int b = coords[0];\n      int h = "+this.getHeightCoordString()+";\n      int w = "+this.getWidthCoordString()+";\n      int d = "+this.getDepthCoordString()+";\n\n      int in_h = h / "+e+";\n      int offset_h = imod(h, "+e+");\n      int in_w = w / "+e+";\n      int offset_w = imod(w, "+e+");\n      int offset_d = (offset_h * "+e+" + offset_w) *\n        "+this.getOutputDepthSize()+";\n      int in_d = d + offset_d;\n\n      float result = "+this.getInputSamplingString()+";\n      setOutput(result);\n    }\n  "}return t.prototype.getHeightCoordString=function(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"},t.prototype.getWidthCoordString=function(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"},t.prototype.getDepthCoordString=function(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"},t.prototype.getOutputDepthSize=function(){return"NHWC"===this.dataFormat?this.outputShape[3]:this.outputShape[1]},t.prototype.getInputSamplingString=function(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"},t}(),wa=function(t){this.variableNames=["X"],this.outputShape=[t,t],this.userCode="\n      void main() {\n          ivec2 coords = getOutputCoords();\n          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;\n          setOutput(val);\n      }\n    "},_a=function(t){this.variableNames=["A"],this.outTexUsage=Ao.DOWNLOAD;var e=Ln();this.outputShape=t,this.userCode="\n      "+Li+"\n\n      void main() {\n        float x = getAAtOutCoords();\n        "+e.output+" = encode_float(x);\n      }\n    "},Ea=function(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=Ao.DOWNLOAD;var e=Ln();this.outputShape=t,this.userCode="\n      "+Li+"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));\n        "+e.output+" = encode_float(x);\n      }\n    "},Ra=function(t,e,n){void 0===n&&(n=!1),this.variableNames=["A"];var r=Ln(),o=e[0],i=e[1];this.outputShape=t;var a="result";n&&(a="floor(result * 255. + 0.5)"),this.userCode="\n      "+Bn(t)+"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        int flatIndex = getFlatIndex(coords);\n        int offset = imod(flatIndex, 4);\n\n        flatIndex = idiv(flatIndex, 4, 1.);\n        \n        int r = flatIndex / "+i+";\n        int c = imod(flatIndex, "+i+");\n        vec2 uv = (vec2(c, r) + halfCR) / vec2("+i+".0, "+o+".0);\n        vec4 values = "+r.texture2D+"(A, uv);\n\n        float result;\n\n        if(offset == 0) {\n          result = values[0];\n        } else if(offset == 1) {\n          result = values[1];\n        } else if(offset == 2) {\n          result = values[2];\n        } else {\n          result = values[3];\n        }\n\n        "+r.output+" = vec4("+a+", 0., 0., 0.);\n      }\n    "},Ca=function(t,e,n){void 0===n&&(n=!1),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var r=Ln(),o=e[0],i=e[1];this.outputShape=t;var a="",s="result";n&&(s="floor(result * 255. + 0.5)");for(var u=0;u<=1;u++)for(var c=0;c<=1;c++){var l=2*u+c;a+="\n          localCoords = coords;\n          if(localCoords[2] + "+c+" < "+t[2]+") {\n            localCoords[2] += "+c+";\n            if(localCoords[1] + "+u+" < "+t[1]+") {\n              localCoords[1] += "+u+";\n\n              flatIndex = getFlatIndex(localCoords);\n              offset = imod(flatIndex, 4);\n\n              flatIndex = idiv(flatIndex, 4, 1.);\n\n              r = flatIndex / "+i+";\n              c = imod(flatIndex, "+i+");\n              uv = (vec2(c, r) + halfCR) / vec2("+i+".0, "+o+".0);\n              values = "+r.texture2D+"(A, uv);\n\n              if(offset == 0) {\n                result["+l+"] = values[0];\n              } else if(offset == 1) {\n                result["+l+"] = values[1];\n              } else if(offset == 2) {\n                result["+l+"] = values[2];\n              } else {\n                result["+l+"] = values[3];\n              }\n            }\n          }\n        "}this.userCode="\n      "+Bn(t)+"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        vec4 result = vec4(0.);\n        int flatIndex, r, c, offset;\n        ivec3 localCoords;\n        vec2 uv;\n        vec4 values;\n\n        "+a+"\n\n        "+r.output+" = "+s+";\n      }\n    "},Sa=function(t,e,n){this.variableNames=["real","imag"];var r=e[1];this.outputShape=e;var o=n?"2.0 * "+Math.PI:"-2.0 * "+Math.PI;this.userCode="\n      const float exponentMultiplier = "+o+";\n\n      float unaryOpComplex(float real, float expR, float imag, float expI) {\n        "+t+"\n      }\n\n      float mulMatDFT(int batch, int index) {\n        float indexRatio = float(index) / float("+r+");\n        float exponentMultiplierTimesIndexRatio =\n            exponentMultiplier * indexRatio;\n\n        float result = 0.0;\n\n        for (int i = 0; i < "+r+"; i++) {\n          // x = (-2|2 * PI / N) * index * i;\n          float x = exponentMultiplierTimesIndexRatio * float(i);\n          float expR = cos(x);\n          float expI = sin(x);\n          float real = getReal(batch, i);\n          float imag = getImag(batch, i);\n\n          result +=\n              unaryOpComplex(real, expR, imag, expI) / "+(n?r+".0":"1.0")+";\n        }\n\n        return result;\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        setOutput(mulMatDFT(coords[0], coords[1]));\n      }\n    "},Oa=function(){function t(t){this.outputShape=[],this.variableNames=["x"],this.outputShape=t,this.userCode="\n      uniform float value;\n      void main() {\n        // Input can be obtained from uniform value.\n        setOutput(value);\n      }\n    "}return t.prototype.getCustomSetupFunc=function(t){var e=this;return function(n,r){null==e.valueLoc&&(e.valueLoc=n.getUniformLocationNoThrow(r,"value")),n.gl.uniform1f(e.valueLoc,t)}},t}(),Aa=function(t,e,n){this.variableNames=["A","indices"];var r=t.slice();r[n]=e,this.outputShape=r,this.rank=r.length;var o=Hn(this.rank),i=function(t,e){var n=t.length;if(n>4)throw Error("Gather for rank "+n+" is not yet supported");if(1===n)return"int(getIndices(resRC))";for(var r=["resRC.x","resRC.y","resRC.z","resRC.w"],o=[],i=0;i<t.length;i++)o.push(i===e?"int(getIndices("+r[i]+"))":""+r[i]);return o.join()}(t,n);this.userCode="\n      void main() {\n        "+o+" resRC = getOutputCoords();\n        setOutput(getA("+i+"));\n      }\n    "},Ia=function(t,e,n){this.sliceDim=t,this.strides=e,this.variableNames=["x","indices"],this.outputShape=n;var r=Hn(e.length),o=Hn(n.length);this.userCode="\n        "+r+" strides = "+r+"("+this.strides+");\n         void main() {\n          "+o+" coords = getOutputCoords();\n          int flattenIndex = 0;\n          for (int j = 0; j < "+this.sliceDim+"; j++) {\n            int index = round(getIndices(coords[0], j));\n            flattenIndex += index * "+(this.sliceDim>1?"strides[j]":"strides")+";\n          }\n          setOutput(getX(flattenIndex, coords[1]));\n        }\n      "},ka=function(){function t(t){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];var e=u().getNumber("WEBGL_VERSION");null!=t?(this.gl=t,ft(e,t)):this.gl=ht(e);var n="WEBGL_color_buffer_float";if(1===u().getNumber("WEBGL_VERSION")){if(this.textureFloatExtension=xt(this.gl,this.debug,"OES_texture_float"),Qt(this.gl,"OES_texture_half_float"))this.textureHalfFloatExtension=xt(this.gl,this.debug,"OES_texture_half_float");else if(u().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(n),Qt(this.gl,"EXT_color_buffer_half_float"))this.colorBufferHalfFloatExtension=xt(this.gl,this.debug,"EXT_color_buffer_half_float");else if(u().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(Qt(this.gl,n="EXT_color_buffer_float"))this.colorBufferFloatExtension=this.gl.getExtension(n);else{if(!Qt(this.gl,"EXT_color_buffer_half_float"))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension("EXT_color_buffer_half_float")}this.vertexBuffer=Qn(this.gl,this.debug),this.indexBuffer=$n(this.gl,this.debug),this.framebuffer=kt(this.gl,this.debug),this.textureConfig=gt(this.gl,this.textureHalfFloatExtension)}return Object.defineProperty(t.prototype,"debug",{get:function(){return u().getBool("DEBUG")},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){var t=this;if(!this.disposed){null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var e=this.gl;mt(e,this.debug,(function(){return e.finish()})),mt(e,this.debug,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,null)})),mt(e,this.debug,(function(){return e.deleteFramebuffer(t.framebuffer)})),mt(e,this.debug,(function(){return e.bindBuffer(e.ARRAY_BUFFER,null)})),mt(e,this.debug,(function(){return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)})),mt(e,this.debug,(function(){return e.deleteBuffer(t.indexBuffer)})),this.disposed=!0}},t.prototype.createFloat32MatrixTexture=function(t,e){return this.throwIfDisposed(),tr(this.gl,this.debug,t,e,this.textureConfig)},t.prototype.createFloat16MatrixTexture=function(t,e){return this.throwIfDisposed(),er(this.gl,this.debug,t,e,this.textureConfig)},t.prototype.createUnsignedBytesMatrixTexture=function(t,e){return this.throwIfDisposed(),nr(this.gl,this.debug,t,e)},t.prototype.uploadPixelDataToTexture=function(t,e){this.throwIfDisposed(),sr(this.gl,this.debug,t,e)},t.prototype.uploadDenseMatrixToTexture=function(t,e,n,r){this.throwIfDisposed(),ar(this.gl,this.debug,t,e,n,r,this.textureConfig)},t.prototype.createFloat16PackedMatrixTexture=function(t,e){return this.throwIfDisposed(),or(this.gl,this.debug,t,e,this.textureConfig)},t.prototype.createPackedMatrixTexture=function(t,e){return this.throwIfDisposed(),rr(this.gl,this.debug,t,e,this.textureConfig)},t.prototype.deleteMatrixTexture=function(t){var e=this;this.throwIfDisposed(),this.outputTexture===t&&(Lt(this.gl,this.debug,this.framebuffer),this.outputTexture=null),mt(this.gl,this.debug,(function(){return e.gl.deleteTexture(t)}))},t.prototype.downloadByteEncodedFloatMatrixFromOutputTexture=function(t,e,n){var r=this;return this.downloadMatrixDriver(t,(function(){return lr(r.gl,r.debug,e,n,r.textureConfig)}))},t.prototype.downloadPackedMatrixFromBuffer=function(t,e,n,r,o,i){return fr(this.gl,t,0,0,0,o,i)},t.prototype.downloadFloat32MatrixFromBuffer=function(t,e){return cr(this.gl,t,e)},t.prototype.createBufferFromTexture=function(t,e,n){this.bindTextureToFrameBuffer(t);var r=ur(this.gl,this.debug,e,n);return this.unbindTextureToFrameBuffer(),r},t.prototype.createAndWaitForFence=function(){var t=this.createFence(this.gl);return this.pollFence(t)},t.prototype.createFence=function(t){var e,n,r=this;if(u().getBool("WEBGL_FENCE_API_ENABLED")){var o=t,i=o.fenceSync(o.SYNC_GPU_COMMANDS_COMPLETE,0);t.flush(),n=function(){var t=o.clientWaitSync(i,0,0);return t===o.ALREADY_SIGNALED||t===o.CONDITION_SATISFIED},e=i}else u().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(e=this.beginQuery(),this.endQuery(),n=function(){return r.isQueryAvailable(e,u().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):n=function(){return!0};return{query:e,isFencePassed:n}},t.prototype.downloadMatrixFromPackedTexture=function(t,e,n){var r=this;return this.downloadMatrixDriver(t,(function(){return hr(r.gl,r.debug,e,n)}))},t.prototype.createProgram=function(t){this.throwIfDisposed();var e=this.gl,n=_t(e,this.debug,t),r=Yn(e,this.debug),o=Et(e,this.debug);return mt(e,this.debug,(function(){return e.attachShader(o,r)})),mt(e,this.debug,(function(){return e.attachShader(o,n)})),Rt(e,this.debug,o),this.debug&&Ct(e,this.debug,o),this.vertexAttrsAreBound||(this.setProgram(o),this.vertexAttrsAreBound=ir(e,this.debug,this.program,this.vertexBuffer)),o},t.prototype.deleteProgram=function(t){var e=this;this.throwIfDisposed(),t===this.program&&(this.program=null),null!=t&&mt(this.gl,this.debug,(function(){return e.gl.deleteProgram(t)}))},t.prototype.setProgram=function(t){var e=this;this.throwIfDisposed(),this.program=t,null!=this.program&&this.debug&&Ct(this.gl,this.debug,this.program),mt(this.gl,this.debug,(function(){return e.gl.useProgram(t)}))},t.prototype.getUniformLocation=function(t,e,n){return void 0===n&&(n=!0),this.throwIfDisposed(),n?Dt(this.gl,this.debug,t,e):Pt(this.gl,t,e)},t.prototype.getAttributeLocation=function(t,e){var n=this;return this.throwIfDisposed(),mt(this.gl,this.debug,(function(){return n.gl.getAttribLocation(t,e)}))},t.prototype.getUniformLocationNoThrow=function(t,e){return this.throwIfDisposed(),this.gl.getUniformLocation(t,e)},t.prototype.setInputMatrixTexture=function(t,e,n){this.throwIfDisposed(),this.throwIfNoProgram(),Nt(this.gl,this.debug,0,t,e,n)},t.prototype.setOutputMatrixTexture=function(t,e,n){this.setOutputMatrixTextureDriver(t,n,e)},t.prototype.setOutputPackedMatrixTexture=function(t,e,n){this.throwIfDisposed();var r=vt(e,n);this.setOutputMatrixTextureDriver(t,r[0],r[1])},t.prototype.setOutputMatrixWriteRegion=function(t,e,n,r){this.setOutputMatrixWriteRegionDriver(n,t,r,e)},t.prototype.setOutputPackedMatrixWriteRegion=function(){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")},t.prototype.debugValidate=function(){null!=this.program&&Ct(this.gl,this.debug,this.program),jt(this.gl)},t.prototype.executeProgram=function(){this.throwIfDisposed(),this.throwIfNoProgram();var t=this.gl;this.debug&&this.debugValidate(),mt(t,this.debug,(function(){return t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0)}))},t.prototype.blockUntilAllProgramsCompleted=function(){var t=this;this.throwIfDisposed(),mt(this.gl,this.debug,(function(){return t.gl.finish()}))},t.prototype.getQueryTimerExtension=function(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=xt(this.gl,this.debug,2===u().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension},t.prototype.getQueryTimerExtensionWebGL2=function(){return this.getQueryTimerExtension()},t.prototype.getQueryTimerExtensionWebGL1=function(){return this.getQueryTimerExtension()},t.prototype.beginQuery=function(){if(2===u().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var t=this.gl,e=this.getQueryTimerExtensionWebGL2(),n=t.createQuery();return t.beginQuery(e.TIME_ELAPSED_EXT,n),n}var r=this.getQueryTimerExtensionWebGL1(),o=r.createQueryEXT();return r.beginQueryEXT(r.TIME_ELAPSED_EXT,o),o},t.prototype.endQuery=function(){if(2!==u().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var t=this.getQueryTimerExtensionWebGL1();t.endQueryEXT(t.TIME_ELAPSED_EXT)}else{var e=this.gl,n=this.getQueryTimerExtensionWebGL2();e.endQuery(n.TIME_ELAPSED_EXT)}},t.prototype.waitForQueryAndGetTime=function(t){return i(this,void 0,void 0,(function(){var e=this;return a(this,(function(n){switch(n.label){case 0:return[4,O((function(){return e.disposed||e.isQueryAvailable(t,u().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}))];case 1:return n.sent(),[2,this.getQueryTime(t,u().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))]}}))}))},t.prototype.getQueryTime=function(t,e){if(0===e)return null;if(2===e){var n=this.gl;return n.getQueryParameter(t,n.QUERY_RESULT)/1e6}var r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(t,r.QUERY_RESULT_EXT)/1e6},t.prototype.isQueryAvailable=function(t,e){if(0===e)return!0;if(2===e){var n=this.gl,r=this.getQueryTimerExtensionWebGL2(),o=n.getQueryParameter(t,n.QUERY_RESULT_AVAILABLE);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),o&&!this.disjoint}return o=(r=this.getQueryTimerExtensionWebGL1()).getQueryObjectEXT(t,r.QUERY_RESULT_AVAILABLE_EXT),null==this.disjoint&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),o&&!this.disjoint},t.prototype.pollFence=function(t){var e=this;return new Promise((function(n){e.addItemToPoll((function(){return t.isFencePassed()}),(function(){return n()}))}))},t.prototype.pollItems=function(){for(var t=function(t){for(var e=0;e<t.length&&t[e]();++e);return e-1}(this.itemsToPoll.map((function(t){return t.isDoneFn}))),e=0;e<=t;++e)(0,this.itemsToPoll[e].resolveFn)();this.itemsToPoll=this.itemsToPoll.slice(t+1)},t.prototype.addItemToPoll=function(t,e){var n=this;this.itemsToPoll.push({isDoneFn:t,resolveFn:e}),this.itemsToPoll.length>1||O((function(){return n.pollItems(),0===n.itemsToPoll.length}))},t.prototype.bindTextureToFrameBuffer=function(t){this.throwIfDisposed(),Ft(this.gl,this.debug,t,this.framebuffer),this.debug&&jt(this.gl)},t.prototype.unbindTextureToFrameBuffer=function(){null!=this.outputTexture?(Ft(this.gl,this.debug,this.outputTexture,this.framebuffer),this.debug&&jt(this.gl)):Lt(this.gl,this.debug,this.framebuffer)},t.prototype.downloadMatrixDriver=function(t,e){this.bindTextureToFrameBuffer(t);var n=e();return this.unbindTextureToFrameBuffer(),n},t.prototype.setOutputMatrixTextureDriver=function(t,e,n){this.throwIfDisposed();var r=this.gl;Ft(r,this.debug,t,this.framebuffer),this.debug&&jt(r),this.outputTexture=t,mt(r,this.debug,(function(){return r.viewport(0,0,e,n)})),mt(r,this.debug,(function(){return r.scissor(0,0,e,n)}))},t.prototype.setOutputMatrixWriteRegionDriver=function(t,e,n,r){var o=this;this.throwIfDisposed(),mt(this.gl,this.debug,(function(){return o.gl.scissor(t,e,n,r)}))},t.prototype.throwIfDisposed=function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")},t.prototype.throwIfNoProgram=function(){if(null==this.program)throw new Error("No GPU program is currently set.")},t}(),Ta=function(t,e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t;for(var r=n.inChannels,o=n.strideWidth,i=n.strideHeight,a=n.padInfo,s=n.outWidth,u=n.dilationWidth,c=n.dilationHeight,l=n.dataFormat,f=a.left,h=a.top,d=r*n.filterWidth,p=Ln(),v="channelsLast"===l,g=v?0:1,m=v?1:2,y="",b=0;b<=1;b++)for(var x=0;x<=1;x++)y+="\n          blockIndex = rc.y + "+x+";\n          pos = rc.x + "+b+";\n\n          if(blockIndex < "+t[1]+" && pos < "+t[0]+") {\n            offsetY = int(blockIndex / ("+s+")) * "+i+" - "+h+";\n            d0 = offsetY + "+c+" * (pos / "+d+");\n\n            if(d0 < "+e[g]+" && d0 >= 0) {\n\n              offsetX = int(mod(float(blockIndex), "+s+".) * "+o+". - "+f+".);\n              d1 = offsetX + "+u+" * (int(mod(float(pos), "+d+".) / "+r+".));\n\n              if(d1 < "+e[m]+" && d1 >= 0) {\n\n                ch = int(mod(float(pos), "+r+".));\n\n                if ("+v+") {\n                  innerDims = vec2(d1, ch);\n                  result["+(2*b+x)+"] = getChannel(\n                    getA(d0, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                } else {\n                  innerDims = vec2(d0, d1);\n                  result["+(2*b+x)+"] = getChannel(\n                    getA(ch, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                }\n              }\n            }\n          }\n        ";this.userCode="\n      void main() {\n        ivec2 rc = getOutputCoords();\n\n        vec4 result = vec4(0);\n\n        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n        vec2 innerDims;\n\n        "+y+"\n\n        "+p.output+" = result;\n      }\n    "},Ma=function(t,e,n,r,o){this.variableNames=["x"],this.outputShape=[];var i=e,a=t[3]-1;this.outputShape=t;var s="float("+n+") + float("+r+") * sum";this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n        int d = coords[3];\n        float x = getX(b, r, c, d);\n        float sum = 0.0;\n        for (int j = -"+i+"; j <= "+i+"; j++) {\n          int idx = d + j;\n          if (idx >= 0 && idx <=  "+a+") {\n            float z = getX(b, r, c, idx);\n            sum += z * z;\n          }\n        }\n        float val = x * "+(.5===o?"inversesqrt("+s+")":1===o?"1.0/("+s+")":"exp(log("+s+") * float(-"+o+"));")+";\n        setOutput(val);\n      }\n    "},Da=function(t,e,n,r,o){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=t,this.depth=t[3],this.depthRadius=e,this.bias=n,this.alpha=r,this.beta=o,this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n\n        float result = 0.0;\n        for (int d = 0; d < "+this.depth+"; ++d) {\n          int depthBegin = int(max(0.0, float(d - "+e+")));\n          int depthEnd = int(min(float("+this.depth+"),\n              float(d + "+e+" + 1)));\n\n          const int MIN_DEPTH_BEGIN = 0;\n          const int MAX_DEPTH_END = "+this.depth+";\n\n          float norm = 0.0;\n          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            }\n            else {\n              break;\n            }\n          }\n\n          norm = float("+r+") * norm + float("+n+");\n\n          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd){\n              float dyi = -2.0 * float("+r+")\n                * float("+o+")\n                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)\n                / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * "+o+");\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            }\n            else {\n              break;\n            }\n          }\n      }\n      setOutput(result);\n      }\n    "},Pa=function(t,e,n,r,o){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;var i=e,a=t[3]-1;this.outputShape=t;var s="float("+n+") + float("+r+") * sum";this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords.x;\n        int r = coords.y;\n        int c = coords.z;\n        int d = coords.w;\n\n        bool hasNextCol = d < "+this.outputShape[3]+";\n        bool hasNextRow = c < "+this.outputShape[2]+";\n\n        vec4 sum = vec4(0.);\n        vec4 xFragAtOutputCoords = getX(b, r, c, d);\n\n        vec4 xAtOutputCoords = vec4(\n          getChannel(xFragAtOutputCoords, vec2(c, d)),\n          hasNextCol ?\n            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,\n          hasNextRow ?\n            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0\n        );\n\n        int firstChannel = d - "+i+";\n        vec2 cache = vec2(0.);\n        if(firstChannel >= 0){\n          vec4 firstChannelFrag = getX(b, r, c, firstChannel);\n          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));\n            if(hasNextRow){\n              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));\n            }\n        }\n\n        ivec2 depth = ivec2(d, d + 1);\n        for (int j = - "+i+"; j <= "+i+"; j++) {\n          ivec2 idx = depth + j;\n          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));\n          bvec2 belowUpperBound = lessThanEqual(idx, ivec2("+a+"));\n\n          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;\n          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;\n\n          if(depthInRange || depthPlusOneInRange){\n            vec4 z = vec4(0.);\n            vec4 xFragAtCurrentDepth;\n            z.xz = cache.xy;\n            if(depthPlusOneInRange && hasNextCol){\n              xFragAtCurrentDepth = idx.y != d ?\n                getX(b, r, c, idx.y) : xFragAtOutputCoords;\n              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));\n              if(hasNextRow){\n                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));\n              }\n            }\n            cache.xy = z.yw;\n            sum += z * z;\n          }\n        }\n        vec4 result = xAtOutputCoords * "+(.5===o?"inversesqrt("+s+")":1===o?"1.0/("+s+")":"exp(log("+s+") * float(-"+o+"));")+";\n        setOutput(result);\n      }\n    "},Na=function(t){this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var e=t.effectiveFilterHeight,n=t.effectiveFilterWidth;this.userCode="\n      const ivec2 pads = ivec2("+(e-1-t.padInfo.top)+", "+(n-1-t.padInfo.left)+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+e+";\n          wR += "+t.dilationHeight+") {\n          float dyR = float(dyRCorner + wR) / "+t.strideHeight+".0;\n\n          if (dyR < 0.0 || dyR >= "+t.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < "+n+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+t.strideWidth+".0;\n\n            if (dyC < 0.0 || dyC >= "+t.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = "+(e*n-1)+" - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * "+n+" + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Fa=function(t){this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var e=t.effectiveFilterDepth,n=t.effectiveFilterHeight,r=t.effectiveFilterWidth;this.userCode="\n      const ivec3 pads = ivec3("+(e-1-t.padInfo.front)+", "+(n-1-t.padInfo.top)+", "+(r-1-t.padInfo.left)+");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < "+e+";\n           wD += "+t.dilationDepth+") {\n          float dyD = float(dyDCorner + wD) / "+t.strideDepth+".0;\n\n          if (dyD < 0.0 || dyD >= "+t.outDepth+".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < "+n+";\n              wR += "+t.dilationHeight+") {\n            float dyR = float(dyRCorner + wR) / "+t.strideHeight+".0;\n\n            if (dyR < 0.0 || dyR >= "+t.outHeight+".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < "+r+";\n                wC += "+t.dilationWidth+") {\n              float dyC = float(dyCCorner + wC) / "+t.strideWidth+".0;\n\n              if (dyC < 0.0 || dyC >= "+t.outWidth+".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n              int maxPosValue = "+(e*n*r-1)+" -\n                  int(getMaxPos(batch, idyD, idyR, idyC, ch));\n\n              // Get the current value, check it against the value from the\n              // position matrix.\n              int curPosValue =\n                  wD * "+n+" * "+r+" +\n                  wR * "+r+" + wC;\n              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n              dotProd += dyValue * mask;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},La=function(t,e,n,r,o,i,a){void 0===n&&(n=!1),void 0===r&&(r=!1),void 0===o&&(o=!1),void 0===i&&(i=null),void 0===a&&(a=!1),this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e;var s=Math.ceil((n?t[1]:t[2])/2),u=n?"i * 2, rc.y":"rc.y, i * 2",c=r?"rc.z, i * 2":"i * 2, rc.z",l=n?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],f=r?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],h="",d="";i&&(h=a?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          "+i+"\n        }":"vec4 activation(vec4 x) {\n          "+i+"\n        }",d="result = activation(result);");var p=o?"result += getBiasAtOutCoords();":"";o&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),this.userCode="\n      "+h+"\n\n      const float sharedDimension = "+s+".0;\n\n      vec4 dot2x2ARowBCol(ivec3 rc) {\n        vec4 result = vec4(0);\n        for (int i = 0; i < "+s+"; i++) {\n          vec4 a = getMatrixA(rc.x, "+u+");\n          vec4 b = getMatrixB(rc.x, "+c+");\n\n          // These swizzled products need to be separately added.\n          // See: https://github.com/tensorflow/tfjs/issues/1735\n          result += ("+l[0]+" * "+f[0]+");\n          result += ("+l[1]+" * "+f[1]+");\n        }\n        return result;\n      }\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n        vec4 result = dot2x2ARowBCol(rc);\n\n        "+p+"\n\n        "+d+"\n\n        setOutput(result);\n      }\n    "},ja=function(){function t(t,e,n){this.variableNames=["probs"],this.outputShape=[t,n],this.userCode="\n      uniform float seed;\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < "+(e-1)+"; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float("+(e-1)+"));\n      }\n    "}return t.prototype.getCustomSetupFunc=function(t){var e=this;return function(n,r){null==e.seedLoc&&(e.seedLoc=n.getUniformLocation(r,"seed")),n.gl.uniform1f(e.seedLoc,t)}},t}(),Ba=function(t,e,n,r){this.variableNames=["indices"],this.outputShape=[t,e],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float("+r+"), float("+n+"),\n                      float(index == coords.y)));\n      }\n    "},Wa=function(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=t;var e=t.length;if(0===e)this.userCode="\n        void main() {\n          setOutput(vec4(getA(), 0., 0., 0.));\n        }\n      ";else{var n=Fn("rc",e),r=Hn(e),o=function(t,e,n){if(1===t)return"rc > "+e[0];for(var r="",o=t-2;o<t;o++)r+=n[o]+" >= "+e[o],o<t-1&&(r+="||");return r}(e,t,n),i=function(t,e,n,r){if(1===t)return"";var o=r.slice(-2);return"\n    int r = "+o[0]+";\n    int c = "+o[1]+";\n    int rp1 = r + 1;\n    int cp1 = c + 1;\n\n    bool cEdge = cp1 >= "+e+";\n    bool rEdge = rp1 >= "+n+";\n  "}(e,t[t.length-1],t[t.length-2],n),a=function(t,e){var n=t.length,r=function(t,e){for(var n=[],r=0;r<=1;r++)for(var o=0;o<=1;o++){for(var i=(0===r?"r":"rp1")+", "+(0===o?"c":"cp1"),a=2;a<t;a++)i=e[e.length-1-a]+","+i;n.push(i)}return n}(n,e);return 1===n?"getA(rc),\n            rc + 1 >= "+t[0]+" ? 0. : getA(rc + 1),\n            0, 0":"getA("+r[0]+"),\n          cEdge ? 0. : getA("+r[1]+"),\n          rEdge ? 0. : getA("+r[2]+"),\n          rEdge || cEdge ? 0. : getA("+r[3]+")"}(t,n);this.userCode="\n        void main() {\n          "+r+" rc = getOutputCoords();\n\n          if("+o+") {\n            setOutput(vec4(0));\n          } else {\n            "+i+"\n\n            setOutput(vec4("+a+"));\n          }\n        }\n      "}},Ua=function(t,e,n){this.variableNames=["x"],this.outputShape=e.map((function(e,n){return e[0]+t[n]+e[1]}));var r=t.length,o=Hn(r),i=e.map((function(t){return t[0]})).join(","),a=e.map((function(e,n){return e[0]+t[n]})).join(","),s=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r);this.userCode=1!==r?"\n      "+o+" start = "+o+"("+i+");\n      "+o+" end = "+o+"("+a+");\n\n      void main() {\n        "+o+" outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(float("+n+"));\n        } else {\n          "+o+" coords = outC - start;\n          setOutput(getX("+s+"));\n        }\n      }\n    ":"\n        int start = "+i+";\n        int end = "+a+";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(float("+n+"));\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      "},Ga=function(t,e,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e.map((function(e,n){return e[0]+t[n]+e[1]}));for(var r=t.length,o=Hn(r),i=e.map((function(t){return t[0]})).join(","),a=e.map((function(e,n){return e[0]+t[n]})).join(","),s=Fn("rc",r),u=Fn("source",r),c=s[r-1]+" < "+this.outputShape[r-1],l=1===r?"source":"vec2("+u.slice(-2).join()+")",f=[o+" rc = outputLoc;",s[r-1]+" += 1;\n       if("+c+") {\n      ",1===r?"":"}\n       rc = outputLoc;\n       "+s[r-2]+" += 1;\n       if("+s[r-2]+" < "+this.outputShape[r-2]+") {",1===r?"":"  "+s[r-1]+" += 1;\n         if("+c+") {"],h=1===r?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",d="",p=0,v=1===r?2:4;p<v;p++)d+="\n        "+f[p]+"\n        if ("+h+") {\n          result["+p+"] = float("+n+");\n        } else {\n          "+o+" source = rc - start;\n          result["+p+"] = getChannel(getX("+u.join()+"), "+l+");\n        }\n      ";this.userCode="\n      const "+o+" start = "+o+"("+i+");\n      const "+o+" end = "+o+"("+a+");\n\n      void main() {\n        "+o+" outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        "+(d+=1===r?"} ":"}}")+"\n        setOutput(result);\n      }\n    "},za=function(t,e,n){if(this.variableNames=["x"],"avg"===e&&n)throw new Error("Cannot compute positions for average pool.");var r=t.filterWidth,o=t.strideHeight,i=t.strideWidth,a=t.dilationHeight,s=t.dilationWidth,u=t.effectiveFilterHeight,c=t.effectiveFilterWidth,l=t.padInfo.top,f=t.padInfo.left;this.outputShape=t.outShape;var h="avg"===e,d="0.0";if(h||(d="-1.0 / 1e-20"),n)this.userCode="\n        const ivec2 strides = ivec2("+o+", "+i+");\n        const ivec2 pads = ivec2("+l+", "+f+");\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < "+u+";\n              wR += "+a+") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= "+t.inHeight+") {\n              continue;\n            }\n\n            for (int wC = 0; wC < "+c+";\n                wC += "+s+") {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= "+t.inWidth+") {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value >= currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = wR * "+c+" + wC;\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ";else{var p=e+"("+e+"("+e+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===e&&(p="avgValue / count");var v=4*Math.floor(r/4),g=r%4,m="\n      if ("+h+") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    ";this.userCode="\n      const ivec2 strides = ivec2("+o+", "+i+");\n      const ivec2 pads = ivec2("+l+", "+f+");\n      const float initializationValue = "+d+";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= "+t.inWidth+") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4("+d+");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < "+u+";\n            wR += "+a+") {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= "+t.inHeight+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+v+"; wC += 4) {\n            int xC = xCCorner + wC * "+s+";\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + "+s+", d),\n              getValue(batch, xR, xC + 2 * "+s+", d),\n              getValue(batch, xR, xC + 3 * "+s+", d)\n            );\n\n            "+m+"\n          }\n\n          int xC = xCCorner + "+v+";\n          if ("+(1===g)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            "+m+"\n          } else if ("+(2===g)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + "+s+", d),\n              initializationValue,\n              initializationValue\n            );\n\n            "+m+"\n          } else if ("+(3===g)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + "+s+", d),\n              getValue(batch, xR, xC + 2 * "+s+", d),\n              initializationValue\n            );\n\n            "+m+"\n          }\n        }\n        setOutput("+p+");\n      }\n    "}},Va=function(t,e,n){if(this.variableNames=["x"],"avg"===e&&n)throw new Error("Cannot compute positions for average pool.");var r=t.filterWidth,o=t.strideDepth,i=t.strideHeight,a=t.strideWidth,s=t.dilationDepth,u=t.dilationHeight,c=t.dilationWidth,l=t.effectiveFilterDepth,f=t.effectiveFilterHeight,h=t.effectiveFilterWidth,d=t.padInfo.front,p=t.padInfo.top,v=t.padInfo.left;this.outputShape=t.outShape;var g="avg"===e,m="0.0";if(g||(m="-1.0 / 1e-20"),n)this.userCode="\n        const ivec3 strides =\n            ivec3("+o+", "+i+", "+a+");\n        const ivec3 pads = ivec3("+d+", "+p+", "+v+");\n\n        void main() {\n          ivec5 coords = getOutputCoords();\n          int batch = coords.x;\n          int ch = coords.u;\n\n          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n          int xDCorner = xCorner.x;\n          int xRCorner = xCorner.y;\n          int xCCorner = xCorner.z;\n\n          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n\n          for (int wD = 0; wD < "+l+";\n              wD += "+s+") {\n            int xD = xDCorner + wD;\n\n            if (xD < 0 || xD >= "+t.inDepth+") {\n              continue;\n            }\n\n            for (int wR = 0; wR < "+f+";\n                wR += "+u+") {\n              int xR = xRCorner + wR;\n\n              if (xR < 0 || xR >= "+t.inHeight+") {\n                continue;\n              }\n\n              for (int wC = 0; wC < "+h+";\n                  wC += "+c+") {\n                int xC = xCCorner + wC;\n\n                if (xC < 0 || xC >= "+t.inWidth+") {\n                  continue;\n                }\n\n                float value = getX(batch, xD, xR, xC, ch);\n\n                // If a min / max value has already been found, use it. If not,\n                // use the current value.\n                float currMinMaxValue = mix(\n                    value, minMaxValue, minMaxValueFound);\n                if (value >= currMinMaxValue) {\n                  minMaxValue = value;\n                  minMaxValueFound = 1.0;\n                  minMaxPosition =\n                      wD * "+f+" * "+h+" +\n                      wR * "+h+" + wC;;\n                }\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ";else{var y=e+"("+e+"("+e+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===e&&(y="avgValue / count");var b=4*Math.floor(r/4),x=r%4,w="\n      if ("+g+") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    ";this.userCode="\n      const ivec3 strides =\n        ivec3("+o+", "+i+", "+a+");\n      const ivec3 pads = ivec3("+d+", "+p+", "+v+");\n      const float initializationValue = "+m+";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xD, int xR, int xC, int ch) {\n        if (xC < 0 || xC >= "+t.inWidth+") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xD, xR, xC, ch);\n      }\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xDCorner = xCorner.x;\n        int xRCorner = xCorner.y;\n        int xCCorner = xCorner.z;\n\n        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).\n        // ? = to be determined\n        vec4 minMaxValue = vec4("+m+");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wD = 0; wD < "+l+";\n            wD += "+s+") {\n          int xD = xDCorner + wD;\n\n          if (xD < 0 || xD >= "+t.inDepth+") {\n            continue;\n          }\n\n          for (int wR = 0; wR < "+f+";\n            wR += "+u+") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= "+t.inHeight+") {\n              continue;\n            }\n\n            for (int wC = 0; wC < "+b+"; wC += 4) {\n              int xC = xCCorner + wC * "+c+";\n\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + "+c+", ch),\n                getValue(batch, xD, xR, xC + 2 * "+c+", ch),\n                getValue(batch, xD, xR, xC + 3 * "+c+", ch)\n              );\n\n              "+w+"\n            }\n\n            int xC = xCCorner + "+b+";\n            if ("+(1===x)+") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                initializationValue,\n                initializationValue,\n                initializationValue\n              );\n\n              "+w+"\n            } else if ("+(2===x)+") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + "+c+", ch),\n                initializationValue,\n                initializationValue\n              );\n\n              "+w+"\n            } else if ("+(3===x)+") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + "+c+", ch),\n                getValue(batch, xD, xR, xC + 2 * "+c+", ch),\n                initializationValue\n              );\n\n              "+w+"\n            }\n          }\n          setOutput("+y+");\n        }\n      }\n    "}},Ha=function(t,e){this.variableNames=["x"];var n=t.windowSize,r=t.batchSize,o=t.inSize,i=Math.ceil(o/n);this.outputShape=[r,i];var a="0.0",s="";"prod"===e?a="1.0":"min"===e?(a="1.0 / 1e-20",s="min"):"max"===e&&(a="-1.0 / 1e-20",s="max");var u=e+"("+e+"("+e+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"sum"===e?u="sumValue":"prod"===e?u="prodValue":"all"===e?u="allValue":"any"===e&&(u="anyValue");var c=4*Math.floor(n/4),l=n%4,f="\n      if ("+("sum"===e)+") {\n        sumValue += dot(values, ones);\n      } else if ("+("prod"===e)+") {\n        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);\n        prodValue *= tmp[0] * tmp[1];\n      } else {\n        minMaxValue = "+s+"(values, minMaxValue);\n      }\n    ",h="vec4";"all"===e?(a="1.0",f="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",h="bvec4"):"any"===e&&(a="0.0",f="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",h="bvec4");var d="";o%n>0&&(d="\n        if (inIdx < 0 || inIdx >= "+o+") {\n          return initializationValue;\n        }\n      "),this.userCode="\n      const float initializationValue = "+a+";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        "+d+"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * "+n+";\n\n        vec4 minMaxValue = vec4("+a+");\n        float prodValue = 1.0;\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < "+c+"; i += 4) {\n          int inIdx = inOffset + i;\n          "+h+" values = "+h+"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          "+f+"\n        }\n\n        int inIdx = inOffset + "+c+";\n        if ("+(1===l)+") {\n          "+h+" values = "+h+"(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          "+f+"\n        } else if ("+(2===l)+") {\n          "+h+" values = "+h+"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          "+f+"\n        } else if ("+(3===l)+") {\n          "+h+" values = "+h+"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          "+f+"\n        }\n        setOutput("+u+");\n      }\n    "},qa=function(t,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t;for(var n="",r=0;r<4;r++){var o="thisRC = rc;";r%2==1&&(o+="thisRC.z += 1;"),r>1&&(o+="thisRC.y += 1;"),n+="\n        "+o+"\n        "+(r>0?"if(thisRC.y < rows && thisRC.z < cols){":"")+"\n          int flatIndex = getFlatIndex(thisRC);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);\n          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result["+r+"] =\n            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);\n        "+(r>0?"}":"")+"\n      "}this.userCode="\n      \n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      "+jn(["r","c","d"],e)+"\n      return ivec3(r, c, d);\n    }\n  \n      "+Bn(t)+"\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.);\n\n        ivec3 thisRC;\n        int rows = "+t[1]+";\n        int cols = "+t[2]+";\n\n        "+n+"\n\n        setOutput(result);\n      }\n    "},Ka=function(t,e,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=e.shape;var r=e.shape,o=r[1],i=r[2],a=t.shape,s=a[1],u=a[2],c=[n&&s>1?o-1:o,n&&u>1?i-1:i],l=[n&&s>1?s-1:s,n&&u>1?u-1:u],f=c[0]/l[0],h=c[1]/l[1],d=1/f,p=1/h,v=2*Math.ceil(d)+2,g=2*Math.ceil(p)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float("+f+");\n        const float widthScale = float("+h+");\n\n        const float invHeightScale = float("+d+");\n        const float invWidthScale = float("+p+");\n\n        const int winHeight = int("+v+");\n        const int winWidth = int("+g+");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(startRLerp - float(winHeight / 2));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(startCLerp - float(winWidth / 2));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= "+s+") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= "+u+") {\n              continue;\n            }\n\n            float dxR = float(dyR) * heightScale;\n            int topDxRIndex = int(floor(dxR));\n            int bottomDxRIndex = int(min(ceil(dxR), "+(o-1)+".0));\n            float dxRLerp = dxR - float(topDxRIndex);\n            float inverseDxRLerp = 1.0 - dxRLerp;\n\n            float dxC = float(dyC) * widthScale;\n            int leftDxCIndex = int(floor(dxC));\n            int rightDxCIndex = int(min(ceil(dxC), "+(i-1)+".0));\n            float dxCLerp = dxC - float(leftDxCIndex);\n            float inverseDxCLerp = 1.0 - dxCLerp;\n\n            if (r == topDxRIndex && c == leftDxCIndex) {\n              // topLeft\n              accumulator +=\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n            }\n\n            if (r == topDxRIndex && c == rightDxCIndex) {\n              // topRight\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == leftDxCIndex) {\n              // bottomLeft\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == rightDxCIndex) {\n              // bottomRight\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    "},Xa=function(t,e,n,r){this.variableNames=["A"],this.outputShape=[];var o=t[1],i=t[2];this.outputShape=[t[0],e,n,t[3]];var a=[r&&e>1?o-1:o,r&&n>1?i-1:i],s=[r&&e>1?e-1:e,r&&n>1?n-1:n];this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          "+a[0]/s[0]+",\n          "+a[1]/s[1]+");\n      const vec2 inputShapeRC = vec2("+o+".0, "+i+".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(sourceFracIndexRC);\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    "},Ja=function(t,e,n,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var o=t[1],i=t[2],a=t[3];this.outputShape=[t[0],e,n,a];var s=[r&&e>1?o-1:o,r&&n>1?i-1:i],u=[r&&e>1?e-1:e,r&&n>1?n-1:n];this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          "+s[0]/u[0]+",\n          "+s[1]/u[1]+",\n          "+s[1]/u[1]+");\n      const vec3 inputShapeRC = vec3("+o+".0, "+i+".0,\n                                     "+i+".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = vec3(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the four integer indices.\n        ivec3 sourceFloorRC = ivec3(sourceFracIndexRC);\n        ivec3 sourceCeilRC = ivec3(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < "+(a-1)+";\n        bool hasNextRow = coords.z < "+(n-1)+";\n\n        // In parallel, construct four corners for all four components in\n        // packed 2x2 cell.\n        vec4 topLeft = vec4(\n          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 bottomLeft = vec4(\n          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 topRight = vec4(\n          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec4 bottomRight = vec4(\n          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);\n\n        vec4 top = mix(topLeft, topRight, fracRC.yyzz);\n        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);\n        vec4 newValue = mix(top, bottom, fracRC.x);\n\n        setOutput(newValue);\n      }\n    "},Ya=function(t,e,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=e.shape;var r=e.shape,o=r[1],i=r[2],a=t.shape,s=a[1],u=a[2],c=[n&&s>1?o-1:o,n&&u>1?i-1:i],l=[n&&s>1?s-1:s,n&&u>1?u-1:u],f=c[0]/l[0],h=c[1]/l[1],d=1/f,p=1/h,v=2*Math.ceil(d)+2,g=2*Math.ceil(p)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float("+f+");\n        const float widthScale = float("+h+");\n\n        const float invHeightScale = float("+d+");\n        const float invWidthScale = float("+p+");\n\n        const int winHeight = int("+v+");\n        const int winWidth = int("+g+");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= "+s+") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= "+u+") {\n              continue;\n            }\n\n            float sourceFracRow =\n              float("+c[0]+") *\n                (float(dyR) / float("+l[0]+"));\n\n            float sourceFracCol =\n                float("+c[1]+") *\n                  (float(dyC) / float("+l[1]+"));\n\n            int sourceNearestRow = int(min(\n                float(int("+o+") - 1),\n                "+n+" ? float(round(sourceFracRow)) :\n                                  float(floor(sourceFracRow))));\n\n            int sourceNearestCol = int(min(\n                float(int("+i+") - 1),\n                "+n+" ? float(round(sourceFracCol)) :\n                                  float(floor(sourceFracCol))));\n\n            if (r == sourceNearestRow && c == sourceNearestCol) {\n              accumulator += getDy(b, dyR, dyC, d);\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    "},Qa=function(t,e,n,r){this.variableNames=["A"],this.outputShape=[];var o=t[1],i=t[2];this.outputShape=[t[0],e,n,t[3]];var a=[r&&e>1?o-1:o,r&&n>1?i-1:i],s=[r&&e>1?e-1:e,r&&n>1?n-1:n];this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          "+a[0]/s[0]+",\n          "+a[1]/s[1]+");\n      const vec2 inputShapeRC = vec2("+o+".0, "+i+".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + "+(r?"0.5":"0.0")+")));\n\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    "},$a=function(t,e){this.variableNames=["x"];var n=t.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-"+n+" tensor is not yet supported");if(this.outputShape=t,1!==n){var r=t.map((function(n,r){return function(n){return-1!==e.indexOf(n)&&1!==t[n]?t[n]+" - coords["+n+"] - 1":"coords["+n+"]"}(r)})).join(","),o=Hn(n);this.userCode="\n      void main() {\n        "+o+" coords = getOutputCoords();\n        setOutput(getX("+r+"));\n      }\n    "}else this.userCode="\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX("+t[0]+" - coord - 1));\n        }\n      "},Za=function(t,e){function n(n){var r=t.map((function(r,o){return function(n,r){return-1!==e.indexOf(n)&&1!==t[n]?t[n]+" - "+r[n]+" - 1":""+r[n]}(o,n)}));return"getChannel(getX("+r.join(",")+"), vec2("+r.slice(-2).join(",")+"))"}this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;var r=t.length;if(r>4)throw new Error("WebGL backend: Reverse of rank-"+r+" tensor is not yet supported");this.outputShape=t;var o=Fn("rc",r),i=o[r-1]+" + 1 < "+this.outputShape[r-1],a=o[r-2]+" + 1 < "+this.outputShape[r-2],s=Hn(r);this.userCode=1===r?"\n        void main(){\n          int rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = getChannel(getX("+t[0]+" - rc - 1),\n            "+t[0]+" - rc - 1);\n          if("+i+"){\n              result.g = getChannel(getX("+t[0]+" - (rc  + 1) - 1),\n                "+t[0]+" - (rc  + 1) - 1);\n          }\n          setOutput(result);\n        }\n      ":"\n        void main() {\n          "+s+" rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = "+function(t){return n(t)}(o.slice())+";\n          if("+i+"){\n            result.g = "+function(t){return t[r-1]="("+t[r-1]+" + 1)",n(t)}(o.slice())+";\n          }\n          if("+a+") {\n            result.b = "+function(t){return t[r-2]="("+t[r-2]+" + 1)",n(t)}(o.slice())+";\n            if("+i+") {\n              result.a = "+function(t){return t[r-1]="("+t[r-1]+" + 1)",t[r-2]="("+t[r-2]+" + 1)",n(t)}(o.slice())+";\n            }\n          }\n          setOutput(result);\n        }\n    "},ts=function(t,e,n,r,o,i,a){void 0===a&&(a=!0),this.variableNames=["updates","indices","defaultValue"],this.outputShape=i;var s=Hn(o.length),u=Hn(i.length),c="";1===n?c="i":2===n&&(c="i, j");var l="";1===r?l="i":2===r&&(l="i, coords[1]"),this.userCode="\n        "+s+" strides = "+s+"("+o+");\n\n        void main() {\n          "+u+" coords = getOutputCoords();\n          float sum = 0.0;\n          bool found = false;\n          for (int i = 0; i < "+t+"; i++) {\n            int flattenedIndex = 0;\n            for (int j = 0; j < "+e+"; j++) {\n              int index = round("+("getIndices("+c+")")+");\n              flattenedIndex += index * "+(e>1?"strides[j]":"strides")+";\n            }\n            if (flattenedIndex == coords[0]) {\n              sum += "+("getUpdates("+l+")")+";\n              found = true;\n            }\n          }\n          setOutput(mix(getDefaultValue(), sum, float(found)));\n        }\n      "},es=function(t){this.variableNames=["x","segmentIds"];var e=t.windowSize,n=t.batchSize,r=t.inSize,o=t.numSegments,i=o*Math.ceil(r/e);this.outputShape=[n,i];var a=4*Math.floor(e/4),s=e%4,u="\n        sumValue += dot(values, segFilter);\n    ",c="";r%e>0&&(c="\n        if (inIdx < 0 || inIdx >= "+r+") {\n          return initializationValue;\n        }\n      ");var l="";r%e>0&&(l="\n        if (inIdx < 0 || inIdx >= "+r+") {\n          return -1.0;\n        }\n      "),this.userCode="\n      const float initializationValue = 0.0;\n\n      float getValue(int batch, int inIdx) {\n        "+c+"\n        return getX(batch, inIdx);\n      }\n\n      float getSegmentIdAtIndex(int inIdx) {\n        "+l+"\n        return getSegmentIds(inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = int(floor(float(outIdx) / float(\n          "+o+")) * float("+e+"));\n        int currentSeg = int(mod(float(outIdx), float("+o+")));\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < "+a+"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\n          );\n\n          "+u+"\n        }\n\n        int inIdx = inOffset + "+a+";\n        if ("+(1===s)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            0,\n            0,\n            0\n          );\n\n          "+u+"\n        } else if ("+(2===s)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n              0,\n              0\n          );\n\n          "+u+"\n        } else if ("+(3===s)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            0\n          );\n\n          "+u+"\n        }\n        setOutput(sumValue);\n      }\n    "},ns=function(t,e,n){var r,o;if(this.variableNames=["c","a","b"],this.outputShape=e,n>4)throw Error("Where for rank "+n+" is not yet supported");if(1===n)o="resRC",r="resRC";else{for(var i=["resRC.x","resRC.y","resRC.z","resRC.w"],a=[],s=[],u=0;u<e.length;u++)s.push(""+i[u]),u<t&&a.push(""+i[u]);r=a.join(),o=s.join()}var c=Hn(n);this.userCode="\n      void main() {\n        "+c+" resRC = getOutputCoords();\n        float cVal = getC("+r+");\n        if (cVal >= 1.0) {\n          setOutput(getA("+o+"));\n        } else {\n          setOutput(getB("+o+"));\n        }\n      }\n    "},rs=function(){function t(t){this.variableNames=["source"],this.outputShape=t,this.rank=t.length;var e,n=Hn(this.rank),r="uniform int start["+this.rank+"];",o=function(t){if(1===t)return"sourceLoc";if(t<=6)return os.slice(0,t).map((function(t){return"sourceLoc."+t})).join(",");throw Error("Slicing for rank "+t+" is not yet supported")}(this.rank);e="\n        "+n+" sourceLoc;\n        "+n+" coords = getOutputCoords();\n        "+t.map((function(t,e){return"sourceLoc."+os[e]+" = start["+e+"] + coords."+os[e]+";"})).join("\n")+"\n      ",this.userCode="\n      "+r+"\n      void main() {\n        "+e+"\n        setOutput(getSource("+o+"));\n      }\n    "}return t.prototype.getCustomSetupFunc=function(t){var e=this;if(t.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+t.length+")");return function(n,r){null==e.startLoc&&(e.startLoc=n.getUniformLocationNoThrow(r,"start"),null==e.startLoc)||n.gl.uniform1iv(e.startLoc,t)}},t}(),os=["x","y","z","w","u","v"],is=function(){function t(t){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.rank=t.length;var e=Hn(this.rank),n=Fn("coords",this.rank),r=Fn("sourceLoc",this.rank),o=1===this.rank?"sourceLoc":"vec2("+r.slice(-2).join()+")",i="getChannel(getSource("+r.join()+"), "+o+")",a="\n      result.x = "+i+";\n      if (++"+n[this.rank-1]+" < "+t[this.rank-1]+") {\n        ++"+r[this.rank-1]+";\n        result.y = "+i+";\n        --"+r[this.rank-1]+";\n      }\n    ",s=1===this.rank?"":"\n      --"+n[this.rank-1]+";\n      if (++"+n[this.rank-2]+" < "+t[this.rank-2]+") {\n        ++"+r[this.rank-2]+";\n        result.z = "+i+";\n        if (++"+n[this.rank-1]+" < "+t[this.rank-1]+") {\n          ++"+r[this.rank-1]+";\n          result.w = "+i+";\n        }\n      }\n    ",u=this.rank<=4?"sourceLoc = coords +\n            "+e+"("+t.map((function(t,e){return"start["+e+"]"})).join()+");":t.map((function(t,e){return r[e]+" = "+n[e]+" + start["+e+"];"})).join("\n");this.userCode="\n      uniform int start["+this.rank+"];\n      void main() {\n        "+e+" coords = getOutputCoords();\n        "+e+" sourceLoc;\n        "+u+"\n        vec4 result = vec4(0.);\n        "+a+"\n        "+s+"\n        setOutput(result);\n      }\n    "}return t.prototype.getCustomSetupFunc=function(t){var e=this;if(t.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+t.length+")");return function(n,r){null==e.startLoc&&(e.startLoc=n.getUniformLocationNoThrow(r,"start"),null==e.startLoc)||n.gl.uniform1iv(e.startLoc,t)}},t}(),as=function(t,e,n){this.variableNames=["x"],this.outputShape=n;var r=n.length,o=Hn(n.length),i=Hn(n.length),a="";if(1===r)a="coords * strides + begin";else{var s=0;a=n.map((function(t,e){return s++,1===n.length?"coords * strides["+e+"] + begin["+e+"]":"coords["+(s-1)+"] * strides["+e+"] + begin["+e+"]"})).join(",")}this.userCode="\n      "+o+" begin = "+o+"("+t+");\n      "+o+" strides = "+o+"("+e+");\n\n      void main() {\n        "+i+" coords = getOutputCoords();\n        setOutput(getX("+a+"));\n      }\n    "},ss=function(){function t(t){this.gpgpu=t,this.numUsedTextures=0,this.numFreeTextures=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return t.prototype.acquireTexture=function(t,e,n){var r,o=pr(e,n),i=vr(t,o,n);if(i in this.freeTextures||(this.freeTextures[i]=[]),i in this.usedTextures||(this.usedTextures[i]=[]),this.freeTextures[i].length>0){this.numFreeTextures--,this.numUsedTextures++,this.log();var a=this.freeTextures[i].shift();return this.usedTextures[i].push(a),a}return this.numUsedTextures++,this.log(),o===Io.PACKED_2X2_FLOAT32?r=this.gpgpu.createPackedMatrixTexture(t[0],t[1]):o===Io.PACKED_2X2_FLOAT16?r=this.gpgpu.createFloat16PackedMatrixTexture(t[0],t[1]):o===Io.UNPACKED_FLOAT32?r=this.gpgpu.createFloat32MatrixTexture(t[0],t[1]):o===Io.UNPACKED_FLOAT16?r=this.gpgpu.createFloat16MatrixTexture(t[0],t[1]):o===Io.PACKED_4X1_UNSIGNED_BYTE&&(r=this.gpgpu.createUnsignedBytesMatrixTexture(t[0],t[1])),this.usedTextures[i].push(r),r},t.prototype.releaseTexture=function(t,e,n,r){if(null!=this.freeTextures){var o=vr(e,pr(n,r),r);o in this.freeTextures||(this.freeTextures[o]=[]),this.freeTextures[o].push(t),this.numFreeTextures++,this.numUsedTextures--;var i=this.usedTextures[o],a=i.indexOf(t);if(a<0)throw new Error("Cannot release a texture that was never provided by this texture manager");i.splice(a,1),this.log()}},t.prototype.log=function(){this.logEnabled&&console.log("Free/Used",this.numFreeTextures+" / "+this.numUsedTextures,"("+(this.numFreeTextures+this.numUsedTextures)+")")},t.prototype.getNumUsedTextures=function(){return this.numUsedTextures},t.prototype.getNumFreeTextures=function(){return this.numFreeTextures},t.prototype.dispose=function(){var t=this;if(null!=this.freeTextures){for(var e in this.freeTextures)this.freeTextures[e].forEach((function(e){t.gpgpu.deleteMatrixTexture(e)}));for(var e in this.usedTextures)this.usedTextures[e].forEach((function(e){t.gpgpu.deleteMatrixTexture(e)}));this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0}},t}(),us=function(t,e){this.variableNames=["A"];for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t[r]*e[r];this.outputShape=n,this.rank=n.length;var o=Hn(this.rank),i=function(t){var e=t.length;if(e>5)throw Error("Tile for rank "+e+" is not yet supported");if(1===e)return"imod(resRC, "+t[0]+")";for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[],o=0;o<t.length;o++)r.push("imod("+n[o]+", "+t[o]+")");return r.join()}(t);this.userCode="\n      void main() {\n        "+o+" resRC = getOutputCoords();\n        setOutput(getA("+i+"));\n      }\n    "},cs=function(t,e){this.variableNames=["A"];for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t[e[r]];this.outputShape=n,this.rank=n.length;var o=Hn(this.rank),i=function(t){var e=t.length;if(e>6)throw Error("Transpose for rank "+e+" is not yet supported");for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(e),o=0;o<t.length;o++)r[t[o]]=n[o];return r.join()}(e);this.userCode="\n    void main() {\n      "+o+" resRC = getOutputCoords();\n      setOutput(getA("+i+"));\n    }\n    "},ls=function(t,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t[e[r]];if(this.outputShape=n,this.rank=n.length,this.rank>6)throw Error("Packed transpose for rank "+this.rank+" is not yet supported.");var o=Hn(this.rank),i=Nn("rc",this.rank),a=new Array(this.rank);for(r=0;r<e.length;r++)a[e[r]]=i[r];var s="vec2("+a.slice(-2).join()+")",u="++"+i[this.rank-1]+" < "+n[this.rank-1],c="getChannel(getA("+a.join()+"), "+s+")";this.userCode="\n    void main() {\n      "+o+" rc = getOutputCoords();\n      vec4 result = vec4(0.);\n      result[0] = "+c+";\n      if("+u+") {\n        result[1] = "+c+";\n      }\n      --"+i[this.rank-1]+";\n      if(++"+i[this.rank-2]+" < "+n[this.rank-2]+") {\n        result[2] = "+c+";\n        if("+u+") {\n          result[3] = "+c+";\n        }\n      }\n      setOutput(result);\n    }\n    "},fs=1.7580993408473768,hs=1.0507009873554805,ds=function(t,e){this.variableNames=["A"],this.outputShape=t,this.userCode="\n      float unaryOperation(float x) {\n        "+e+"\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    "},ps="if (isnan(x)) return x;",vs="return abs(x);",gs=ps+"\n  return (x < 0.0) ? 0.0 : x;\n",ms=ps+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",ys="return (x >= 0.0) ? x : (exp(x) - 1.0);",bs="return -x;",xs="return ceil(x);",ws="return floor(x);",_s="return exp(x);",Es="return exp(x) - 1.0;",Rs="return x;",Cs="\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",Ss="\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",Os="\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n",As=function(t,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.userCode="\n      vec4 unaryOperation(vec4 x) {\n        "+e+"\n      }\n\n      void main() {\n        vec4 x = getAAtOutCoords();\n        vec4 y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    "},Is=function(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=t;var e=t.length,n=Fn("rc",e),r=Hn(e),o=function(t,e){if(1===t)return"rc";for(var n="",r=0;r<t;r++)n+=e[r],r<t-1&&(n+=",");return n}(e,n),i=n.slice(-2),a=e<=1?"rc":"vec2("+i.join(",")+")";this.userCode="\n      void main() {\n        "+r+" rc = getOutputCoords();\n        vec4 packedInput = getA("+o+");\n\n        setOutput(getChannel(packedInput, "+a+"));\n      }\n    "},ks={},Ts=function(t){function e(e){var n,r=t.call(this)||this;if(r.pendingRead=new WeakMap,r.pendingDisposal=new WeakSet,r.dataRefCount=new WeakMap,r.numBytesInGPU=0,r.uploadWaitMs=0,r.downloadWaitMs=0,r.warnedAboutMemory=!1,r.pendingDeletes=0,r.disposed=!1,!u().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(null==e){var o=ht(u().getNumber("WEBGL_VERSION"));r.binaryCache=((n=u().getNumber("WEBGL_VERSION"))in ks||(ks[n]={}),ks[n]),r.gpgpu=new ka(o),r.canvas=o.canvas,r.gpgpuCreatedLocally=!0}else r.gpgpu=e,r.binaryCache={},r.gpgpuCreatedLocally=!1,r.canvas=e.gl.canvas;return r.textureManager=new ss(r.gpgpu),r.numMBBeforeWarning=null==u().global.screen?1024:u().global.screen.height*u().global.screen.width*window.devicePixelRatio*600/1024/1024,r.texData=new Mi(r,Co),r}return o(e,t),e.prototype.numDataIds=function(){return this.texData.numDataIds()+(this.cpuBackend?this.cpuBackend.numDataIds():0)-this.pendingDeletes},e.prototype.write=function(t,e,n){if(u().getBool("DEBUG")&&this.checkNumericalProblems(t),"complex64"===n&&null!=t)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");var r={};return this.texData.set(r,{shape:e,dtype:n,values:t,usage:Ao.UPLOAD}),r},e.prototype.move=function(t,e,n,r){if(u().getBool("DEBUG")&&this.checkNumericalProblems(e),"complex64"===r)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(t,{shape:n,dtype:r,values:e,usage:Ao.UPLOAD})},e.prototype.readSync=function(t){var e=this.texData.get(t),n=e.values,r=e.dtype,o=e.complexTensors,i=e.shape;if(null!=e.slice){var a;a=e.isPacked?new As(i,Rs):new ds(i,Rs);var s=this.runWebGLProgram(a,[{dataId:t,shape:i,dtype:r}],r),u=this.readSync(s.dataId);return this.disposeData(s.dataId),u}if(null!=n)return this.convertAndCacheOnCPU(t);if("string"===r)return n;var c,l,f=null!=this.activeTimers;return f&&(c=Y()),l="complex64"===r?bn(o.real.dataSync(),o.imag.dataSync()):this.getValuesFromTexture(t),f&&(this.downloadWaitMs+=Y()-c),this.convertAndCacheOnCPU(t,l)},e.prototype.read=function(t){return i(this,void 0,void 0,(function(){var e,n,r,o,i,s,c,l,f,h,d,p,v,g,m,y,b,x,_;return a(this,(function(a){switch(a.label){case 0:if(this.pendingRead.has(t))return e=this.pendingRead.get(t),[2,new Promise((function(t){return e.push(t)}))];if(n=this.texData.get(t),r=n.values,o=n.shape,i=n.dtype,s=n.complexTensors,c=n.isPacked,null!=n.slice)return void 0,l=c?new As(o,Rs):new ds(o,Rs),f=this.runWebGLProgram(l,[{dataId:t,shape:o,dtype:i}],i),h=this.read(f.dataId),this.disposeData(f.dataId),[2,h];if(null!=r)return[2,this.convertAndCacheOnCPU(t)];if(!u().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&2===u().getNumber("WEBGL_VERSION"))throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");return d=null,"complex64"!==i&&u().get("WEBGL_BUFFER_SUPPORTED")&&(p=this.decode(t),v=this.texData.get(p.dataId),d=(_=this.gpgpu).createBufferFromTexture.apply(_,[v.texture].concat(pt(o)))),this.pendingRead.set(t,[]),"complex64"===i?[3,2]:[4,this.gpgpu.createAndWaitForFence()];case 1:a.sent(),a.label=2;case 2:return"complex64"!==i?[3,4]:[4,Promise.all([s.real.data(),s.imag.data()])];case 3:return m=a.sent(),g=bn(m[0],m[1]),[3,5];case 4:null==d?g=this.getValuesFromTexture(t):(y=w(o),g=this.gpgpu.downloadFloat32MatrixFromBuffer(d,y)),a.label=5;case 5:return null!=p&&this.disposeData(p.dataId),b=this.convertAndCacheOnCPU(t,g),x=this.pendingRead.get(t),this.pendingRead.delete(t),x.forEach((function(t){return t(b)})),this.pendingDisposal.has(t)&&(this.pendingDisposal.delete(t),this.disposeData(t),this.pendingDeletes--),[2,b]}}))}))},e.prototype.checkNumericalProblems=function(t){if(null!=t)for(var e=0;e<t.length;e++){var n=t[e];if(!yt(n)){if(u().getBool("WEBGL_RENDER_FLOAT32_CAPABLE"))throw Error("The value "+n+" cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'");throw Error("The value "+n+" cannot be represented on this device.")}}},e.prototype.getValuesFromTexture=function(t){var e,n=this.texData.get(t),r=n.shape,o=n.dtype,i=n.isPacked,a=w(r);if(u().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){var s=this.decode(t),c=this.texData.get(s.dataId),l=(e=this.gpgpu).downloadMatrixFromPackedTexture.apply(e,[c.texture].concat(pt(r))).subarray(0,a);return this.disposeData(s.dataId),l}var f=u().getBool("WEBGL_PACK")&&!0===i,h=f?Vt(r):r,d=f?new Ea(h):new _a(h),p=this.runWebGLProgram(d,[{shape:h,dtype:o,dataId:t}],"float32"),v=this.texData.get(p.dataId),g=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(v.texture,v.texShape[0],v.texShape[1]).subarray(0,a);return this.disposeData(p.dataId),g},e.prototype.time=function(t){return i(this,void 0,void 0,(function(){var e,n,r,o,i,s,c;return a(this,(function(a){switch(a.label){case 0:return e=this.activeTimers,n=[],r=!1,null==this.programTimersStack?(this.programTimersStack=n,r=!0):this.activeTimers.push(n),this.activeTimers=n,t(),o=x(this.activeTimers.map((function(t){return t.query}))).filter((function(t){return null!=t})),i=x(this.activeTimers.map((function(t){return t.name}))).filter((function(t){return null!=t})),this.activeTimers=e,r&&(this.programTimersStack=null),s={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null},u().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[4,Promise.all(o)]:[3,2];case 1:return c=a.sent(),s.kernelMs=g(c),s.getExtraProfileInfo=function(){return c.map((function(t,e){return{name:i[e],ms:t}})).map((function(t){return t.name+": "+t.ms})).join(", ")},[3,3];case 2:s.kernelMs={error:"WebGL query timers are not supported in this environment."},a.label=3;case 3:return this.uploadWaitMs=0,this.downloadWaitMs=0,[2,s]}}))}))},e.prototype.memory=function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU}},e.prototype.startTimer=function(){return u().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:Y(),endMs:null}},e.prototype.endTimer=function(t){return u().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),t):(t.endMs=Y(),t)},e.prototype.getQueryTime=function(t){return i(this,void 0,void 0,(function(){var e;return a(this,(function(){return u().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[2,this.gpgpu.waitForQueryAndGetTime(t)]:[2,(e=t).endMs-e.startMs]}))}))},e.prototype.disposeData=function(t){if(!this.pendingDisposal.has(t)){if(this.pendingRead.has(t))return this.pendingDisposal.add(t),void this.pendingDeletes++;if(this.texData.has(t)){this.releaseGPUData(t);var e=this.texData.get(t).complexTensors;null!=e&&(e.real.dispose(),e.imag.dispose()),this.texData.delete(t)}}},e.prototype.releaseGPUData=function(t){var e=this.texData.get(t),n=e.texture,r=e.dtype,o=e.texShape,i=e.usage,a=e.isPacked,s=e.slice,u=s&&s.origDataId||t,c=this.dataRefCount.get(u);c>1?this.dataRefCount.set(u,c-1):(this.dataRefCount.delete(u),null!=n&&(this.numBytesInGPU-=this.computeBytes(o,r),this.textureManager.releaseTexture(n,o,i,a)));var l=this.texData.get(t);l.texture=null,l.texShape=null,l.isPacked=!1,l.slice=null},e.prototype.getTexture=function(t){return this.uploadToGPU(t),this.texData.get(t).texture},e.prototype.getDataInfo=function(t){return this.texData.get(t)},e.prototype.getCPUBackend=function(){return u().getBool("WEBGL_CPU_FORWARD")?(null==this.cpuBackend&&(this.cpuBackend=Co.findBackend("cpu")),this.cpuBackend):null},e.prototype.shouldExecuteOnCPU=function(t,e){var n=this;return void 0===e&&(e=128),null!=this.getCPUBackend()&&t.every((function(t){return null==n.texData.get(t.dataId).texture&&t.size<e}))},e.prototype.getGPGPUContext=function(){return this.gpgpu},e.prototype.complex=function(t,e){var n=this.makeOutput(t.shape,"complex64");return this.texData.get(n.dataId).complexTensors={real:Co.keep(t.clone()),imag:Co.keep(e.clone())},n},e.prototype.real=function(t){return this.texData.get(t.dataId).complexTensors.real.clone()},e.prototype.imag=function(t){return this.texData.get(t.dataId).complexTensors.imag.clone()},e.prototype.slice=function(t,e,n){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.slice(t,e,n);if(0===w(n))return _e([],n,t.dtype);var r=this.texData.get(t.dataId).isPacked,o=Ye(t.shape,e,n);if(r||!o){var i=u().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new is(n):new rs(n),a=i.getCustomSetupFunc(e);return this.compileAndRun(i,[t],null,a)}return this.uploadToGPU(t.dataId),this.shallowSlice(t,e,n)},e.prototype.shallowSlice=function(t,e,n){var o=this.texData.get(t.dataId),i=this.makeOutput(n,t.dtype),a=this.texData.get(i.dataId);r(a,o),a.shape=n,a.dtype=t.dtype;var s=Qe(e,t.strides);o.slice&&(s+=o.slice.flatOffset),a.slice={flatOffset:s,origDataId:o.slice&&o.slice.origDataId||t.dataId};var u=this.dataRefCount.get(a.slice.origDataId)||1;return this.dataRefCount.set(a.slice.origDataId,u+1),i},e.prototype.stridedSlice=function(t,e,n,r){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.stridedSlice(t,e,n,r);var o=Ke(e,n,r);if(o.some((function(t){return 0===t})))return _e([],o);var i=new as(e,r,o);return this.compileAndRun(i,[t])},e.prototype.reverse=function(t,e){var n=u().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Za(t.shape,e):new $a(t.shape,e);return this.compileAndRun(n,[t])},e.prototype.concat=function(t,e){if("complex64"===t[0].dtype){var n=t.map((function(t){return Lo(t)})),r=t.map((function(t){return jo(t)}));return Fo(this.concat(n,e),this.concat(r,e))}if(this.shouldExecuteOnCPU(t))return this.cpuBackend.concat(t,e);if(1===t.length)return t[0];if(t.length>u().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){var o=Math.floor(t.length/2),i=this.concat(t.slice(0,o),e),a=this.concat(t.slice(o),e);return this.concat([i,a],e)}if(u().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&t[0].rank>1){var s=new ia(t.map((function(t){return t.shape})),e);return this.compileAndRun(s,t)}var c=xe(t.map((function(t){return t.shape})),e),l=t.map((function(t){return t.as2D(-1,w(t.shape.slice(e)))})),f=new oa(l.map((function(t){return t.shape})));return this.compileAndRun(f,l).reshape(c)},e.prototype.neg=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.neg(t);if(u().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,bs,t.dtype);var e=new ds(t.shape,bs);return this.compileAndRun(e,[t])},e.prototype.batchMatMul=function(t,e,n,r){var o=n?t.shape[2]:t.shape[1],i=r?e.shape[1]:e.shape[2],a=n?t.shape[1]:t.shape[2],s=t.shape[0];if((1===o||1===i)&&a>1e3){n&&(t=t.transpose([0,2,1])),r&&(e=e.transpose([0,2,1]));var u=1===i?t:t.as3D(s,a,1),c=1===i?2:1,l=1===i?e.as3D(s,1,a):e;return this.multiply(u,l).sum(c,!0)}var f=it(t.dtype,e.dtype),h=new La(t.shape,[s,o,i],n,r);return this.compileAndRun(h,[t,e],f)},e.prototype.fusedBatchMatMul=function(t){var e=t.a,n=t.b,r=t.transposeA,o=t.transposeB,i=t.bias,a=t.activation,s=t.preluActivationWeights,u=r?e.shape[2]:e.shape[1],c=o?n.shape[1]:n.shape[2],l=e.shape[0],f=it(e.dtype,n.dtype),h=null!=i,d=null!=s,p=a?gr(a,!0):null,v=new La(e.shape,[l,u,c],r,o,h,p,d),g=[e,n];return i&&g.push(i),s&&g.push(s),this.compileAndRun(v,g,f)},e.prototype.multiply=function(t,e){if("complex64"===t.dtype){var n=this.texData.get(t.dataId),r=this.texData.get(e.dataId),o=new Ki("return areal * breal - aimag * bimag;",t.shape,e.shape),i=new Ki("return areal * bimag + aimag * breal;",t.shape,e.shape),a=[this.makeComplexComponentTensorInfo(t,n.complexTensors.real),this.makeComplexComponentTensorInfo(t,n.complexTensors.imag),this.makeComplexComponentTensorInfo(e,r.complexTensors.real),this.makeComplexComponentTensorInfo(e,r.complexTensors.imag)],s=this.compileAndRun(o,a),c=this.compileAndRun(i,a),l=this.complex(s,c);return s.dispose(),c.dispose(),l}if(this.shouldExecuteOnCPU([t,e]))return this.cpuBackend.multiply(t,e);if(u().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,Yi,t.dtype);var f=new $i(Yi,t.shape,e.shape);return this.compileAndRun(f,[t,e],t.dtype)},e.prototype.batchNormalization=function(t,e,n,r,o,i){var a=[t,e,n],s=null;null!=i&&(s=i.shape,a.push(i));var c=null;if(null!=o&&(c=o.shape,a.push(o)),u().getBool("WEBGL_PACK_NORMALIZATION")){var l=new qi(t.shape,e.shape,n.shape,s,c,r);return this.compileAndRun(l,a)}var f=new Hi(t.shape,e.shape,n.shape,s,c,r);return this.compileAndRun(f,a)},e.prototype.localResponseNormalization4D=function(t,e,n,r,o){var i=u().getBool("WEBGL_PACK_NORMALIZATION")?new Pa(t.shape,e,n,r,o):new Ma(t.shape,e,n,r,o);return this.compileAndRun(i,[t])},e.prototype.LRNGrad=function(t,e,n,r,o,i,a){var s=new Da(e.shape,r,o,i,a);return this.compileAndRun(s,[e,n,t])},e.prototype.tile=function(t,e){if("string"===t.dtype){var n=this.readSync(t.dataId).map((function(t){return Z(t)}));return Mn(Pe(t.shape,t.dtype,n),e)}var r=new us(t.shape,e);return this.compileAndRun(r,[t])},e.prototype.pad=function(t,e,n){var r=u().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Ga(t.shape,e,n):new Ua(t.shape,e,n);return this.compileAndRun(r,[t])},e.prototype.transpose=function(t,e){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.transpose(t,e);var n=u().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new ls(t.shape,e):new cs(t.shape,e);return this.compileAndRun(n,[t])},e.prototype.gather=function(t,e,n){if(this.shouldExecuteOnCPU([t,e]))return this.cpuBackend.gather(t,e,n);var r=new Aa(t.shape,e.size,n);return this.compileAndRun(r,[t,e])},e.prototype.batchToSpaceND=function(t,e,n){m(t.rank<=4,(function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"}));var r=e.reduce((function(t,e){return t*e})),o=Ne(t.shape,e,r),i=Fe(o.length,e.length),a=Le(t.shape,e,r),s=je(n,e.length),u=Be(a,n,e.length);return t.reshape(o).transpose(i).reshape(a).slice(s,u)},e.prototype.spaceToBatchND=function(t,e,n){m(t.rank<=4,(function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"}));var r=e.reduce((function(t,e){return t*e})),o=[[0,0]];o.push.apply(o,n);for(var i=1+e.length;i<t.shape.length;++i)o.push([0,0]);var a=t.pad(o),s=Ne(a.shape,e,r,!1),u=Fe(s.length,e.length,!1),c=Le(a.shape,e,r,!1);return a.reshape(s).transpose(u).reshape(c)},e.prototype.reduce=function(t,e,n){var r=t.shape[0],o=t.shape[1],i=Ue(o),a=new Ha({windowSize:i,inSize:o,batchSize:r},e),s=this.compileAndRun(a,[t],n);return 1===s.shape[1]?s:this.reduce(s,e,n)},e.prototype.argReduce=function(t,e,n){void 0===n&&(n=null);var r=t.shape[0],o=t.shape[1];null!=n&&(r=n.shape[0],o=n.shape[1]);var i=Ue(o),a=new Fi({windowSize:i,inSize:o,batchSize:r},e,null==n),s=[t];null!=n&&s.push(n);var u=this.compileAndRun(a,s,"int32");return 1===u.shape[1]?u:this.argReduce(t,e,u)},e.prototype.argReducePacked=function(t,e,n){void 0===n&&(n=null);var r=null!=n?n.shape:t.shape,o=Ue(r[r.length-1]),i=new Gi(r,o,e,null==n),a=this.compileAndRun(i,null==n?[t]:[t,n],"int32");return a.rank===t.rank?this.argReducePacked(t,e,a):a},e.prototype.sum=function(t,e){ve("sum",e,t.rank);var n=de(t.shape,e),r=n[0],o=w(n[1]),i=t.as2D(-1,o),a=at(t.dtype);return this.reduce(i,"sum",a).reshape(r)},e.prototype.prod=function(t,e){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.prod(t,e);var n=de(t.shape,e),r=n[0],o=w(n[1]),i=t.as2D(-1,o),a=at(t.dtype);return this.reduce(i,"prod",a).reshape(r)},e.prototype.unsortedSegmentSum=function(t,e,n){var r=0,o=ge([r],t.rank),i=t;null!=o&&(i=t.transpose(o),r=ye(1,t.rank)[0]);var a=function(t,e,n){for(var r=[],o=t.length,i=0;i<o;i++)r.push(i!==e?t[i]:n);return r}(i.shape,r,n),s=w([i.shape[r]]),u=i.as2D(-1,s),c=at(t.dtype),l=this.segOpCompute(u,"unsortedSegmentSum",e,c,n).reshape(a);return null!=o&&(l=l.transpose(me(o))),l},e.prototype.segOpCompute=function(t,e,n,r,o){var i=t.shape[0],a=t.shape[1],s=function(t,e){var n,r=!1;for(t<=30?(n=t,r=!0):n=V(t,Math.floor(Math.sqrt(t)));!r;)n>e||n===t?r=!0:n=V(t,n+1);return n}(a,o),u=new es({windowSize:s,inSize:a,batchSize:i,numSegments:o},e),c=this.compileAndRun(u,[t,n],r);return c.shape[1]===o?c:(n=Me(0,o).tile([a/s]),this.segOpCompute(c,e,n,r,o))},e.prototype.argMinMaxReduce=function(t,e,n){var r=[e];if(ve("arg"+n.charAt(0).toUpperCase()+n.slice(1),r,t.rank),!u().getBool("WEBGL_PACK_REDUCE")||t.rank<=2){var o=de(t.shape,r),i=o[0],a=w(o[1]),s=t.as2D(-1,a);return this.argReduce(s,n).reshape(i)}return this.argReducePacked(t,n)},e.prototype.argMin=function(t,e){return this.argMinMaxReduce(t,e,"min")},e.prototype.argMax=function(t,e){return this.argMinMaxReduce(t,e,"max")},e.prototype.cumsum=function(t,e,n,r){if(e!==t.rank-1)throw new Error("WebGL cumsum shader expects an inner-most axis="+(t.rank-1)+" but got axis="+e);var o=new ma(t.shape,n,r);return this.compileAndRun(o,[t])},e.prototype.equal=function(t,e){if(u().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,"\n  return vec4(equal(a, b));\n","bool");var n=new $i("return float(a == b);",t.shape,e.shape);return this.compileAndRun(n,[t,e],"bool")},e.prototype.notEqual=function(t,e){if(u().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,"\n  return vec4(notEqual(a, b));\n","bool");var n=new $i("return float(a != b);",t.shape,e.shape);return this.compileAndRun(n,[t,e],"bool")},e.prototype.less=function(t,e){if(this.shouldExecuteOnCPU([t,e]))return this.cpuBackend.less(t,e);if(u().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,"\n  return vec4(lessThan(a, b));\n","bool");var n=new $i("return float(a < b);",t.shape,e.shape);return this.compileAndRun(n,[t,e],"bool")},e.prototype.lessEqual=function(t,e){if(u().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,"\n  return vec4(lessThanEqual(a, b));\n","bool");var n=new $i("return float(a <= b);",t.shape,e.shape);return this.compileAndRun(n,[t,e],"bool")},e.prototype.greater=function(t,e){if(this.shouldExecuteOnCPU([t,e]))return this.cpuBackend.greater(t,e);if(u().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,"\n  return vec4(greaterThan(a, b));\n","bool");var n=new $i("return float(a > b);",t.shape,e.shape);return this.compileAndRun(n,[t,e],"bool")},e.prototype.greaterEqual=function(t,e){if(u().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,"\n  return vec4(greaterThanEqual(a, b));\n","bool");var n=new $i("return float(a >= b);",t.shape,e.shape);return this.compileAndRun(n,[t,e],"bool")},e.prototype.logicalNot=function(t){var e=new ds(t.shape,"return float(!(x >= 1.0));");return this.compileAndRun(e,[t])},e.prototype.logicalAnd=function(t,e){if(u().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,"\n  return vec4(\n    vec4(greaterThanEqual(a, vec4(1.0))) *\n    vec4(greaterThanEqual(b, vec4(1.0))));\n","bool");var n=new $i("return float(a >= 1.0 && b >= 1.0);",t.shape,e.shape);return this.compileAndRun(n,[t,e],"bool")},e.prototype.logicalOr=function(t,e){if(u().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,"\n  return min(\n    vec4(greaterThanEqual(a, vec4(1.0))) +\n    vec4(greaterThanEqual(b, vec4(1.0))),\n    vec4(1.0));\n","bool");var n=new $i("return float(a >= 1.0 || b >= 1.0);",t.shape,e.shape);return this.compileAndRun(n,[t,e],"bool")},e.prototype.select=function(t,e,n){var r=new ns(t.rank,e.shape,e.rank);return this.compileAndRun(r,[t,e,n],it(e.dtype,n.dtype))},e.prototype.where=function(t){ae("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var e=t.dataSync();return Pn(t.shape,e)},e.prototype.topk=function(t,e){return Dn(t.dataSync(),t.shape,t.dtype,e)},e.prototype.min=function(t,e){ve("min",e,t.rank);var n=de(t.shape,e),r=n[0],o=w(n[1]),i=t.as2D(-1,o);return this.reduce(i,"min",i.dtype).reshape(r)},e.prototype.minimum=function(t,e){if(this.shouldExecuteOnCPU([t,e]))return this.cpuBackend.minimum(t,e);var n=u().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new ta("\n  vec4 result = vec4(min(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",t.shape,e.shape):new $i("\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return min(a, b);\n",t.shape,e.shape);return this.compileAndRun(n,[t,e])},e.prototype.mod=function(t,e){var n=u().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new ta("\n  vec4 result = mod(a, b);\n  vec4 isNaN = vec4(equal(b, vec4(0.0)));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",t.shape,e.shape):new $i("if (b == 0.0) return NAN;\n  return mod(a, b);",t.shape,e.shape);return this.compileAndRun(n,[t,e])},e.prototype.max=function(t,e){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.max(t,e);ve("max",e,t.rank);var n=de(t.shape,e),r=n[0],o=w(n[1]),i=t.as2D(-1,o);return this.reduce(i,"max",i.dtype).reshape(r)},e.prototype.maximum=function(t,e){if(this.shouldExecuteOnCPU([t,e]))return this.cpuBackend.maximum(t,e);var n=u().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new ta("\n  vec4 result = vec4(max(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",t.shape,e.shape):new $i("\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return max(a, b);\n",t.shape,e.shape);return this.compileAndRun(n,[t,e])},e.prototype.all=function(t,e){ve("all",e,t.rank);var n=de(t.shape,e),r=n[0],o=w(n[1]),i=t.as2D(-1,o);return this.reduce(i,"all",i.dtype).reshape(r)},e.prototype.any=function(t,e){ve("any",e,t.rank);var n=de(t.shape,e),r=n[0],o=w(n[1]),i=t.as2D(-1,o);return this.reduce(i,"any",i.dtype).reshape(r)},e.prototype.realDivide=function(t,e){if(u().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,"\n  // vec4 one = vec4(equal(a, b));\n  // return one + (vec4(1.0) - one) * a / b;\n  vec4 result = a / b;\n  if(a.x == b.x) {\n    result.x = 1.;\n  }\n  if(a.y == b.y) {\n    result.y = 1.;\n  }\n  if(a.z == b.z) {\n    result.z = 1.;\n  }\n  if(a.w == b.w) {\n    result.w = 1.;\n  }\n\n  return result;\n","float32",!0);var n=new $i("\nif (a == b) {\n  return 1.0;\n};\nreturn a / b;",t.shape,e.shape);return this.compileAndRun(n,[t,e],"float32")},e.prototype.floorDiv=function(t,e){if(u().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,"\n  ivec4 ia = round(a);\n  ivec4 ib = round(b);\n  bvec4 cond = notEqual(ib, ivec4(0));\n  ivec4 result = ivec4(0);\n  vec4 s = sign(a) * sign(b);\n\n  // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n  if (cond[0]) {\n    result[0] = idiv(ia[0], ib[0], s[0]);\n  }\n  if (cond[1]) {\n    result[1] = idiv(ia[1], ib[1], s[1]);\n  }\n  if (cond[2]) {\n    result[2] = idiv(ia[2], ib[2], s[2]);\n  }\n  if (cond[3]) {\n    result[3] = idiv(ia[3], ib[3], s[3]);\n  }\n  return vec4(result);\n","int32");var n=new $i("\n  float s = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  if (ib != 0) {\n    // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n    return float(idiv(ia, ib, s));\n  } else {\n    return NAN;\n  }\n",t.shape,e.shape);return this.compileAndRun(n,[t,e],"int32")},e.prototype.add=function(t,e){if("complex64"===t.dtype&&"complex64"===e.dtype)return this.complexSeparableBinaryOp(t,e,Xi);if(this.shouldExecuteOnCPU([t,e]))return this.cpuBackend.add(t,e);var n=it(t.dtype,e.dtype);if(u().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,Xi,n);var r=new $i(Xi,t.shape,e.shape);return this.compileAndRun(r,[t,e],n)},e.prototype.packedUnaryOp=function(t,e,n){var r=new As(t.shape,e);return this.compileAndRun(r,[t],n)},e.prototype.packedBinaryOp=function(t,e,n,r,o){void 0===o&&(o=!1);var i=new ta(n,t.shape,e.shape,o);return this.compileAndRun(i,[t,e],r)},e.prototype.complexSeparableBinaryOp=function(t,e,n){var r=this,o=this.texData.get(t.dataId),i=this.texData.get(e.dataId),a=[[o.complexTensors.real,i.complexTensors.real],[o.complexTensors.imag,i.complexTensors.imag]].map((function(o){var i=o[0],a=o[1],s=r.makeComplexComponentTensorInfo(t,i),u=r.makeComplexComponentTensorInfo(e,a),c=new $i(n,t.shape,e.shape);return r.compileAndRun(c,[s,u],it(i.dtype,a.dtype))})),s=a[0],u=a[1],c=this.complex(s,u);return s.dispose(),u.dispose(),c},e.prototype.makeComplexComponentTensorInfo=function(t,e){return{dataId:e.dataId,dtype:e.dtype,shape:t.shape}},e.prototype.addN=function(t){if(1===t.length)return t[0];if(t.length>u().get("WEBGL_MAX_TEXTURES_IN_SHADER")){var e=Math.floor(t.length/2),n=this.addN(t.slice(0,e)),r=this.addN(t.slice(e));return this.addN([n,r])}var o=t.map((function(t){return t.dtype})).reduce((function(t,e){return it(t,e)})),i=t.map((function(t){return t.shape})),a=u().getBool("WEBGL_PACK")?new Ni(t[0].shape,i):new Pi(t[0].shape,i);return this.compileAndRun(a,t,o)},e.prototype.subtract=function(t,e){if("complex64"===t.dtype&&"complex64"===e.dtype)return this.complexSeparableBinaryOp(t,e,Ji);if(this.shouldExecuteOnCPU([t,e]))return this.cpuBackend.subtract(t,e);var n=it(t.dtype,e.dtype);if(u().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,Ji,t.dtype);var r=new $i(Ji,t.shape,e.shape);return this.compileAndRun(r,[t,e],n)},e.prototype.pow=function(t,e){var n=u().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new ta("\n  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.\n  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));\n  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);\n  vec4 result = multiplier * pow(abs(a), b);\n\n  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS\n  bvec4 isExpZero = equal(b, vec4(0.0));\n  result.r = isExpZero.r ? 1.0 : result.r;\n  result.g = isExpZero.g ? 1.0 : result.g;\n  result.b = isExpZero.b ? 1.0 : result.b;\n  result.a = isExpZero.a ? 1.0 : result.a;\n\n  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",t.shape,e.shape):new $i("\nif(a < 0.0 && floor(b) < b){\n  return NAN;\n}\nif (b == 0.0) {\n  return 1.0;\n}\nreturn (round(mod(b, 2.0)) != 1) ?\n    pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",t.shape,e.shape),r=it(t.dtype,e.dtype);return this.compileAndRun(n,[t,e],r)},e.prototype.ceil=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.ceil(t);if(u().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,xs,t.dtype);var e=new ds(t.shape,xs);return this.compileAndRun(e,[t])},e.prototype.floor=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.floor(t);if(u().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,ws,t.dtype);var e=new ds(t.shape,ws);return this.compileAndRun(e,[t])},e.prototype.sign=function(t){var e=new ds(t.shape,"\n  if (isnan(x)) { return 0.0; }\n  return sign(x);\n");return this.compileAndRun(e,[t])},e.prototype.isNaN=function(t){var e=new ds(t.shape,"return float(isnan(x));");return this.compileAndRun(e,[t],"bool")},e.prototype.isInf=function(t){var e=new ds(t.shape,"return float(isinf(x));");return this.compileAndRun(e,[t],"bool")},e.prototype.isFinite=function(t){var e=new ds(t.shape,"return float(!isnan(x) && !isinf(x));");return this.compileAndRun(e,[t],"bool")},e.prototype.round=function(t){var e=new ds(t.shape,"\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker's rounding.\n  float base = floor(x);\n  if ((x - base) < 0.5) {\n    return floor(x);\n  } else if ((x - base) > 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n");return this.compileAndRun(e,[t])},e.prototype.exp=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.exp(t);if(u().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,_s,t.dtype);var e=new ds(t.shape,_s);return this.compileAndRun(e,[t])},e.prototype.expm1=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.expm1(t);if(u().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,Es,t.dtype);var e=new ds(t.shape,Es);return this.compileAndRun(e,[t])},e.prototype.softmax=function(t,e){var n=I([e],t.shape),r=this.max(t,n),o=pe(r.shape,n),i=this.subtract(t,r.reshape(o)),a=this.exp(i),s=this.sum(a,n).reshape(o);return this.realDivide(a,s)},e.prototype.log=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.log(t);if(u().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,"\n  vec4 result = log(x);\n  vec4 isNaN = vec4(lessThan(x, vec4(0.0)));\n  result.r = isNaN.r == 1.0 ? NAN : result.r;\n  result.g = isNaN.g == 1.0 ? NAN : result.g;\n  result.b = isNaN.b == 1.0 ? NAN : result.b;\n  result.a = isNaN.a == 1.0 ? NAN : result.a;\n\n  return result;\n",t.dtype);var e=new ds(t.shape,"if (x < 0.0) return NAN;\n  return log(x);");return this.compileAndRun(e,[t])},e.prototype.log1p=function(t){var e=new ds(t.shape,"return log(1.0 + x);");return this.compileAndRun(e,[t])},e.prototype.sqrt=function(t){var e=new ds(t.shape,"return sqrt(x);");return this.compileAndRun(e,[t])},e.prototype.rsqrt=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.rsqrt(t);var e=new ds(t.shape,"return inversesqrt(x);");return this.compileAndRun(e,[t])},e.prototype.reciprocal=function(t){var e=new ds(t.shape,"return 1.0 / x;");return this.compileAndRun(e,[t])},e.prototype.relu=function(t){var e;return e=u().getBool("WEBGL_PACK")?new As(t.shape,Cs):new ds(t.shape,gs),this.compileAndRun(e,[t])},e.prototype.relu6=function(t){var e;return e=u().getBool("WEBGL_PACK")?new As(t.shape,Ss):new ds(t.shape,ms),this.compileAndRun(e,[t])},e.prototype.prelu=function(t,e){var n=u().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new ta(Zi,t.shape,e.shape):new $i(Qi,t.shape,e.shape);return this.compileAndRun(n,[t,e])},e.prototype.elu=function(t){if(u().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,Os,t.dtype);var e=new ds(t.shape,ys);return this.compileAndRun(e,[t])},e.prototype.eluDer=function(t,e){var n=u().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new ta("\n  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));\n  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));\n",t.shape,e.shape):new $i("return (b >= 1.0) ? a : a * (b + 1.0);",t.shape,e.shape);return this.compileAndRun(n,[t,e])},e.prototype.selu=function(t){var e=new ds(t.shape,"\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = 1.7580993408473768;\n  float scale = 1.0507009873554805;\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n");return this.compileAndRun(e,[t])},e.prototype.int=function(t){var e=new ds(t.shape,"return float(int(x));");return this.compileAndRun(e,[t],"int32")},e.prototype.clip=function(t,e,n){var r,o=(r=u().getBool("WEBGL_PACK_CLIP")?new na(t.shape):new ea(t.shape)).getCustomSetupFunc(e,n);return this.compileAndRun(r,[t],null,o)},e.prototype.abs=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.abs(t);if(u().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,vs,t.dtype);var e=new ds(t.shape,vs);return this.compileAndRun(e,[t])},e.prototype.complexAbs=function(t){var e=this.texData.get(t.dataId),n=new ra(t.shape),r=[this.makeComplexComponentTensorInfo(t,e.complexTensors.real),this.makeComplexComponentTensorInfo(t,e.complexTensors.imag)];return this.compileAndRun(n,r)},e.prototype.sigmoid=function(t){var e=new ds(t.shape,"return 1.0 / (1.0 + exp(-1.0 * x));");return this.compileAndRun(e,[t])},e.prototype.softplus=function(t){var e=new ds(t.shape,"\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x > -threshold;\n  bool too_small = x < threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n");return this.compileAndRun(e,[t])},e.prototype.sin=function(t){var e=new ds(t.shape,"if (isnan(x)) return x;\n  return sin(x);\n");return this.compileAndRun(e,[t])},e.prototype.cos=function(t){var e=new ds(t.shape,"if (isnan(x)) return x;\n  return cos(x);\n");return this.compileAndRun(e,[t])},e.prototype.tan=function(t){var e=new ds(t.shape,"return tan(x);");return this.compileAndRun(e,[t])},e.prototype.asin=function(t){var e=new ds(t.shape,"if (isnan(x)) return x;\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return asin(x);\n");return this.compileAndRun(e,[t])},e.prototype.acos=function(t){var e=new ds(t.shape,"if (isnan(x)) return x;\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return acos(x);\n");return this.compileAndRun(e,[t])},e.prototype.atan=function(t){var e=new ds(t.shape,"if (isnan(x)) return x;\n  return atan(x);\n");return this.compileAndRun(e,[t])},e.prototype.atan2=function(t,e){var n=u().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new ta("\n  vec4 result = atan(a, b);\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",t.shape,e.shape):new $i("\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return atan(a, b);\n",t.shape,e.shape);return this.compileAndRun(n,[t,e])},e.prototype.sinh=function(t){var e=new ds(t.shape,"\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n");return this.compileAndRun(e,[t])},e.prototype.cosh=function(t){var e=new ds(t.shape,"\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n");return this.compileAndRun(e,[t])},e.prototype.tanh=function(t){var e=new ds(t.shape,"\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n");return this.compileAndRun(e,[t])},e.prototype.asinh=function(t){var e=new ds(t.shape,"if (isnan(x)) return x;return log(x + sqrt(x * x + 1.0));");return this.compileAndRun(e,[t])},e.prototype.acosh=function(t){var e=new ds(t.shape,"if (isnan(x)) return x;\n  if (x < 1.0) return NAN;\n  return log(x + sqrt(x * x - 1.0));");return this.compileAndRun(e,[t])},e.prototype.atanh=function(t){var e=new ds(t.shape,"if (isnan(x)) return x;\n  if ((x < -1.0) || (x > 1.0)) return NAN;\n  return (log(1.0 + x) - log(1.0 - x)) / 2.0;");return this.compileAndRun(e,[t])},e.prototype.erf=function(t){var e=new ds(t.shape,'\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  float p = 0.3275911;\n  float a1 = 0.254829592;\n  float a2 = -0.284496736;\n  float a3 = 1.421413741;\n  float a4 = -1.453152027;\n  float a5 = 1.061405429;\n\n  float sign = sign(x);\n  x = abs(x);\n  float t = 1.0 / (1.0 + p * x);\n  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));\n');return this.compileAndRun(e,[t])},e.prototype.step=function(t,e){var n=new ds(t.shape,function(t){return void 0===t&&(t=0),ps+"\n    return x > 0.0 ? 1.0 : float("+t+");\n  "}(e));return this.compileAndRun(n,[t])},e.prototype.conv2dByMatMul=function(t,e,n,r,o,i){var a=t.shape,s=this.texData.get(t.dataId),c="channelsLast"===n.dataFormat,l=a[2]%2!=0&&!!s.isPacked;if((1===a[0]*a[1]*a[2]||1===n.outChannels)&&n.inChannels>1e3||!u().getBool("WEBGL_LAZILY_UNPACK")||!u().getBool("WEBGL_PACK_BINARY_OPERATIONS")||!l){var f=this.reshape(t,[1,c?a[0]*a[1]*a[2]:a[0]*a[2]*a[3],n.inChannels]),h=this.reshape(e,[1,n.inChannels,n.outChannels]);return this.reshape(this.fusedBatchMatMul({a:f,b:h,transposeA:!1,transposeB:!1,bias:r,activation:o,preluActivationWeights:i}),n.outShape)}var d={dataId:t.dataId,shape:[1,c?a[0]*a[1]*(a[2]+1):a[0]*a[2]*(a[3]+1),n.inChannels],dtype:t.dtype},p=s.shape;s.shape=s.shape.slice(),s.shape[s.shape.length-2]++,m(Kt(s.shape,d.shape),(function(){return"packed reshape "+s.shape+" to "+d.shape+" isn't free"}));var v=this.reshape(e,[1,n.inChannels,n.outChannels]),g=this.fusedBatchMatMul({a:d,b:v,transposeA:!1,transposeB:!1,bias:r,activation:o,preluActivationWeights:i}),y=this.texData.get(g.dataId);return m(y.isPacked,(function(){return"batchMatMul result is expected to be packed"})),s.shape=p,y.shape=n.outShape,Co.makeTensorFromDataId(g.dataId,n.outShape,g.dtype)},e.prototype.conv2dWithIm2Row=function(t,e,n,r,o,i){var a=n.outWidth,s=n.outHeight,u="channelsLast"===n.dataFormat,c=n.filterWidth*n.filterHeight*n.inChannels,l=s*a,f=[c,l],h=t.squeeze([0]),d=e.reshape([1,c,-1]),p=new Ta(f,h.shape,n),v=this.compileAndRun(p,[h]).reshape([1,f[0],f[1]]),g=null!=r,m=null!=i,y=o?gr(o,!0):null,b=new La(v.shape,[1,l,n.outChannels],!0,!1,g,y,m),x=[v,d];r&&x.push(r),m&&x.push(i);var w=this.compileAndRun(b,x);return w.reshape(u?[1,s,a,n.outChannels]:[1,n.outChannels,s,a])},e.prototype.fusedConv2d=function(t){var e=t.input,n=t.filter,r=t.convInfo,o=t.bias,i=t.activation,a=t.preluActivationWeights;if(1===r.filterHeight&&1===r.filterWidth&&1===r.dilationHeight&&1===r.dilationWidth&&1===r.strideHeight&&1===r.strideWidth&&("SAME"===r.padInfo.type||"VALID"===r.padInfo.type))return this.conv2dByMatMul(e,n,r,o,i,a);if(u().getBool("WEBGL_CONV_IM2COL")&&1===e.shape[0])return this.conv2dWithIm2Row(e,n,r,o,i,a);var s=null!=o,c=null!=a,l=i?gr(i,!1):null,f=new ha(r,s,l,c),h=[e,n];return o&&h.push(o),a&&h.push(a),this.compileAndRun(f,h)},e.prototype.conv2d=function(t,e,n){if(1===n.filterHeight&&1===n.filterWidth&&1===n.dilationHeight&&1===n.dilationWidth&&1===n.strideHeight&&1===n.strideWidth&&("SAME"===n.padInfo.type||"VALID"===n.padInfo.type))return this.conv2dByMatMul(t,e,n);if(u().getBool("WEBGL_CONV_IM2COL")&&1===t.shape[0])return this.conv2dWithIm2Row(t,e,n);var r=new ha(n);return this.compileAndRun(r,[t,e])},e.prototype.conv2dDerInput=function(t,e,n){var r=new sa(n);return this.compileAndRun(r,[t,e])},e.prototype.conv2dDerFilter=function(t,e,n){var r=new aa(n);return this.compileAndRun(r,[t,e])},e.prototype.fusedDepthwiseConv2D=function(t){var e,n=t.input,r=t.filter,o=t.convInfo,i=t.bias,a=t.activation,s=t.preluActivationWeights,c=u().getBool("WEBGL_PACK_DEPTHWISECONV")&&o.strideWidth<=2&&o.outChannels/o.inChannels==1,l=a?gr(a,c):null,f=[n,r],h=null!=i,d=null!=s;return h&&f.push(i),d&&f.push(s),c?(e=new va(o,h,l,d),this.compileAndRun(e,f)):(e=new pa(o,h,l,d),this.compileAndRun(e,f))},e.prototype.depthwiseConv2D=function(t,e,n){var r;return u().getBool("WEBGL_PACK_DEPTHWISECONV")&&n.strideWidth<=2&&n.outChannels/n.inChannels==1?(r=new va(n),this.compileAndRun(r,[t,e])):(r=new pa(n),this.compileAndRun(r,[t,e]))},e.prototype.depthwiseConv2DDerInput=function(t,e,n){var r=new fa(n);return this.compileAndRun(r,[t,e])},e.prototype.depthwiseConv2DDerFilter=function(t,e,n){var r=new la(n);return this.compileAndRun(r,[t,e])},e.prototype.conv3d=function(t,e,n){var r=new da(n);return this.compileAndRun(r,[t,e])},e.prototype.conv3dDerInput=function(t,e,n){var r=new ca(n);return this.compileAndRun(r,[t,e])},e.prototype.conv3dDerFilter=function(t,e,n){var r=new ua(n);return this.compileAndRun(r,[t,e])},e.prototype.maxPool=function(t,e){var n=new za(e,"max",!1);return this.compileAndRun(n,[t])},e.prototype.avgPool=function(t,e){var n=new za(e,"avg",!1);return this.compileAndRun(n,[t],"float32")},e.prototype.maxPoolBackprop=function(t,e,n,r){var o=new za(r,"max",!0),i=this.compileAndRun(o,[e]),a=new Na(r),s=this.compileAndRun(a,[t,i],e.dtype);return i.dispose(),s},e.prototype.avgPoolBackprop=function(t,e,n){var r=new zi(n);return this.compileAndRun(r,[t],e.dtype)},e.prototype.cast=function(t,e){return gn(t,e,this)},e.prototype.unstack=function(t,e){for(var n=t.shape[e],r=new Array(t.rank-1),o=0,i=0;i<t.rank;i++)i!==e&&(r[o++]=t.shape[i]);var a=new Array(t.rank).fill(0),s=t.shape.slice();s[e]=1;var u=new Array(n);for(i=0;i<u.length;i++)a[e]=i,u[i]=this.slice(t,a,s).reshape(r);return u},e.prototype.avgPool3d=function(t,e){var n=new Va(e,"avg",!1);return this.compileAndRun(n,[t],"float32")},e.prototype.avgPool3dBackprop=function(t,e,n){var r=new Vi(n);return this.compileAndRun(r,[t],e.dtype)},e.prototype.maxPool3d=function(t,e){var n=new Va(e,"max",!1);return this.compileAndRun(n,[t],"float32")},e.prototype.maxPool3dBackprop=function(t,e,n,r){var o=new Va(r,"max",!0),i=this.compileAndRun(o,[e]),a=new Fa(r),s=this.compileAndRun(a,[t,i],e.dtype);return i.dispose(),s},e.prototype.reshape=function(t,e){var n=this.texData.get(t.dataId);if(n.isPacked&&!Kt(t.shape,e)&&(null===n.texture||!Kt(n.shape,e))){var r=this.packedReshape(t,e);return Co.makeTensorFromDataId(r.dataId,r.shape,r.dtype)}return mn(t,e)},e.prototype.resizeBilinear=function(t,e,n,r){var o=u().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new Ja(t.shape,e,n,r):new Xa(t.shape,e,n,r);return this.compileAndRun(o,[t],"float32")},e.prototype.resizeBilinearBackprop=function(t,e,n){var r=new Ka(t,e,n);return this.compileAndRun(r,[t])},e.prototype.resizeNearestNeighbor=function(t,e,n,r){var o=new Qa(t.shape,e,n,r);return this.compileAndRun(o,[t])},e.prototype.resizeNearestNeighborBackprop=function(t,e,n){var r=new Ya(t,e,n);return this.compileAndRun(r,[t])},e.prototype.multinomial=function(t,e,n,r){var o=e?t:ki(t),i=new ja(o.shape[0],o.shape[1],n),a=i.getCustomSetupFunc(r);return this.compileAndRun(i,[o],"int32",a)},e.prototype.oneHot=function(t,e,n,r){var o=new Ba(t.size,e,n,r);return this.compileAndRun(o,[t])},e.prototype.diag=function(t){var e=new wa(t.size);return this.compileAndRun(e,[t])},e.prototype.nonMaxSuppression=function(t,e,n,r,o){return ae("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead"),Cn(t.dataSync(),e.dataSync(),n,r,o)},e.prototype.cropAndResize=function(t,e,n,r,o,i){var a=new ga(t.shape,e.shape,r,o,i);return this.compileAndRun(a,[t,e,n],"float32")},e.prototype.depthToSpace=function(t,e,n){m(e>1,(function(){return"blockSize should be > 1 for depthToSpace, but was: "+e}));var r=t.shape[0],o=("NHWC"===n?t.shape[1]:t.shape[2])*e,i=("NHWC"===n?t.shape[2]:t.shape[3])*e,a=("NHWC"===n?t.shape[3]:t.shape[1])/(e*e),s=new xa("NHWC"===n?[r,o,i,a]:[r,a,o,i],e,n);return this.compileAndRun(s,[t])},e.prototype.split=function(t,e,n){return Tn(t,e,n)},e.prototype.scatterND=function(t,e,n){var r=Ve(0,t,n),o=r.sliceRank,i=r.numUpdates,a=r.sliceSize,s=r.strides,u=r.outputSize,c=[u/a,a],l=t.reshape([i,o]),f=e.reshape([i,a]);if(0===u)return mn(_e([]),n);var h=Re(0),d=new ts(i,o,l.rank,f.rank,s,c);return this.compileAndRun(d,[f,l,h]).reshape(n)},e.prototype.sparseToDense=function(t,e,n,r){var o=Ve(0,t,n),i=new ts(o.numUpdates,o.sliceRank,t.rank,e.rank,o.strides,[o.outputSize,1],!1);return this.compileAndRun(i,[e,t,r]).reshape(n)},e.prototype.fft=function(t){return this.fftImpl(t,!1)},e.prototype.ifft=function(t){return this.fftImpl(t,!0)},e.prototype.fftImpl=function(t,e){var n=this.texData.get(t.dataId),r=new Sa("return real * expR - imag * expI;",t.shape,e),o=new Sa("return real * expI + imag * expR;",t.shape,e),i=[this.makeComplexComponentTensorInfo(t,n.complexTensors.real),this.makeComplexComponentTensorInfo(t,n.complexTensors.imag)],a=this.compileAndRun(r,i),s=this.compileAndRun(o,i),u=this.complex(a,s).as2D(t.shape[0],t.shape[1]);return a.dispose(),s.dispose(),u},e.prototype.gatherND=function(t,e){var n=e.shape,r=n[n.length-1],o=We(t,e),i=o[0],a=o[1],s=o[2],u=o[3],c=e.reshape([a,r]),l=t.reshape([t.size/s,s]),f=new Ia(r,u,[a,s]);return this.compileAndRun(f,[l,c]).reshape(i)},e.prototype.fill=function(t,e,n){if("string"===(n=n||G(e))){var r=M(n,w(t));return r.fill(e),Co.makeTensor(r,t,n,this)}var o=new Oa(t,e),i=o.getCustomSetupFunc(e);return this.compileAndRun(o,[],n,i)},e.prototype.onesLike=function(t){if("string"===t.dtype)throw new Error("onesLike is not supported under string dtype");return this.fill(t.shape,1,t.dtype)},e.prototype.zerosLike=function(t){return this.fill(t.shape,"string"===t.dtype?"":0,t.dtype)},e.prototype.linspace=function(t,e,n){return yn(t,e,n)},e.prototype.makeTensorInfo=function(t,e){var n=this.write(null,t,e);return this.texData.get(n).usage=null,{dataId:n,shape:t,dtype:e}},e.prototype.makeOutput=function(t,e){var n=this.makeTensorInfo(t,e).dataId;return Co.makeTensorFromDataId(n,t,e,this)},e.prototype.unpackTensor=function(t){var e=new Is(t.shape);return this.runWebGLProgram(e,[t],t.dtype)},e.prototype.packTensor=function(t){var e=new Wa(t.shape);return this.runWebGLProgram(e,[t],t.dtype,null,!0)},e.prototype.packedReshape=function(t,e){var n=[Gt(t.shape)].concat(zt(t.shape)),r={dtype:t.dtype,shape:n,dataId:t.dataId},o=[Gt(e)].concat(zt(e)),i=new qa(o,n),a=this.runWebGLProgram(i,[r],t.dtype,null,!0);return{dataId:a.dataId,shape:e,dtype:a.dtype}},e.prototype.decode=function(t){var e,n=this.texData.get(t),r=n.isPacked,o=n.shape,i=n.dtype,a=Vt(o);return e=r?new ba(a):new ya(a),{dtype:i,shape:o,dataId:this.runWebGLProgram(e,[{shape:a,dtype:i,dataId:t}],i,null,!0).dataId}},e.prototype.runWebGLProgram=function(t,e,n,r,o){var i=this;void 0===o&&(o=!1);var a=this.makeTensorInfo(t.outputShape,n),s=this.texData.get(a.dataId);if(t.packedOutput&&(s.isPacked=!0),t.outPackingScheme===Oo.DENSE){var c=pt(t.outputShape);s.texShape=c.map((function(t){return 2*t}))}if(null!=t.outTexUsage&&(s.usage=t.outTexUsage),0===w(a.shape))return s.values=T(a.dtype,0),a;var l=[],f=e.map((function(e){if("complex64"===e.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var n=i.texData.get(e.dataId);if(null==n.texture){if(!t.packedInputs&&w(e.shape)<=u().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:e.shape,texData:null,isUniform:!0,uniformValues:n.values};t.packedInputs&&(n.isPacked=!0,n.shape=e.shape)}else if(!!n.isPacked!=!!t.packedInputs)e=n.isPacked?i.unpackTensor(e):i.packTensor(e),l.push(e),n=i.texData.get(e.dataId);else if(n.isPacked&&!Kt(n.shape,e.shape)){var r=e,o=e.shape;e.shape=n.shape,e=i.packedReshape(e,o),l.push(e),n=i.texData.get(e.dataId),r.shape=o}return i.uploadToGPU(e.dataId),{shape:e.shape,texData:n,isUniform:!1}}));this.uploadToGPU(a.dataId);var h,d={shape:a.shape,texData:s,isUniform:!1},p=function(t,e,n){var r="";return e.concat(n).forEach((function(t){r+=t.shape+"_"+(t.isUniform?"uniform":t.texData.texShape)+"_"+(null!=t.texData&&null!=t.texData.slice&&t.texData.slice.flatOffset>0)})),t.constructor.name+"_"+r+"_"+t.userCode}(t,f,d),v=this.getAndSaveBinary(p,(function(){return function(t,e,n,r){var o=e.userCode,i=n.map((function(t,n){var r={logicalShape:t.shape,texShape:t.isUniform?null:t.texData.texShape,isUniform:t.isUniform,isPacked:!t.isUniform&&t.texData.isPacked,flatOffset:null};return null!=t.texData&&null!=t.texData.slice&&t.texData.slice.flatOffset>0&&(r.flatOffset=t.texData.slice.flatOffset),{name:e.variableNames[n],shapeInfo:r}})),a=i.map((function(t){return t.shapeInfo})),s={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},c=Wn(i,s,o,e.packedInputs),l=t.createProgram(c),f=null,h=t.getUniformLocation(l,"NAN",!1);1===u().getNumber("WEBGL_VERSION")&&(f=t.getUniformLocation(l,"INFINITY",!1));for(var d={},p=0;p<e.variableNames.length;p++){var v=e.variableNames[p];d[v]=t.getUniformLocation(l,v,!1),d["offset"+v]=t.getUniformLocation(l,"offset"+v,!1)}return{program:e,source:c,webGLProgram:l,uniformLocations:d,inShapeInfos:a,outShapeInfo:s,infLoc:f,nanLoc:h}}(i.gpgpu,t,f,d)})),g=null!=this.activeTimers;if(g&&(h=this.startTimer()),function(t,e,n,r,o){dr(e.inShapeInfos,n),dr([e.outShapeInfo],[r]);var i=r.texData.texture,a=r.texData.texShape;r.texData.isPacked?t.setOutputPackedMatrixTexture(i,a[0],a[1]):t.setOutputMatrixTexture(i,a[0],a[1]),t.setProgram(e.webGLProgram),1===u().getNumber("WEBGL_VERSION")&&null!==e.infLoc&&t.gl.uniform1f(e.infLoc,1/0),null!==e.nanLoc&&t.gl.uniform1f(e.nanLoc,NaN),n.forEach((function(n,r){var o=e.program.variableNames[r],i=e.uniformLocations[o],a=e.uniformLocations["offset"+o];if(null!=i)if(n.isUniform)if(w(n.shape)<2)t.gl.uniform1f(i,n.uniformValues[0]);else{var s=n.uniformValues;s instanceof Float32Array||(s=new Float32Array(s)),t.gl.uniform1fv(i,s)}else null!=n.texData.slice&&null!=a&&t.gl.uniform1i(a,n.texData.slice.flatOffset),t.setInputMatrixTexture(n.texData.texture,i,r)})),null!=o&&o(t,e.webGLProgram),t.executeProgram()}(this.gpgpu,v,f,d,r),l.forEach((function(t){return i.disposeData(t.dataId)})),g&&(h=this.endTimer(h),this.activeTimers.push({name:t.constructor.name,query:this.getQueryTime(h)})),!u().getBool("WEBGL_LAZILY_UNPACK")&&s.isPacked&&!1===o){var m=this.unpackTensor(a);return this.disposeData(a.dataId),m}return a},e.prototype.compileAndRun=function(t,e,n,r,o){void 0===o&&(o=!1);var i=this.runWebGLProgram(t,e,n=n||e[0].dtype,r,o);return Co.makeTensorFromDataId(i.dataId,i.shape,i.dtype)},e.prototype.getAndSaveBinary=function(t,e){return t in this.binaryCache||(this.binaryCache[t]=e()),this.binaryCache[t]},e.prototype.getTextureManager=function(){return this.textureManager},e.prototype.dispose=function(){var t=this;this.disposed||(u().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach((function(e){t.gpgpu.deleteProgram(t.binaryCache[e].webGLProgram),delete t.binaryCache[e]})),this.textureManager.dispose(),null!=this.canvas&&"undefined"!=typeof HTMLCanvasElement&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)},e.prototype.floatPrecision=function(){var t=this;return null==this.floatPrecisionValue&&(this.floatPrecisionValue=oe((function(){if(!u().get("WEBGL_RENDER_FLOAT32_ENABLED")){var e=u().getBool("DEBUG");u().set("DEBUG",!1);var n=t.abs(Re(1e-8)).dataSync()[0];if(u().set("DEBUG",e),n>0)return 32}return 16}))),this.floatPrecisionValue},e.prototype.epsilon=function(){return 32===this.floatPrecision()?1e-7:1e-4},e.prototype.uploadToGPU=function(t){var e,n=this.texData.get(t),r=n.shape,o=n.dtype,i=n.values,a=n.usage,s=n.isPacked;if(null==n.texture){var u,c=null!=this.activeTimers;c&&(u=Y());var l=n.texShape;if(null==l&&(l=Ht(r,s),n.texShape=l),null!=i){var f=Vt(r),h=void 0,d=l[1],p=l[0],v=i instanceof Uint8Array;s?(d=(e=vt(l[0],l[1]))[0],h=new Ca(f,[p=e[1],d],v)):h=new Ra(f,[p,d],v);var g=this.makeTensorInfo([p,d],o);this.texData.get(g.dataId).usage=v?Ao.PIXELS:Ao.UPLOAD,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(g.dataId),d,p,i);var m=this.runWebGLProgram(h,[g],o,null,!0),y=this.texData.get(m.dataId);n.texture=y.texture,n.texShape=y.texShape,n.isPacked=y.isPacked,n.usage=y.usage,this.disposeData(g.dataId),this.texData.delete(m.dataId),n.values=null,c&&(this.uploadWaitMs+=Y()-u)}else{var b=this.acquireTexture(l,a,o,s);n.texture=b}}},e.prototype.convertAndCacheOnCPU=function(t,e){var n=this.texData.get(t),r=n.dtype;return this.releaseGPUData(t),null!=e&&(n.values=function(t,e){if("float32"===e||"complex64"===e)return t;if("int32"===e||"bool"===e){for(var n="int32"===e?new Int32Array(t.length):new Uint8Array(t.length),r=0;r<n.length;++r)n[r]=Math.round(t[r]);return n}throw new Error("Unknown dtype "+e)}(e,r)),n.values},e.prototype.acquireTexture=function(t,e,n,r){if(this.numBytesInGPU+=this.computeBytes(t,n),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){var o=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: "+o+" MB, most likely due to a memory leak")}return this.textureManager.acquireTexture(t,e,r)},e.prototype.computeBytes=function(t,e){return t[0]*t[1]*L(e)},e}(Di);lt()&&Co.registerBackend("webgl",(function(){return new Ts}),2);var Ms,Ds=we({square_:function(t){var e=ce(t,"x","square");return Co.runKernelFunc((function(t,n){return n([e]),t.square(e)}),{x:e},null,"Square",{},[e],[])}}),Ps="SquaredDifference",Ns=we({squaredDifference_:function(t,e){var n,r=ce(t,"a","squaredDifference"),o=ce(e,"b","squaredDifference");return n=st(r,o),nn((r=n[0]).shape,(o=n[1]).shape),Co.runKernelFunc((function(t,e){var n=t.squaredDifference(r,o);return e([r,o]),n}),{a:r,b:o},(function(t,e){var n=e[0],r=e[1],o=Re(2);return{a:function(){return t.mul(n.sub(r).mul(o))},b:function(){return t.mul(r.sub(n).mul(o))}}}),Ps,{},[r,o],[])}}),Fs=we({abs_:function(t){var e=ce(t,"x","abs");return"complex64"===e.dtype?Co.runKernelFunc((function(t){return t.complexAbs(e)}),{$x:e}):Co.runKernelFunc((function(t,n){var r=t.abs(e);return n([e]),r}),{x:e},(function(t,e){var n=e[0];return{x:function(){return t.mul(n.toFloat().step(-1))}}}),"Abs")}}),Ls=we({acos_:function(t){var e=ce(t,"x","acos");return Co.runKernelFunc((function(t,n){var r=t.acos(e);return n([e]),r}),{$x:e},(function(t,e){var n=e[0];return{$x:function(){return t.divStrict(Re(1).sub(n.toFloat().square()).sqrt()).neg()}}}))}}),js=we({acosh_:function(t){var e=ce(t,"x","acosh");return Co.runKernelFunc((function(t,n){var r=t.acosh(e);return n([e]),r}),{$x:e},(function(t,e){var n=e[0];return{$x:function(){return t.divStrict(n.toFloat().square().sub(1).sqrt())}}}))}}),Bs=we({asin_:function(t){var e=ce(t,"x","asin");return Co.runKernelFunc((function(t,n){var r=t.asin(e);return n([e]),r}),{$x:e},(function(t,e){var n=e[0];return{$x:function(){return t.divStrict(Re(1).sub(n.toFloat().square()).sqrt())}}}))}}),Ws=we({asinh_:function(t){var e=ce(t,"x","asinh");return Co.runKernelFunc((function(t,n){var r=t.asinh(e);return n([e]),r}),{$x:e},(function(t,e){var n=e[0];return{$x:function(){return t.divStrict(Re(1).add(n.toFloat().square()).sqrt())}}}))}}),Us=we({atan_:function(t){var e=ce(t,"x","atan");return Co.runKernelFunc((function(t,n){var r=t.atan(e);return n([e]),r}),{$x:e},(function(t,e){var n=e[0];return{$x:function(){return t.div(n.toFloat().square().add(1))}}}))}}),Gs=we({atanh_:function(t){var e=ce(t,"x","atanh");return Co.runKernelFunc((function(t,n){var r=t.atanh(e);return n([e]),r}),{$x:e},(function(t,e){var n=e[0];return{$x:function(){return t.div(Re(1).sub(n.toFloat().square()))}}}))}}),zs=we({ceil_:function(t){var e=ce(t,"x","ceil");return Co.runKernelFunc((function(t){return t.ceil(e)}),{$x:e},(function(t){return{$x:function(){return Wo(t)}}}))}}),Vs=we({clipByValue_:function(t,e,n){var r=ce(t,"x","clipByValue");return m(e<=n,(function(){return"Error in clip: min ("+e+") must be less than or equal to max ("+n+")."})),Co.runKernelFunc((function(t,o){var i=t.clip(r,e,n);return o([r]),i}),{x:r},(function(t,r){var o=r[0];return{x:function(){return t.where(o.greaterEqual(e).logicalAnd(o.lessEqual(n)),Wo(t))}}}),"ClipByValue",{min:e,max:n},[r])}}),Hs=we({cos_:function(t){var e=ce(t,"x","cos");return Co.runKernelFunc((function(t,n){var r=t.cos(e);return n([e]),r}),{x:e},(function(t,e){var n=e[0];return{x:function(){return n.toFloat().sin().neg().mul(t)}}}),"Cos",{},[e])}}),qs=we({cosh_:function(t){var e=ce(t,"x","cosh");return Co.runKernelFunc((function(t,n){var r=t.cosh(e);return n([e]),r}),{$x:e},(function(t,e){var n=e[0];return{$x:function(){return n.toFloat().sinh().mulStrict(t)}}}))}}),Ks=we({erf_:function(t){var e=ce(t,"x","erf");return m("int32"===e.dtype||"float32"===e.dtype,(function(){return"Input dtype must be `int32` or `float32`."})),"int32"===e.dtype&&(e=e.toFloat()),Co.runKernelFunc((function(t,n){var r=t.erf(e);return n([e]),r}),{$x:e},(function(t,e){var n=e[0];return{$x:function(){return t.mul(n.square().neg().exp().mul(2/Math.sqrt(Math.PI)))}}}))}}),Xs=we({exp_:function(t){var e=ce(t,"x","exp");return Co.runKernelFunc((function(t,n){var r=t.exp(e);return n([r]),r}),{x:e},(function(t,e){return{x:function(){return t.mulStrict(e[0])}}}),"Exp",{},[],[!0])}}),Js=we({expm1_:function(t){var e=ce(t,"x","expm1");return Co.runKernelFunc((function(t,n){var r=t.expm1(e);return n([e]),r}),{$x:e},(function(t,e){var n=e[0];return{$x:function(){return t.mul(n.exp())}}}))}}),Ys=we({floor_:function(t){var e=ce(t,"x","floor");return Co.runKernelFunc((function(t){return t.floor(e)}),{$x:e},(function(t){return{$x:function(){return Wo(t)}}}))}}),Qs=we({log_:function(t){var e=ce(t,"x","log");return Co.runKernelFunc((function(t,n){var r=t.log(e);return n([e]),r}),{x:e},(function(t,e){var n=e[0];return{x:function(){return t.div(n.toFloat())}}}),"Log",{},[e])}}),$s=we({log1p_:function(t){var e=ce(t,"x","log1p");return Co.runKernelFunc((function(t,n){var r=t.log1p(e);return n([e]),r}),{$x:e},(function(t,e){var n=e[0];return{$x:function(){return t.div(n.add(1))}}}))}}),Zs=we({logSigmoid_:function(t){var e=ce(t,"x","logSigmoid");return Co.runKernelFunc((function(t,n){var r=t.softplus(e.neg()).neg();return n([e]),r}),{$x:e},(function(t,e){var n=e[0];return{$x:function(){return t.mul(n.neg().sigmoid())}}}))}}),tu=we({neg_:function(t){var e=ce(t,"x","neg");return Co.runKernelFunc((function(t){return t.neg(e)}),{x:e},(function(t){return{x:function(){return t.neg()}}}),"Neg",{},[e])}}),eu=we({reciprocal_:function(t){var e=ce(t,"x","reciprocal");return Co.runKernelFunc((function(t,n){var r=t.reciprocal(e);return n([e]),r}),{$x:e},(function(t,e){var n=e[0];return{$x:function(){return t.div(n.square().neg())}}}))}}),nu=we({round_:function(t){var e=ce(t,"x","round");return Co.runKernelFunc((function(t){return t.round(e)}),{$x:e},(function(t){return{$x:function(){return Wo(t)}}}))}}),ru=we({rsqrt_:function(t){var e=ce(t,"x","rsqrt");return Co.runKernelFunc((function(t,n){var r=t.rsqrt(e);return n([e]),r}),{x:e},(function(t,e){var n=e[0];return{x:function(){return t.div(n.pow(1.5).mul(2)).neg()}}}),"Rsqrt",{},[e])}}),ou=we({sigmoid_:function(t){var e=ce(t,"x","sigmoid");return Co.runKernelFunc((function(t,n){var r=t.sigmoid(e);return n([r]),r}),{x:e},(function(t,e){var n=e[0];return{x:function(){return t.mul(n.mul(Re(1).sub(n)))}}}),"Sigmoid")}}),iu=we({sign_:function(t){var e=ce(t,"x","sign");return Co.runKernelFunc((function(t){return t.sign(e)}),{$x:e},(function(t){return{$x:function(){return Wo(t)}}}))}}),au=we({isNaN_:function(t){var e=ce(t,"x","isNaN");return Co.runKernelFunc((function(t){return t.isNaN(e)}),{$x:e},(function(t){return{$x:function(){return Wo(t)}}}))}}),su=we({isInf_:function(t){var e=ce(t,"x","isInf");return Co.runKernelFunc((function(t){return t.isInf(e)}),{$x:e},(function(t){return{$x:function(){return Wo(t)}}}))}}),uu=we({isFinite_:function(t){var e=ce(t,"x","isFinite");return Co.runKernelFunc((function(t){return t.isFinite(e)}),{$x:e},(function(t){return{$x:function(){return Wo(t)}}}))}}),cu=we({sin_:function(t){var e=ce(t,"x","sin");return Co.runKernelFunc((function(t,n){var r=t.sin(e);return n([e]),r}),{x:e},(function(t,e){var n=e[0];return{x:function(){return n.toFloat().cos().mul(t)}}}),"Sin",{},[e])}}),lu=we({sinh_:function(t){var e=ce(t,"x","sinh");return Co.runKernelFunc((function(t,n){var r=t.sinh(e);return n([e]),r}),{$x:e},(function(t,e){var n=e[0];return{$x:function(){return n.toFloat().cosh().mulStrict(t)}}}))}}),fu=we({softplus_:function(t){var e=ce(t,"x","softplus");return Co.runKernelFunc((function(t,n){var r=t.softplus(e);return n([e]),r}),{$x:e},(function(t,e){var n=e[0];return{$x:function(){return t.mul(n.sigmoid())}}}))}}),hu=we({sqrt_:function(t){var e=ce(t,"x","sqrt");return Co.runKernelFunc((function(t,n){var r=t.sqrt(e);return n([e]),r}),{$x:e},(function(t,e){var n=e[0];return{$x:function(){return t.div(n.toFloat().sqrt().mul(2))}}}))}}),du=we({step_:function(t,e){void 0===e&&(e=0);var n=ce(t,"x","step");return Co.runKernelFunc((function(t){return t.step(n,e)}),{$x:n},(function(t){return{$x:function(){return Wo(t)}}}))}}),pu=we({tan_:function(t){var e=ce(t,"x","tan");return Co.runKernelFunc((function(t,n){var r=t.tan(e);return n([e]),r}),{$x:e},(function(t,e){var n=e[0];return{$x:function(){return t.div(n.cos().square())}}}))}}),vu=we({tanh_:function(t){var e=ce(t,"x","tanh");return Co.runKernelFunc((function(t,n){var r=t.tanh(e);return n([r]),r}),{x:e},(function(t,e){var n=e[0];return{x:function(){return Re(1).sub(n.square()).mulStrict(t)}}}),"Tanh",{},null,[!0])}}),gu=we({batchNormalization2d_:function(t,e,n,r,o,i){return void 0===r&&(r=.001),_r(),mr(t,e,n,i,o,r)}}),mu=we({batchNormalization3d_:function(t,e,n,r,o,i){return void 0===r&&(r=.001),_r(),yr(t,e,n,i,o,r)}}),yu=we({batchNormalization4d_:function(t,e,n,r,o,i){return void 0===r&&(r=.001),_r(),br(t,e,n,i,o,r)}}),bu=we({batchNormalization_:function(t,e,n,r,o,i){return void 0===r&&(r=.001),_r(),xr(t,e,n,i,o,r)}}),xu=we({batchNorm_:xr}),wu=we({batchNorm2d_:mr}),_u=we({batchNorm3d_:yr}),Eu=we({batchNorm4d_:br}),Ru=we({logicalAnd_:function(t,e){var n=ce(t,"a","logicalAnd","bool"),r=ce(e,"b","logicalAnd","bool");return nn(n.shape,r.shape),Co.runKernelFunc((function(t){return t.logicalAnd(n,r)}),{a:n,b:r},null,"LogicalAnd")}}),Cu=we({logicalNot_:function(t){var e=ce(t,"x","logicalNot","bool");return Co.runKernelFunc((function(t){return t.logicalNot(e)}),{$x:e})}}),Su=we({logicalOr_:function(t,e){var n=ce(t,"a","logicalOr","bool"),r=ce(e,"b","logicalOr","bool");return nn(n.shape,r.shape),Co.runKernelFunc((function(t){return t.logicalOr(n,r)}),{$a:n,$b:r})}}),Ou=we({logicalXor_:function(t,e){var n=ce(t,"a","logicalXor","bool"),r=ce(e,"b","logicalXor","bool");return nn(n.shape,r.shape),Su(t,e).logicalAnd(Ru(t,e).logicalNot())}}),Au=we({where_:function(t,e,n){var r=ce(e,"a","where"),o=ce(n,"b","where"),i=ce(t,"condition","where","bool");return y(r.shape,o.shape,"Error in where: "),1===i.rank?m(i.shape[0]===r.shape[0],(function(){return"The first dimension of `a` must match the size of `condition`."})):y(i.shape,o.shape,"Error in where: "),Co.runKernelFunc((function(t,e){var n=t.select(i,r,o);return e([i]),n}),{$condition:i,$a:r,$b:o},(function(t,e){var n=e[0];return{$condition:function(){return Wo(n).toFloat()},$a:function(){return t.mul(n.cast(t.dtype))},$b:function(){return t.mul(n.logicalNot().cast(t.dtype))}}}))}}),Iu=function(t){return i(this,void 0,void 0,(function(){var e,n,r;return a(this,(function(o){switch(o.label){case 0:return[4,(e=ce(t,"condition","whereAsync","bool")).data()];case 1:return n=o.sent(),r=Pn(e.shape,n),t!==e&&e.dispose(),[2,r]}}))}))},ku=we({add_:function(t,e){var n,r=ce(t,"a","add"),o=ce(e,"b","add");n=st(r,o);var i=nn((r=n[0]).shape,(o=n[1]).shape);return Co.runKernelFunc((function(t){return t.add(r,o)}),{a:r,b:o},(function(t){return{a:function(){var e=t,n=en(r.shape,i);return n.length>0&&(e=e.sum(n)),e.reshape(r.shape)},b:function(){var e=t,n=en(o.shape,i);return n.length>0&&(e=e.sum(n)),e.reshape(o.shape)}}}),"Add")}}),Tu=we({addN_:function(t){m(Array.isArray(t),(function(){return"The argument passed to tf.addN() must be a list of tensors"})),m(t.length>=1,(function(){return"Must pass at least one tensor to tf.addN(), but got "+t.length}));var e=t.map((function(t,e){return ce(t,"tensors"+e,"addN")})),n=e[0];return e.forEach((function(t){if(t.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")})),e.forEach((function(t){if(!_(t.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")})),Co.runKernelFunc((function(t){return t.addN(e)}),e,(function(t){var n={};return e.forEach((function(e,r){n[r]=function(){return t.clone()}})),n}),"AddN")}}),Mu=we({addStrict_:function(t,e){var n=ce(t,"a","addStrict"),r=ce(e,"b","addStrict");return y(n.shape,r.shape,"Error in addStrict: "),n.add(r)}}),Du=we({atan2_:function(t,e){var n,r=ce(t,"a","atan2"),o=ce(e,"b","atan2");n=st(r,o);var i=nn((r=n[0]).shape,(o=n[1]).shape);return Co.runKernelFunc((function(t,e){var n=t.atan2(r,o);return e([r,o]),n}),{$a:r,$b:o},(function(t,e){var n=e[0],r=e[1];return{$a:function(){var e=ku(n.square(),r.square()),o=t.mul(r.div(e)),a=en(n.shape,i);return a.length>0&&(o=o.sum(a)),o.reshape(n.shape)},$b:function(){var e=ku(n.square(),r.square()),o=tu(t.mul(n.div(e))),a=en(r.shape,i);return a.length>0&&(o=o.sum(a)),o.reshape(r.shape)}}}))}}),Pu=we({div_:function(t,e){var n,r=ce(t,"a","div"),o=ce(e,"b","div");if(n=st(r,o),o=n[1],"int32"===(r=n[0]).dtype&&"int32"===o.dtype)return Lu(r,o);var i=nn(r.shape,o.shape);return Co.runKernelFunc((function(t,e){var n=t.realDivide(r,o);return e([r,o]),n}),{a:r,b:o},(function(t,e){var n=e[0],r=e[1];return{a:function(){var e=t.div(r.toFloat()),o=en(n.shape,i);return o.length>0?e.sum(o).reshape(n.shape):e},b:function(){var e=t.mul(n.toFloat()),o=en(r.shape,i);o.length>0&&(e=e.sum(o).reshape(r.shape));var a=r.square();return e.div(a.toFloat()).neg()}}}),"Div")}}),Nu=we({divNoNan_:function(t,e){var n,r=ce(t,"a","div"),o=ce(e,"b","div");r=(n=st(r,o))[0];var i=Pu(r,o=n[1]),a=Wo(i),s=o.equal(a);return Au(s,a,i)}}),Fu=we({divStrict_:function(t,e){var n=ce(t,"a","div"),r=ce(e,"b","div");return y(n.shape,r.shape,"Error in divideStrict: "),n.div(r)}}),Lu=we({floorDiv_:function(t,e){var n,r=ce(t,"a","floorDiv"),o=ce(e,"b","floorDiv");n=st(r,o);var i=nn((r=n[0]).shape,(o=n[1]).shape);return Co.runKernelFunc((function(t,e){var n=t.floorDiv(r,o);return e([r,o]),n}),{a:r,b:o},(function(t,e){var n=e[0],r=e[1];return{a:function(){var e=t.div(r.toFloat()),o=en(n.shape,i);return o.length>0?e.sum(o).reshape(n.shape):e},b:function(){var e=t.mul(n.toFloat()),o=en(r.shape,i);o.length>0&&(e=e.sum(o).reshape(r.shape));var a=r.square();return e.div(a.toFloat()).neg()}}}),"FloorDiv")}}),ju=we({maximum_:function(t,e){var n,r=ce(t,"a","maximum"),o=ce(e,"b","maximum");return n=st(r,o),o=n[1],"bool"===(r=n[0]).dtype&&(r=r.toInt(),o=o.toInt()),nn(r.shape,o.shape),Co.runKernelFunc((function(t,e){var n=t.maximum(r,o);return e([r,o]),n}),{a:r,b:o},(function(t,e){var n=e[0],r=e[1];return{a:function(){return t.mul(n.greaterEqual(r).toFloat())},b:function(){return t.mul(n.less(r).toFloat())}}}),"Maximum")}}),Bu=we({maximumStrict_:function(t,e){var n=ce(t,"a","maximumStrict"),r=ce(e,"b","maximumStrict");return y(n.shape,r.shape,"Error in maximumStrict: "),n.maximum(r)}}),Wu=we({minimum_:function(t,e){var n,r=ce(t,"a","minimum"),o=ce(e,"b","minimum");return n=st(r,o),o=n[1],"bool"===(r=n[0]).dtype&&(r=r.toInt(),o=o.toInt()),nn(r.shape,o.shape),Co.runKernelFunc((function(t,e){var n=t.minimum(r,o);return e([r,o]),n}),{a:r,b:o},(function(t,e){var n=e[0],r=e[1];return{a:function(){return t.mul(n.lessEqual(r).toFloat())},b:function(){return t.mul(n.greater(r).toFloat())}}}),"Minimum")}}),Uu=we({minimumStrict_:function(t,e){var n=ce(t,"a","minimumStrict"),r=ce(e,"b","minimumStrict");return y(n.shape,r.shape,"Error in minimumStrict: "),n.minimum(r)}}),Gu=we({mod_:function(t,e){var n,r=ce(t,"a","mod"),o=ce(e,"b","mod");n=st(r,o);var i=nn((r=n[0]).shape,(o=n[1]).shape);return Co.runKernelFunc((function(t,e){var n=t.mod(r,o);return e([r,o]),n}),{$a:r,$b:o},(function(t,e){var n=e[0],r=e[1];return{$a:function(){var e=en(n.shape,i);return e.length>0?t.sum(e).reshape(n.shape):t},$b:function(){var e=t.mul(n.div(r).floor().neg()),o=en(r.shape,i);return o.length>0?e.sum(o).reshape(r.shape):e}}}))}}),zu=we({modStrict_:function(t,e){var n=ce(t,"a","modStrict"),r=ce(e,"b","modStrict");return y(n.shape,r.shape,"Error in modStrict: "),n.mod(r)}}),Vu=we({mul_:function(t,e){var n,r=ce(t,"a","mul"),o=ce(e,"b","mul");n=st(r,o);var i=nn((r=n[0]).shape,(o=n[1]).shape);return Co.runKernelFunc((function(t,e){var n=t.multiply(r,o);return e([r,o]),n}),{a:r,b:o},(function(t,e){var n=e[0],r=e[1];return{a:function(){var e=t.mul(r.toFloat()),o=en(n.shape,i);return o.length>0?e.sum(o).reshape(n.shape):e},b:function(){var e=t.mul(n.toFloat()),o=en(r.shape,i);return o.length>0?e.sum(o).reshape(r.shape):e}}}),"Mul")}}),Hu=we({mulStrict_:function(t,e){var n=ce(t,"a","mul"),r=ce(e,"b","mul");return y(n.shape,r.shape,"Error in multiplyStrict: "),n.mul(r)}}),qu=we({pow_:function(t,e){var n,r=ce(t,"base","pow"),o=ce(e,"exp","pow");n=st(r,o);var i=nn((r=n[0]).shape,(o=n[1]).shape);return Co.runKernelFunc((function(t,e){var n=t.pow(r,o);return e([r,o,n]),n}),{a:r,b:o},(function(t,e){var n=e[0],r=e[1],o=e[2];return{a:function(){var e=r.toFloat(),o=t.mul(e.mul(n.pow(e.sub(Re(1))))),a=en(n.shape,i);return a.length>0&&(o=o.sum(a)),o.reshape(n.shape)},b:function(){var e=n.greater(0),a=n.log().where(e,Wo(n)),s=t.mul(o.mul(a)),u=en(r.shape,i);return u.length>0&&(s=s.sum(u)),s.reshape(r.shape)}}}),"Pow",{},[r,o],[!0])}}),Ku=we({powStrict_:function(t,e){return y(t.shape,e.shape,"Error in powStrict: "),t.pow(e)}}),Xu=we({squaredDifferenceStrict_:function(t,e){var n=ce(t,"a","squaredDifferenceStrict"),r=ce(e,"b","squaredDifferenceStrict");return y(n.shape,r.shape,"Error in squaredDifferenceStrict: "),n.squaredDifference(r)}}),Ju=we({sub_:function(t,e){var n,r=ce(t,"a","sub"),o=ce(e,"b","sub");n=st(r,o);var i=nn((r=n[0]).shape,(o=n[1]).shape);return Co.runKernelFunc((function(t){return t.subtract(r,o)}),{a:r,b:o},(function(t){return{a:function(){var e=t,n=en(r.shape,i);return n.length>0&&(e=e.sum(n)),e.reshape(r.shape)},b:function(){var e=t,n=en(o.shape,i);return n.length>0&&(e=e.sum(n)),e.neg().reshape(o.shape)}}}),"Sub")}}),Yu=we({subStrict_:function(t,e){var n=ce(t,"a","subStrict"),r=ce(e,"b","subStrict");return y(n.shape,r.shape,"Error in subStrict: "),n.sub(r)}}),Qu=we({equal_:function(t,e){var n,r=ce(t,"a","equal"),o=ce(e,"b","equal");return n=st(r,o),nn((r=n[0]).shape,(o=n[1]).shape),Co.runKernelFunc((function(t){return t.equal(r,o)}),{$a:r,$b:o})}}),$u=we({equalStrict_:function(t,e){var n=ce(t,"a","equalStrict"),r=ce(e,"b","equalStrict");return y(n.shape,r.shape,"Error in equalStrict: "),n.equal(r)}}),Zu=we({greater_:function(t,e){var n,r=ce(t,"a","greater"),o=ce(e,"b","greater");return n=st(r,o),nn((r=n[0]).shape,(o=n[1]).shape),Co.runKernelFunc((function(t){return t.greater(r,o)}),{a:r,b:o},null,"Greater")}}),tc=we({greaterEqual_:function(t,e){var n,r=ce(t,"a","greaterEqual"),o=ce(e,"b","greaterEqual");return n=st(r,o),nn((r=n[0]).shape,(o=n[1]).shape),Co.runKernelFunc((function(t,e){var n=t.greaterEqual(r,o);return e([r,o]),n}),{a:r,b:o},(function(t,e){var n=e[0],r=e[1];return{a:function(){return Wo(n)},b:function(){return Wo(r)}}}),"GreaterEqual")}}),ec=we({greaterEqualStrict_:function(t,e){var n=ce(t,"a","greaterEqualStrict"),r=ce(e,"b","greaterEqualStrict");return y(n.shape,r.shape,"Error in greaterEqualStrict: "),n.greaterEqual(r)}}),nc=we({greaterStrict_:function(t,e){var n=ce(t,"a","greaterStrict"),r=ce(e,"b","greaterStrict");return y(n.shape,r.shape,"Error in greaterStrict: "),n.greater(r)}}),rc=we({less_:function(t,e){var n,r=ce(t,"a","less"),o=ce(e,"b","less");return n=st(r,o),nn((r=n[0]).shape,(o=n[1]).shape),Co.runKernelFunc((function(t){return t.less(r,o)}),{a:r,b:o},null,"Less")}}),oc=we({lessEqual_:function(t,e){var n,r=ce(t,"a","lessEqual"),o=ce(e,"b","lessEqual");return n=st(r,o),nn((r=n[0]).shape,(o=n[1]).shape),Co.runKernelFunc((function(t,e){var n=t.lessEqual(r,o);return e([r,o]),n}),{a:r,b:o},null,"LessEqual")}}),ic=we({lessEqualStrict_:function(t,e){var n=ce(t,"a","lessEqualStrict"),r=ce(e,"b","lessEqualStrict");return y(n.shape,r.shape,"Error in lessEqualStrict: "),n.lessEqual(r)}}),ac=we({lessStrict_:function(t,e){var n=ce(t,"a","lessStrict"),r=ce(e,"b","lessStrict");return y(n.shape,r.shape,"Error in lessStrict: "),n.less(r)}}),sc=we({notEqual_:function(t,e){var n,r=ce(t,"a","notEqual"),o=ce(e,"b","notEqual");return n=st(r,o),nn((r=n[0]).shape,(o=n[1]).shape),Co.runKernelFunc((function(t){return t.notEqual(r,o)}),{a:r,b:o},null,"NotEqual")}}),uc=we({notEqualStrict_:function(t,e){var n=ce(t,"a","notEqualStrict"),r=ce(e,"b","notEqualStrict");return y(n.shape,r.shape,"Error in notEqualStrict: "),n.notEqual(r)}}),cc=we({gather_:function(t,e,n){void 0===n&&(n=0);var r=ce(t,"x","gather"),o=ce(e,"indices","gather","int32");n=I(n,r.shape)[0];var i=function(t,e,n){for(var r=t.shape[n],o=[],i=1,a=1,s=0;s<n;s++)o.push(t.shape[s]),i*=t.shape[s];for(s=0;s<e.rank;s++)o.push(e.shape[s]);for(s=n+1;s<t.rank;s++)o.push(t.shape[s]),a*=t.shape[s];return{batchSize:i,sliceSize:a,dimSize:r,outputShape:o}}(r,o,n);return Co.runKernelFunc((function(t,e){var i=t.gather(r,o.flatten(),n);return e([o]),i}),{x:r,indices:o},(function(t,e){var o=e[0];return{x:function(){var e=r.shape,i=o.size,a=e.slice(0,n),s=a.length,u=e.slice(n,e.length).slice(1),c=u.length,l=Er(0,s),f=Er(s+1,s+1+c),h=Rr([a,[i],u]),d=t.reshape(h),p=o.reshape([i]),v=Rr([[s],l,f]),g=d.transpose(v),m=lc(g,p,r.shape[n]),y=me(v);return m.transpose(y)},indices:function(){return o}}}),"Gather",{axis:n}).reshape(i.outputShape)}}),lc=we({unsortedSegmentSum_:function(t,e,n){var r=ce(t,"x","unsortedSegmentSum"),o=ce(e,"segmentIds","unsortedSegmentSum","int32");return m(E(n),(function(){return"numSegments must be of dtype int"})),Co.runKernelFunc((function(t,e){var i=t.unsortedSegmentSum(r,o,n);return e([o]),i}),{$x:r},(function(t,e){var n=e[0];return{$x:function(){return function(t,e){for(var n=ju(e,Wo(e)),r=cc(t,n),o=tc(e,Re(0,"int32")),i=r.rank-o.rank,a=0;a<i;++a)o=li(o,a+1);o=Ru(o,Ie(r.shape,"bool"));var s=Wo(r);return Au(o,r,s)}(t,n)}}}))}}),fc=we({conv1d_:function(t,e,n,r,o,i,a){void 0===o&&(o="NWC"),void 0===i&&(i=1);var s=ce(t,"x","conv1d"),u=ce(e,"filter","conv1d"),c=s,l=!1;2===s.rank&&(l=!0,c=s.as3D(1,s.shape[0],s.shape[1])),m(3===c.rank,(function(){return"Error in conv1d: input must be rank 3, but got rank "+c.rank+"."})),m(3===u.rank,(function(){return"Error in conv1d: filter must be rank 3, but got rank "+u.rank+"."})),null!=a&&m(E(r),(function(){return"Error in conv1d: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+r+"."})),m(c.shape[2]===u.shape[1],(function(){return"Error in conv1d: depth of input ("+c.shape[2]+") must match input depth for filter "+u.shape[1]+"."})),m(pn(n,i),(function(){return"Error in conv1D: Either stride or dilation must be 1. Got stride "+n+" and dilation '"+i+"'"})),m("NWC"===o,(function(){return"Error in conv1d: got dataFormat of "+o+" but only NWC is currently supported."}));var f=u.as4D(1,u.shape[0],u.shape[1],u.shape[2]),h=c.as4D(c.shape[0],1,c.shape[1],c.shape[2]),d=hc(h,f,[1,n],r,"NHWC",[1,i],a);return l?d.as2D(d.shape[2],d.shape[3]):d.as3D(d.shape[0],d.shape[2],d.shape[3])}}),hc=we({conv2d_:function(t,e,n,r,o,i,a){void 0===o&&(o="NHWC"),void 0===i&&(i=[1,1]);var s=ce(t,"x","conv2d"),u=ce(e,"filter","conv2d"),c=s,l=!1;3===s.rank&&(l=!0,c=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),m(4===c.rank,(function(){return"Error in conv2d: input must be rank 4, but got rank "+c.rank+"."})),m(4===u.rank,(function(){return"Error in conv2d: filter must be rank 4, but got rank "+u.rank+"."})),null!=a&&m(E(r),(function(){return"Error in conv2d: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+r+"."}));var f="NHWC"===o?c.shape[3]:c.shape[1];m(f===u.shape[2],(function(){return"Error in conv2d: depth of input ("+f+") must match input depth for filter "+u.shape[2]+"."})),m(pn(n,i),(function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+i+"'"}));var h=vn(o),d=an(c.shape,u.shape,n,i,r,a,!1,h),p=Co.runKernelFunc((function(t,e){var n=t.conv2d(c,u,d);return e([u,c]),n}),{x:c,filter:u},(function(t,e){var a=e[0],s=e[1];return m(dn(i),(function(){return"Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+i+"'"})),{x:function(){return vc(s.shape,t,a,n,r,o)},filter:function(){return pc(s,t,a.shape,n,r,o)}}}),"Conv2D",d,[u,c]);return l?p.as3D(p.shape[1],p.shape[2],p.shape[3]):p}}),dc=we({conv3d_:function(t,e,n,r,o,i){void 0===o&&(o="NDHWC"),void 0===i&&(i=[1,1,1]);var a=ce(t,"x","conv3d"),s=ce(e,"filter","conv3d"),u=a,c=!1;4===a.rank&&(c=!0,u=a.as5D(1,a.shape[0],a.shape[1],a.shape[2],a.shape[3])),m(5===u.rank,(function(){return"Error in conv3d: input must be rank 5, but got rank "+u.rank+"."})),m(5===s.rank,(function(){return"Error in conv3d: filter must be rank 5, but got rank "+s.rank+"."})),m(u.shape[4]===s.shape[3],(function(){return"Error in conv3d: depth of input ("+u.shape[4]+") must match input depth for filter "+s.shape[3]+"."})),m(function(t,e){return Sr(t)||Sr(e)}(n,i),(function(){return"Error in conv3D: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+i+"'"})),m("NDHWC"===o,(function(){return"Error in conv3d: got dataFormat of "+o+" but only NDHWC is currently supported."}));var l=sn(u.shape,s.shape,n,i,r),f=Co.runKernelFunc((function(t,e){var n=t.conv3d(u,s,l);return e([u,s]),n}),{x:u,$filter:s},(function(t,e){m(Sr(i),(function(){return"Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+i+"'"}));var o=e[0],a=e[1];return{x:function(){return Or(o.shape,t,a,n,r)},$filter:function(){return function(t,e,n,r,o){var i=t;4===t.rank&&(i=t.as5D(1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]));var a=e;4===a.rank&&(a=e.as5D(1,e.shape[0],e.shape[1],e.shape[2],e.shape[3])),m(5===i.rank,(function(){return"Error in conv3dDerFilter: input must be rank 5, but got shape "+i.shape+"."})),m(5===a.rank,(function(){return"Error in conv3dDerFilter: dy must be rank 5, but got shape "+a.shape+"."})),m(5===n.length,(function(){return"Error in conv3dDerFilter: filterShape must be length 5, but got "+n+"."})),m(i.shape[4]===n[3],(function(){return"Error in conv3dDerFilter: depth of input "+i.shape[4]+") must match input depth in filter ("+n[3]+"."})),m(a.shape[4]===n[4],(function(){return"Error in conv3dDerFilter: depth of dy ("+a.shape[4]+") must match output depth for filter ("+n[4]+")."}));var s=sn(i.shape,n,r,1,o);return Co.runKernelFunc((function(t){return t.conv3dDerFilter(i,a,s)}),{x5D:i,dy5D:a})}(o,t,a.shape,n,r)}}}));return c?f.as4D(f.shape[1],f.shape[2],f.shape[3],f.shape[4]):f}}),pc=we({conv2dDerFilter_:function(t,e,n,r,o,i,a){void 0===i&&(i="NHWC");var s=t;3===t.rank&&(s=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]));var u=e;3===u.rank&&(u=e.as4D(1,e.shape[0],e.shape[1],e.shape[2])),m(4===s.rank,(function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape "+s.shape+"."})),m(4===u.rank,(function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape "+u.shape+"."})),m(4===n.length,(function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got "+n+"."}));var c="NHWC"===i?s.shape[3]:s.shape[1],l="NHWC"===i?u.shape[3]:u.shape[1];m(c===n[2],(function(){return"Error in conv2dDerFilter: depth of input "+c+") must match input depth in filter ("+n[2]+"."})),m(l===n[3],(function(){return"Error in conv2dDerFilter: depth of dy ("+l+") must match output depth for filter ("+n[3]+")."})),null!=a&&m(E(o),(function(){return"Error in conv2dDerFilter: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+o+"."}));var f=vn(i),h=an(s.shape,n,r,1,o,a,!1,f);return Co.runKernelFunc((function(t){return t.conv2dDerFilter(s,u,h)}),{x4D:s,dy4D:u})}}),vc=we({conv2dDerInput_:Cr}),gc=we({depthwiseConv2d_:function(t,e,n,r,o,i,a){void 0===o&&(o="NHWC"),void 0===i&&(i=[1,1]);var s=ce(t,"x","depthwiseConv2d"),u=ce(e,"filter","depthwiseConv2d"),c=s,l=!1;3===s.rank&&(l=!0,c=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),m(4===c.rank,(function(){return"Error in depthwiseConv2d: input must be rank 4, but got rank "+c.rank+"."})),m(4===u.rank,(function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank "+u.rank+"."})),m(c.shape[3]===u.shape[2],(function(){return"Error in depthwiseConv2d: number of input channels ("+c.shape[3]+") must match the inChannels dimension in filter "+u.shape[2]+"."})),null==i&&(i=[1,1]),m(pn(n,i),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+i+"'"})),null!=a&&m(E(r),(function(){return"Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+r+"."}));var f=an(c.shape,u.shape,n,i,r,a,!0),h=Co.runKernelFunc((function(t,e){var n=t.depthwiseConv2D(c,u,f);return e([c,u]),n}),{x:c,filter:u},(function(t,e){m(dn(i),(function(){return"Error in gradient of depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+i+"'"}));var n=e[0],r=e[1];return{x:function(){return mc(n.shape,t,r,f)},filter:function(){return yc(n,t,r.shape,f)}}}),"DepthwiseConv2dNative",f,[c,u]);return l?h.as3D(h.shape[1],h.shape[2],h.shape[3]):h}}),mc=we({depthwiseConv2dDerInput_:function(t,e,n,r){var o=e,i=!1;3===e.rank&&(i=!0,o=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]));var a=Co.runKernelFunc((function(t){return t.depthwiseConv2DDerInput(o,n,r)}),{dy4D:o});return i?a.as3D(a.shape[1],a.shape[2],a.shape[3]):a}}),yc=we({depthwiseConv2dDerFilter_:function(t,e,n,r){var o=t;3===t.rank&&(o=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]));var i=e;return 3===i.rank&&(i=e.as4D(1,e.shape[0],e.shape[1],e.shape[2])),Co.runKernelFunc((function(t){return t.depthwiseConv2DDerFilter(o,i,r)}),{x4D:o,dy4D:i})}}),bc=we({separableConv2d_:function(t,e,n,r,o,i,a){void 0===i&&(i=[1,1]),void 0===a&&(a="NHWC");var s=ce(t,"x","separableConv2d"),u=ce(e,"depthwiseFilter","separableConv2d"),c=ce(n,"pointwiseFilter","separableConv2d"),l=s,f=!1;if(3===s.rank&&(f=!0,l=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),"NCHW"===a)throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");m(4===l.rank,(function(){return"Error in separableConv2d: input must be rank 4, but got rank "+l.rank+"."})),m(4===u.rank,(function(){return"Error in separableConv2d: depthwise filter must be rank 4, but got rank "+u.rank+"."})),m(4===c.rank,(function(){return"Error in separableConv2d: pointwise filter must be rank 4, but got rank "+u.rank+"."})),m(1===c.shape[0],(function(){return"Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got "+c.shape[0]+"."})),m(1===c.shape[1],(function(){return"Error in separableConv2d: the second dimension of pointwise filter must be 1, but got "+c.shape[1]+"."}));var h=u.shape[2],d=u.shape[3];m(c.shape[2]===h*d,(function(){return"Error in separableConv2d: the third dimension of pointwise filter must be "+h*d+", but got "+c.shape[2]+"."}));var p=gc(l,u,r,o,a,i),v=hc(p,c,1,"valid",a);return f?v.as3D(v.shape[1],v.shape[2],v.shape[3]):v}}),xc=we({conv2dTranspose_:function(t,e,n,r,o,i){return Cr(n,ce(t,"x","conv2dTranspose"),ce(e,"filter","conv2dTranspose"),r,o,"NHWC",i)}}),wc=we({conv3dTranspose_:function(t,e,n,r,o){return Or(n,ce(t,"x","conv3dTranspose"),ce(e,"filter","conv3dTranspose"),r,o)}}),_c=we({matMul_:function(t,e,n,r){var o;void 0===n&&(n=!1),void 0===r&&(r=!1);var i=ce(t,"a","matMul"),a=ce(e,"b","matMul");o=st(i,a),i=o[0],a=o[1];var s=n?i.shape[i.rank-2]:i.shape[i.rank-1],u=r?a.shape[a.rank-1]:a.shape[a.rank-2],c=n?i.shape[i.rank-1]:i.shape[i.rank-2],l=r?a.shape[a.rank-2]:a.shape[a.rank-1],f=i.shape.slice(0,-2),h=a.shape.slice(0,-2),d=w(f),p=w(h);m(i.rank>=2&&a.rank>=2&&i.rank===a.rank,(function(){return"Error in matMul: inputs must have the same rank of at least 2, got ranks "+i.rank+" and "+a.rank+"."})),m(_(f,h),(function(){return"Error in matMul: outer dimensions ("+f+") and ("+h+") of Tensors with shapes "+i.shape+" and "+a.shape+" must match."})),m(s===u,(function(){return"Error in matMul: inner shapes ("+s+") and ("+u+") of Tensors with shapes "+i.shape+" and "+a.shape+" and transposeA="+n+" and transposeB="+r+" must match."}));var v=i.shape.slice(0,-2).concat([c,l]),g=n?i.as3D(d,s,c):i.as3D(d,c,s),y=r?a.as3D(p,l,u):a.as3D(p,u,l);return Co.runKernelFunc((function(t,e){var o=t.batchMatMul(g,y,n,r);return e([g,y]),o}),{a:g,b:y},(function(t,e){var o=e[0],i=e[1];return n||r?!n&&r?{a:function(){return t.matMul(i,!1,!1)},b:function(){return t.matMul(o,!0,!1)}}:n&&!r?{a:function(){return i.matMul(t,!1,!0)},b:function(){return o.matMul(t,!1,!1)}}:{a:function(){return i.matMul(t,!0,!0)},b:function(){return t.matMul(o,!0,!0)}}:{a:function(){return t.matMul(i,!1,!0)},b:function(){return o.matMul(t,!0,!1)}}}),"BatchMatMul",{transposeA:n,transposeB:r}).reshape(v)}}),Ec=we({dot_:function(t,e){var n=ce(t,"t1","dot"),r=ce(e,"t2","dot");m(!(1!==n.rank&&2!==n.rank||1!==r.rank&&2!==r.rank),(function(){return"Error in dot: inputs must all be rank 1 or 2, but got ranks "+n.rank+" and "+r.rank+"."}));var o=1===n.rank?n.size:n.shape[1],i=1===r.rank?r.size:r.shape[0];return m(o===i,(function(){return"Error in dot: inner dimensions of inputs must match, but got "+o+" and "+i+"."})),1===n.rank&&1===r.rank?n.as2D(1,-1).matMul(r.as2D(-1,1)).asScalar():1===n.rank&&2===r.rank?n.as2D(1,-1).matMul(r.as2D(r.shape[0],r.shape[1])).as1D():2===n.rank&&1===r.rank?n.matMul(r.as2D(-1,1)).as1D():n.matMul(r.as2D(r.shape[0],r.shape[1]))}}),Rc=we({outerProduct_:function(t,e){var n=ce(t,"v1","outerProduct"),r=ce(e,"v2","outerProduct");return m(1===n.rank&&1===r.rank,(function(){return"Error in outerProduct: inputs must be rank 1, but got ranks "+n.rank+" and "+r.rank+"."})),n.as2D(-1,1).matMul(r.as2D(1,-1))}}),Cc=we({reverse_:function(t,e){var n=ce(t,"x","reverse");if(0===n.rank)return n.clone();var r=I(e,n.shape);return Co.runKernelFunc((function(t){return t.reverse(n,r)}),{$x:n},(function(t){return{$x:function(){return t.reverse(r)}}})).reshapeAs(n)}}),Sc=we({reverse1d_:function(t){var e=ce(t,"x","reverse");return m(1===e.rank,(function(){return"Error in reverse1D: x must be rank 1 but got rank "+e.rank+"."})),Cc(e,0)}}),Oc=we({reverse2d_:function(t,e){var n=ce(t,"x","reverse");return m(2===n.rank,(function(){return"Error in reverse2D: x must be rank 2 but got rank "+n.rank+"."})),Cc(n,e)}}),Ac=we({reverse3d_:function(t,e){var n=ce(t,"x","reverse");return m(3===n.rank,(function(){return"Error in reverse3D: x must be rank 3 but got rank "+n.rank+"."})),Cc(n,e)}}),Ic=we({reverse4d_:function(t,e){var n=ce(t,"x","reverse");return m(4===n.rank,(function(){return"Error in reverse4D: x must be rank 4 but got rank "+n.rank+"."})),Cc(n,e)}}),kc=we({maxPool_:function(t,e,n,r,o){return Ar(t,e,n,1,r,o)}}),Tc=we({avgPool_:function(t,e,n,r,o){return Ir(t,e,n,1,r,o)}}),Mc=we({pool_:function(t,e,n,r,o,i){null==o&&(o=[1,1]),null==i&&(i=1),0===r&&(r="valid");var a=ce(t,"x","maxPool"),s=a,u=!1;3===a.rank&&(u=!0,s=a.as4D(1,a.shape[0],a.shape[1],a.shape[2])),m(pn(i,o),(function(){return"Error in pool: Either strides or dilations must be 1. Got strides "+i+" and dilations '"+o+"'"}));var c,l=rn(s.shape,e,i,o,r),f=[l.dilationHeight,l.dilationWidth];c="same"===r?function(t,e){var n=t.map((function(t,n){return t+(t-1)*(e[n]-1)})).map((function(t){return t-1})),r=n.map((function(t){return Math.floor(t/2)})),o=n.map((function(t,e){return t-r[e]}));return n.map((function(t,e){return[r[e],o[e]]}))}([l.filterHeight,l.filterWidth],f):[[0,0],[0,0]];var h=1===f[0]&&1===f[1],d=function(t,e,n){var r=n.map((function(t){return t[0]})),o=n.map((function(t){return t[1]})),i=t.concat(r,o),a=e.map((function(t,e){return(t-i[e]%t)%t})),s=o.map((function(t,e){return t+a[e]}));return[e.map((function(t,e){return[r[e],s[e]]})),e.map((function(t,e){return[0,a[e]]}))]}([l.inHeight,l.inWidth],f,c),p=d[1],v=h?r:"valid",g=h?s:Ri(s,f,d[0]),y=("avg"===n?function(){return Ir(g,e,i,1,v)}:function(){return Ar(g,e,i,1,v)})(),b=h?y:oi(y,f,p);return u?b.as3D(b.shape[1],b.shape[2],b.shape[3]):b}}),Dc=we({maxPool3d_:function(t,e,n,r,o,i,a){void 0===i&&(i="NDHWC");var s=ce(t,"x","maxPool3d"),u=s,c=!1;4===s.rank&&(c=!0,u=s.as5D(1,s.shape[0],s.shape[1],s.shape[2],s.shape[3])),null==a&&(a=[1,1,1]),m(5===u.rank,(function(){return"Error in maxPool3d: x must be rank 5 but got rank "+u.rank+"."})),m("NDHWC"===i,(function(){return"Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of "+i})),m(pn(n,a),(function(){return"Error in maxPool3d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+a+"'"})),null!=o&&m(E(r),(function(){return"Error in maxPool3d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+r+"."}));var l=on(u.shape,e,n,a,r,o,i),f=Co.runKernelFunc((function(t,e){var n=t.maxPool3d(u,l);return e([u,n]),n}),{x:u},(function(t,i){var s=i[0],u=i[1];return{x:function(){return function(t,e,n,r,o,i,a,s){var u=ce(t,"dy","maxPool3dBackprop"),c=ce(e,"input","maxPool3dBackprop"),l=ce(n,"output","maxPool3dBackprop"),f=u,h=c,d=l,p=!1;4===c.rank&&(p=!0,f=u.as5D(1,u.shape[0],u.shape[1],u.shape[2],u.shape[3]),h=c.as5D(1,c.shape[0],c.shape[1],c.shape[2],c.shape[3]),d=l.as5D(1,l.shape[0],l.shape[1],l.shape[2],l.shape[3])),m(5===f.rank,(function(){return"Error in maxPool3dBackprop: dy must be rank 5 but got rank "+f.rank+"."})),m(5===h.rank,(function(){return"Error in maxPool3dBackprop: input must be rank 5 but got rank "+h.rank+"."})),m(5===d.rank,(function(){return"Error in maxPool3dBackprop: output must be rank 5 but got rank "+d.rank+"."})),null==i&&(i=[1,1,1]),m(pn(o,i),(function(){return"Error in maxPool3dBackprop: Either strides or dilations must be 1. Got strides "+o+" and dilations '"+i+"'"})),null!=s&&m(E(a),(function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+s+" but got pad "+a+"."}));var v=on(h.shape,r,o,i,a,s),g=Co.runKernelFunc((function(t){return t.maxPool3dBackprop(f,h,d,v)}),{dy5D:f,input5D:h});return p?g.as4D(g.shape[1],g.shape[2],g.shape[3],g.shape[4]):g}(t,s,u,e,n,a,r,o)}}}));return c?f.as4D(f.shape[1],f.shape[2],f.shape[3],f.shape[4]):f}}),Pc=we({avgPool3d_:function(t,e,n,r,o,i,a){void 0===i&&(i="NDHWC");var s=ce(t,"x","avgPool3d","float32"),u=s,c=!1;4===s.rank&&(c=!0,u=s.as5D(1,s.shape[0],s.shape[1],s.shape[2],s.shape[3])),null==a&&(a=[1,1,1]),m(5===u.rank,(function(){return"Error in avgPool3d: x must be rank 5 but got rank "+u.rank+"."})),m("NDHWC"===i,(function(){return"Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of "+i})),m(pn(n,a),(function(){return"Error in avgPool3d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+a+"'"})),null!=o&&m(E(r),(function(){return"Error in avgPool3d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+r+"."}));var l=on(u.shape,e,n,a,r,o,i),f=Co.runKernelFunc((function(t){return t.avgPool3d(u,l)}),{x:u},(function(t){return{x:function(){return function(t,e,n,r,o,i,a){var s=ce(t,"dy","avgPool3dBackprop"),u=ce(e,"input","avgPool3dBackprop"),c=s,l=u,f=!1;4===u.rank&&(f=!0,c=s.as5D(1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]),l=u.as5D(1,u.shape[0],u.shape[1],u.shape[2],u.shape[3])),m(5===c.rank,(function(){return"Error in avgPool3dBackprop: dy must be rank 5 but got rank "+c.rank+"."})),m(5===l.rank,(function(){return"Error in avgPool3dBackprop: input must be rank 5 but got rank "+l.rank+"."})),null==o&&(o=[1,1,1]),m(pn(r,o),(function(){return"Error in avgPool3dBackprop: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+o+"'"})),null!=a&&m(E(i),(function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+i+"."}));var h=on(l.shape,n,r,o,i,a),d=Co.runKernelFunc((function(t){return t.avgPool3dBackprop(c,l,h)}),{dy5D:c,input5D:l});return f?d.as4D(d.shape[1],d.shape[2],d.shape[3],d.shape[4]):d}(t,u,e,n,a,r,o)}}}));return f=f.cast(u.dtype),c?f.as4D(f.shape[1],f.shape[2],f.shape[3],f.shape[4]):f}}),Nc=we({slice_:function(t,e,n){var r,o,i=ce(t,"x","slice");if(0===i.rank)throw new Error("Slicing scalar is not possible");(r="number"==typeof e?[e].concat(new Array(i.rank-1).fill(0)):e.length<i.rank?e.concat(new Array(i.rank-e.length).fill(0)):e.slice()).forEach((function(t){m(-1!==t,(function(){return"slice() does not support negative begin indexing."}))})),o=(o=null==n?new Array(i.rank).fill(-1):"number"==typeof n?[n].concat(new Array(i.rank-1).fill(-1)):n.length<i.rank?n.concat(new Array(i.rank-n.length).fill(-1)):n).map((function(t,e){return t>=0?t:(m(-1===t,(function(){return"Negative size values should be exactly -1 but got "+t+" for the slice() size at index "+e+"."})),i.shape[e]-r[e])})),He(i,r,o);var a=i.shape;return Co.runKernelFunc((function(t){return t.slice(i,r,o)}),{x:i},(function(t){for(var e=[],n=0;n<t.rank;n++)e.push([r[n],a[n]-r[n]-o[n]]);return{x:function(){return t.pad(e)}}}),"Slice",{begin:r,size:o})}}),Fc=we({slice1d_:function(t,e,n){var r=ce(t,"x","slice1d");return m(1===r.rank,(function(){return"slice1d expects a rank-1 tensor, but got a rank-"+r.rank+" tensor"})),Nc(r,[e],[n])}}),Lc=we({slice2d_:function(t,e,n){var r=ce(t,"x","slice2d");return m(2===r.rank,(function(){return"slice2d expects a rank-2 tensor, but got a rank-"+r.rank+" tensor"})),Nc(r,e,n)}}),jc=we({slice3d_:function(t,e,n){var r=ce(t,"x","slice3d");return m(3===r.rank,(function(){return"slice3d expects a rank-3 tensor, but got a rank-"+r.rank+" tensor"})),Nc(r,e,n)}}),Bc=we({slice4d_:function(t,e,n){var r=ce(t,"x","slice4d");return m(4===r.rank,(function(){return"slice4d expects a rank-4 tensor, but got a rank-"+r.rank+" tensor"})),Nc(r,e,n)}}),Wc=we({all_:function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=!1);var r=ce(t,"x","all","bool"),o=I(e,r.shape),i=o,a=ge(i,r.rank);null!=a&&(r=r.transpose(a),i=ye(i.length,r.rank));var s=Co.runKernelFunc((function(t){return t.all(r,i)}),{$x:r});if(n){var u=pe(s.shape,o);return s.reshape(u)}return s}}),Uc=we({any_:function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=!1);var r=ce(t,"x","any","bool"),o=I(e,r.shape),i=o,a=ge(i,r.rank);null!=a&&(r=r.transpose(a),i=ye(i.length,r.rank));var s=Co.runKernelFunc((function(t){return t.any(r,i)}),{$x:r});if(n){var u=pe(s.shape,o);return s.reshape(u)}return s}}),Gc=we({argMax_:function(t,e){void 0===e&&(e=0);var n=ce(t,"x","argMax");null==e&&(e=0);var r=I(e,n.shape),o=ge(r,n.rank);return null!=o&&(n=n.transpose(o),r=ye(r.length,n.rank)),Co.runKernelFunc((function(t,e){var o=t.argMax(n,r[0]);return e([n]),o}),{x:n},(function(t,e){var n=e[0];return{x:function(){return Wo(n)}}}),"ArgMax",{axis:r[0]},[n])}}),zc=we({argMin_:function(t,e){void 0===e&&(e=0);var n=ce(t,"x","argMin");null==e&&(e=0);var r=I(e,n.shape),o=ge(r,n.rank);return null!=o&&(n=n.transpose(o),r=ye(r.length,n.rank)),Co.runKernelFunc((function(t,e){var o=t.argMin(n,r[0]);return e([n]),o}),{$x:n},(function(t,e){var n=e[0];return{$x:function(){return Wo(n)}}}))}}),Vc=we({logSumExp_:function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=!1);var r=ce(t,"x","logSumExp"),o=I(e,r.shape),i=r.max(o,!0),a=r.sub(i).exp().sum(o).log(),s=i.reshape(a.shape).add(a);if(n){var u=pe(s.shape,o);return s.reshape(u)}return s}}),Hc=we({max_:function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=!1);var r=ce(t,"x","max"),o=r,i=I(e,r.shape),a=i,s=ge(a,r.rank);null!=s&&(r=r.transpose(s),a=ye(a.length,r.rank));var u=Co.runKernelFunc((function(t,e){var n=t.max(r,a);return e([o,n]),n}),{x:r},(function(t,e){return kr(t,e[1],e[0],i,s)}),"Max",{axes:a},[r],[!0]);if(n){var c=pe(u.shape,i);u=u.reshape(c)}return u}}),qc=we({mean_:function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=!1);var r=ce(t,"x","mean"),o=I(e,r.shape),i=w(de(r.shape,o)[1]);return $e((function(t){var r=Re(i);return{value:(r.dtype===t.dtype?t:t.cast(r.dtype)).div(r).sum(e,n),gradFunc:function(e){var n=t.shape.slice();return o.forEach((function(t){n[t]=1})),e.reshape(n).mul(Ie(t.shape,"float32")).div(i)}}}))(r)}}),Kc=we({min_:function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=!1);var r=ce(t,"x","min"),o=r,i=I(e,r.shape),a=i,s=ge(a,r.rank);null!=s&&(r=r.transpose(s),a=ye(a.length,r.rank));var u=Co.runKernelFunc((function(t,e){var n=t.min(r,a);return e([o,n]),n}),{x:r},(function(t,e){return kr(t,e[1],e[0],i,s)}),"Min",{axes:a},[r],[!0]);if(n){var c=pe(u.shape,i);u=u.reshape(c)}return u}}),Xc=we({moments_:function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=!1);var r=I(e,(t=ce(t,"x","moments")).shape),o=t.mean(r,n),i=o.shape;n||(i=pe(o.shape,r));var a=t.toFloat().sub(o.reshape(i)).square();return{mean:o,variance:a.mean(r,n)}}}),Jc=we({sum_:function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=!1);var r=ce(t,"x","sum");"bool"===r.dtype&&(r=r.toInt());var o=I(e,r.shape);return $e((function(t){var e=ge(o,t.rank),r=o,i=t;null!=e&&(i=t.transpose(e),r=ye(r.length,t.rank));var a=function(e){var n=t.shape.slice();return o.forEach((function(t){n[t]=1})),e.reshape(n).mul(Ie(t.shape,"float32"))},s=Co.runKernelFunc((function(t){return t.sum(i,r)}),{x:i},(function(t){return{x:function(){return a(t)}}}),"Sum",{axes:r});if(n){var u=pe(s.shape,o);s=s.reshape(u)}return{value:s,gradFunc:a}}))(r)}}),Yc=we({prod_:function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=!1);var r=ce(t,"x","prod");"bool"===r.dtype&&(r=r.toInt());var o=I(e,r.shape),i=ge(o,r.rank),a=o,s=r;null!=i&&(s=r.transpose(i),a=ye(a.length,r.rank));var u=Co.runKernelFunc((function(t){return t.prod(s,a)}),{permutedX:s});if(n){var c=pe(u.shape,o);u=u.reshape(c)}return u}}),Qc=we({elu_:function(t){var e=ce(t,"x","elu");return Co.runKernelFunc((function(t,n){var r=t.elu(e);return n([r]),r}),{$x:e},(function(t,e){var n=e[0];return{$x:function(){return Co.runKernelFunc((function(e){return e.eluDer(t,n)}),{dy:t,y:n})}}}))}}),$c=we({leakyRelu_:function(t,e){void 0===e&&(e=.2);var n=ce(t,"x","leakyRelu");return ju(Re(e).mul(n),n)}}),Zc=we({prelu_:function(t,e){var n=ce(t,"x","prelu"),r=ce(e,"alpha","prelu");return Co.runKernelFunc((function(t,e){var o=t.prelu(n,r);return e([n,r]),o}),{x:n,alpha:r},(function(t,e){var n=e[0],r=e[1],o=n.greater(0);return{x:function(){return Au(o,t,t.mul(r))},alpha:function(){var e=Au(o,Wo(t),t.mul(n)),i=en(r.shape,t.shape);return i.length>0&&(e=e.sum(i)),e.reshape(r.shape)}}}),"Prelu")}}),tl=we({relu_:function(t){var e=ce(t,"x","relu");return"bool"===e.dtype?e.toInt():Co.runKernelFunc((function(t,n){var r=t.relu(e);return n([e]),r}),{x:e},(function(t,e){var n=e[0];return{x:function(){return t.mulStrict(n.step().toFloat())}}}),"Relu")}}),el=we({relu6_:function(t){var e=ce(t,"x","relu6");return"bool"===e.dtype?e.toInt():Co.runKernelFunc((function(t,n){var r=t.relu6(e);return n([e]),r}),{x:e},(function(t,e){var n=e[0],r=n.lessEqual(6).mul(n.step());return{x:function(){return t.mulStrict(r.toFloat())}}}),"Relu6")}}),nl=we({selu_:function(t){var e=ce(t,"x","selu");return Co.runKernelFunc((function(t,n){var r=t.selu(e);return n([e]),r}),{$x:e},(function(t,e){var n=e[0];return{$x:function(){var e=n.greater(Re(0)),r=Re(fs),o=Re(hs),i=t.mul(o),a=t.mul(r).mul(n.toFloat().exp());return Au(e,i,a)}}}))}}),rl=we({transpose_:function(t,e){var n=ce(t,"x","transpose");return null==e&&(e=n.shape.map((function(t,e){return e})).reverse()),m(n.rank===e.length,(function(){return"Error in transpose: rank of input "+n.rank+" must match length of perm "+e+"."})),e.forEach((function(t){m(t>=0&&t<n.rank,(function(){return"All entries in 'perm' must be between 0 and "+(n.rank-1)+" but got "+e}))})),n.rank<=1?n.clone():Co.runKernelFunc((function(t){return t.transpose(n,e)}),{x:n},(function(t){var n=me(e);return{x:function(){return t.transpose(n)}}}),"Transpose",{perm:e})}}),ol=we({localResponseNormalization_:function(t,e,n,r,o){void 0===e&&(e=5),void 0===n&&(n=1),void 0===r&&(r=1),void 0===o&&(o=.5);var i=ce(t,"x","localResponseNormalization");m(4===i.rank||3===i.rank,(function(){return"Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank "+i.rank+"."})),m(E(e),(function(){return"Error in localResponseNormalization: depthRadius must be an integer but got depthRadius "+e+"."}));var a=i,s=!1;3===i.rank&&(s=!0,a=i.as4D(1,i.shape[0],i.shape[1],i.shape[2]));var u=Co.runKernelFunc((function(t,i){var s=t.localResponseNormalization4D(a,e,n,r,o);return i([a,s]),s}),{x4D:a},(function(t,i){var a=i[0],s=i[1];return{x4D:function(){return Co.runKernelFunc((function(i){return i.LRNGrad(t,a,s,e,n,r,o)}),{})}}}));return s?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),il=we({norm_:function(t,e,n,r){void 0===e&&(e="euclidean"),void 0===n&&(n=null),void 0===r&&(r=!1);var o=function t(e,n,r){if(void 0===r&&(r=null),0===e.rank)return e.abs();if(1!==e.rank&&null===r)return t(e.reshape([-1]),n,r);if(1===e.rank||"number"==typeof r||Array.isArray(r)&&1===r.length){if(1===n)return e.abs().sum(r);if(n===1/0)return e.abs().max(r);if(n===-1/0)return e.abs().min(r);if("euclidean"===n||2===n)return e.abs().pow(Re(2,"int32")).sum(r).sqrt();throw new Error("Error in norm: invalid ord value: "+n)}if(Array.isArray(r)&&2===r.length){if(1===n)return e.abs().sum(r[0]).max(r[1]-1);if(n===1/0)return e.abs().sum(r[1]).max(r[0]);if(n===-1/0)return e.abs().sum(r[1]).min(r[0]);if("fro"===n||"euclidean"===n)return e.square().sum(r).sqrt();throw new Error("Error in norm: invalid ord value: "+n)}throw new Error("Error in norm: invalid axis: "+r)}(t=ce(t,"x","norm"),e,n),i=o.shape;if(r){var a=I(n,t.shape);i=pe(o.shape,a)}return o.reshape(i)}}),al=we({basicLSTMCell_:function(t,e,n,r,o,i){var a=ce(t,"forgetBias","basicLSTMCell"),s=ce(e,"lstmKernel","basicLSTMCell"),u=ce(n,"lstmBias","basicLSTMCell"),c=ce(r,"data","basicLSTMCell"),l=ce(o,"c","basicLSTMCell"),f=ce(i,"h","basicLSTMCell"),h=c.concat(f,1).matMul(s).add(u),d=h.shape[1]/4,p=[h.shape[0],d],v=h.slice([0,0],p),g=h.slice([0,d],p),m=h.slice([0,2*d],p),y=h.slice([0,3*d],p),b=v.sigmoid().mulStrict(g.tanh()).addStrict(l.mulStrict(a.add(m).sigmoid())),x=b.tanh().mulStrict(y.sigmoid());return[b,x]}}),sl=we({multiRNNCell_:function(t,e,n,r){for(var o=ce(e,"data","multiRNNCell"),i=le(n,"c","multiRNNCell"),a=le(r,"h","multiRNNCell"),s=o,u=[],c=0;c<t.length;c++){var l=t[c](s,i[c],a[c]);u.push(l[0]),u.push(l[1]),s=l[1]}var f=[],h=[];for(c=0;c<u.length;c+=2)f.push(u[c]),h.push(u[c+1]);return[f,h]}}),ul=we({movingAverage_:function(t,e,n,r,o){void 0===o&&(o=!0);var i=ce(t,"v","movingAverage"),a=ce(e,"x","movingAverage"),s=ce(n,"decay","movingAverage");ut(i,a),m(_(i.shape,a.shape),(function(){return"Shape mismatch in v and x"}));var u=Re(1),c=u.sub(s),l=a.sub(i).mul(c);if(o){m(null!=r,(function(){return"When using zeroDebias: true, step is required."}));var f=ce(r,"step","movingAverage");l=l.div(u.sub(qu(s,f)))}return i.add(l)}}),cl=we({stridedSlice_:function(t,e,n,r,o,i,a,s,u){if(void 0===o&&(o=0),void 0===i&&(i=0),void 0===a&&(a=0),void 0===s&&(s=0),void 0===u&&(u=0),null==r&&(r=new Array(e.length)),0!==a)throw new Error("ellipsis mask is not yet supported");var c=ce(t,"x","stridedSlice"),l=qe(s),f=c.shape.slice();l.forEach((function(t){e[t]=0,n[t]=1,f.splice(t,0,1)})),c=c.reshape(f);for(var h=0;h<c.rank;h++)e[h]=Xe(o,e,r,c.shape,h),n[h]=Je(i,n,r,c.shape,h),r[h]=r[h]||1;var d=qe(u);d.forEach((function(t){n[t]=e[t]+1,r[t]=1}));var p=Ke(e,n,r),v=p.filter((function(t,e){return-1===d.indexOf(e)}));return r.every((function(t){return 1===t}))?Nc(c,e,p).reshape(v):Co.runKernelFunc((function(t){return t.stridedSlice(c,e,n,r)}),{$x:c}).reshape(v)}}),ll=we({topk_:function(t,e,n){void 0===e&&(e=1),void 0===n&&(n=!0);var r=ce(t,"x","topk");if(0===r.rank)throw new Error("topk() expects the input to be of rank 1 or higher");var o=r.shape[r.shape.length-1];if(e>o)throw new Error("'k' passed to topk() must be <= the last dimension ("+o+") but got "+e);var i=Co.runKernelFunc((function(t){return t.topk(r,e,n)}),{$x:r});return{values:i[0],indices:i[1]}}}),fl=we({scatterND_:function(t,e,n){var r=ce(t,"indices","scatterND","int32"),o=ce(e,"updates","scatterND");return ze(o,r,n),Co.runKernelFunc((function(t){return t.scatterND(r,o,n)}),{indices:r,updates:o},null,"ScatterNd",{shape:n})}}),hl=we({fft_:function(t){m("complex64"===t.dtype,(function(){return"The dtype for tf.spectral.fft() must be complex64 but got "+t.dtype+"."}));var e=t.shape[t.shape.length-1],n=t.as2D(t.size/e,e);return Co.runKernelFunc((function(t){return t.fft(n)}),{input:t}).reshape(t.shape)}}),dl=we({ifft_:function(t){m("complex64"===t.dtype,(function(){return"The dtype for tf.spectral.ifft() must be complex64 but got "+t.dtype+"."}));var e=t.shape[t.shape.length-1],n=t.as2D(t.size/e,e);return Co.runKernelFunc((function(t){return t.ifft(n)}),{input:t}).reshape(t.shape)}}),pl=we({rfft_:function(t,e){m("float32"===t.dtype,(function(){return"The dtype for rfft() must be real value but got "+t.dtype}));var n,r=t.shape[t.shape.length-1],o=t.size/r;if(null!=e&&e<r){var i=t.shape.map((function(){return 0})),a=t.shape.map((function(t){return t}));a[t.shape.length-1]=e,n=t.slice(i,a),r=e}else if(null!=e&&e>r){var s=t.shape.map((function(t){return t}));s[t.shape.length-1]=e-r,n=t.concat(ke(s),t.shape.length-1),r=e}else n=t;var u=n.zerosLike(),c=Fo(n,u).as2D(o,r),l=hl(c),f=Math.floor(r/2)+1,h=Lo(l),d=jo(l),p=h.split([f,r-f],h.shape.length-1),v=d.split([f,r-f],d.shape.length-1),g=n.shape.slice();return g[n.shape.length-1]=f,Fo(p[0],v[0]).reshape(g)}}),vl=we({irfft_:function(t){var e=t.shape[t.shape.length-1],n=t.size/e;if(e<=2){var r=t.as2D(n,e),o=dl(r);return Lo(o)}var i=[n,2*(e-1)],a=Lo(t).as2D(n,e),s=jo(t).as2D(n,e),u=a.slice([0,1],[n,e-2]).reverse(1),c=s.slice([0,1],[n,e-2]).reverse(1).mul(Re(-1)),l=a.concat(u,1),f=s.concat(c,1);return r=Fo(l,f).as2D(i[0],i[1]),o=dl(r),Lo(o)}}),gl=Object.freeze({fft:hl,ifft:dl,rfft:pl,irfft:vl}),ml=we({sparseToDense_:function(t,e,n,r){void 0===r&&(r=0);var o=ce(t,"sparseIndices","sparseToDense","int32"),i=ce(e,"sparseValues","sparseToDense"),a=ce(r,"defaultValue","sparseToDense",i.dtype);return function(t,e,n,r){if("int32"!==t.dtype)throw new Error("tf.sparseToDense() expects the indices to be int32 type, but the dtype was "+t.dtype+".");if(t.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix, but got shape "+t.shape+".");var o=t.rank>0?t.shape[0]:1,i=t.rank>1?t.shape[1]:1;if(n.length!==i)throw new Error("outputShape has incorrect number of elements:, "+n.length+", should be: "+i+".");if(0!==e.rank&&(1!==e.rank||e.size!==o))throw new Error("sparseValues has incorrect shape "+e.shape+", should be [] or ["+o+"]");if(e.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}(o,i,n,a),Co.runKernelFunc((function(t){return t.sparseToDense(o,i,n,a)}),{$sparseIndices:o,$sparseValues:i,$defaultValue:a})}}),yl=we({gatherND_:function(t,e){var n=ce(e,"indices","gatherND","int32"),r=ce(t,"x","gatherND");return Co.runKernelFunc((function(t){return t.gatherND(r,n)}),{x:r,indices:n},null,"GatherNd")}}),bl=we({diag_:function(t){var e=ce(t,"x","diag").flatten(),n=t.shape.concat(t.shape);return Co.runKernelFunc((function(t){return t.diag(e)}),{$x:e}).reshape(n)}}),xl=we({dropout_:function(t,e,n,r){var o=ce(t,"x","dropout");if(m("float32"===o.dtype,(function(){return"x has to be a floating point tensor since it's going to be scaled, but got a "+o.dtype+" tensor instead."})),m(e>=0&&e<1,(function(){return"rate must be a float in the range [0, 1), but got "+e+"."})),0===e)return t instanceof ho?o.clone():o;var i=function(t,e){if(null==e)return t.shape.slice();if(_(t.shape,e))return e;if(t.shape.length===e.length){for(var n=[],r=0;r<t.shape.length;r++)n.push(null==e[r]&&null!=t.shape[r]?t.shape[r]:e[r]);return n}return e}(o,n),a=1-e,s=_i(i,0,1,"float32",r).add(a).floor().div(a);return o.mul(s)}}),wl=we({hannWindow_:function(t){return Tr(t,.5,.5)}}),_l=we({hammingWindow_:function(t){return Tr(t,.54,.46)}}),El=we({frame_:function(t,e,n,r,o){void 0===r&&(r=!1),void 0===o&&(o=0);for(var i=0,a=[];i+e<=t.size;)a.push(Nc(t,i,e)),i+=n;if(r)for(;i<t.size;){var s=i+e-t.size,u=Uo([Nc(t,i,e-s),Te([s],o)]);a.push(u),i+=n}return 0===a.length?Se([],[0,e]):Uo(a).as2D(a.length,e)}}),Rl=we({stft_:function(t,e,n,r,o){void 0===o&&(o=wl),null==r&&(r=Math.floor(Math.pow(2,Math.ceil(Math.log(e)/Math.log(2)))));for(var i=El(t,e,n),a=Vu(i,o(e)),s=[],u=0;u<i.shape[0];u++)s.push(pl(a.slice([u,0],[1,e]),r));return Uo(s)}}),Cl=Object.freeze({hannWindow:wl,hammingWindow:_l,frame:El,stft:Rl});!function(t){t[t.NONE=0]="NONE",t[t.MEAN=1]="MEAN",t[t.SUM=2]="SUM",t[t.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"}(Ms||(Ms={}));var Sl=we({absoluteDifference_:function(t,e,n,r){void 0===r&&(r=Ms.SUM_BY_NONZERO_WEIGHTS);var o=ce(t,"labels","absoluteDifference"),i=ce(e,"predictions","absoluteDifference"),a=null;null!=n&&(a=ce(n,"weights","absoluteDifference")),y(o.shape,i.shape,"Error in absoluteDifference: ");var s=o.sub(i).abs();return Ol(s,a,r)}}),Ol=we({computeWeightedLoss_:function(t,e,n){void 0===n&&(n=Ms.SUM_BY_NONZERO_WEIGHTS);var r=ce(t,"losses","computeWeightedLoss"),o=null;null!=e&&(o=ce(e,"weights","computeWeightedLoss"));var i=null==o?r:r.mul(o);if(n===Ms.NONE)return i;if(n===Ms.SUM)return i.sum();if(n===Ms.MEAN){if(null==o)return i.mean();var a=r.size/o.size,s=i.sum().div(o.sum());return a>1?s.div(Re(a)):s}if(n===Ms.SUM_BY_NONZERO_WEIGHTS){if(null==o)return i.sum().div(Re(r.size));var u=o.mul(Ie(r.shape)).notEqual(Re(0)).sum().toFloat();return i.sum().div(u)}throw Error("Unknown reduction: "+n)}}),Al=we({cosineDistance_:function(t,e,n,r,o){void 0===o&&(o=Ms.SUM_BY_NONZERO_WEIGHTS);var i=ce(t,"labels","cosineDistance"),a=ce(e,"predictions","cosineDistance"),s=null;null!=r&&(s=ce(r,"weights","cosineDistance")),y(i.shape,a.shape,"Error in cosineDistance: ");var u=Re(1).sub(i.mul(a).sum(n,!0));return Ol(u,s,o)}}),Il=we({hingeLoss_:function(t,e,n,r){void 0===r&&(r=Ms.SUM_BY_NONZERO_WEIGHTS);var o=ce(t,"labels","hingeLoss"),i=ce(e,"predictions","hingeLoss"),a=null;null!=n&&(a=ce(n,"weights","hingeLoss")),y(o.shape,i.shape,"Error in hingeLoss: ");var s=Re(1);o=Re(2).mul(o).sub(s);var u=s.sub(o.mul(i)).relu();return Ol(u,a,r)}}),kl=we({huberLoss_:function(t,e,n,r,o){void 0===r&&(r=1),void 0===o&&(o=Ms.SUM_BY_NONZERO_WEIGHTS);var i=ce(t,"labels","huberLoss"),a=ce(e,"predictions","huberLoss"),s=null;null!=n&&(s=ce(n,"weights","huberLoss")),y(i.shape,a.shape,"Error in huberLoss: ");var u=Re(r),c=a.sub(i).abs(),l=Wu(c,u),f=c.sub(l),h=Re(.5).mul(l.square()).add(u.mul(f));return Ol(h,s,o)}}),Tl=we({logLoss_:function(t,e,n,r,o){void 0===r&&(r=1e-7),void 0===o&&(o=Ms.SUM_BY_NONZERO_WEIGHTS);var i=ce(t,"labels","logLoss"),a=ce(e,"predictions","logLoss"),s=null;null!=n&&(s=ce(n,"weights","logLoss")),y(i.shape,a.shape,"Error in logLoss: ");var u=Re(1),c=Re(r),l=i.mul(a.add(c).log()).neg().sub(u.sub(i).mul(u.sub(a).add(c).log()));return Ol(l,s,o)}}),Ml=we({meanSquaredError_:function(t,e,n,r){void 0===r&&(r=Ms.SUM_BY_NONZERO_WEIGHTS);var o=ce(t,"labels","meanSquaredError"),i=ce(e,"predictions","meanSquaredError"),a=null;null!=n&&(a=ce(n,"weights","meanSquaredError")),y(o.shape,i.shape,"Error in meanSquaredError: ");var s=o.squaredDifference(i);return Ol(s,a,r)}}),Dl=we({sigmoidCrossEntropy_:function(t,e,n,r,o){void 0===r&&(r=0),void 0===o&&(o=Ms.SUM_BY_NONZERO_WEIGHTS);var i=ce(t,"multiClassLabels","sigmoidCrossEntropy"),a=ce(e,"logits","sigmoidCrossEntropy"),s=null;if(null!=n&&(s=ce(n,"weights","sigmoidCrossEntropy")),y(i.shape,a.shape,"Error in sigmoidCrossEntropy: "),r>0){var u=Re(r),c=Re(1),l=Re(.5);i=i.mul(c.sub(u)).add(l.mul(u))}var f=function(t,e){var n=ce(t,"labels","sigmoidCrossEntropyWithLogits"),r=ce(e,"logits","sigmoidCrossEntropyWithLogits");y(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");var o=r.relu(),i=r.mul(n),a=r.abs().neg().exp().log1p();return o.sub(i).add(a)}(i,a);return Ol(f,s,o)}}),Pl=we({softmaxCrossEntropy_:function(t,e,n,r,o){void 0===r&&(r=0),void 0===o&&(o=Ms.SUM_BY_NONZERO_WEIGHTS);var i=ce(t,"onehotLabels","softmaxCrossEntropy"),a=ce(e,"logits","softmaxCrossEntropy"),s=null;if(null!=n&&(s=ce(n,"weights","softmaxCrossEntropy")),y(i.shape,a.shape,"Error in softmaxCrossEntropy: "),r>0){var u=Re(r),c=Re(1),l=Re(i.shape[1]);i=i.mul(c.sub(u)).add(u.div(l))}var f=function(t,e,n){if(void 0===n&&(n=-1),-1===n&&(n=e.rank-1),n!==e.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank "+e.rank+" and dim was "+n);return $e((function(t,e,r){var o=e.logSumExp([n],!0),i=e.toFloat().sub(o);return r([t,i]),{value:i.mul(t).neg().sum([n]),gradFunc:function(t,e){var r=e[0],o=e[1],i=pe(t.shape,[n]);return[t.reshape(i).mul(r.toFloat().sub(o.exp())),t.reshape(i).mul(o.exp().sub(r.toFloat()))]}}}))(t,e)}(i,a);return Ol(f,s,o)}}),Nl=Object.freeze({get Reduction(){return Ms},absoluteDifference:Sl,computeWeightedLoss:Ol,cosineDistance:Al,hingeLoss:Il,huberLoss:kl,logLoss:Tl,meanSquaredError:Ml,sigmoidCrossEntropy:Dl,softmaxCrossEntropy:Pl}),Fl=we({bandPart_:function(t,e,n){if(e%1!=0)throw new Error("bandPart(): numLower must be an integer, got "+e+".");if(n%1!=0)throw new Error("bandPart(): numUpper must be an integer, got "+n+".");var r=ce(t,"a","bandPart");if(r.rank<2)throw new Error("bandPart(): Rank must be at least 2, got "+r.rank+".");var o=r.shape,i=r.shape.slice(-2),a=i[0],s=i[1];if(!(e<=a))throw new Error("bandPart(): numLower ("+e+") must not be greater than the number of rows ("+a+").");if(!(n<=s))throw new Error("bandPart(): numUpper ("+n+") must not be greater than the number of columns ("+s+").");e<0&&(e=a),n<0&&(n=s);var u=Me(0,a,1,"int32").reshape([-1,1]),c=Me(0,s,1,"int32"),l=Ju(u,c),f=Ru(l.lessEqual(Re(+e,"int32")),l.greaterEqual(Re(-n,"int32"))),h=ke([a,s],r.dtype);return Si(Ii(r.reshape([-1,a,s])).map((function(t){return Au(f,t,h)}))).reshape(o)}}),Ll=we({gramSchmidt_:function(t){var e;if(Array.isArray(t)){e=!1,m(null!=t&&t.length>0,(function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"}));for(var n=t[0].shape[0],r=function(e){m(t[e].shape[0]===n,(function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: ("+t[e].shape[0]+" vs. "+n+")"}))},o=1;o<t.length;++o)r(o)}else e=!0,t=qo(t,t.shape[0],0).map((function(t){return Ci(t,[0])}));m(t.length<=t[0].shape[0],(function(){return"Gram-Schmidt: Number of vectors ("+t.length+") exceeds number of dimensions ("+t[0].shape[0]+")."}));var i=[],a=t,s=function(t){i.push(Co.tidy((function(){var e=a[t];if(t>0)for(var n=0;n<t;++n){var r=Jc(i[n].mulStrict(e)).mul(i[n]);e=e.sub(r)}return e.div(il(e,"euclidean"))})))};for(o=0;o<t.length;++o)s(o);return e?Si(i,0):i}}),jl=we({qr_:function(t,e){if(void 0===e&&(e=!1),t.rank<2)throw new Error("qr() requires input tensor to have a rank >= 2, but got rank "+t.rank);if(2===t.rank)return Mr(t,e);var n=t.shape.slice(0,t.shape.length-2).reduce((function(t,e){return t*e})),r=Ii(t.reshape([n,t.shape[t.shape.length-2],t.shape[t.shape.length-1]]),0),o=[],i=[];return r.forEach((function(t){var n=Mr(t,e),r=n[1];o.push(n[0]),i.push(r)})),[Si(o,0).reshape(t.shape),Si(i,0).reshape(t.shape)]}}),Bl=Object.freeze({bandPart:Fl,gramSchmidt:Ll,qr:jl}),Wl=we({resizeBilinear_:function(t,e,n){void 0===n&&(n=!1);var r=ce(t,"images","resizeBilinear");m(3===r.rank||4===r.rank,(function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got rank "+r.rank+"."})),m(2===e.length,(function(){return"Error in resizeBilinear: new shape must 2D, but got shape "+e+"."}));var o=r,i=!1;3===r.rank&&(i=!0,o=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var a=e[0],s=e[1],u=Co.runKernelFunc((function(t,e){return e([o]),t.resizeBilinear(o,a,s,n)}),{x:o},(function(t,e){return{x:function(){return Co.runKernelFunc((function(r){return r.resizeBilinearBackprop(t,e[0],n)}),{})}}}),"ResizeBilinear",{alignCorners:n,newHeight:a,newWidth:s});return i?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),Ul=we({resizeNearestNeighbor_:function(t,e,n){void 0===n&&(n=!1);var r=ce(t,"images","resizeNearestNeighbor");m(3===r.rank||4===r.rank,(function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank "+r.rank+"."})),m(2===e.length,(function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+e+"."})),m("float32"===r.dtype||"int32"===r.dtype,(function(){return"`images` must have `int32` or `float32` as dtype"}));var o=r,i=!1;3===r.rank&&(i=!0,o=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var a=e[0],s=e[1],u=Co.runKernelFunc((function(t,e){return e([o]),t.resizeNearestNeighbor(o,a,s,n)}),{batchImages:o},(function(t,e){return{batchImages:function(){return Co.runKernelFunc((function(r){return r.resizeNearestNeighborBackprop(t,e[0],n)}),{})}}}));return i?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),Gl=we({nonMaxSuppression_:function(t,e,n,r,o){void 0===r&&(r=.5),void 0===o&&(o=Number.NEGATIVE_INFINITY);var i=ce(t,"boxes","nonMaxSuppression"),a=ce(e,"scores","nonMaxSuppression"),s=Dr(i,a,n,r,o);return Co.runKernelFunc((function(t){return t.nonMaxSuppression(i,a,n,r,o)}),{boxes:i,scores:a},null,"NonMaxSuppressionV3",{maxOutputSize:n=s.maxOutputSize,iouThreshold:r=s.iouThreshold,scoreThreshold:o=s.scoreThreshold})}}),zl=we({nonMaxSuppressionWithScore_:function(t,e,n,r,o,i){void 0===r&&(r=.5),void 0===o&&(o=Number.NEGATIVE_INFINITY),void 0===i&&(i=0);var a=ce(t,"boxes","nonMaxSuppression"),s=ce(e,"scores","nonMaxSuppression"),u=Dr(a,s,n,r,o,i),c={maxOutputSize:n=u.maxOutputSize,iouThreshold:r=u.iouThreshold,scoreThreshold:o=u.scoreThreshold,softNmsSigma:i=u.softNmsSigma},l=Co.runKernel("NonMaxSuppressionV5",{boxes:a,scores:s},c);return{selectedIndices:l[0],selectedScores:l[1]}}}),Vl=we({cropAndResize_:function(t,e,n,r,o,i){var a=ce(t,"image","cropAndResize"),s=ce(e,"boxes","cropAndResize","float32"),u=ce(n,"boxInd","cropAndResize","int32");o=o||"bilinear",i=i||0;var c=s.shape[0];return m(4===a.rank,(function(){return"Error in cropAndResize: image must be rank 4,but got rank "+a.rank+"."})),m(2===s.rank&&4===s.shape[1],(function(){return"Error in cropAndResize: boxes must be have size ["+c+",4] but had shape "+s.shape+"."})),m(1===u.rank&&u.shape[0]===c,(function(){return"Error in cropAndResize: boxInd must be have size ["+c+"] but had shape "+s.shape+"."})),m(2===r.length,(function(){return"Error in cropAndResize: cropSize must be of length 2, but got length "+r.length+"."})),m(r[0]>=1&&r[1]>=1,(function(){return"cropSize must be atleast [1,1], but was "+r})),m("bilinear"===o||"nearest"===o,(function(){return"method must be bilinear or nearest, but was "+o})),Co.runKernelFunc((function(t){return t.cropAndResize(a,s,u,r,o,i)}),{images:a,boxes:s,boxInd:u},null,"CropAndResize",{method:o,extrapolationValue:i,cropSize:r})}}),Hl=Object.freeze({resizeBilinear:Wl,resizeNearestNeighbor:Ul,nonMaxSuppression:Gl,nonMaxSuppressionAsync:function(t,e,n,r,o){return void 0===r&&(r=.5),void 0===o&&(o=Number.NEGATIVE_INFINITY),i(this,void 0,void 0,(function(){var i,s,u,c,l;return a(this,(function(a){switch(a.label){case 0:return i=ce(t,"boxes","nonMaxSuppressionAsync"),s=ce(e,"scores","nonMaxSuppressionAsync"),u=Dr(i,s,n,r,o),n=u.maxOutputSize,r=u.iouThreshold,o=u.scoreThreshold,[4,Promise.all([i.data(),s.data()])];case 1:return c=a.sent(),l=Cn(c[0],c[1],n,r,o),i!==t&&i.dispose(),s!==e&&s.dispose(),[2,l]}}))}))},nonMaxSuppressionWithScore:zl,nonMaxSuppressionWithScoreAsync:function(t,e,n,r,o,s){return void 0===r&&(r=.5),void 0===o&&(o=Number.NEGATIVE_INFINITY),void 0===s&&(s=0),i(this,void 0,void 0,(function(){var i,u,c,l,f;return a(this,(function(a){switch(a.label){case 0:return i=ce(t,"boxes","nonMaxSuppressionAsync"),u=ce(e,"scores","nonMaxSuppressionAsync"),c=Dr(i,u,n,r,o,s),n=c.maxOutputSize,r=c.iouThreshold,o=c.scoreThreshold,s=c.softNmsSigma,[4,Promise.all([i.data(),u.data()])];case 1:return l=a.sent(),f=Sn(l[0],l[1],n,r,o,s),i!==t&&i.dispose(),u!==e&&u.dispose(),[2,f]}}))}))},cropAndResize:Vl}),ql=function(t,e){return!(t>0)||"linear"===e},Kl=function(t,e,n){if(null==n||"linear"===n)return t;if("relu"===n)return t.mul(e.step());throw new Error("Gradient for activation "+n+" has not been implemented yet.")},Xl=function(t,e){var n=e,r=en(t.shape,e.shape);return r.length>0&&(n=n.sum(r)),n.reshape(t.shape)},Jl=function(t,e,n){if("linear"===e)return t;if("relu"===e)return tl(t);if("elu"===e)return Qc(t);if("relu6"===e)return el(t);if("prelu"===e)return Zc(t,n);throw new Error("Unknown fused activation "+e+".")},Yl=we({fusedMatMul_:function(t){var e,n=t.a,o=t.b,i=t.transposeA,a=void 0!==i&&i,s=t.transposeB,u=void 0!==s&&s,c=t.bias,l=t.activation,f=void 0===l?"linear":l,h=t.preluActivationWeights;if(!1===ql(Co.state.gradientDepth,f)){var d=_c(n,o,a,u);return null!=c&&(d=ku(d,c)),Jl(d,f,h)}var p=ce(n,"a","fused matMul"),v=ce(o,"b","fused matMul");e=st(p,v),p=e[0],v=e[1];var g=a?p.shape[p.rank-2]:p.shape[p.rank-1],y=u?v.shape[v.rank-1]:v.shape[v.rank-2],b=a?p.shape[p.rank-1]:p.shape[p.rank-2],x=u?v.shape[v.rank-2]:v.shape[v.rank-1],E=p.shape.slice(0,-2),R=v.shape.slice(0,-2),C=w(E),S=w(R);m(p.rank>=2&&v.rank>=2&&p.rank===v.rank,(function(){return"Error in fused matMul: inputs must have the same rank of at least 2, got ranks "+p.rank+" and "+v.rank+"."})),m(_(E,R),(function(){return"Error in fused matMul: outer dimensions ("+E+") and ("+R+") of Tensors with shapes "+p.shape+" and "+v.shape+" must match."})),m(g===y,(function(){return"Error in fused matMul: inner shapes ("+g+") and ("+y+") of Tensors with shapes "+p.shape+" and "+v.shape+" and transposeA="+a+" and transposeB="+u+" must match."}));var O,A,I=p.shape.slice(0,-2).concat([b,x]),k=a?p.as3D(C,g,b):p.as3D(C,b,g),T=u?v.as3D(S,x,y):v.as3D(S,y,x);null!=c&&nn(I,(O=st(O=ce(c,"bias","fused matMul"),p)[0]).shape),null!=h&&(A=ce(h,"prelu weights","fused matMul"));var M={a:k,b:T};return null!=c&&(M.bias=O),null!=h&&(M.preluActivationWeights=A),Co.runKernelFunc((function(t,e){var n=t.fusedBatchMatMul({a:k,b:T,transposeA:a,transposeB:u,bias:O,activation:f,preluActivationWeights:A});return e([k,T,n]),n}),M,(function(t,e){var n=e[0],o=e[1],i=Kl(t,e[2],f),s={};return null!=c&&(s={bias:function(){return Xl(O,i)}}),r(a||u?!a&&u?{a:function(){return i.matMul(o,!1,!1)},b:function(){return i.matMul(n,!0,!1)}}:a&&!u?{a:function(){return o.matMul(i,!1,!0)},b:function(){return n.matMul(i,!1,!1)}}:{a:function(){return o.matMul(i,!0,!0)},b:function(){return i.matMul(n,!0,!0)}}:{a:function(){return i.matMul(o,!1,!0)},b:function(){return n.matMul(i,!0,!1)}},s)}),"_FusedMatMul",{transposeA:a,transposeB:u,activation:f},[k,T],[!0]).reshape(I)}}),Ql=we({fusedConv2d_:function(t){var e=t.x,n=t.filter,o=t.strides,i=t.pad,a=t.dataFormat,s=void 0===a?"NHWC":a,u=t.dilations,c=void 0===u?[1,1]:u,l=t.dimRoundingMode,f=t.bias,h=t.activation,d=void 0===h?"linear":h,p=t.preluActivationWeights;if(!1===ql(Co.state.gradientDepth,d=d||"linear")){var v=hc(e,n,o,i,s,c,l);return null!=f&&(v=ku(v,f)),Jl(v,d,p)}var g=ce(e,"x","conv2d"),y=ce(n,"filter","conv2d"),b=g,x=!1;3===g.rank&&(x=!0,b=g.as4D(1,g.shape[0],g.shape[1],g.shape[2])),m(4===b.rank,(function(){return"Error in fused conv2d: input must be rank 4, but got rank "+b.rank+"."})),m(4===y.rank,(function(){return"Error in fused conv2d: filter must be rank 4, but got rank "+y.rank+"."})),null!=l&&m(E(i),(function(){return"Error in fused conv2d: pad must be an integer when using, dimRoundingMode "+l+" but got pad "+i+"."})),m(b.shape[3]===y.shape[2],(function(){return"Error in conv2d: depth of input ("+b.shape[3]+") must match input depth for filter "+y.shape[2]+"."})),m(pn(o,c),(function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+o+" and dilations '"+c+"'"})),m("NHWC"===s,(function(){return"Error in conv2d: got dataFormat of "+s+" but only NHWC is currently supported."}));var w,_,R=an(b.shape,y.shape,o,c,i,l);null!=f&&(w=st(w=ce(f,"bias","fused conv2d"),g)[0],nn(R.outShape,w.shape)),null!=p&&(_=ce(p,"prelu weights","fused conv2d"));var C={x:b,filter:y};null!=f&&(C.bias=w),null!=p&&(C.preluActivationWeights=_);var S=Co.runKernelFunc((function(t,e){var n=t.fusedConv2d({input:b,filter:y,convInfo:R,bias:w,activation:d,preluActivationWeights:_});return e([y,b,n]),n}),C,(function(t,e){var n=e[0],a=e[1],s=Kl(t,e[2],d);m(dn(c),(function(){return"Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+c+"'"}));var u={};return null!=f&&(u={bias:function(){return Xl(w,s)}}),r({x:function(){return vc(a.shape,s,n,o,i)},filter:function(){return pc(a,s,n.shape,o,i)}},u)}),"FusedConv2D",{convInfo:R,activation:d},[y,b],[!0]);return x?S.as3D(S.shape[1],S.shape[2],S.shape[3]):S}}),$l=we({fusedDepthwiseConv2d_:function(t){var e=t.x,n=t.filter,o=t.strides,i=t.pad,a=t.dataFormat,s=void 0===a?"NHWC":a,u=t.dilations,c=void 0===u?[1,1]:u,l=t.dimRoundingMode,f=t.bias,h=t.activation,d=void 0===h?"linear":h,p=t.preluActivationWeights;if(!1===ql(Co.state.gradientDepth,d)){var v=gc(e,n,o,i,s,c,l);return null!=f&&(v=ku(v,f)),Jl(v,d,p)}var g=ce(e,"x","depthwiseConv2d"),y=ce(n,"filter","depthwiseConv2d"),b=g,x=!1;3===g.rank&&(x=!0,b=g.as4D(1,g.shape[0],g.shape[1],g.shape[2])),m(4===b.rank,(function(){return"Error in fused depthwiseConv2d: input must be rank 4, but got rank "+b.rank+"."})),m(4===y.rank,(function(){return"Error in fused depthwiseConv2d: filter must be rank 4, but got rank "+y.rank+"."})),m(b.shape[3]===y.shape[2],(function(){return"Error in fused depthwiseConv2d: number of input channels ("+b.shape[3]+") must match the inChannels dimension in filter "+y.shape[2]+"."})),null==c&&(c=[1,1]),m(pn(o,c),(function(){return"Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides "+o+" and dilations '"+c+"'"})),null!=l&&m(E(i),(function(){return"Error in fused depthwiseConv2d: pad must be an integer when using dimRoundingMode "+l+" but got pad "+i+"."}));var w,_,R=an(b.shape,y.shape,o,c,i,l,!0);null!=f&&(w=st(w=ce(f,"bias","fused conv2d"),g)[0],nn(R.outShape,w.shape)),null!=p&&(_=ce(p,"prelu weights","fused depthwiseConv2d"));var C={x:b,filter:y};null!=f&&(C.bias=w),null!=p&&(C.preluActivationWeights=_);var S=Co.runKernelFunc((function(t,e){var n=t.fusedDepthwiseConv2D({input:b,filter:y,convInfo:R,bias:w,activation:d,preluActivationWeights:_});return e([y,b,n]),n}),C,(function(t,e){m(dn(c),(function(){return"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+c+"'"}));var n=e[0],o=e[1],i=Kl(t,e[2],d),a={};return null!=f&&(a={bias:function(){return Xl(w,i)}}),r({x:function(){return mc(o.shape,i,n,R)},filter:function(){return yc(o,i,n.shape,R)}},a)}),"FusedDepthwiseConv2D",{convInfo:R,activation:d},[y,b],[!0]);return x?S.as3D(S.shape[1],S.shape[2],S.shape[3]):S}}),Zl=Object.freeze({image:Hl,linalg:Bl,losses:Nl,spectral:gl,fused:Object.freeze({matMul:Yl,conv2d:Ql,depthwiseConv2d:$l}),signal:Cl,square:Ds,squaredDifference:Ns,conv1d:fc,conv2d:hc,conv3d:dc,depthwiseConv2d:gc,separableConv2d:bc,conv2dTranspose:xc,conv3dTranspose:wc,op:we,batchNormalization2d:gu,batchNormalization3d:mu,batchNormalization4d:yu,batchNormalization:bu,batchNorm:xu,batchNorm2d:wu,batchNorm3d:_u,batchNorm4d:Eu,booleanMaskAsync:function(t,e,n){return i(this,void 0,void 0,(function(){var r,o,i,s,u,c,l,f,h,d,p,v,g;return a(this,(function(a){switch(a.label){case 0:for(r=ce(t,"tensor","boolMask"),o=ce(e,"mask","boolMask","bool"),i=null==n?0:n,u=r.shape,m((s=o.rank)>0,(function(){return"mask cannot be scalar"})),y(u.slice(i,i+s),o.shape,"mask's shape must match the first K dimensions of tensor's shape,"),c=1,l=i;l<i+s;l++)c*=u[l];return f=u.slice(0,i).concat([c],u.slice(i+s)),h=r.reshape(f),d=o.reshape([-1]),[4,Iu(d)];case 1:return p=a.sent(),v=p.squeeze([1]),g=cc(h,v,i),t!==r&&r.dispose(),e!==o&&o.dispose(),v.dispose(),h.dispose(),d.dispose(),p.dispose(),[2,g]}}))}))},complex:Fo,real:Lo,imag:jo,concat:Uo,concat1d:Go,concat2d:zo,concat3d:Vo,concat4d:Ho,split:qo,matMul:_c,dot:Ec,outerProduct:Rc,reverse:Cc,reverse1d:Sc,reverse2d:Oc,reverse3d:Ac,reverse4d:Ic,maxPool:kc,avgPool:Tc,pool:Mc,maxPool3d:Dc,avgPool3d:Pc,slice:Nc,slice1d:Fc,slice2d:Lc,slice3d:jc,slice4d:Bc,abs:Fs,acos:Ls,acosh:js,asin:Bs,asinh:Ws,atan:Us,atanh:Gs,ceil:zs,clipByValue:Vs,cos:Hs,cosh:qs,erf:Ks,exp:Xs,expm1:Js,floor:Ys,log:Qs,log1p:$s,logSigmoid:Zs,neg:tu,reciprocal:eu,round:nu,rsqrt:ru,sigmoid:ou,sign:iu,isNaN:au,isInf:su,isFinite:uu,sin:cu,sinh:lu,softplus:fu,sqrt:hu,step:du,tan:pu,tanh:vu,all:Wc,any:Uc,argMax:Gc,argMin:zc,logSumExp:Vc,max:Hc,mean:qc,min:Kc,moments:Xc,sum:Jc,prod:Yc,equal:Qu,equalStrict:$u,greater:Zu,greaterEqual:tc,greaterEqualStrict:ec,greaterStrict:nc,less:rc,lessEqual:oc,lessEqualStrict:ic,lessStrict:ac,notEqual:sc,notEqualStrict:uc,add:ku,addN:Tu,addStrict:Mu,atan2:Du,div:Pu,divNoNan:Nu,divStrict:Fu,floorDiv:Lu,maximum:ju,maximumStrict:Bu,minimum:Wu,minimumStrict:Uu,mod:Gu,modStrict:zu,mul:Vu,mulStrict:Hu,pow:qu,powStrict:Ku,squaredDifferenceStrict:Xu,sub:Ju,subStrict:Yu,elu:Qc,leakyRelu:$c,prelu:Zc,relu:tl,relu6:el,selu:nl,logicalAnd:Ru,logicalNot:Cu,logicalOr:Su,logicalXor:Ou,where:Au,whereAsync:Iu,buffer:Pe,print:function(t,e){void 0===e&&(e=!1),console.log(t.toString(e))},batchToSpaceND:oi,broadcastTo:ii,cast:ai,clone:si,cumsum:ui,depthToSpace:ci,expandDims:li,eye:fi,multinomial:hi,oneHot:di,pad:pi,pad1d:vi,pad2d:gi,pad3d:mi,pad4d:yi,rand:bi,randomNormal:xi,randomGamma:wi,randomUniform:_i,reshape:Ei,spaceToBatchND:Ri,squeeze:Ci,stack:Si,tile:Oi,truncatedNormal:Ai,unstack:Ii,setdiff1dAsync:function(t,e){return i(this,void 0,void 0,(function(){var n,r,o,i,s,u,c,l,f,h;return a(this,(function(a){switch(a.label){case 0:return n=ce(t,"x","setdiff1d"),r=ce(e,"y","setdiff1d"),m(n.dtype===r.dtype,(function(){return"x and y should have the same dtype, but got x ("+n.dtype+") and y ("+r.dtype+")."})),m(1===n.rank,(function(){return"x should be 1D tensor, but got x ("+n.shape+")."})),m(1===r.rank,(function(){return"y should be 1D tensor, but got y ("+r.shape+")."})),[4,n.data()];case 1:return o=a.sent(),[4,r.data()];case 2:for(i=a.sent(),s=new Set(i),u=0,f=0;f<o.length;f++)s.has(o[f])||u++;for(c=new uo([u],n.dtype),l=new uo([u],"int32"),f=0,h=0;f<o.length;f++)s.has(o[f])||(c.values[h]=o[f],l.values[h]=f,h++);return[2,[c.toTensor(),l.toTensor()]]}}))}))},fill:Te,linspace:function(t,e,n){if(n<=0)throw new Error("The number of values should be positive.");return Co.runKernelFunc((function(r){return r.linspace(t,e,n)}),{})},ones:Ie,range:Me,scalar:Re,tensor:_e,tensor1d:Ce,tensor2d:Se,tensor3d:Oe,tensor4d:Ae,tensor5d:function(t,e,n){if(b(t),null!=e&&5!==e.length)throw new Error("tensor5d() requires shape to have five numbers");var r=se(t,n);if(5!==r.length&&1!==r.length)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(1===r.length&&null==e)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return Ee(t,e,r,n)},tensor6d:function(t,e,n){if(b(t),null!=e&&6!==e.length)throw new Error("tensor6d() requires shape to have six numbers");var r=se(t,n);if(6!==r.length&&1!==r.length)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(1===r.length&&null==e)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return Ee(t,e=e||r,r,n)},variable:function(t,e,n,r){return void 0===e&&(e=!0),Co.makeVariable(t,e,n,r)},zeros:ke,onesLike:Bo,zerosLike:Wo,transpose:rl,softmax:ki,logSoftmax:Ti,localResponseNormalization:ol,norm:il,gather:cc,unsortedSegmentSum:lc,basicLSTMCell:al,multiRNNCell:sl,movingAverage:ul,stridedSlice:cl,topk:ll,scatterND:fl,fft:hl,ifft:dl,rfft:pl,irfft:vl,sparseToDense:ml,gatherND:yl,diag:bl,dropout:xl,hannWindow:wl,hammingWindow:_l,frame:El,stft:Rl,inTopKAsync:function(t,e,n){return void 0===n&&(n=1),i(this,void 0,void 0,(function(){var r,o,i,s,u,c,l,f,h,d,p,v,g,b;return a(this,(function(a){switch(a.label){case 0:return r=ce(t,"predictions","inTopK"),o=ce(e,"targets","inTopK"),m(r.rank>1,(function(){return"inTopK() expects the predictions to be of rank 2 or higher, but got "+r.rank})),m(r.rank-1===o.rank,(function(){return"predictions rank should be 1 larger than targets rank, but got predictions rank "+r.rank+" and targets rank "+o.rank})),y(r.shape.slice(0,r.shape.length-1),o.shape,"predictions's shape should be align with the targets' shape, except the last dimension."),i=r.shape[r.shape.length-1],m(n>0&&n<=i,(function(){return"'k' passed to inTopK() must be > 0 && <= the predictions last dimension ("+i+"), but got "+n})),[4,r.data()];case 1:return s=a.sent(),[4,o.data()];case 2:for(u=a.sent(),f=(c=[s.length/i,i])[1],h=T("bool",l=c[0]),d=0;d<l;d++){for(v=s.subarray(p=d*f,p+f),g=[],b=0;b<v.length;b++)g.push({value:v[b],index:b});for(g.sort((function(t,e){return e.value-t.value})),h[d]=0,b=0;b<n;b++)if(g[b].index===u[d]){h[d]=1;break}}return t!==r&&r.dispose(),e!==o&&o.dispose(),[2,_e(h,o.shape,"bool")]}}))}))}}),tf=function(t){function e(){var e=t.call(this)||this;return e.blockSize=48,e.firstUse=!0,e.data=new Mi(e,Co),e}return o(e,t),e.prototype.write=function(t,e,n){this.firstUse&&(this.firstUse=!1,u().get("IS_NODE")&&ae("\n============================\nHi there 👋. Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.\n============================"));var r={};return this.data.set(r,{values:t,dtype:n}),r},e.prototype.move=function(t,e,n,r){this.data.set(t,{values:e,dtype:r})},e.prototype.numDataIds=function(){return this.data.numDataIds()},e.prototype.read=function(t){return i(this,void 0,void 0,(function(){return a(this,(function(){return[2,this.readSync(t)]}))}))},e.prototype.readSync=function(t){var e=this.data.get(t),n=e.complexTensors;return"complex64"===e.dtype?bn(this.readSync(n.real.dataId),this.readSync(n.imag.dataId)):this.data.get(t).values},e.prototype.bufferSync=function(t){var e=this.readSync(t.dataId),n=e;if("string"===t.dtype)try{n=e.map((function(t){return Z(t)}))}catch(t){throw new Error("Failed to decode encoded string bytes into utf-8")}return Pe(t.shape,t.dtype,n)},e.prototype.makeOutput=function(t,e,n){var r=this.write(t,e,n);return Co.makeTensorFromDataId(r,e,n,this)},e.prototype.disposeData=function(t){if(this.data.has(t)){var e=this.data.get(t).complexTensors;null!=e&&(e.real.dispose(),e.imag.dispose()),this.data.delete(t)}},e.prototype.time=function(t){return i(this,void 0,void 0,(function(){var e;return a(this,(function(){return e=Y(),t(),[2,{kernelMs:Y()-e}]}))}))},e.prototype.memory=function(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}},e.prototype.complex=function(t,e){var n=this.makeOutput(null,t.shape,"complex64");return this.data.get(n.dataId).complexTensors={real:Co.keep(t.clone()),imag:Co.keep(e.clone())},n},e.prototype.real=function(t){return this.data.get(t.dataId).complexTensors.real.clone()},e.prototype.imag=function(t){return this.data.get(t.dataId).complexTensors.imag.clone()},e.prototype.slice=function(t,e,n){if(Pr(t,"slice"),Ye(t.shape,e,n)){var r=Qe(e,t.strides),o=w(n);return _e(this.readSync(t.dataId).subarray(r,r+o),n,t.dtype)}for(var i=Pe(n,t.dtype),a=this.bufferSync(t),s=0;s<i.size;++s){var u=i.indexToLoc(s).map((function(t,n){return t+e[n]}));i.values[s]=a.get.apply(a,u)}return i.toTensor()},e.prototype.stridedSlice=function(t,e,n,r){Pr(t,"stridedSlice");var o=Ke(e,n,r);if(o.some((function(t){return 0===t})))return _e([],o);for(var i=Pe(o,t.dtype),a=this.bufferSync(t),s=0;s<i.size;s++){for(var u=i.indexToLoc(s),c=new Array(u.length),l=0;l<c.length;l++)c[l]=u[l]*r[l]+e[l];i.set.apply(i,[a.get.apply(a,c)].concat(u))}return i.toTensor()},e.prototype.diag=function(t){for(var e=this.readSync(t.dataId),n=Pe([t.size,t.size],t.dtype),r=n.values,o=0;o<e.length;o++)r[o*t.size+o]=e[o];return n.toTensor()},e.prototype.unstack=function(t,e){for(var n=t.shape[e],r=new Array(t.rank-1),o=0,i=0;i<t.rank;i++)i!==e&&(r[o++]=t.shape[i]);var a=new Array(t.rank).fill(0),s=t.shape.slice();s[e]=1;var u=new Array(n);for(i=0;i<u.length;i++)a[e]=i,u[i]=this.slice(t,a,s).reshape(r);return u},e.prototype.reverse=function(t,e){Pr(t,"reverse");for(var n=Pe(t.shape,t.dtype),r=this.bufferSync(t),o=function(o){var i=n.indexToLoc(o),a=i.slice();e.forEach((function(e){return a[e]=t.shape[e]-1-a[e]})),n.set.apply(n,[r.get.apply(r,a)].concat(i))},i=0;i<n.size;i++)o(i);return n.toTensor()},e.prototype.concat=function(t,e){var n=this;if("complex64"===t[0].dtype){var r=t.map((function(t){return Lo(t)})),o=t.map((function(t){return jo(t)}));return Fo(this.concat(r,e),this.concat(o,e))}var i=t.map((function(t){var n=w(t.shape.slice(e));return t.as2D(-1,n)})),a=xe(i.map((function(t){return t.shape})),1),s=Pe(a,t[0].dtype).values;if(1===i[0].shape[0]){var u=0;i.forEach((function(t){s.set(n.readSync(t.dataId),u),u+=t.size}))}else{var c=0;i.forEach((function(t){for(var e=n.readSync(t.dataId),r=0,o=0;o<t.shape[0];++o)for(var i=o*a[1]+c,u=0;u<t.shape[1];++u)s[i+u]=e[r++];c+=t.shape[1]}))}var l=xe(t.map((function(t){return t.shape})),e);return _e(s,l,t[0].dtype)},e.prototype.neg=function(t){return Pr(t,"neg"),this.multiply(Re(-1),t)},e.prototype.add=function(t,e){return"complex64"===t.dtype||"complex64"===e.dtype?this.broadcastedBinaryComplexOp(t.cast("complex64"),e.cast("complex64"),(function(t,e,n,r){return{real:t+n,imag:e+r}})):this.broadcastedBinaryOp(t,e,it(t.dtype,e.dtype),(function(t,e){return t+e}))},e.prototype.addN=function(t){var e=this;Pr(t,"addN");for(var n=t.map((function(t){return e.readSync(t.dataId)})),r=Pe(t[0].shape,t[0].dtype),o=r.values,i=0;i<t.length;i++)for(var a=n[i],s=0;s<o.length;s++)o[s]+=a[s];return r.toTensor()},e.prototype.softmax=function(t,e){var n=I([e],t.shape),r=this.max(t,n),o=pe(r.shape,n),i=this.subtract(t,r.reshape(o)),a=this.exp(i),s=this.sum(a,n).reshape(o);return this.realDivide(a,s)},e.prototype.subtract=function(t,e){return"complex64"===t.dtype||"complex64"===e.dtype?this.broadcastedBinaryComplexOp(t.cast("complex64"),e.cast("complex64"),(function(t,e,n,r){return{real:t-n,imag:e-r}})):this.broadcastedBinaryOp(t,e,it(t.dtype,e.dtype),(function(t,e){return t-e}))},e.prototype.pow=function(t,e){return Pr([t,e],"pow"),this.broadcastedBinaryOp(t,e,t.dtype,(function(t,e){return Math.pow(t,e)}))},e.prototype.batchMatMul=function(t,e,n,r){Pr([t,e],"matMul");for(var o=n?t.shape[1]:t.shape[2],i=n?t.shape[2]:t.shape[1],a=r?e.shape[1]:e.shape[2],s=t.shape[0],u=this.readSync(t.dataId),c=this.readSync(e.dataId),l=n?[t.strides[0],1,t.strides[1]]:[t.strides[0],t.strides[1],1],f=l[0],h=l[1],d=l[2],p=r?[1,e.strides[1],e.strides[0]]:[e.strides[1],1,e.strides[0]],v=p[0],g=p[1],m=p[2],y=i*a,b=Pe([s,i,a],t.dtype),x=b.values,w=this.blockSize,_=0;_<s;_++)for(var E=0;E<i;E+=w)for(var R=0;R<a;R+=w)for(var C=0;C<o;C+=w)for(var S=Math.min(E+w,i),O=Math.min(R+w,a),A=Math.min(C+w,o),I=E;I<S;I++)for(var k=R;k<O;k++){for(var T=0,M=C;M<A;M++)T+=u[_*f+I*h+M*d]*c[M*v+k*g+_*m];x[_*y+(I*a+k)]+=T}return b.toTensor()},e.prototype.fusedBatchMatMul=function(t){var e=t.bias,n=t.activation,r=t.preluActivationWeights,o=this.batchMatMul(t.a,t.b,t.transposeA,t.transposeB);return e&&(o=this.add(o,e)),n&&(o=Nr(this,o,n,r)),o},e.prototype.multiply=function(t,e){return"complex64"===t.dtype||"complex64"===e.dtype?this.broadcastedBinaryComplexOp(t.cast("complex64"),e.cast("complex64"),(function(t,e,n,r){return{real:t*n-e*r,imag:t*r+e*n}})):this.broadcastedBinaryOp(t,e,it(t.dtype,e.dtype),(function(t,e){return t*e}))},e.prototype.realDivide=function(t,e){return Pr([t,e],"realDivide"),this.broadcastedBinaryOp(t,e,"float32",(function(t,e){return t/e}))},e.prototype.floorDiv=function(t,e){return Pr([t,e],"floorDiv"),this.broadcastedBinaryOp(t,e,"int32",(function(t,e){return Math.floor(t/e)}))},e.prototype.sum=function(t,e){Pr(t,"sum"),ve("sum",e,t.rank);for(var n=de(t.shape,e),r=n[1],o=ke(n[0],it(t.dtype,"int32")),i=w(r),a=this.readSync(o.dataId),s=this.readSync(t.dataId),u=0;u<a.length;++u){for(var c=u*i,l=0,f=0;f<i;++f)l+=s[c+f];a[u]=l}return o},e.prototype.prod=function(t,e){Pr(t,"sum");for(var n=de(t.shape,e),r=n[1],o=ke(n[0],it(t.dtype,"int32")),i=w(r),a=this.readSync(o.dataId),s=this.readSync(t.dataId),u=0;u<a.length;++u){for(var c=u*i,l=1,f=0;f<i;++f)l*=s[c+f];a[u]=l}return o},e.prototype.unsortedSegmentSum=function(t,e,n){Pr(t,"unsortedSegmentSum");for(var r=[],o=t.rank-e.rank,i=0;i<o;++i)e=e.expandDims(i+1);for(i=0;i<n;++i){var a=Re(i,"int32"),s=Qu(a,e).asType("float32").mul(t).sum(0);r.push(s)}return Si(r)},e.prototype.argMin=function(t,e){Pr(t,"argMin");var n=[e];ve("argMin",n,t.rank);for(var r=de(t.shape,n),o=r[1],i=ke(r[0],"int32"),a=w(o),s=this.readSync(i.dataId),u=this.readSync(t.dataId),c=0;c<s.length;++c){for(var l=c*a,f=u[l],h=0,d=0;d<a;++d){var p=u[l+d];p<f&&(f=p,h=d)}s[c]=h}return i},e.prototype.argMax=function(t,e){Pr(t,"argMax");var n=[e];ve("argMax",n,t.rank);for(var r=de(t.shape,n),o=r[1],i=ke(r[0],"int32"),a=w(o),s=this.readSync(i.dataId),u=this.readSync(t.dataId),c=0;c<s.length;++c){for(var l=c*a,f=u[l],h=0,d=0;d<a;++d){var p=u[l+d];p>f&&(f=p,h=d)}s[c]=h}return i},e.prototype.cumsum=function(t,e,n,r){if(Pr(t,"cumsum"),e!==t.rank-1)throw new Error("backend.cumsum in CPU expects an inner-most axis="+(t.rank-1)+" but got axis="+e);for(var o=it(t.dtype,"int32"),i=ke(t.shape,o),a=this.readSync(i.dataId),s=this.readSync(t.dataId),u=t.shape[t.rank-1],c=r?function(t,e){return t+u-e-1}:function(t,e){return t+e},l=0;l<s.length;l+=u)for(var f=0;f<u;f++){var h=c(l,f);if(0===f)a[h]=n?0:s[h];else{var d=c(l,f-1);a[h]=n?s[d]+a[d]:s[h]+a[d]}}return i},e.prototype.equal=function(t,e){return Pr([t,e],"equal"),this.broadcastedBinaryOp(t,e,"bool",(function(t,e){return t===e?1:0}))},e.prototype.notEqual=function(t,e){return Pr([t,e],"notEqual"),this.broadcastedBinaryOp(t,e,"bool",(function(t,e){return t!==e?1:0}))},e.prototype.less=function(t,e){return Pr([t,e],"less"),this.broadcastedBinaryOp(t,e,"bool",(function(t,e){return t<e?1:0}))},e.prototype.lessEqual=function(t,e){return Pr([t,e],"lessEqual"),this.broadcastedBinaryOp(t,e,"bool",(function(t,e){return t<=e?1:0}))},e.prototype.greater=function(t,e){return Pr([t,e],"greater"),this.broadcastedBinaryOp(t,e,"bool",(function(t,e){return t>e?1:0}))},e.prototype.greaterEqual=function(t,e){return Pr([t,e],"greaterEqual"),this.broadcastedBinaryOp(t,e,"bool",(function(t,e){return t>=e?1:0}))},e.prototype.logicalNot=function(t){Pr(t,"logicalNot");for(var e=this.readSync(t.dataId),n=new Uint8Array(e.length),r=0;r<e.length;++r)n[r]=e[r]?0:1;return this.makeOutput(n,t.shape,"bool")},e.prototype.logicalAnd=function(t,e){return Pr([t,e],"logicalAnd"),this.broadcastedBinaryOp(t,e,"bool",(function(t,e){return t&&e}))},e.prototype.logicalOr=function(t,e){return Pr([t,e],"logicalOr"),this.broadcastedBinaryOp(t,e,"bool",(function(t,e){return t||e}))},e.prototype.select=function(t,e,n){Pr([t,e,n],"select");for(var r=this.readSync(t.dataId),o=this.readSync(e.dataId),i=this.readSync(n.dataId),a=ke(e.shape,it(e.dtype,n.dtype)),s=this.readSync(a.dataId),u=0,c=0===t.rank||t.rank>1||1===e.rank?1:w(e.shape.slice(1)),l=0;l<r.length;l++)for(var f=0;f<c;f++)s[u++]=1===r[l]?o[l]:i[l];return a},e.prototype.where=function(t){Pr([t],"where");var e=this.readSync(t.dataId);return Pn(t.shape,e)},e.prototype.topk=function(t,e){return Pr(t,"topk"),Dn(this.readSync(t.dataId),t.shape,t.dtype,e)},e.prototype.min=function(t,e){Pr(t,"min"),ve("min",e,t.rank);for(var n=de(t.shape,e),r=n[1],o=ke(n[0],t.dtype),i=w(r),a=this.readSync(o.dataId),s=this.readSync(t.dataId),u=0;u<a.length;++u){for(var c=u*i,l=s[c],f=0;f<i;++f){var h=s[c+f];h<l&&(l=h)}a[u]=l}return o},e.prototype.minimum=function(t,e){return Pr([t,e],"minimum"),this.broadcastedBinaryOp(t,e,t.dtype,(function(t,e){return Math.min(t,e)}))},e.prototype.mod=function(t,e){return Pr([t,e],"mod"),this.broadcastedBinaryOp(t,e,t.dtype,(function(t,e){var n=t%e;return t<0&&e<0||t>=0&&e>=0?n:(n+e)%e}))},e.prototype.max=function(t,e){Pr(t,"max"),ve("max",e,t.rank);for(var n=de(t.shape,e),r=n[1],o=ke(n[0],t.dtype),i=w(r),a=this.readSync(o.dataId),s=this.readSync(t.dataId),u=0;u<a.length;++u){for(var c=u*i,l=s[c],f=0;f<i;++f){var h=s[c+f];h>l&&(l=h)}a[u]=l}return o},e.prototype.maximum=function(t,e){return Pr([t,e],"maximum"),this.broadcastedBinaryOp(t,e,t.dtype,(function(t,e){return Math.max(t,e)}))},e.prototype.all=function(t,e){Pr(t,"all"),ve("all",e,t.rank);for(var n=de(t.shape,e),r=n[1],o=ke(n[0],t.dtype),i=w(r),a=this.readSync(o.dataId),s=this.readSync(t.dataId),u=0;u<a.length;++u){for(var c=u*i,l=s[c],f=0;f<i;++f){l=l&&s[c+f]}a[u]=l}return o},e.prototype.any=function(t,e){Pr(t,"any"),ve("any",e,t.rank);for(var n=de(t.shape,e),r=n[1],o=ke(n[0],t.dtype),i=w(r),a=this.readSync(o.dataId),s=this.readSync(t.dataId),u=0;u<a.length;++u){for(var c=u*i,l=s[c],f=0;f<i;++f){l=l||s[c+f]}a[u]=l}return o},e.prototype.squaredDifference=function(t,e){return Pr([t,e],"squaredDifference"),this.broadcastedBinaryOp(t,e,t.dtype,(function(t,e){var n=t-e;return n*n}))},e.prototype.ceil=function(t){Pr(t,"ceil");for(var e=this.readSync(t.dataId),n=new Float32Array(e.length),r=0;r<e.length;++r)n[r]=Math.ceil(e[r]);return this.makeOutput(n,t.shape,"float32")},e.prototype.floor=function(t){Pr(t,"floor");for(var e=this.readSync(t.dataId),n=new Float32Array(e.length),r=0;r<e.length;++r)n[r]=Math.floor(e[r]);return this.makeOutput(n,t.shape,"float32")},e.prototype.sign=function(t){Pr(t,"x");for(var e=this.readSync(t.dataId),n=new Float32Array(e.length),r=0;r<e.length;++r)n[r]=e[r]<0?-1:e[r]>0?1:0;return this.makeOutput(n,t.shape,"float32")},e.prototype.isNaN=function(t){Pr(t,"x");for(var e=this.readSync(t.dataId),n=new Uint8Array(e.length),r=0;r<e.length;++r)Number.isNaN(e[r])&&(n[r]=1);return this.makeOutput(n,t.shape,"bool")},e.prototype.isInf=function(t){Pr(t,"x");for(var e=this.readSync(t.dataId),n=new Uint8Array(e.length),r=0;r<e.length;++r)Math.abs(e[r])===1/0&&(n[r]=1);return this.makeOutput(n,t.shape,"bool")},e.prototype.isFinite=function(t){Pr(t,"x");for(var e=this.readSync(t.dataId),n=new Uint8Array(e.length),r=0;r<e.length;++r)Number.isFinite(e[r])&&(n[r]=1);return this.makeOutput(n,t.shape,"bool")},e.prototype.round=function(t){Pr(t,"round");for(var e=this.readSync(t.dataId),n=new Float32Array(e.length),r=0;r<e.length;++r){var o=Math.floor(e[r]);n[r]=e[r]-o<.5?Math.floor(e[r]):e[r]-o>.5?Math.ceil(e[r]):o%2==0?o:o+1}return this.makeOutput(n,t.shape,"float32")},e.prototype.exp=function(t){Pr(t,"exp");for(var e=this.readSync(t.dataId),n=new Float32Array(e.length),r=0;r<e.length;++r)n[r]=Math.exp(e[r]);return this.makeOutput(n,t.shape,"float32")},e.prototype.expm1=function(t){Pr(t,"expm1");for(var e=this.readSync(t.dataId),n=new Float32Array(e.length),r=0;r<e.length;++r)n[r]=Math.expm1(e[r]);return this.makeOutput(n,t.shape,"float32")},e.prototype.log=function(t){Pr(t,"log");for(var e=this.readSync(t.dataId),n=new Float32Array(e.length),r=0;r<e.length;++r){n[r]=Math.log(e[r])}return this.makeOutput(n,t.shape,"float32")},e.prototype.log1p=function(t){Pr(t,"log1p");for(var e=this.readSync(t.dataId),n=new Float32Array(e.length),r=0;r<e.length;++r){n[r]=Math.log1p(e[r])}return this.makeOutput(n,t.shape,"float32")},e.prototype.sqrt=function(t){Pr(t,"sqrt");for(var e=this.readSync(t.dataId),n=new Float32Array(e.length),r=0;r<e.length;++r){n[r]=Math.sqrt(e[r])}return this.makeOutput(n,t.shape,"float32")},e.prototype.rsqrt=function(t){Pr(t,"rsqrt");for(var e=this.readSync(t.dataId),n=new Float32Array(e.length),r=0;r<e.length;++r){n[r]=1/Math.sqrt(e[r])}return this.makeOutput(n,t.shape,"float32")},e.prototype.reciprocal=function(t){Pr(t,"reciprocal");for(var e=this.readSync(t.dataId),n=new Float32Array(e.length),r=0;r<e.length;++r)n[r]=1/e[r];return this.makeOutput(n,t.shape,"float32")},e.prototype.linear=function(t){return t},e.prototype.relu=function(t){Pr(t,"relu");for(var e=ke(t.shape,t.dtype),n=this.readSync(e.dataId),r=this.readSync(t.dataId),o=0;o<r.length;++o)n[o]=Math.max(0,r[o]);return e},e.prototype.relu6=function(t){Pr(t,"relu");for(var e=ke(t.shape,t.dtype),n=this.readSync(e.dataId),r=this.readSync(t.dataId),o=0;o<r.length;++o)n[o]=Math.min(Math.max(0,r[o]),6);return e},e.prototype.prelu=function(t,e){return Pr([t,e],"prelu"),this.broadcastedBinaryOp(t,e,t.dtype,(function(t,e){return t<0?e*t:t}))},e.prototype.elu=function(t){Pr(t,"elu");for(var e=new Float32Array(t.size),n=this.readSync(t.dataId),r=0;r<n.length;++r){var o=n[r];e[r]=o>=0?o:Math.exp(o)-1}return this.makeOutput(e,t.shape,"float32")},e.prototype.eluDer=function(t,e){Pr([t,e],"eluDer");for(var n=new Float32Array(e.size),r=this.readSync(e.dataId),o=this.readSync(t.dataId),i=0;i<r.length;++i){var a=r[i];n[i]=a>=1?o[i]:o[i]*(a+1)}return this.makeOutput(n,e.shape,"float32")},e.prototype.selu=function(t){Pr(t,"selu");for(var e=new Float32Array(t.size),n=this.readSync(t.dataId),r=0;r<n.length;++r){var o=n[r];e[r]=o>=0?1.0507009873554805*o:1.7580993408473768*(Math.exp(o)-1)}return this.makeOutput(e,t.shape,"float32")},e.prototype.clip=function(t,e,n){Pr(t,"clip");for(var r=new Float32Array(t.size),o=this.readSync(t.dataId),i=0;i<o.length;++i){var a=o[i];r[i]=a>n?n:a<e?e:a}return this.makeOutput(r,t.shape,"float32")},e.prototype.abs=function(t){for(var e=new Float32Array(t.size),n=this.readSync(t.dataId),r=0;r<n.length;++r)e[r]=Math.abs(n[r]);return this.makeOutput(e,t.shape,"float32")},e.prototype.complexAbs=function(t){for(var e=new Float32Array(t.size),n=this.readSync(t.dataId),r=0;r<t.size;++r){e[r]=Math.hypot(n[2*r],n[2*r+1])}return this.makeOutput(e,t.shape,"float32")},e.prototype.int=function(t){Pr(t,"int");for(var e=new Int32Array(t.size),n=this.readSync(t.dataId),r=0;r<n.length;++r)e[r]=n[r];return this.makeOutput(e,t.shape,"int32")},e.prototype.sigmoid=function(t){Pr(t,"sigmoid");for(var e=new Float32Array(t.size),n=this.readSync(t.dataId),r=0;r<n.length;++r)e[r]=1/(1+Math.exp(-n[r]));return this.makeOutput(e,t.shape,"float32")},e.prototype.softplus=function(t){Pr(t,"softplus");for(var e=Math.log(1.1920928955078125e-7)+2,n=new Float32Array(t.size),r=this.readSync(t.dataId),o=0;o<r.length;++o){var i,a=r[o]>-e,s=r[o]<e,u=Math.exp(r[o]);i=s?u:a?r[o]:Math.log(1+u),n[o]=i}return this.makeOutput(n,t.shape,"float32")},e.prototype.sin=function(t){Pr(t,"sin");for(var e=new Float32Array(t.size),n=this.readSync(t.dataId),r=0;r<n.length;++r)e[r]=Math.sin(n[r]);return this.makeOutput(e,t.shape,"float32")},e.prototype.cos=function(t){Pr(t,"cos");for(var e=new Float32Array(t.size),n=this.readSync(t.dataId),r=0;r<n.length;++r)e[r]=Math.cos(n[r]);return this.makeOutput(e,t.shape,"float32")},e.prototype.tan=function(t){Pr(t,"tan");for(var e=new Float32Array(t.size),n=this.readSync(t.dataId),r=0;r<n.length;++r)e[r]=Math.tan(n[r]);return this.makeOutput(e,t.shape,"float32")},e.prototype.asin=function(t){Pr(t,"asin");for(var e=new Float32Array(t.size),n=this.readSync(t.dataId),r=0;r<n.length;++r)e[r]=Math.asin(n[r]);return this.makeOutput(e,t.shape,"float32")},e.prototype.acos=function(t){Pr(t,"acos");for(var e=new Float32Array(t.size),n=this.readSync(t.dataId),r=0;r<n.length;++r)e[r]=Math.acos(n[r]);return this.makeOutput(e,t.shape,"float32")},e.prototype.atan=function(t){Pr(t,"atan");for(var e=new Float32Array(t.size),n=this.readSync(t.dataId),r=0;r<n.length;++r)e[r]=Math.atan(n[r]);return this.makeOutput(e,t.shape,"float32")},e.prototype.atan2=function(t,e){return Pr([t,e],"atan2"),this.broadcastedBinaryOp(t,e,t.dtype,(function(t,e){return Math.atan2(t,e)}))},e.prototype.sinh=function(t){Pr(t,"sinh");for(var e=new Float32Array(t.size),n=this.readSync(t.dataId),r=0;r<n.length;++r)e[r]=Math.sinh(n[r]);return this.makeOutput(e,t.shape,"float32")},e.prototype.cosh=function(t){Pr(t,"cosh");for(var e=new Float32Array(t.size),n=this.readSync(t.dataId),r=0;r<n.length;++r)e[r]=Math.cosh(n[r]);return this.makeOutput(e,t.shape,"float32")},e.prototype.tanh=function(t){Pr(t,"tanh");for(var e=new Float32Array(t.size),n=this.readSync(t.dataId),r=0;r<n.length;++r)e[r]=R(n[r]);return this.makeOutput(e,t.shape,"float32")},e.prototype.asinh=function(t){Pr(t,"asinh");for(var e=new Float32Array(t.size),n=this.readSync(t.dataId),r=0;r<n.length;++r)e[r]=Math.asinh(n[r]);return this.makeOutput(e,t.shape,"float32")},e.prototype.acosh=function(t){Pr(t,"acosh");for(var e=new Float32Array(t.size),n=this.readSync(t.dataId),r=0;r<n.length;++r)e[r]=Math.acosh(n[r]);return this.makeOutput(e,t.shape,"float32")},e.prototype.atanh=function(t){Pr(t,"atanh");for(var e=new Float32Array(t.size),n=this.readSync(t.dataId),r=0;r<n.length;++r)e[r]=Math.atanh(n[r]);return this.makeOutput(e,t.shape,"float32")},e.prototype.erf=function(t){Pr(t,"erf");for(var e=new Float32Array(t.size),n=this.readSync(t.dataId),r=0;r<n.length;++r){var o=Math.sign(n[r]),i=Math.abs(n[r]),a=1/(1+.3275911*i);e[r]=o*(1-((((1.061405429*a-1.453152027)*a+1.421413741)*a-.284496736)*a+.254829592)*a*Math.exp(-i*i))}return this.makeOutput(e,t.shape,"float32")},e.prototype.step=function(t,e){void 0===e&&(e=0),Pr(t,"step");for(var n=new Float32Array(t.size),r=this.readSync(t.dataId),o=0;o<r.length;++o){var i=r[o];n[o]=isNaN(i)?NaN:i>0?1:e}return this.makeOutput(n,t.shape,"float32")},e.prototype.fusedConv2d=function(t){var e=t.bias,n=t.activation,r=t.preluActivationWeights,o=this.conv2d(t.input,t.filter,t.convInfo);return e&&(o=this.add(o,e)),n&&(o=Nr(this,o,n,r)),o},e.prototype.conv2d=function(t,e,n){Pr([t,e],"conv2d");for(var r=n.filterHeight,o=n.filterWidth,i=n.dilationHeight,a=n.dilationWidth,s=n.padInfo.left,u=n.padInfo.top,c="channelsLast"===n.dataFormat,l=Pe(n.outShape,t.dtype),f=t.strides[0],h=c?t.strides[1]:t.strides[2],d=c?t.strides[2]:1,p=c?1:t.strides[1],v=l.strides[0],g=c?l.strides[1]:l.strides[2],m=c?l.strides[2]:1,y=c?1:l.strides[1],b=this.readSync(t.dataId),x=this.readSync(e.dataId),w=l.values,_=0;_<n.batchSize;++_)for(var E=_*f,R=_*v,C=0;C<n.outHeight;++C)for(var S=R+C*g,O=C*n.strideHeight-u,A=0;A<r;A++){var I=O+A*i;if(!(I<0||I>=n.inHeight))for(var k=A*e.strides[0],T=E+I*h,M=0;M<n.outWidth;++M)for(var D=S+M*m,P=M*n.strideWidth-s,N=0;N<o;N++){var F=P+N*a;if(!(F<0||F>=n.inWidth))for(var L=T+F*d,j=k+N*e.strides[1],B=0;B<n.inChannels;++B){for(var W=b[L+B*p],U=0;U<n.outChannels;++U)w[D+U*y]+=W*x[j+U];j+=n.outChannels}}}return l.toTensor()},e.prototype.conv3d=function(t,e,n){for(var r=n.filterDepth,o=n.filterHeight,i=n.filterWidth,a=n.dilationDepth,s=n.dilationHeight,u=n.dilationWidth,c=n.padInfo.front,l=n.padInfo.left,f=n.padInfo.top,h=Pe(n.outShape,t.dtype),d=this.readSync(t.dataId),p=this.readSync(e.dataId),v=h.values,g=0;g<n.batchSize;++g)for(var m=g*t.strides[0],y=g*h.strides[0],b=0;b<n.outDepth;++b)for(var x=y+b*h.strides[1],w=b*n.strideDepth-c,_=0;_<r;_++){var E=w+_*a;if(!(E<0||E>=n.inDepth))for(var R=_*e.strides[0],C=m+E*t.strides[1],S=0;S<n.outHeight;++S)for(var O=x+S*h.strides[2],A=S*n.strideHeight-f,I=0;I<o;I++){var k=A+I*s;if(!(k<0||k>=n.inHeight))for(var T=R+I*e.strides[1],M=C+k*t.strides[2],D=0;D<n.outWidth;++D)for(var P=O+D*n.outChannels,N=D*n.strideWidth-l,F=0;F<i;F++){var L=N+F*u;if(!(L<0||L>=n.inWidth))for(var j=M+L*n.inChannels,B=T+F*e.strides[2],W=0;W<n.inChannels;++W){for(var U=d[j+W],G=0;G<n.outChannels;++G)v[P+G]+=U*p[B+G];B+=n.outChannels}}}}return h.toTensor()},e.prototype.conv2dDerInput=function(t,e,n){Pr([t,e],"conv2dDerInput");for(var r=Pe(n.inShape,"float32"),o=r.values,i=this.readSync(t.dataId),a=this.readSync(e.dataId),s=e.strides,u=s[0],c=s[1],l=s[2],f=n.batchSize,h=n.filterHeight,d=n.filterWidth,p=n.inChannels,v=n.inHeight,g=n.inWidth,m=n.outChannels,y=n.outHeight,b=n.outWidth,x=n.strideHeight,w=n.strideWidth,_=h-1-n.padInfo.top,E=d-1-n.padInfo.left,R="channelsLast"===n.dataFormat,C=r.strides[0],S=R?r.strides[1]:r.strides[2],O=R?r.strides[2]:1,A=R?1:r.strides[1],I=t.strides[0],k=R?t.strides[1]:t.strides[2],T=R?t.strides[2]:1,M=R?1:t.strides[1],D=0;D<f;++D)for(var P=0;P<p;++P)for(var N=0;N<v;++N)for(var F=N-_,L=Math.max(0,Math.ceil(F/x)),j=Math.min(y,(h+F)/x),B=0;B<g;++B){for(var W=B-E,U=Math.max(0,Math.ceil(W/w)),G=Math.min(b,(d+W)/w),z=0,V=L;V<j;++V)for(var H=V*x-F,q=U;q<G;++q)for(var K=I*D+k*V+T*q,X=u*(h-1-H)+c*(d-1-(q*w-W))+l*P,J=0;J<m;++J)z+=i[K+M*J]*a[X+J];o[C*D+S*N+O*B+A*P]=z}return r.toTensor()},e.prototype.conv3dDerInput=function(t,e,n){for(var r=Pe(n.inShape,"float32"),o=r.values,i=r.strides,a=i[0],s=i[1],u=i[2],c=i[3],l=this.readSync(t.dataId),f=t.strides,h=f[0],d=f[1],p=f[2],v=f[3],g=this.readSync(e.dataId),m=e.strides,y=m[0],b=m[1],x=m[2],w=m[3],_=n.batchSize,E=n.filterDepth,R=n.filterHeight,C=n.filterWidth,S=n.inChannels,O=n.inDepth,A=n.inHeight,I=n.inWidth,k=n.outChannels,T=n.outDepth,M=n.outHeight,D=n.outWidth,P=n.strideDepth,N=n.strideHeight,F=n.strideWidth,L=E-1-n.padInfo.front,j=R-1-n.padInfo.top,B=C-1-n.padInfo.left,W=0;W<_;++W)for(var U=0;U<S;++U)for(var G=0;G<O;++G)for(var z=G-L,V=Math.max(0,Math.ceil(z/P)),H=Math.min(T,(E+z)/P),q=0;q<A;++q)for(var K=q-j,X=Math.max(0,Math.ceil(K/N)),J=Math.min(M,(R+K)/N),Y=0;Y<I;++Y){for(var Q=Y-B,$=Math.max(0,Math.ceil(Q/F)),Z=Math.min(D,(C+Q)/F),tt=0,et=V;et<H;++et)for(var nt=et*P-z,rt=X;rt<J;++rt)for(var ot=rt*N-K,it=$;it<Z;++it)for(var at=h*W+d*et+p*rt+v*it,st=y*(E-1-nt)+b*(R-1-ot)+x*(C-1-(it*F-Q))+w*U,ut=0;ut<k;++ut)tt+=l[at+ut]*g[st+ut];o[a*W+s*G+u*q+c*Y+U]=tt}return r.toTensor()},e.prototype.conv2dDerFilter=function(t,e,n){Pr([t,e],"conv2dDerFilter");for(var r=n.strideHeight,o=n.strideWidth,i=n.filterHeight,a=n.filterWidth,s="channelsLast"===n.dataFormat,u=Pe(n.filterShape,"float32"),c=n.padInfo.left,l=n.padInfo.top,f=this.bufferSync(t),h=this.bufferSync(e),d=0;d<i;++d)for(var p=Math.max(0,Math.ceil((l-d)/r)),v=Math.min(n.outHeight,(n.inHeight+l-d)/r),g=0;g<a;++g)for(var m=Math.max(0,Math.ceil((c-g)/o)),y=Math.min(n.outWidth,(n.inWidth+c-g)/o),b=0;b<n.inChannels;++b)for(var x=0;x<n.outChannels;++x){for(var w=0,_=0;_<n.batchSize;++_)for(var E=p;E<v;++E)for(var R=d+E*r-l,C=m;C<y;++C){var S=g+C*o-c;w+=s?f.get(_,R,S,b)*h.get(_,E,C,x):f.get(_,b,R,S)*h.get(_,x,E,C)}u.set(w,d,g,b,x)}return u.toTensor()},e.prototype.conv3dDerFilter=function(t,e,n){for(var r=n.strideDepth,o=n.strideHeight,i=n.strideWidth,a=n.filterDepth,s=n.filterHeight,u=n.filterWidth,c=Pe(n.filterShape,"float32"),l=c.values,f=c.strides,h=f[0],d=f[1],p=f[2],v=f[3],g=this.readSync(e.dataId),m=e.strides,y=m[0],b=m[1],x=m[2],w=m[3],_=this.readSync(t.dataId),E=t.strides,R=E[0],C=E[1],S=E[2],O=E[3],A=n.padInfo.front,I=n.padInfo.left,k=n.padInfo.top,T=0;T<a;++T)for(var M=Math.max(0,Math.ceil((A-T)/r)),D=Math.min(n.outDepth,(n.inDepth+A-T)/r),P=T*h,N=0;N<s;++N)for(var F=Math.max(0,Math.ceil((k-N)/o)),L=Math.min(n.outHeight,(n.inHeight+k-N)/o),j=N*d+P,B=0;B<u;++B)for(var W=Math.max(0,Math.ceil((I-B)/i)),U=Math.min(n.outWidth,(n.inWidth+I-B)/i),G=B*p+j,z=0;z<n.inChannels;++z)for(var V=z*v+G,H=0;H<n.outChannels;++H){for(var q=0,K=0;K<n.batchSize;++K)for(var X=K*R,J=K*y,Y=M;Y<D;++Y)for(var Q=(T+Y*r-A)*C+X,$=Y*b+J,Z=F;Z<L;++Z)for(var tt=(N+Z*o-k)*S+Q,et=Z*x+$,nt=W;nt<U;++nt){q+=_[(B+nt*i-I)*O+tt+z]*g[nt*w+et+H]}l[V+H]=q}return c.toTensor()},e.prototype.fusedDepthwiseConv2D=function(t){var e=t.bias,n=t.activation,r=t.preluActivationWeights,o=this.depthwiseConv2D(t.input,t.filter,t.convInfo);return e&&(o=this.add(o,e)),n&&(o=Nr(this,o,n,r)),o},e.prototype.depthwiseConv2D=function(t,e,n){Pr([t,e],"depthwiseConv2D");for(var r=n.filterHeight,o=n.filterWidth,i=n.dilationHeight,a=n.dilationWidth,s=n.padInfo.left,u=n.padInfo.top,c=n.outChannels/n.inChannels,l=Pe(n.outShape,t.dtype),f=this.readSync(t.dataId),h=this.readSync(e.dataId),d=l.values,p=0;p<n.batchSize;++p)for(var v=p*t.strides[0],g=p*l.strides[0],m=0;m<n.outHeight;++m)for(var y=g+m*l.strides[1],b=m*n.strideHeight-s,x=0;x<r;++x){var w=b+x*i;if(!(w<0||w>=n.inHeight))for(var _=x*e.strides[0],E=v+w*t.strides[1],R=0;R<n.outWidth;++R)for(var C=y+R*l.strides[2],S=R*n.strideWidth-u,O=0;O<o;++O){var A=S+O*a;if(!(A<0||A>=n.inWidth))for(var I=E+A*n.inChannels,k=C,T=_+O*e.strides[1],M=0;M<n.inChannels;++M){for(var D=f[I+M],P=0;P<c;++P)d[k+P]+=D*h[T+P];k+=c,T+=c}}}return l.toTensor()},e.prototype.depthwiseConv2DDerInput=function(t,e,n){Pr([t,e],"depthwiseConv2DDerInput");for(var r=Pe(n.inShape,"float32"),o=r.values,i=r.strides,a=i[0],s=i[1],u=i[2],c=this.readSync(t.dataId),l=t.strides,f=l[0],h=l[1],d=l[2],p=this.readSync(e.dataId),v=e.strides,g=v[0],m=v[1],y=v[2],b=n.batchSize,x=n.filterHeight,w=n.filterWidth,_=n.inChannels,E=n.inHeight,R=n.inWidth,C=n.outHeight,S=n.outWidth,O=n.strideHeight,A=n.strideWidth,I=x-1-n.padInfo.top,k=w-1-n.padInfo.left,T=n.outChannels/_,M=0;M<b;++M)for(var D=0;D<_;++D)for(var P=0;P<E;++P)for(var N=P-I,F=Math.max(0,Math.ceil(N/O)),L=Math.min(C,(x+N)/O),j=0;j<R;++j){for(var B=j-k,W=Math.max(0,Math.ceil(B/A)),U=Math.min(S,(w+B)/A),G=0,z=F;z<L;++z)for(var V=z*O-N,H=W;H<U;++H)for(var q=f*M+h*z+d*H,K=g*(x-1-V)+m*(w-1-(H*A-B))+y*D,X=0;X<T;++X)G+=c[q+(D*T+X)]*p[K+X];o[a*M+s*P+u*j+D]=G}return r.toTensor()},e.prototype.depthwiseConv2DDerFilter=function(t,e,n){Pr([t,e],"depthwiseConv2DDerFilter");for(var r=n.strideHeight,o=n.strideWidth,i=n.filterHeight,a=n.filterWidth,s=Pe(n.filterShape,"float32"),u=n.padInfo.left,c=n.padInfo.top,l=n.outChannels/n.inChannels,f=this.bufferSync(t),h=this.bufferSync(e),d=0;d<i;++d)for(var p=Math.max(0,Math.ceil((c-d)/r)),v=Math.min(n.outHeight,(n.inHeight+c-d)/r),g=0;g<a;++g)for(var m=Math.max(0,Math.ceil((u-g)/o)),y=Math.min(n.outWidth,(n.inWidth+u-g)/o),b=0;b<n.outChannels;++b){for(var x=Math.trunc(b/l),w=b%l,_=0,E=0;E<n.batchSize;++E)for(var R=p;R<v;++R)for(var C=d+R*r-c,S=m;S<y;++S){_+=f.get(E,C,g+S*o-u,x)*h.get(E,R,S,b)}s.set(_,d,g,x,w)}return s.toTensor()},e.prototype.tile=function(t,e){return Pr(t,"tile"),Mn(this.bufferSync(t),e)},e.prototype.pad=function(t,e,n){Pr(t,"pad");var r=e.map((function(e,n){return e[0]+t.shape[n]+e[1]})),o=e.map((function(t){return t[0]})),i=this.bufferSync(t),a=Pe(r,t.dtype);0!==n&&a.values.fill(n);for(var s=0;s<t.size;s++){var u=i.indexToLoc(s),c=u.map((function(t,e){return t+o[e]}));a.set.apply(a,[i.get.apply(i,u)].concat(c))}return a.toTensor()},e.prototype.transpose=function(t,e){Pr(t,"transpose");for(var n=new Array(t.rank),r=0;r<n.length;r++)n[r]=t.shape[e[r]];var o=this.readSync(t.dataId),i=Pe(n,t.dtype),a=this.bufferSync(t);for(r=0;r<t.size;++r){for(var s=a.indexToLoc(r),u=new Array(s.length),c=0;c<u.length;c++)u[c]=s[e[c]];var l=i.locToIndex(u);i.values[l]=o[r]}return i.toTensor()},e.prototype.gather=function(t,e,n){Pr([t,e],"gather");var r=t.shape.slice(),o=this.readSync(e.dataId);r[n]=o.length;for(var i=Pe(r,t.dtype),a=this.bufferSync(t),s=0;s<i.size;++s){var u=i.indexToLoc(s),c=u.slice();c[n]=o[u[n]];var l=a.locToIndex(c);i.values[s]=a.values[l]}return i.toTensor()},e.prototype.batchToSpaceND=function(t,e,n){Pr([t],"batchToSpaceND");var r=e.reduce((function(t,e){return t*e})),o=Ne(t.shape,e,r),i=Fe(o.length,e.length),a=Le(t.shape,e,r),s=je(n,e.length),u=Be(a,n,e.length);return t.reshape(o).transpose(i).reshape(a).slice(s,u)},e.prototype.spaceToBatchND=function(t,e,n){Pr([t],"spaceToBatchND");var r=e.reduce((function(t,e){return t*e})),o=[[0,0]];o.push.apply(o,n);for(var i=1+e.length;i<t.shape.length;++i)o.push([0,0]);var a=t.pad(o),s=Ne(a.shape,e,r,!1),u=Fe(s.length,e.length,!1),c=Le(a.shape,e,r,!1);return a.reshape(s).transpose(u).reshape(c)},e.prototype.pool=function(t,e,n){Pr(t,"pool");for(var r=e.strideHeight,o=e.strideWidth,i=e.dilationHeight,a=e.dilationWidth,s=e.effectiveFilterHeight,u=e.effectiveFilterWidth,c=e.padInfo.top,l=e.padInfo.left,f="max"===n?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,h=this.readSync(t.dataId),d=Pe(e.outShape,t.dtype),p=d.values,v=e.outShape[1]*e.outShape[2]*e.outShape[3],g=e.outShape[2]*e.outShape[3],m=e.outShape[3],y=0;y<e.batchSize;++y)for(var b=y*v,x=y*t.strides[0],w=0;w<e.inChannels;++w)for(var _=0;_<e.outHeight;++_)for(var E=_*r-c,R=Math.max(0,E),C=Math.min(e.inHeight,s+E),S=b+_*g,O=0;O<e.outWidth;++O){for(var A=O*o-l,I=Math.max(0,A),k=Math.min(e.inWidth,u+A),T=f,M=0,D=0,P=R;P<C;P+=i){for(var N=x+P*t.strides[1],F=I;F<k;F+=a){var L=h[N+F*t.strides[2]+w];"max"===n&&L>T?T=L:"avg"===n&&(M+=L,D++)}if(isNaN(T))break}p[S+O*m+w]="avg"===n?M/D:T}return d.toTensor()},e.prototype.maxPool=function(t,e){return this.pool(t,e,"max")},e.prototype.maxPoolPositions=function(t,e){for(var n=Pe(e.outShape,"int32"),r=e.strideHeight,o=e.strideWidth,i=e.dilationHeight,a=e.dilationWidth,s=e.effectiveFilterHeight,u=e.effectiveFilterWidth,c=e.padInfo.top,l=e.padInfo.left,f=this.bufferSync(t),h=0;h<e.batchSize;++h)for(var d=0;d<e.inChannels;++d)for(var p=0;p<e.outHeight;++p){for(var v=p*r-c,g=v;g<0;)g+=i;for(var m=Math.min(e.inHeight,s+v),y=0;y<e.outWidth;++y){for(var b=y*o-l,x=b;x<0;)x+=a;for(var w=Math.min(e.inWidth,u+b),_=Number.NEGATIVE_INFINITY,E=-1,R=g;R<m;R+=i)for(var C=R-v,S=x;S<w;S+=a){var O=S-b,A=f.get(h,R,S,d);A>_&&(_=A,E=C*u+O)}n.set(E,h,p,y,d)}}return n.toTensor()},e.prototype.maxPoolBackprop=function(t,e,n,r){Pr([e,n],"maxPoolBackprop");for(var o=this.maxPoolPositions(e,r),i=r.strideHeight,a=r.strideWidth,s=r.dilationHeight,u=r.dilationWidth,c=r.effectiveFilterHeight,l=r.effectiveFilterWidth,f=l-1-r.padInfo.left,h=c-1-r.padInfo.top,d=Pe(e.shape,"float32"),p=this.bufferSync(o),v=this.bufferSync(t),g=0;g<r.batchSize;++g)for(var m=0;m<r.inChannels;++m)for(var y=0;y<r.inHeight;++y)for(var b=0;b<r.inWidth;++b){for(var x=y-h,w=b-f,_=0,E=0;E<c;E+=s){var R=(x+E)/i;if(!(R<0||R>=r.outHeight||Math.floor(R)!==R))for(var C=0;C<l;C+=u){var S=(w+C)/a;if(!(S<0||S>=r.outWidth||Math.floor(S)!==S)){var O=c*l-1-p.get(g,R,S,m)===E*l+C?1:0;0!==O&&(_+=v.get(g,R,S,m)*O)}}}d.set(_,g,y,b,m)}return d.toTensor()},e.prototype.avgPoolBackprop=function(t,e,n){Pr([t,e],"avgPoolBackprop");for(var r=n.strideHeight,o=n.strideWidth,i=n.filterHeight,a=n.filterWidth,s=n.dilationHeight,u=n.dilationWidth,c=n.effectiveFilterHeight,l=n.effectiveFilterWidth,f=l-1-n.padInfo.left,h=c-1-n.padInfo.top,d=Pe(e.shape,"float32"),p=1/(i*a),v=this.bufferSync(t),g=0;g<n.batchSize;++g)for(var m=0;m<n.inChannels;++m)for(var y=0;y<n.inHeight;++y)for(var b=0;b<n.inWidth;++b){for(var x=y-h,w=b-f,_=0,E=0;E<c;E+=s){var R=(x+E)/r;if(!(R<0||R>=n.outHeight||Math.floor(R)!==R))for(var C=0;C<l;C+=u){var S=(w+C)/o;S<0||S>=n.outWidth||Math.floor(S)!==S||(_+=v.get(g,R,S,m))}}d.set(_*p,g,y,b,m)}return d.toTensor()},e.prototype.pool3d=function(t,e,n){Pr(t,"pool3d");for(var r=e.strideDepth,o=e.strideHeight,i=e.strideWidth,a=e.dilationDepth,s=e.dilationHeight,u=e.dilationWidth,c=e.effectiveFilterDepth,l=e.effectiveFilterHeight,f=e.effectiveFilterWidth,h=e.padInfo.front,d=e.padInfo.top,p=e.padInfo.left,v="max"===n?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,g=this.readSync(t.dataId),m=Pe(e.outShape,t.dtype),y=m.values,b=e.outShape[1]*e.outShape[2]*e.outShape[3]*e.outShape[4],x=e.outShape[2]*e.outShape[3]*e.outShape[4],w=e.outShape[3]*e.outShape[4],_=e.outShape[4],E=0;E<e.batchSize;++E)for(var R=E*b,C=E*t.strides[0],S=0;S<e.inChannels;++S)for(var O=0;O<e.outDepth;++O){for(var A=O*r-h,I=A;I<0;)I+=a;for(var k=Math.min(e.inDepth,c+A),T=R+O*x,M=0;M<e.outHeight;++M){for(var D=M*o-d,P=D;P<0;)P+=s;for(var N=Math.min(e.inHeight,l+D),F=T+M*w,L=0;L<e.outWidth;++L){for(var j=L*i-p,B=j;B<0;)B+=u;for(var W=Math.min(e.inWidth,f+j),U=F+L*_,G=v,z=0,V=0,H=I;H<k;H+=a){for(var q=C+H*t.strides[1],K=P;K<N;K+=s){for(var X=q+K*t.strides[2],J=B;J<W;J+=u){var Y=g[X+J*t.strides[3]+S];if("max"===n&&Y>G?G=Y:"avg"===n&&(z+=Y,V++),isNaN(G))break}if(isNaN(G))break}if(isNaN(G))break}y[U+S]="avg"===n?z/V:G}}}return m.toTensor()},e.prototype.avgPool3d=function(t,e){return Pr(t,"avgPool3d"),this.pool3d(t,e,"avg").toFloat()},e.prototype.avgPool3dBackprop=function(t,e,n){Pr([t,e],"avgPool3dBackprop");for(var r=n.strideDepth,o=n.strideHeight,i=n.strideWidth,a=n.filterDepth,s=n.filterHeight,u=n.filterWidth,c=n.dilationDepth,l=n.dilationHeight,f=n.dilationWidth,h=n.effectiveFilterDepth,d=n.effectiveFilterHeight,p=n.effectiveFilterWidth,v=h-1-n.padInfo.front,g=p-1-n.padInfo.left,m=d-1-n.padInfo.top,y=Pe(e.shape,"float32"),b=1/(a*s*u),x=this.bufferSync(t),w=0;w<n.batchSize;++w)for(var _=0;_<n.inChannels;++_)for(var E=0;E<n.inDepth;++E)for(var R=0;R<n.inHeight;++R)for(var C=0;C<n.inWidth;++C){for(var S=E-v,O=R-m,A=C-g,I=0,k=0;k<h;k+=c){var T=(S+k)/r;if(!(T<0||T>=n.outDepth||Math.floor(T)!==T))for(var M=0;M<d;M+=l){var D=(O+M)/o;if(!(D<0||D>=n.outHeight||Math.floor(D)!==D))for(var P=0;P<p;P+=f){var N=(A+P)/i;N<0||N>=n.outWidth||Math.floor(N)!==N||(I+=x.get(w,T,D,N,_))}}}y.set(I*b,w,E,R,C,_)}return y.toTensor()},e.prototype.maxPool3d=function(t,e){return Pr(t,"maxPool3d"),this.pool3d(t,e,"max").toFloat()},e.prototype.maxPool3dPositions=function(t,e){for(var n=Pe(e.outShape,"int32"),r=e.strideDepth,o=e.strideHeight,i=e.strideWidth,a=e.dilationDepth,s=e.dilationHeight,u=e.dilationWidth,c=e.effectiveFilterDepth,l=e.effectiveFilterHeight,f=e.effectiveFilterWidth,h=e.padInfo.front,d=e.padInfo.top,p=e.padInfo.left,v=this.bufferSync(t),g=0;g<e.batchSize;++g)for(var m=0;m<e.inChannels;++m)for(var y=0;y<e.outDepth;++y){for(var b=y*r-h,x=b;x<0;)x+=a;for(var w=Math.min(e.inDepth,c+b),_=0;_<e.outHeight;++_){for(var E=_*o-d,R=E;R<0;)R+=s;for(var C=Math.min(e.inHeight,l+E),S=0;S<e.outWidth;++S){for(var O=S*i-p,A=O;A<0;)A+=u;for(var I=Math.min(e.inWidth,f+O),k=Number.NEGATIVE_INFINITY,T=-1,M=x;M<w;M+=a)for(var D=M-b,P=R;P<C;P+=s)for(var N=P-E,F=A;F<I;F+=u){var L=F-O,j=v.get(g,M,P,F,m);j>=k&&(k=j,T=D*l*f+N*l+L)}n.set(T,g,y,_,S,m)}}}return n.toTensor()},e.prototype.maxPool3dBackprop=function(t,e,n,r){Pr([e,n],"maxPool3dBackprop");for(var o=this.maxPool3dPositions(e,r),i=r.strideDepth,a=r.strideHeight,s=r.strideWidth,u=r.dilationDepth,c=r.dilationHeight,l=r.dilationWidth,f=r.effectiveFilterDepth,h=r.effectiveFilterHeight,d=r.effectiveFilterWidth,p=f-1-r.padInfo.front,v=d-1-r.padInfo.left,g=h-1-r.padInfo.top,m=Pe(e.shape,"float32"),y=this.bufferSync(o),b=this.bufferSync(t),x=0;x<r.batchSize;++x)for(var w=0;w<r.inChannels;++w)for(var _=0;_<r.inDepth;++_)for(var E=0;E<r.inHeight;++E)for(var R=0;R<r.inWidth;++R){for(var C=_-p,S=E-g,O=R-v,A=0,I=0;I<f;I+=u){var k=(C+I)/i;if(!(k<0||k>=r.outDepth||Math.floor(k)!==k))for(var T=0;T<h;T+=c){var M=(S+T)/a;if(!(M<0||M>=r.outHeight||Math.floor(M)!==M))for(var D=0;D<d;D+=l){var P=(O+D)/s;if(!(P<0||P>=r.outWidth||Math.floor(P)!==P)){var N=f*h*d-1-y.get(x,k,M,P,w)===I*h*d+T*d+D?1:0;0!==N&&(A+=b.get(x,k,M,P,w)*N)}}}}m.set(A,x,_,E,R,w)}return m.toTensor()},e.prototype.cast=function(t,e){return gn(t,e,this)},e.prototype.reshape=function(t,e){return mn(t,e)},e.prototype.avgPool=function(t,e){return Pr(t,"avgPool"),this.pool(t,e,"avg").toFloat()},e.prototype.resizeBilinear=function(t,e,n,r){Pr(t,"resizeBilinear");for(var o=t.shape,i=o[0],a=o[1],s=o[2],u=o[3],c=this.readSync(t.dataId),l=new Float32Array(w([i,e,n,u])),f=[r&&e>1?a-1:a,r&&n>1?s-1:s],h=[r&&e>1?e-1:e,r&&n>1?n-1:n],d=0,p=f[0]/h[0],v=f[1]/h[1],g=0;g<i;g++)for(var m=0;m<e;m++)for(var y=p*m,b=Math.floor(y),x=y-b,_=Math.min(a-1,Math.ceil(y)),E=g*t.strides[0]+b*t.strides[1],R=g*t.strides[0]+_*t.strides[1],C=0;C<n;C++)for(var S=v*C,O=Math.floor(S),A=S-O,I=Math.min(s-1,Math.ceil(S)),k=E+O*t.strides[2],T=R+O*t.strides[2],M=E+I*t.strides[2],D=R+I*t.strides[2],P=0;P<u;P++){var N=c[k+P],F=c[T+P],L=N+(c[M+P]-N)*A;l[d++]=L+(F+(c[D+P]-F)*A-L)*x}return _e(l,[i,e,n,u])},e.prototype.resizeBilinearBackprop=function(t,e,n){Pr([t,e],"resizeBilinearBackprop");for(var r=e.shape,o=r[0],i=r[1],a=r[2],s=r[3],u=t.shape,c=u[1],l=u[2],f=new Float32Array(o*i*a*s),h=[n&&c>1?i-1:i,n&&l>1?a-1:a],d=[n&&c>1?c-1:c,n&&l>1?l-1:l],p=h[0]/d[0],v=h[1]/d[1],g=this.readSync(t.dataId),m=0,y=0;y<o;y++)for(var b=y*e.strides[0],x=0;x<c;x++)for(var w=x*p,_=Math.floor(w),E=Math.min(Math.ceil(w),i-1),R=b+_*e.strides[1],C=b+E*e.strides[1],S=w-_,O=1-S,A=0;A<l;A++)for(var I=A*v,k=Math.floor(I),T=Math.min(Math.ceil(I),a-1),M=I-k,D=1-M,P=R+k*e.strides[2],N=R+T*e.strides[2],F=C+k*e.strides[2],L=C+T*e.strides[2],j=O*D,B=O*M,W=S*D,U=S*M,G=0;G<s;G++){var z=g[m++];f[P+G]+=z*j,f[N+G]+=z*B,f[F+G]+=z*W,f[L+G]+=z*U}return Ae(f,[o,a,i,s],e.dtype)},e.prototype.resizeNearestNeighbor=function(t,e,n,r){Pr(t,"resizeNearestNeighbor");for(var o=t.shape,i=o[0],a=o[1],s=o[2],u=o[3],c=this.readSync(t.dataId),l=new Float32Array(i*e*n*u),f=[r&&e>1?a-1:a,r&&n>1?s-1:s],h=[r&&e>1?e-1:e,r&&n>1?n-1:n],d=f[0]/h[0],p=f[1]/h[1],v=0,g=0;g<i;g++)for(var m=g*t.strides[0],y=0;y<e;y++)for(var b=d*y,x=m+Math.min(a-1,r?Math.round(b):Math.floor(b))*t.strides[1],w=0;w<n;w++)for(var _=p*w,E=x+Math.min(s-1,r?Math.round(_):Math.floor(_))*t.strides[2],R=0;R<u;R++){l[v++]=c[E+R]}return _e(l,[i,e,n,u],t.dtype)},e.prototype.resizeNearestNeighborBackprop=function(t,e,n){Pr([t,e],"resizeNearestNeighborBackprop");for(var r=e.shape,o=r[0],i=r[1],a=r[2],s=r[3],u=t.shape,c=u[1],l=u[2],f=new Float32Array(o*i*a*s),h=this.readSync(t.dataId),d=[n&&c>1?i-1:i,n&&l>1?a-1:a],p=[n&&c>1?c-1:c,n&&l>1?l-1:l],v=d[0]/p[0],g=d[1]/p[1],m=1/v,y=1/g,b=2*Math.ceil(m)+2,x=2*Math.ceil(y)+2,w=0;w<o;w++)for(var _=w*e.strides[0],E=0;E<i;E++)for(var R=_+E*e.strides[1],C=Math.floor(E*m),S=Math.floor(C-b/2),O=0;O<a;O++)for(var A=R+O*e.strides[2],I=Math.floor(O*y),k=Math.floor(I-x/2),T=0;T<s;T++){for(var M=0,D=0;D<b;D++){var P=D+S;if(!(P<0||P>=c)){var N=_+P*t.strides[1],F=P*v;if(E===Math.min(i-1,n?Math.round(F):Math.floor(F)))for(var L=0;L<x;L++){var j=L+k;if(!(j<0||j>=l)){var B=N+j*t.strides[2],W=j*g;O===Math.min(a-1,n?Math.round(W):Math.floor(W))&&(M+=h[B+T])}}}}f[A+T]=M}return Ae(f,e.shape,e.dtype)},e.prototype.batchNormalization=function(t,e,n,r,o,i){Pr([t,e,n,o,i],"batchNorm");for(var a=this.readSync(t.dataId),s=this.readSync(e.dataId),u=this.readSync(n.dataId),c=o?this.readSync(o.dataId):new Float32Array([1]),l=i?this.readSync(i.dataId):new Float32Array([0]),f=new Float32Array(a.length),h=l.length,d=c.length,p=u.length,v=s.length,g=0,m=0,y=0,b=0,x=0;x<a.length;++x)f[x]=l[g++]+(a[x]-s[m++])*c[y++]/Math.sqrt(u[b++]+r),g>=h&&(g=0),m>=v&&(m=0),y>=d&&(y=0),b>=p&&(b=0);return Ae(f,t.shape)},e.prototype.localResponseNormalization4D=function(t,e,n,r,o){function i(t){for(var n=t%a,r=t-n+Math.max(0,n-e),o=t-n+Math.min(n+e,s),i=0;r<=o;r++){var c=u[r];i+=c*c}return i}Pr(t,"localResponseNormalization4D");for(var a=t.shape[3],s=a-1,u=this.readSync(t.dataId),c=t.size,l=new Float32Array(c),f=0;f<c;f++){var h=i(f),d=u[f]*Math.pow(n+r*h,-o);l[f]=d}return Ae(l,t.shape)},e.prototype.LRNGrad=function(t,e,n,r,o,i,a){Pr(t,"LRNGrad");for(var s=t.shape[3],u=this.readSync(t.dataId),c=this.readSync(e.dataId),l=this.readSync(n.dataId),f=new Float32Array(t.size),h=t.size,d=0;d<h;d++){for(var p=d%s,v=d-p+Math.max(0,p-r),g=d-p+Math.min(s,p+r+1),m=0,y=v;y<g;y++)m+=Math.pow(c[y],2);for(m=i*m+o,y=v;y<g;y++){var b=-2*i*a*c[y]*l[d]/m;d===y&&(b+=Math.pow(m,-a)),f[y]+=b*=u[d]}}return Ae(f,t.shape)},e.prototype.multinomial=function(t,e,n,r){Pr(t,"multinomial");for(var o=e?t:ki(t),i=o.shape[0],a=o.shape[1],s=ke([i,n],"int32"),u=this.readSync(s.dataId),c=this.readSync(o.dataId),l=0;l<i;++l){var f=l*a,h=new Float32Array(a-1);h[0]=c[f];for(var d=1;d<h.length;++d)h[d]=h[d-1]+c[f+d];for(var p=ti(r.toString()),v=l*n,g=0;g<n;++g){var m=p();u[v+g]=h.length;for(var y=0;y<h.length;y++)if(m<h[y]){u[v+g]=y;break}}}return s},e.prototype.oneHot=function(t,e,n,r){Pr(t,"oneHot");var o=new Float32Array(t.size*e);o.fill(r);for(var i=this.readSync(t.dataId),a=0;a<t.size;++a)i[a]>=0&&i[a]<e&&(o[a*e+i[a]]=n);return Se(o,[t.size,e],"int32")},e.prototype.nonMaxSuppression=function(t,e,n,r,o){return Pr(t,"nonMaxSuppression"),Cn(this.readSync(t.dataId),this.readSync(e.dataId),n,r,o)},e.prototype.fft=function(t){return this.fftBatch(t,!1)},e.prototype.ifft=function(t){return this.fftBatch(t,!0)},e.prototype.fftBatch=function(t,e){for(var n=t.shape[0],r=t.shape[1],o=Pe(t.shape,"float32"),i=Pe(t.shape,"float32"),a=Lo(t).as2D(n,r),s=jo(t).as2D(n,r),u=0;u<n;u++)for(var c=a.slice([u,0],[1,r]),l=s.slice([u,0],[1,r]),f=Fo(c,l),h=this.readSync(this.fftImpl(f,e).dataId),d=0;d<r;d++){var p=xn(h,d);o.values[u*r+d]=p.real,i.values[u*r+d]=p.imag}return Fo(o.toTensor(),i.toTensor()).as2D(n,r)},e.prototype.fftImpl=function(t,e){var n=t.as1D(),r=n.size;if(this.isExponentOf2(r)){var o=this.fftRadix2(n,r,e).as2D(t.shape[0],t.shape[1]);return e&&(o=Fo(Lo(o).div(Re(r)),jo(o).div(Re(r)))),o}var i=this.readSync(t.dataId),a=function(t){for(var e=new Float32Array(t.length/2),n=new Float32Array(t.length/2),r=0;r<t.length;r+=2)e[r/2]=t[r],n[r/2]=t[r+1];return{real:e,imag:n}}(this.fourierTransformByMatmul(i,r,e));return Fo(a.real,a.imag).as2D(t.shape[0],t.shape[1])},e.prototype.isExponentOf2=function(t){return 0==(t&t-1)},e.prototype.fftRadix2=function(t,e,n){if(1===e)return t;var r=this.readSync(t.dataId),o=e/2,i=function(t){for(var e=Math.ceil(t.length/4),n=new Float32Array(e),r=new Float32Array(e),o=0;o<t.length;o+=4)n[Math.floor(o/4)]=t[o],r[Math.floor(o/4)]=t[o+1];return{real:n,imag:r}}(r),a=Fo(i.real,i.imag).as1D(),s=function(t){for(var e=Math.floor(t.length/4),n=new Float32Array(e),r=new Float32Array(e),o=2;o<t.length;o+=4)n[Math.floor(o/4)]=t[o],r[Math.floor(o/4)]=t[o+1];return{real:n,imag:r}}(r),u=Fo(s.real,s.imag).as1D();a=this.fftRadix2(a,o,n),u=this.fftRadix2(u,o,n);var c=function(t,e){for(var n=new Float32Array(t/2),r=new Float32Array(t/2),o=0;o<Math.ceil(t/2);o++){var i=(e?2:-2)*Math.PI*(o/t);n[o]=Math.cos(i),r[o]=Math.sin(i)}return{real:n,imag:r}}(e,n),l=Fo(c.real,c.imag).mul(u),f=a.add(l),h=a.sub(l),d=Lo(f).concat(Lo(h)),p=jo(f).concat(jo(h));return Fo(d,p).as1D()},e.prototype.fourierTransformByMatmul=function(t,e,n){for(var r=new Float32Array(2*e),o=0;o<e;o++){for(var i=0,a=0,s=0;s<e;s++){var u=_n(o*s,e,n),c=xn(t,s);i+=c.real*u.real-c.imag*u.imag,a+=c.real*u.imag+c.imag*u.real}n&&(i/=e,a/=e),wn(r,i,a,o)}return r},e.prototype.depthToSpace=function(t,e,n){m("NHWC"===n,(function(){return"Only NHWC dataFormat supported on CPU for depthToSpace. Got "+n})),m(e>1,(function(){return"blockSize should be > 1 for depthToSpace, but was: "+e}));for(var r=t.shape[0],o=t.shape[1],i=t.shape[2],a=t.shape[3],s=o*e,u=i*e,c=a/(e*e),l=this.readSync(t.dataId),f=new Float32Array(r*s*u*c),h=0,d=0;d<r;++d)for(var p=0;p<s;++p)for(var v=Math.floor(p/e),g=p%e,y=0;y<u;++y)for(var b=Math.floor(y/e),x=(g*e+y%e)*c,w=0;w<c;++w){f[h++]=l[w+x+a*(b+i*(v+o*d))]}return Ae(f,[r,s,u,c])},e.prototype.broadcastedBinaryOp=function(t,e,n,r){var o=nn(t.shape,e.shape),i=Pe(o,n),a=this.readSync(t.dataId),s=this.readSync(e.dataId),u=tn(t.shape,o),c=tn(e.shape,o),l=i.values;if(u.length+c.length===0)for(var f=0;f<l.length;++f)l[f]=r(a[f%a.length],s[f%s.length]);else{var h=this.bufferSync(t),d=this.bufferSync(e),p=function(n){var o=i.indexToLoc(n),f=o.slice(-t.rank);u.forEach((function(t){return f[t]=0}));var p=h.locToIndex(f),v=o.slice(-e.rank);c.forEach((function(t){return v[t]=0}));var g=d.locToIndex(v);l[n]=r(a[p],s[g])};for(f=0;f<l.length;++f)p(f)}return i.toTensor()},e.prototype.broadcastedBinaryComplexOp=function(t,e,n){var r=nn(t.shape,e.shape),o=Pe(r,"float32"),i=Pe(r,"float32"),a=this.readSync(t.dataId),s=this.readSync(e.dataId),u=tn(t.shape,r),c=tn(e.shape,r),l=o.values,f=i.values;if(u.length+c.length===0)for(var h=0;h<l.length;h++){var d=h%a.length,p=h%s.length,v=n(a[2*d],a[2*d+1],s[2*p],s[2*p+1]);l[h]=v.real,f[h]=v.imag}else{var g=this.bufferSync(this.data.get(t.dataId).complexTensors.real),m=this.bufferSync(this.data.get(e.dataId).complexTensors.real),y=function(r){var i=o.indexToLoc(r),h=i.slice(-t.rank);u.forEach((function(t){return h[t]=0}));var d=g.locToIndex(h),p=i.slice(-e.rank);c.forEach((function(t){return p[t]=0}));var v=m.locToIndex(p),y=n(a[2*d],a[2*d+1],s[2*v],s[2*v+1]);l[r]=y.real,f[r]=y.imag};for(h=0;h<l.length;h++)y(h)}return this.complex(o.toTensor(),i.toTensor())},e.prototype.split=function(t,e,n){return Tn(t,e,n)},e.prototype.dispose=function(){},e.prototype.floatPrecision=function(){return 32},e.prototype.epsilon=function(){return 1e-7},e.prototype.cropAndResize=function(t,e,n,r,o,i){for(var a=t.shape,s=a[0],u=a[1],c=a[2],l=a[3],f=e.shape[0],h=r[0],d=r[1],p=Pe([f,h,d,l],"float32"),v=this.readSync(e.dataId),g=this.readSync(n.dataId),m=this.readSync(t.dataId),y=t.strides,b=p.strides,x=0;x<f;x++){var w=4*x,_=v[w],E=v[w+1],R=v[w+2],C=v[w+3],S=g[x];if(!(S>=s))for(var O=h>1?(R-_)*(u-1)/(h-1):0,A=d>1?(C-E)*(c-1)/(d-1):0,I=0;I<h;I++){var k=h>1?_*(u-1)+I*O:.5*(_+R)*(u-1);if(k<0||k>u-1)for(var T=0;T<d;T++)for(var M=0;M<l;M++){var D=M+T*b[2]+I*b[1]+x*b[0];p.values[D]=i}else if("bilinear"===o){var P=Math.floor(k),N=Math.ceil(k),F=k-P;for(T=0;T<d;T++)if((H=d>1?E*(c-1)+T*A:.5*(E+C)*(c-1))<0||H>c-1)for(M=0;M<l;M++)p.values[D=M+T*b[2]+I*b[1]+x*b[0]]=i;else{var L=Math.floor(H),j=Math.ceil(H),B=H-L;for(M=0;M<l;M++){var W=m[D=M+L*y[2]+P*y[1]+S*y[0]],U=m[D=M+j*y[2]+P*y[1]+S*y[0]],G=m[D=M+L*y[2]+N*y[1]+S*y[0]],z=W+(U-W)*B,V=G+(m[D=M+j*y[2]+N*y[1]+S*y[0]]-G)*B;p.values[D=M+T*b[2]+I*b[1]+x*b[0]]=z+(V-z)*F}}}else for(T=0;T<d;++T){var H;if((H=d>1?E*(c-1)+T*A:.5*(E+C)*(c-1))<0||H>c-1)for(M=0;M<l;M++)p.values[D=M+T*b[2]+I*b[1]+x*b[0]]=i;else{var q=Math.round(H),K=Math.round(k);for(M=0;M<l;M++){p.values[M+T*b[2]+I*b[1]+x*b[0]]=m[M+q*y[2]+K*y[1]+S*y[0]]}}}}}return p.toTensor()},e.prototype.sparseToDense=function(t,e,n,r){var o=Ve(0,t,n);return this.scatter(t,e,n,o.outputSize,o.sliceSize,o.numUpdates,o.sliceRank,o.strides,r,!1)},e.prototype.gatherND=function(t,e){var n=e.shape,r=n[n.length-1],o=We(t,e),i=o[0],a=o[1],s=o[2],u=o[3];if(0===a)return _e([],i,t.dtype);for(var c=new uo([a,s],t.dtype),l=this.readSync(e.dataId),f=this.readSync(t.dataId),h=0;h<a;h++){for(var d=[],p=0,v=0;v<r;v++){var g=l[h*r+v];p+=g*u[v],d.push(g)}if(p<0||p>=t.size/s)throw new Error("Invalid indices: "+d+" does not index into "+t.shape);for(var m=0;m<s;m++)c.values[h*s+m]=f[p*s+m]}return c.toTensor().reshape(i)},e.prototype.scatterND=function(t,e,n){var r=Ve(0,t,n),o=r.sliceRank,i=r.numUpdates,a=r.sliceSize,s=r.strides,u=r.outputSize,c=Re(0);return this.scatter(t,e,n,u,a,i,o,s,c,!0)},e.prototype.fill=function(t,e,n){var r=M(n=n||G(e),w(t));return r.fill(e),Co.makeTensor(r,t,n,this)},e.prototype.onesLike=function(t){if("string"===t.dtype)throw new Error("onesLike is not supported for string tensors");return this.fill(t.shape,1,t.dtype)},e.prototype.zerosLike=function(t){var e=M(t.dtype,w(t.shape));return this.makeOutput(e,t.shape,t.dtype)},e.prototype.linspace=function(t,e,n){return yn(t,e,n)},e.prototype.scatter=function(t,e,n,r,o,i,a,s,u,c){var l=[r/o,o],f=this.readSync(t.dataId),h=this.readSync(e.dataId);if(0===r)return _e([],n,e.dtype);var d=new uo(l,e.dtype);d.values.fill(this.readSync(u.dataId)[0]);for(var p=0;p<i;p++){for(var v=[],g=0,m=0;m<a;m++){var y=f[p*a+m];v.push(y),g+=y*s[m]}if(g<0||g>=r/o)throw new Error("Invalid indices: "+v+" does not index into "+n);for(var b=0;b<o;b++)c?d.values[g*o+b]+=h[p*o+b]:d.values[g*o+b]=0===e.rank?h[0]:h[p*o+b]}return d.toTensor().reshape(n)},e}(Di);Co.registerBackend("cpu",(function(){return new tf}),1);for(var ef=0,nf=[{kernelName:"NonMaxSuppressionV5",backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.attrs,r=e.boxes,o=e.scores,i=n.maxOutputSize,a=n.iouThreshold,s=n.scoreThreshold,u=n.softNmsSigma,c=t.backend;Pr(r,"NonMaxSuppressionWithScore");var l=Sn(c.data.get(r.dataId).values,c.data.get(o.dataId).values,i,a,s,u);return[l.selectedIndices,l.selectedScores]}},{kernelName:"Square",backendName:"cpu",kernelFunc:function(t){var e=t.inputs.x,n=t.backend;Pr(e,"square");for(var r=n.data.get(e.dataId).values,o=new Float32Array(r.length),i=0;i<r.length;++i){var a=r[i];o[i]=a*a}return{dataId:n.write(o,e.shape,e.dtype),shape:e.shape,dtype:e.dtype}}},{kernelName:Ps,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=e.a,r=e.b,o=t.backend;Pr([n,r],Ps);var i=o.data.get(n.dataId).values,a=o.data.get(r.dataId).values,s=function(t,e,n,r,o,i){var a=nn(t,e),s=a.length,u=H(a),c=T(o,w(a)),l=t.length,f=e.length,h=H(t),d=H(e),p=tn(t,a),v=tn(e,a);if(p.length+v.length===0)for(var g=0;g<c.length;++g)c[g]=i(n[g%n.length],r[g%r.length]);else{var m=function(t){var e=et(t,s,u),o=e.slice(-l);p.forEach((function(t){return o[t]=0}));var a=tt(o,l,h),g=e.slice(-f);v.forEach((function(t){return g[t]=0}));var m=tt(g,f,d);c[t]=i(n[a],r[m])};for(g=0;g<c.length;++g)m(g)}return[c,a]}(n.shape,r.shape,i,a,n.dtype,(function(t,e){var n=t-e;return n*n})),u=s[1];return{dataId:o.write(s[0],u,n.dtype),shape:u,dtype:n.dtype}}}];ef<nf.length;ef++)f(nf[ef]);for(var rf,of=function(t){this.variableNames=["A"];var e=Ln(),n=t[0],r=t[1];this.outputShape=t,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2("+r+".0, "+n+".0);\n\n        vec4 values = "+e.texture2D+"(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    "},af=function(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var e=Ln(),n=t[0],r=t[1];this.outputShape=t,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n\n        vec4 result = vec4(0.);\n\n        for(int row=0; row<=1; row++) {\n          for(int col=0; col<=1; col++) {\n            texC = coords[1] + row;\n            depth = coords[2] + col;\n\n            vec2 uv = (vec2(texC, texR) + halfCR) /\n                       vec2("+r+".0, "+n+".0);\n            vec4 values = "+e.texture2D+"(A, uv);\n            float value;\n            if (depth == 0) {\n              value = values.r;\n            } else if (depth == 1) {\n              value = values.g;\n            } else if (depth == 2) {\n              value = values.b;\n            } else if (depth == 3) {\n              value = values.a;\n            }\n\n            result[row * 2 + col] = floor(value * 255.0 + 0.5);\n          }\n        }\n\n        "+e.output+" = result;\n      }\n    "},sf=0,uf=[{kernelName:"FromPixels",backendName:"webgl",kernelFunc:function(t){var e=t.backend,n=t.inputs.pixels,r="undefined"!=typeof HTMLVideoElement&&n instanceof HTMLVideoElement,o="undefined"!=typeof HTMLImageElement&&n instanceof HTMLImageElement,i=r?[n.videoWidth,n.videoHeight]:[n.width,n.height],a=i[0],s=i[1],c=[s,a],l=[s,a,t.attrs.numChannels];(o||r)&&(null==rf&&(rf=document.createElement("canvas").getContext("2d")),rf.canvas.width=a,rf.canvas.height=s,rf.drawImage(n,0,0,a,s),n=rf.canvas);var f=e.makeTensorInfo(c,"int32");e.texData.get(f.dataId).usage=Ao.PIXELS,e.gpgpu.uploadPixelDataToTexture(e.getTexture(f.dataId),n);var h=u().getBool("WEBGL_PACK")?new af(l):new of(l),d=e.runWebGLProgram(h,[f],"int32");return e.disposeData(f.dataId),d}},{kernelName:"NonMaxSuppressionV5",backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs;ae("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var o=e.scores,i=r.maxOutputSize,a=r.iouThreshold,s=r.scoreThreshold,u=r.softNmsSigma,c=n,l=Sn(c.readSync(e.boxes.dataId),c.readSync(o.dataId),i,a,s,u);return[l.selectedIndices,l.selectedScores]}},{kernelName:"Square",backendName:"webgl",kernelFunc:function(t){var e=t.inputs.x,n=t.backend,r=new ds(e.shape,"return x * x;");return n.runWebGLProgram(r,[e],e.dtype)}},{kernelName:Ps,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=e.a,r=e.b,o=t.backend,i=u().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new ta("return (a - b) * (a - b);",n.shape,r.shape):new $i("return (a - b) * (a - b);",n.shape,r.shape);return o.compileAndRun(i,[n,r])}}];sf<uf.length;sf++)f(uf[sf]);for(var cf=0,lf=[{kernelName:"Square",gradFunc:function(t,e){var n=e[0];return{x:function(){return t.mul(n.toFloat().mul(2))}}}},{kernelName:Ps,gradFunc:function(t,e){var n=e[0],r=e[1],o=Re(2);return{a:function(){return Vu(t,Vu(o,Ju(n,r)))},b:function(){return Vu(t,Vu(o,Ju(r,n)))}}}}];cf<lf.length;cf++)h(lf[cf]);var ff=function(){function t(){}return t.prototype.fetch=function(t,e){return fetch(t,e)},t.prototype.now=function(){return performance.now()},t.prototype.encode=function(t,e){if("utf-8"!==e&&"utf8"!==e)throw new Error("Browser's encoder only supports utf-8, but got "+e);return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(t)},t.prototype.decode=function(t,e){return new TextDecoder(e).decode(t)},t}();u().get("IS_BROWSER")&&u().setPlatform("browser",new ff);var hf,df=function(){function t(){this.util=n(2),this.textEncoder=new this.util.TextEncoder}return t.prototype.fetch=function(t,e){return null!=u().global.fetch?u().global.fetch(t,e):(null==hf&&(hf=n(1)),hf(t,e))},t.prototype.now=function(){var t=process.hrtime();return 1e3*t[0]+t[1]/1e6},t.prototype.encode=function(t,e){if("utf-8"!==e&&"utf8"!==e)throw new Error("Node built-in encoder only supports utf-8, but got "+e);return this.textEncoder.encode(t)},t.prototype.decode=function(t,e){return 0===t.length?"":new this.util.TextDecoder(e).decode(t)},t}();u().get("IS_NODE")&&u().setPlatform("node",new df);var pf={float32:4,int32:4,uint16:2,uint8:1,bool:1},vf="undefined"!=typeof Buffer&&("undefined"==typeof Blob||"undefined"==typeof atob||"undefined"==typeof btoa),gf=function(){function t(){this.saveRouters=[],this.loadRouters=[]}return t.getInstance=function(){return null==t.instance&&(t.instance=new t),t.instance},t.registerSaveRouter=function(e){t.getInstance().saveRouters.push(e)},t.registerLoadRouter=function(e){t.getInstance().loadRouters.push(e)},t.getSaveHandlers=function(e){return t.getHandlers(e,"save")},t.getLoadHandlers=function(e,n){return t.getHandlers(e,"load",n)},t.getHandlers=function(e,n,r){var o=[];return("load"===n?t.getInstance().loadRouters:t.getInstance().saveRouters).forEach((function(t){var n=t(e,r);null!==n&&o.push(n)})),o},t}(),mf="://",yf=function(){function t(){this.managers={}}return t.getInstance=function(){return null==t.instance&&(t.instance=new t),t.instance},t.registerManager=function(e,n){m(null!=e,(function(){return"scheme must not be undefined or null."})),e.endsWith(mf)&&(e=e.slice(0,e.indexOf(mf))),m(e.length>0,(function(){return"scheme must not be an empty string."}));var r=t.getInstance();m(null==r.managers[e],(function(){return"A model store manager is already registered for scheme '"+e+"'."})),r.managers[e]=n},t.getManager=function(t){var e=this.getInstance().managers[t];if(null==e)throw new Error("Cannot find model manager for scheme '"+t+"'");return e},t.getSchemes=function(){return Object.keys(this.getInstance().managers)},t}(),bf="models_store",xf="model_info_store",wf=function(){function t(t){if(this.indexedDB=Vr(),null==t||!t)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=t}return t.prototype.save=function(t){return i(this,void 0,void 0,(function(){return a(this,(function(){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return[2,this.databaseAction(this.modelPath,t)]}))}))},t.prototype.load=function(){return i(this,void 0,void 0,(function(){return a(this,(function(){return[2,this.databaseAction(this.modelPath)]}))}))},t.prototype.databaseAction=function(t,e){var n=this;return new Promise((function(t,r){var o=n.indexedDB.open("tensorflowjs",1);o.onupgradeneeded=function(){return Hr(o)},o.onsuccess=function(){var i=o.result;if(null==e){var a=i.transaction(bf,"readonly"),s=a.objectStore(bf).get(n.modelPath);s.onsuccess=function(){if(null==s.result)return i.close(),r(new Error("Cannot find model with path '"+n.modelPath+"' in IndexedDB."));t(s.result.modelArtifacts)},s.onerror=function(){return i.close(),r(s.error)},a.oncomplete=function(){return i.close()}}else{var u,c=Ur(e),l=i.transaction(xf,"readwrite"),f=l.objectStore(xf),h=f.put({modelPath:n.modelPath,modelArtifactsInfo:c});h.onsuccess=function(){var o=(u=i.transaction(bf,"readwrite")).objectStore(bf).put({modelPath:n.modelPath,modelArtifacts:e,modelArtifactsInfo:c});o.onsuccess=function(){return t({modelArtifactsInfo:c})},o.onerror=function(){var t=(f=l.objectStore(xf)).delete(n.modelPath);t.onsuccess=function(){return i.close(),r(o.error)},t.onerror=function(){return i.close(),r(o.error)}}},h.onerror=function(){return i.close(),r(h.error)},l.oncomplete=function(){null==u?i.close():u.oncomplete=function(){return i.close()}}}},o.onerror=function(){return r(o.error)}}))},t.URL_SCHEME="indexeddb://",t}(),_f=function(t){return u().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(wf.URL_SCHEME)?(e=t.slice(wf.URL_SCHEME.length),new wf(e)):null;var e};gf.registerSaveRouter(_f),gf.registerLoadRouter(_f);var Ef=function(){function t(){this.indexedDB=Vr()}return t.prototype.listModels=function(){return i(this,void 0,void 0,(function(){var t=this;return a(this,(function(){return[2,new Promise((function(e,n){var r=t.indexedDB.open("tensorflowjs",1);r.onupgradeneeded=function(){return Hr(r)},r.onsuccess=function(){var t=r.result,o=t.transaction(xf,"readonly"),i=o.objectStore(xf).getAll();i.onsuccess=function(){for(var t={},n=0,r=i.result;n<r.length;n++){var o=r[n];t[o.modelPath]=o.modelArtifactsInfo}e(t)},i.onerror=function(){return t.close(),n(i.error)},o.oncomplete=function(){return t.close()}},r.onerror=function(){return n(r.error)}}))]}))}))},t.prototype.removeModel=function(t){return i(this,void 0,void 0,(function(){var e=this;return a(this,(function(){var n;return t=(n=t).startsWith(wf.URL_SCHEME)?n.slice(wf.URL_SCHEME.length):n,[2,new Promise((function(n,r){var o=e.indexedDB.open("tensorflowjs",1);o.onupgradeneeded=function(){return Hr(o)},o.onsuccess=function(){var e,i=o.result,a=i.transaction(xf,"readwrite"),s=a.objectStore(xf),u=s.get(t);u.onsuccess=function(){if(null==u.result)return i.close(),r(new Error("Cannot find model with path '"+t+"' in IndexedDB."));var o=s.delete(t),a=function(){var o=(e=i.transaction(bf,"readwrite")).objectStore(bf).delete(t);o.onsuccess=function(){return n(u.result.modelArtifactsInfo)},o.onerror=function(){return r(u.error)}};o.onsuccess=a,o.onerror=function(){return a(),i.close(),r(u.error)}},u.onerror=function(){return i.close(),r(u.error)},a.oncomplete=function(){null==e?i.close():e.oncomplete=function(){return i.close()}}},o.onerror=function(){return r(o.error)}}))]}))}))},t}();if(u().getBool("IS_BROWSER"))try{yf.registerManager(wf.URL_SCHEME,new Ef)}catch(bo){}var Rf="/",Cf="tensorflowjs_models",Sf="info",Of="model_topology",Af="weight_specs",If="weight_data",kf="model_metadata",Tf=function(){function t(t){if(!u().getBool("IS_BROWSER")||"undefined"==typeof window||void 0===window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==t||!t)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=t,this.keys=qr(this.modelPath)}return t.prototype.save=function(t){return i(this,void 0,void 0,(function(){var e,n,r;return a(this,(function(){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");e=JSON.stringify(t.modelTopology),n=JSON.stringify(t.weightSpecs),r=Ur(t);try{return this.LS.setItem(this.keys.info,JSON.stringify(r)),this.LS.setItem(this.keys.topology,e),this.LS.setItem(this.keys.weightSpecs,n),this.LS.setItem(this.keys.weightData,function(t){if(vf)return Buffer.from(t).toString("base64");for(var e=new Uint8Array(t),n="",r=0,o=e.length;r<o;r++)n+=String.fromCharCode(e[r]);return btoa(n)}(t.weightData)),this.LS.setItem(this.keys.modelMetadata,JSON.stringify({format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,userDefinedMetadata:t.userDefinedMetadata})),[2,{modelArtifactsInfo:r}]}catch(t){throw this.LS.removeItem(this.keys.info),this.LS.removeItem(this.keys.topology),this.LS.removeItem(this.keys.weightSpecs),this.LS.removeItem(this.keys.weightData),this.LS.removeItem(this.keys.modelMetadata),new Error("Failed to save model '"+this.modelPath+"' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes="+r.modelTopologyBytes+", weightSpecsBytes="+r.weightSpecsBytes+", weightDataBytes="+r.weightDataBytes+".")}return[2]}))}))},t.prototype.load=function(){return i(this,void 0,void 0,(function(){var t,e,n,r,o,i,s;return a(this,(function(){if(null==(t=JSON.parse(this.LS.getItem(this.keys.info))))throw new Error("In local storage, there is no model with name '"+this.modelPath+"'");if("JSON"!==t.modelTopologyType)throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");if(e={},null==(n=JSON.parse(this.LS.getItem(this.keys.topology))))throw new Error("In local storage, the topology of model '"+this.modelPath+"' is missing.");if(e.modelTopology=n,null==(r=JSON.parse(this.LS.getItem(this.keys.weightSpecs))))throw new Error("In local storage, the weight specs of model '"+this.modelPath+"' are missing.");if(e.weightSpecs=r,null!=(o=this.LS.getItem(this.keys.modelMetadata))&&(i=JSON.parse(o),e.format=i.format,e.generatedBy=i.generatedBy,e.convertedBy=i.convertedBy,e.userDefinedMetadata=i.userDefinedMetadata),null==(s=this.LS.getItem(this.keys.weightData)))throw new Error("In local storage, the binary weight values of model '"+this.modelPath+"' are missing.");return e.weightData=function(t){if(vf){var e=Buffer.from(t,"base64");return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}for(var n=atob(t),r=new Uint8Array(n.length),o=0;o<n.length;++o)r.set([n.charCodeAt(o)],o);return r.buffer}(s),[2,e]}))}))},t.URL_SCHEME="localstorage://",t}(),Mf=function(t){return u().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Tf.URL_SCHEME)?(e=t.slice(Tf.URL_SCHEME.length),new Tf(e)):null;var e};gf.registerSaveRouter(Mf),gf.registerLoadRouter(Mf);var Df=function(){function t(){m(u().getBool("IS_BROWSER"),(function(){return"Current environment is not a web browser"})),m("undefined"==typeof window||void 0!==window.localStorage,(function(){return"Current browser does not appear to support localStorage"})),this.LS=window.localStorage}return t.prototype.listModels=function(){return i(this,void 0,void 0,(function(){var t,e,n,r,o,i;return a(this,(function(){for(t={},e=Cf+Rf,n=Rf+Sf,r=0;r<this.LS.length;++r)(o=this.LS.key(r)).startsWith(e)&&o.endsWith(n)&&(i=Kr(o),t[i]=JSON.parse(this.LS.getItem(o)));return[2,t]}))}))},t.prototype.removeModel=function(t){return i(this,void 0,void 0,(function(){var e,n;return a(this,(function(){var r;if(t=(r=t).startsWith(Tf.URL_SCHEME)?r.slice(Tf.URL_SCHEME.length):r,e=qr(t),null==this.LS.getItem(e.info))throw new Error("Cannot find model at path '"+t+"'");return n=JSON.parse(this.LS.getItem(e.info)),this.LS.removeItem(e.info),this.LS.removeItem(e.topology),this.LS.removeItem(e.weightSpecs),this.LS.removeItem(e.weightData),[2,n]}))}))},t}();if(u().getBool("IS_BROWSER"))try{yf.registerManager(Tf.URL_SCHEME,new Df)}catch(bo){}var Pf=function(){function t(e){if(!u().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(t.URL_SCHEME)&&(e=e.slice(t.URL_SCHEME.length)),null!=e&&0!==e.length||(e="model"),this.modelTopologyFileName=e+".json",this.weightDataFileName=e+".weights.bin"}return t.prototype.save=function(t){return i(this,void 0,void 0,(function(){var e,n,r,o;return a(this,(function(i){switch(i.label){case 0:if("undefined"==typeof document)throw new Error("Browser downloads are not supported in this environment since `document` is not present");if(e=window.URL.createObjectURL(new Blob([t.weightData],{type:"application/octet-stream"})),!(t.modelTopology instanceof ArrayBuffer))return[3,1];throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");case 1:return n=window.URL.createObjectURL(new Blob([JSON.stringify({modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,weightsManifest:[{paths:["./"+this.weightDataFileName],weights:t.weightSpecs}]})],{type:"application/json"})),(r=null==this.jsonAnchor?document.createElement("a"):this.jsonAnchor).download=this.modelTopologyFileName,r.href=n,[4,Xr((function(){return r.dispatchEvent(new MouseEvent("click"))}))];case 2:return i.sent(),null==t.weightData?[3,4]:((o=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,o.href=e,[4,Xr((function(){return o.dispatchEvent(new MouseEvent("click"))}))]);case 3:i.sent(),i.label=4;case 4:return[2,{modelArtifactsInfo:Ur(t)}]}}))}))},t.URL_SCHEME="downloads://",t}(),Nf=function(){function t(t){if(null==t||t.length<1)throw new Error("When calling browserFiles, at least 1 file is required, but received "+t);this.files=t}return t.prototype.load=function(){return i(this,void 0,void 0,(function(){var t,e,n=this;return a(this,(function(){return t=this.files[0],e=this.files.slice(1),[2,new Promise((function(r,o){var i=new FileReader;i.onload=function(i){var a=JSON.parse(i.target.result),s=a.modelTopology;if(null!=s){0===e.length&&r({modelTopology:s});var u=a.weightsManifest;if(null!=u){var c;try{c=n.checkManifestAndWeightFiles(u,e)}catch(t){return void o(t)}var l=[],f=[],h=[];u.forEach((function(t){t.paths.forEach((function(t){f.push(t),h.push(null)})),l.push.apply(l,t.weights)})),u.forEach((function(t){t.paths.forEach((function(t){var e=new FileReader;e.onload=function(e){var n=e.target.result,o=f.indexOf(t);h[o]=n,-1===h.indexOf(null)&&r({modelTopology:s,weightSpecs:l,weightData:Br(h),format:a.format,generatedBy:a.generatedBy,convertedBy:a.convertedBy,userDefinedMetadata:a.userDefinedMetadata})},e.onerror=function(){return o("Failed to weights data from file of path '"+t+"'.")},e.readAsArrayBuffer(c[t])}))}))}else o(new Error("weightManifest field is missing from file "+t.name))}else o(new Error("modelTopology field is missing from file "+t.name))},i.onerror=function(){return o("Failed to read model topology and weights manifest JSON from file '"+t.name+"'. BrowserFiles supports loading Keras-style tf.Model artifacts only.")},i.readAsText(t)}))]}))}))},t.prototype.checkManifestAndWeightFiles=function(t,e){for(var n=[],r=e.map((function(t){return Wr(t.name)})),o={},i=0,a=t;i<a.length;i++)a[i].paths.forEach((function(t){var i=Wr(t);if(-1!==n.indexOf(i))throw new Error("Duplicate file basename found in weights manifest: '"+i+"'");if(n.push(i),-1===r.indexOf(i))throw new Error("Weight file with basename '"+i+"' is not provided.");o[t]=e[r.indexOf(i)]}));if(n.length!==e.length)throw new Error("Mismatch in the number of files in weights manifest ("+n.length+") and the number of weight files provided ("+e.length+").");return o},t}();gf.registerSaveRouter((function(t){return u().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Pf.URL_SCHEME)?function(t){return void 0===t&&(t="model"),new Pf(t)}(t.slice(Pf.URL_SCHEME.length)):null}));var Ff=function(){function t(t,e){if(this.DEFAULT_METHOD="POST",null==e&&(e={}),this.weightPathPrefix=e.weightPathPrefix,this.onProgress=e.onProgress,null!=e.fetchFunc?(m("function"==typeof e.fetchFunc,(function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"})),this.fetch=e.fetchFunc):this.fetch=u().platform.fetch,m(null!=t&&t.length>0,(function(){return"URL path for http must not be null, undefined or empty."})),Array.isArray(t)&&m(2===t.length,(function(){return"URL paths for http must have a length of 2, (actual length is "+t.length+")."})),this.path=t,null!=e.requestInit&&null!=e.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=e.requestInit||{}}return t.prototype.save=function(t){return i(this,void 0,void 0,(function(){var e,n;return a(this,(function(o){switch(o.label){case 0:if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");return(e=r({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,e.body.append("model.json",new Blob([JSON.stringify({modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,userDefinedMetadata:t.userDefinedMetadata,weightsManifest:[{paths:["./model.weights.bin"],weights:t.weightSpecs}]})],{type:"application/json"}),"model.json"),null!=t.weightData&&e.body.append("model.weights.bin",new Blob([t.weightData],{type:"application/octet-stream"}),"model.weights.bin"),[4,this.fetch(this.path,e)];case 1:if((n=o.sent()).ok)return[2,{modelArtifactsInfo:Ur(t),responses:[n]}];throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+n.status+".")}}))}))},t.prototype.load=function(){return i(this,void 0,void 0,(function(){var t,e,n,r,o,i,s,u,c,l,f,h;return a(this,(function(a){switch(a.label){case 0:return[4,this.fetch(this.path,this.requestInit)];case 1:if(!(t=a.sent()).ok)throw new Error("Request to "+this.path+" failed with status code "+t.status+". Please verify this URL points to the model JSON of the model to load.");a.label=2;case 2:return a.trys.push([2,4,,5]),[4,t.json()];case 3:return e=a.sent(),[3,5];case 4:throw a.sent(),n="Failed to parse model JSON of response from "+this.path+".",this.path.endsWith(".pb")?n+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":n+=" Please make sure the server is serving valid JSON for this request.",new Error(n);case 5:if(o=e.weightsManifest,i=e.generatedBy,s=e.convertedBy,u=e.format,c=e.userDefinedMetadata,null==(r=e.modelTopology)&&null==o)throw new Error("The JSON from HTTP path "+this.path+" contains neither model topology or manifest for weights.");return null==o?[3,7]:[4,this.loadWeights(o)];case 6:h=a.sent(),l=h[0],f=h[1],a.label=7;case 7:return[2,{modelTopology:r,weightSpecs:l,weightData:f,userDefinedMetadata:c,generatedBy:i,convertedBy:s,format:u}]}}))}))},t.prototype.loadWeights=function(t){return i(this,void 0,void 0,(function(){var e,n,r,o,i,s,u,c,l,f;return a(this,(function(a){switch(a.label){case 0:for(e=Array.isArray(this.path)?this.path[1]:this.path,n=function(t){var e=t.lastIndexOf("/"),n=t.lastIndexOf("?");return[t.substring(0,e)+"/",n>e?t.substring(n):""]}(e),r=n[0],o=n[1],i=this.weightPathPrefix||r,s=[],u=0,c=t;u<c.length;u++)s.push.apply(s,c[u].weights);return l=[],t.forEach((function(t){t.paths.forEach((function(t){l.push(i+t+o)}))})),[4,Yr(l,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress})];case 1:return f=a.sent(),[2,[s,Br(f)]]}}))}))},t.URL_SCHEME_REGEX=/^https?:\/\//,t}(),Lf=function(t,e){return"undefined"==typeof fetch?null:(Array.isArray(t)?t.every((function(t){return $r(t)})):$r(t))?Zr(t,{onProgress:e}):null};gf.registerSaveRouter(Lf),gf.registerLoadRouter(Lf);var jf,Bf=function(){function t(t){this.modelArtifacts=t}return t.prototype.load=function(){return i(this,void 0,void 0,(function(){return a(this,(function(){return[2,this.modelArtifacts]}))}))},t}(),Wf=function(){function t(t){this.saveHandler=t}return t.prototype.save=function(t){return i(this,void 0,void 0,(function(){return a(this,(function(){return[2,this.saveHandler(t)]}))}))},t}(),Uf=Object.freeze({browserFiles:function(t){return new Nf(t)},browserHTTPRequest:function(t,e){return Zr(t,e)},concatenateArrayBuffers:Br,decodeWeights:Fr,encodeWeights:function(t,e){return i(this,void 0,void 0,(function(){var n,r,o,s,u,c=this;return a(this,(function(l){switch(l.label){case 0:for(n=[],r=[],o=Array.isArray(t)?t.map((function(t){return t.name})):Object.keys(t),s=function(s){var u=o[s],l=Array.isArray(t)?t[s].tensor:t[u];if("float32"!==l.dtype&&"int32"!==l.dtype&&"bool"!==l.dtype&&"string"!==l.dtype)throw new Error("Unsupported dtype in weight '"+u+"': "+l.dtype);var f={name:u,shape:l.shape,dtype:l.dtype};if("string"===l.dtype){var h=new Promise((function(t){return i(c,void 0,void 0,(function(){var e,n,r,o,i,s,u;return a(this,(function(a){switch(a.label){case 0:return[4,l.bytes()];case 1:for(e=a.sent(),n=e.reduce((function(t,e){return t+e.length}),0)+4*e.length,r=new Uint8Array(n),o=0,i=0;i<e.length;i++)s=e[i],u=new Uint8Array(new Uint32Array([s.length]).buffer),r.set(u,o),r.set(s,o+=4),o+=s.length;return t(r),[2]}}))}))}));r.push(h)}else r.push(l.data());null!=e&&(f.group=e),n.push(f)},u=0;u<o.length;++u)s(u);return[4,Promise.all(r)];case 1:return[2,{data:Lr(l.sent()),specs:n}]}}))}))},fromMemory:function(t,e,n,r){return 1===arguments.length?null!=t.modelTopology||null!=t.weightSpecs?new Bf(t):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new Bf({modelTopology:t})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new Bf({modelTopology:t,weightSpecs:e,weightData:n,trainingConfig:r}))},getLoadHandlers:function(t,e){return gf.getLoadHandlers(t,e)},getModelArtifactsInfoForJSON:Ur,getSaveHandlers:function(t){return gf.getSaveHandlers(t)},http:Zr,isHTTPScheme:$r,loadWeights:function(t,e,n,r){return void 0===e&&(e=""),i(this,void 0,void 0,(function(){return a(this,(function(){return[2,Qr((function(t){return Yr(t,{requestInit:r})}))(t,e,n)]}))}))},registerLoadRouter:function(t){return gf.registerLoadRouter(t)},registerSaveRouter:function(t){return gf.registerSaveRouter(t)},weightsLoaderFactory:Qr,withSaveHandler:function(t){return new Wf(t)},copyModel:function(t,e){return i(this,void 0,void 0,(function(){return a(this,(function(){return[2,zr(t,e,!1)]}))}))},listModels:function(){return i(this,void 0,void 0,(function(){var t,e,n,r,o,i,s;return a(this,(function(a){switch(a.label){case 0:t=yf.getSchemes(),e={},n=0,r=t,a.label=1;case 1:return n<r.length?[4,yf.getManager(o=r[n]).listModels()]:[3,4];case 2:for(s in i=a.sent())e[o+mf+s]=i[s];a.label=3;case 3:return n++,[3,1];case 4:return[2,e]}}))}))},moveModel:function(t,e){return i(this,void 0,void 0,(function(){return a(this,(function(){return[2,zr(t,e,!0)]}))}))},removeModel:function(t){return i(this,void 0,void 0,(function(){var e;return a(this,(function(){return e=Gr(t),[2,yf.getManager(e.scheme).removeModel(e.path)]}))}))}}),Gf=(we({confusionMatrix_:function(t,e,n){var r=ce(t,"labels","confusionMatrix"),o=ce(e,"predictions","confusionMatrix");m(null==n||n>0&&Number.isInteger(n),(function(){return"If provided, numClasses must be a positive integer, but got "+n})),m(1===r.rank,(function(){return"Expected the rank of labels to be 1, but got "+r.rank})),m(1===o.rank,(function(){return"Expected the rank of predictions to be 1, but got "+o.rank})),m(r.shape[0]===o.shape[0],(function(){return"Mismatch in the number of examples: "+r.shape[0]+" vs. "+o.shape[0]+". Labels and predictions should have the same number of elements."})),m(n>0&&Number.isInteger(n),(function(){return"numClasses is required to be a positive integer, but got "+n}));var i=di(r.asType("int32"),n),a=di(o.asType("int32"),n);return i.transpose().matMul(a).asType("int32")}}),we({fromPixels_:function(t,e){if(void 0===e&&(e=3),e>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(null==t)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var n=!1,r=!1,o=!1,i=!1,a=!1;if(t.data instanceof Uint8Array)n=!0;else if("undefined"!=typeof ImageData&&t instanceof ImageData)r=!0;else if("undefined"!=typeof HTMLVideoElement&&t instanceof HTMLVideoElement)o=!0;else if("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement)i=!0;else{if(null==t.getContext)throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was "+t.constructor.name);a=!0}if(o&&o&&t.readyState<2)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.");if(null!=c("FromPixels",Co.backendName))return Co.runKernel("FromPixels",{pixels:t},{numChannels:e});var s,u,l=o?[t.videoWidth,t.videoHeight]:[t.width,t.height],f=l[0],h=l[1];if(a?s=t.getContext("2d").getImageData(0,0,f,h).data:r||n?s=t.data:(i||o)&&(null==jf&&(jf=document.createElement("canvas").getContext("2d")),jf.canvas.width=f,jf.canvas.height=h,jf.drawImage(t,0,0,f,h),s=jf.getImageData(0,0,f,h).data),4===e)u=new Int32Array(s);else{var d=f*h;u=new Int32Array(d*e);for(var p=0;p<d;p++)for(var v=0;v<e;++v)u[p*e+v]=s[4*p+v]}return Oe(u,[h,f,e],"int32")}})),zf=Object.freeze({toPixels:function(t,e){return i(this,void 0,void 0,(function(){var n,r,o,i,s,u,c,l,f,h,d,p,v,g,m,y,b,x,w,_,E;return a(this,(function(a){switch(a.label){case 0:if(n=ce(t,"img","toPixels"),t instanceof ho||(n=n.toInt()),2!==n.rank&&3!==n.rank)throw new Error("toPixels only supports rank 2 or 3 tensors, got rank "+n.rank+".");if(r=n.shape.slice(0,2),o=r[0],i=r[1],(s=2===n.rank?1:n.shape[2])>4||2===s)throw new Error("toPixels only supports depth of size 1, 3 or 4 but got "+s);return[4,n.data()];case 1:return u=a.sent(),c=n.min(),l=n.max(),[4,Promise.all([c.data(),l.data()])];case 2:if(f=a.sent(),h=f[0][0],d=f[1][0],c.dispose(),l.dispose(),"float32"===n.dtype){if(h<0||d>1)throw new Error("Tensor values for a float32 Tensor must be in the range [0 - 1] but got range ["+h+" - "+d+"].")}else{if("int32"!==n.dtype)throw new Error("Unsupported type for toPixels: "+n.dtype+". Please use float32 or int32 tensors.");if(h<0||d>255)throw new Error("Tensor values for a int32 Tensor must be in the range [0 - 255] but got range ["+h+" - "+d+"].")}for(p="float32"===n.dtype?255:1,v=new Uint8ClampedArray(i*o*4),g=0;g<o*i;++g)m=void 0,y=void 0,b=void 0,x=void 0,1===s?(m=u[g]*p,y=u[g]*p,b=u[g]*p,x=255):3===s?(m=u[3*g]*p,y=u[3*g+1]*p,b=u[3*g+2]*p,x=255):4===s&&(m=u[4*g]*p,y=u[4*g+1]*p,b=u[4*g+2]*p,x=u[4*g+3]*p),v[0+(w=4*g)]=Math.round(m),v[w+1]=Math.round(y),v[w+2]=Math.round(b),v[w+3]=Math.round(x);return null!=e&&(e.width=i,e.height=o,_=e.getContext("2d"),E=new ImageData(v,i,o),_.putImageData(E,0,0)),n!==t&&n.dispose(),[2,v]}}))}))},fromPixels:Gf}),Vf=function(){function t(){}return t.prototype.getClassName=function(){return this.constructor.className},t.fromConfig=function(t,e){return new t(e)},t}(),Hf=function(){function t(){this.classNameMap={}}return t.getMap=function(){return null==t.instance&&(t.instance=new t),t.instance},t.register=function(e){t.getMap().classNameMap[e.className]=[e,e.fromConfig]},t}(),qf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.minimize=function(t,e,n){void 0===e&&(e=!1);var r=this.computeGradients(t,n),o=r.value,i=r.grads;if(null!=n){var a=n.map((function(t){return{name:t.name,tensor:i[t.name]}}));this.applyGradients(a)}else this.applyGradients(i);return ie(i),e?o:(o.dispose(),null)},Object.defineProperty(e.prototype,"iterations",{get:function(){return null==this.iterations_&&(this.iterations_=0),this.iterations_},enumerable:!0,configurable:!0}),e.prototype.incrementIterations=function(){this.iterations_=this.iterations+1},e.prototype.computeGradients=function(t,e){return function(t,e){m(z(t),(function(){return"The f passed in variableGrads(f) must be a function"})),m(null==e||Array.isArray(e)&&e.every((function(t){return t instanceof xo})),(function(){return"The varList passed in variableGrads(f, varList) must be an array of variables"}));var n=null!=e;if(!n)for(var r in e=[],Co.registeredVariables)e.push(Co.registeredVariables[r]);var o=n?e.filter((function(t){return!t.trainable})):null,i=e.length;m((e=e.filter((function(t){return t.trainable}))).length>0,(function(){return"variableGrads() expects at least one of the input variables to be trainable, but none of the "+i+" variables is trainable."}));var a=Co.gradients(t,e,null,!0),s=a.value,u=a.grads;m(u.some((function(t){return null!=t})),(function(){return"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."})),m(0===s.rank,(function(){return"The f passed in variableGrads(f) must return a scalar, but it returned a rank-"+s.rank+" tensor"}));var c={};return e.forEach((function(t,e){null!=u[e]&&(c[t.name]=u[e])})),null!=o&&o.forEach((function(t){return c[t.name]=null})),{value:s,grads:c}}(t,e)},e.prototype.dispose=function(){null!=this.iterations_&&ie(this.iterations_)},e.prototype.saveIterations=function(){return i(this,void 0,void 0,(function(){return a(this,(function(){return null==this.iterations_&&(this.iterations_=0),[2,{name:"iter",tensor:Re(this.iterations_,"int32")}]}))}))},e.prototype.getWeights=function(){return i(this,void 0,void 0,(function(){return a(this,(function(){throw new Error("getWeights() is not implemented for this optimizer yet.")}))}))},e.prototype.setWeights=function(){return i(this,void 0,void 0,(function(){return a(this,(function(){throw new Error("setWeights() is not implemented for this optimizer class "+this.getClassName())}))}))},e.prototype.extractIterations=function(t){return i(this,void 0,void 0,(function(){var e;return a(this,(function(n){switch(n.label){case 0:return e=this,[4,t[0].tensor.data()];case 1:return e.iterations_=n.sent()[0],[2,t.slice(1)]}}))}))},e}(Vf);Object.defineProperty(qf,Symbol.hasInstance,{value:function(t){return null!=t.minimize&&null!=t.computeGradients&&null!=t.applyGradients}});var Kf=function(t){function e(e,n,r){void 0===r&&(r=null);var o=t.call(this)||this;return o.learningRate=e,o.rho=n,o.epsilon=r,o.accumulatedGrads=[],o.accumulatedUpdates=[],null==r&&(o.epsilon=Co.backend.epsilon()),o}return o(e,t),e.prototype.applyGradients=function(t){var e=this;(Array.isArray(t)?t.map((function(t){return t.name})):Object.keys(t)).forEach((function(n,r){var o=Co.registeredVariables[n];null==e.accumulatedGrads[r]&&(e.accumulatedGrads[r]={originalName:n+"/accum_grad",variable:oe((function(){return Wo(o).variable(!1)}))}),null==e.accumulatedUpdates[r]&&(e.accumulatedUpdates[r]={originalName:n+"/accum_var",variable:oe((function(){return Wo(o).variable(!1)}))});var i=Array.isArray(t)?t[r].tensor:t[n];if(null!=i){var a=e.accumulatedGrads[r].variable,s=e.accumulatedUpdates[r].variable;oe((function(){var t=a.mul(e.rho).add(i.square().mul(1-e.rho)),n=s.add(e.epsilon).sqrt().div(a.add(e.epsilon).sqrt()).mul(i),r=s.mul(e.rho).add(n.square().mul(1-e.rho));a.assign(t),s.assign(r);var u=n.mul(-e.learningRate).add(o);o.assign(u)}))}})),this.incrementIterations()},e.prototype.dispose=function(){null!=this.accumulatedUpdates&&(ie(this.accumulatedGrads.map((function(t){return t.variable}))),ie(this.accumulatedUpdates.map((function(t){return t.variable}))))},e.prototype.getWeights=function(){return i(this,void 0,void 0,(function(){var t;return a(this,(function(e){switch(e.label){case 0:return t=this.accumulatedGrads.concat(this.accumulatedUpdates),[4,this.saveIterations()];case 1:return[2,[e.sent()].concat(t.map((function(t){return{name:t.originalName,tensor:t.variable}})))]}}))}))},e.prototype.setWeights=function(t){return i(this,void 0,void 0,(function(){var e;return a(this,(function(n){switch(n.label){case 0:return[4,this.extractIterations(t)];case 1:return t=n.sent(),this.accumulatedGrads=t.slice(0,e=t.length/2).map((function(t){return{originalName:t.name,variable:t.tensor.variable(!1)}})),this.accumulatedUpdates=t.slice(e,2*e).map((function(t){return{originalName:t.name,variable:t.tensor.variable(!1)}})),[2]}}))}))},e.prototype.getConfig=function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}},e.fromConfig=function(t,e){return new t(e.learningRate,e.rho,e.epsilon)},e.className="Adadelta",e}(qf);to(Kf);var Xf=function(t){function e(e,n){void 0===n&&(n=.1);var r=t.call(this)||this;return r.learningRate=e,r.initialAccumulatorValue=n,r.accumulatedGrads=[],r}return o(e,t),e.prototype.applyGradients=function(t){var e=this;(Array.isArray(t)?t.map((function(t){return t.name})):Object.keys(t)).forEach((function(n,r){var o=Co.registeredVariables[n];null==e.accumulatedGrads[r]&&(e.accumulatedGrads[r]={originalName:n+"/accumulator",variable:oe((function(){return Te(o.shape,e.initialAccumulatorValue).variable(!1)}))});var i=Array.isArray(t)?t[r].tensor:t[n];if(null!=i){var a=e.accumulatedGrads[r].variable;oe((function(){var t=a.add(i.square());a.assign(t);var n=i.div(t.add(Co.backend.epsilon()).sqrt()).mul(-e.learningRate).add(o);o.assign(n)}))}})),this.incrementIterations()},e.prototype.dispose=function(){null!=this.accumulatedGrads&&ie(this.accumulatedGrads.map((function(t){return t.variable})))},e.prototype.getWeights=function(){return i(this,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:return[4,this.saveIterations()];case 1:return[2,[t.sent()].concat(this.accumulatedGrads.map((function(t){return{name:t.originalName,tensor:t.variable}})))]}}))}))},e.prototype.setWeights=function(t){return i(this,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return[4,this.extractIterations(t)];case 1:return t=e.sent(),this.accumulatedGrads=t.map((function(t){return{originalName:t.name,variable:t.tensor.variable(!1)}})),[2]}}))}))},e.prototype.getConfig=function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}},e.fromConfig=function(t,e){return new t(e.learningRate,e.initialAccumulatorValue)},e.className="Adagrad",e}(qf);to(Xf);var Jf=function(t){function e(e,n,r,o){void 0===o&&(o=null);var i=t.call(this)||this;return i.learningRate=e,i.beta1=n,i.beta2=r,i.epsilon=o,i.accumulatedFirstMoment=[],i.accumulatedSecondMoment=[],oe((function(){i.accBeta1=Re(n).variable(),i.accBeta2=Re(r).variable()})),null==o&&(i.epsilon=Co.backend.epsilon()),i}return o(e,t),e.prototype.applyGradients=function(t){var e=this,n=Array.isArray(t)?t.map((function(t){return t.name})):Object.keys(t);oe((function(){var r=Ju(1,e.accBeta1),o=Ju(1,e.accBeta2);n.forEach((function(n,i){var a=Co.registeredVariables[n];null==e.accumulatedFirstMoment[i]&&(e.accumulatedFirstMoment[i]={originalName:n+"/m",variable:oe((function(){return Wo(a).variable(!1)}))}),null==e.accumulatedSecondMoment[i]&&(e.accumulatedSecondMoment[i]={originalName:n+"/v",variable:oe((function(){return Wo(a).variable(!1)}))});var s=Array.isArray(t)?t[i].tensor:t[n];if(null!=s){var u=e.accumulatedFirstMoment[i].variable,c=e.accumulatedSecondMoment[i].variable,l=u.mul(e.beta1).add(s.mul(1-e.beta1)),f=c.mul(e.beta2).add(s.square().mul(1-e.beta2)),h=l.div(r),d=f.div(o);u.assign(l),c.assign(f);var p=h.div(d.sqrt().add(e.epsilon)).mul(-e.learningRate).add(a);a.assign(p)}})),e.accBeta1.assign(e.accBeta1.mul(e.beta1)),e.accBeta2.assign(e.accBeta2.mul(e.beta2))})),this.incrementIterations()},e.prototype.dispose=function(){this.accBeta1.dispose(),this.accBeta2.dispose(),null!=this.accumulatedFirstMoment&&ie(this.accumulatedFirstMoment.map((function(t){return t.variable}))),null!=this.accumulatedSecondMoment&&ie(this.accumulatedSecondMoment.map((function(t){return t.variable})))},e.prototype.getWeights=function(){return i(this,void 0,void 0,(function(){var t;return a(this,(function(e){switch(e.label){case 0:return t=this.accumulatedFirstMoment.concat(this.accumulatedSecondMoment),[4,this.saveIterations()];case 1:return[2,[e.sent()].concat(t.map((function(t){return{name:t.originalName,tensor:t.variable}})))]}}))}))},e.prototype.setWeights=function(t){return i(this,void 0,void 0,(function(){var e,n=this;return a(this,(function(r){switch(r.label){case 0:return[4,this.extractIterations(t)];case 1:return t=r.sent(),oe((function(){n.accBeta1.assign(qu(n.beta1,n.iterations_+1)),n.accBeta2.assign(qu(n.beta2,n.iterations_+1))})),this.accumulatedFirstMoment=t.slice(0,e=t.length/2).map((function(t){return{originalName:t.name,variable:t.tensor.variable(!1)}})),this.accumulatedSecondMoment=t.slice(e,2*e).map((function(t){return{originalName:t.name,variable:t.tensor.variable(!1)}})),[2]}}))}))},e.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}},e.fromConfig=function(t,e){return new t(e.learningRate,e.beta1,e.beta2,e.epsilon)},e.className="Adam",e}(qf);to(Jf);var Yf=function(t){function e(e,n,r,o,i){void 0===o&&(o=null),void 0===i&&(i=0);var a=t.call(this)||this;return a.learningRate=e,a.beta1=n,a.beta2=r,a.epsilon=o,a.decay=i,a.accumulatedFirstMoment=[],a.accumulatedWeightedInfNorm=[],oe((function(){a.iteration=Re(0).variable(),a.accBeta1=Re(n).variable()})),null==o&&(a.epsilon=Co.backend.epsilon()),a}return o(e,t),e.prototype.applyGradients=function(t){var e=this,n=Array.isArray(t)?t.map((function(t){return t.name})):Object.keys(t);oe((function(){var r=Ju(1,e.accBeta1),o=Pu(-e.learningRate,e.iteration.mul(e.decay).add(1));n.forEach((function(n,i){var a=Co.registeredVariables[n];null==e.accumulatedFirstMoment[i]&&(e.accumulatedFirstMoment[i]={originalName:n+"/m",variable:Wo(a).variable(!1)}),null==e.accumulatedWeightedInfNorm[i]&&(e.accumulatedWeightedInfNorm[i]={originalName:n+"/v",variable:Wo(a).variable(!1)});var s=Array.isArray(t)?t[i].tensor:t[n];if(null!=s){var u=e.accumulatedFirstMoment[i].variable,c=e.accumulatedWeightedInfNorm[i].variable,l=u.mul(e.beta1).add(s.mul(1-e.beta1)),f=c.mul(e.beta2),h=s.abs(),d=f.maximum(h);u.assign(l),c.assign(d);var p=o.div(r).mul(l.div(d.add(e.epsilon))).add(a);a.assign(p)}})),e.iteration.assign(e.iteration.add(1)),e.accBeta1.assign(e.accBeta1.mul(e.beta1))})),this.incrementIterations()},e.prototype.dispose=function(){this.accBeta1.dispose(),this.iteration.dispose(),null!=this.accumulatedFirstMoment&&ie(this.accumulatedFirstMoment.map((function(t){return t.variable}))),null!=this.accumulatedWeightedInfNorm&&ie(this.accumulatedWeightedInfNorm.map((function(t){return t.variable})))},e.prototype.getWeights=function(){return i(this,void 0,void 0,(function(){return a(this,(function(){throw new Error("getWeights() is not implemented for Adamax yet.")}))}))},e.prototype.setWeights=function(){return i(this,void 0,void 0,(function(){return a(this,(function(){throw new Error("setWeights() is not implemented for Adamax yet.")}))}))},e.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}},e.fromConfig=function(t,e){return new t(e.learningRate,e.beta1,e.beta2,e.epsilon,e.decay)},e.className="Adamax",e}(qf);to(Yf);var Qf=function(t){function e(e){var n=t.call(this)||this;return n.learningRate=e,n.setLearningRate(e),n}return o(e,t),e.prototype.applyGradients=function(t){var e=this;(Array.isArray(t)?t.map((function(t){return t.name})):Object.keys(t)).forEach((function(n,r){var o=Array.isArray(t)?t[r].tensor:t[n];if(null!=o){var i=Co.registeredVariables[n];oe((function(){var t=e.c.mul(o).add(i);i.assign(t)}))}})),this.incrementIterations()},e.prototype.setLearningRate=function(t){this.learningRate=t,null!=this.c&&this.c.dispose(),this.c=function(t){return Co.keep(t)}(Re(-t))},e.prototype.dispose=function(){this.c.dispose()},e.prototype.getWeights=function(){return i(this,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:return[4,this.saveIterations()];case 1:return[2,[t.sent()]]}}))}))},e.prototype.setWeights=function(t){return i(this,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return[4,this.extractIterations(t)];case 1:if(0!==(t=e.sent()).length)throw new Error("SGD optimizer does not have settable weights.");return[2]}}))}))},e.prototype.getConfig=function(){return{learningRate:this.learningRate}},e.fromConfig=function(t,e){return new t(e.learningRate)},e.className="SGD",e}(qf);to(Qf);var $f=function(t){function e(e,n,r){void 0===r&&(r=!1);var o=t.call(this,e)||this;return o.learningRate=e,o.momentum=n,o.useNesterov=r,o.accumulations=[],o.m=Re(o.momentum),o}return o(e,t),e.prototype.applyGradients=function(t){var e=this;(Array.isArray(t)?t.map((function(t){return t.name})):Object.keys(t)).forEach((function(n,r){var o=Co.registeredVariables[n];null==e.accumulations[r]&&(e.accumulations[r]={originalName:n+"/momentum",variable:oe((function(){return Wo(o).variable(!1)}))});var i=e.accumulations[r].variable,a=Array.isArray(t)?t[r].tensor:t[n];null!=a&&oe((function(){var t,n=e.m.mul(i).add(a);t=e.useNesterov?e.c.mul(a.add(n.mul(e.m))).add(o):e.c.mul(n).add(o),i.assign(n),o.assign(t)}))})),this.incrementIterations()},e.prototype.dispose=function(){this.m.dispose(),null!=this.accumulations&&ie(this.accumulations.map((function(t){return t.variable})))},e.prototype.setMomentum=function(t){this.momentum=t},e.prototype.getWeights=function(){return i(this,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:return[4,this.saveIterations()];case 1:return[2,[t.sent()].concat(this.accumulations.map((function(t){return{name:t.originalName,tensor:t.variable}})))]}}))}))},e.prototype.setWeights=function(t){return i(this,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return[4,this.extractIterations(t)];case 1:return t=e.sent(),this.accumulations=t.map((function(t){return{originalName:t.name,variable:t.tensor.variable(!1)}})),[2]}}))}))},e.prototype.getConfig=function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}},e.fromConfig=function(t,e){return new t(e.learningRate,e.momentum,e.useNesterov)},e.className="Momentum",e}(Qf);to($f);var Zf=function(t){function e(e,n,r,o,i){void 0===n&&(n=.9),void 0===r&&(r=0),void 0===o&&(o=null),void 0===i&&(i=!1);var a=t.call(this)||this;if(a.learningRate=e,a.decay=n,a.momentum=r,a.epsilon=o,a.accumulatedMeanSquares=[],a.accumulatedMoments=[],a.accumulatedMeanGrads=[],a.centered=i,null==o&&(a.epsilon=Co.backend.epsilon()),null==e)throw new Error("learningRate for RMSPropOptimizer must be defined.");return a}return o(e,t),e.prototype.applyGradients=function(t){var e=this;(Array.isArray(t)?t.map((function(t){return t.name})):Object.keys(t)).forEach((function(n,r){var o=Co.registeredVariables[n];null==e.accumulatedMeanSquares[r]&&(e.accumulatedMeanSquares[r]={originalName:n+"/rms",variable:oe((function(){return Wo(o).variable(!1)}))}),null==e.accumulatedMoments[r]&&(e.accumulatedMoments[r]={originalName:n+"/momentum",variable:oe((function(){return Wo(o).variable(!1)}))}),null==e.accumulatedMeanGrads[r]&&e.centered&&(e.accumulatedMeanGrads[r]={originalName:n+"/mg",variable:oe((function(){return Wo(o).variable(!1)}))});var i=Array.isArray(t)?t[r].tensor:t[n];if(null!=i){var a=e.accumulatedMeanSquares[r].variable,s=e.accumulatedMoments[r].variable;oe((function(){var t=a.mul(e.decay).add(i.square().mul(1-e.decay));if(e.centered){var n=e.accumulatedMeanGrads[r].variable,u=n.mul(e.decay).add(i.mul(1-e.decay)),c=s.mul(e.momentum).add(i.mul(e.learningRate).div(t.sub(u.square().add(e.epsilon)).sqrt()));a.assign(t),n.assign(u),s.assign(c);var l=o.sub(c);o.assign(l)}else{var f=a.mul(e.decay).add(i.square().mul(1-e.decay));c=s.mul(e.momentum).add(i.mul(e.learningRate).div(f.add(e.epsilon).sqrt())),a.assign(f),s.assign(c),l=o.sub(c),o.assign(l)}}))}})),this.incrementIterations()},e.prototype.dispose=function(){null!=this.accumulatedMeanSquares&&ie(this.accumulatedMeanSquares.map((function(t){return t.variable}))),null!=this.accumulatedMeanGrads&&this.centered&&ie(this.accumulatedMeanGrads.map((function(t){return t.variable}))),null!=this.accumulatedMoments&&ie(this.accumulatedMoments.map((function(t){return t.variable})))},e.prototype.getWeights=function(){return i(this,void 0,void 0,(function(){var t;return a(this,(function(e){switch(e.label){case 0:return t=this.accumulatedMeanSquares.concat(this.accumulatedMoments),this.centered&&t.push.apply(t,this.accumulatedMeanGrads),[4,this.saveIterations()];case 1:return[2,[e.sent()].concat(t.map((function(t){return{name:t.originalName,tensor:t.variable}})))]}}))}))},e.prototype.setWeights=function(t){return i(this,void 0,void 0,(function(){var e;return a(this,(function(n){switch(n.label){case 0:return[4,this.extractIterations(t)];case 1:return t=n.sent(),this.accumulatedMeanSquares=t.slice(0,e=this.centered?t.length/3:t.length/2).map((function(t){return{originalName:t.name,variable:t.tensor.variable(!1)}})),this.accumulatedMoments=t.slice(e,2*e).map((function(t){return{originalName:t.name,variable:t.tensor.variable(!1)}})),this.centered&&(this.accumulatedMeanGrads=t.slice(2*e,3*e).map((function(t){return{originalName:t.name,variable:t.tensor.variable(!1)}}))),[2]}}))}))},e.prototype.getConfig=function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}},e.fromConfig=function(t,e){return new t(e.learningRate,e.decay,e.momentum,e.epsilon,e.centered)},e.className="RMSProp",e}(qf);to(Zf);(function(){function t(){}t.sgd=function(t){return new Qf(t)},t.momentum=function(t,e,n){return void 0===n&&(n=!1),new $f(t,e,n)},t.rmsprop=function(t,e,n,r,o){return void 0===e&&(e=.9),void 0===n&&(n=0),void 0===r&&(r=null),void 0===o&&(o=!1),new Zf(t,e,n,r,o)},t.adam=function(t,e,n,r){return void 0===t&&(t=.001),void 0===e&&(e=.9),void 0===n&&(n=.999),void 0===r&&(r=null),new Jf(t,e,n,r)},t.adadelta=function(t,e,n){return void 0===t&&(t=.001),void 0===e&&(e=.95),void 0===n&&(n=null),new Kf(t,e,n)},t.adamax=function(t,e,n,r,o){return void 0===t&&(t=.002),void 0===e&&(e=.9),void 0===n&&(n=.999),void 0===r&&(r=null),void 0===o&&(o=0),new Yf(t,e,n,r,o)},t.adagrad=function(t,e){return void 0===e&&(e=.1),new Xf(t,e)}})(),"undefined"!=typeof requestAnimationFrame?requestAnimationFrame:"undefined"!=typeof setImmediate&&setImmediate;ho.prototype.squaredDifference=function(t){return Ns(this,t)},lo=Zl}).call(this,n("pCvA"))},veAN:function(t,e,n){"use strict";var r=n("JRM0"),o=n("jid/");r({target:"String",proto:!0,forced:n("Uo50")("sup")},{sup:function(){return o(this,"sup","","")}})},vtID:function(t,e,n){"use strict";var r=n("JRM0"),o=n("OzTt"),i=n("PCqT"),a=n("wLFK"),s=n("PGFG"),u=n("fM6A"),c=n("XOJ6"),l=n("hQLn"),f=n("1tiZ"),h=n("nHIk"),d=n("0K2p"),p=n("GHf2"),v=n("q/gS"),g=n("kXs/"),m=a.PROPER,y=a.CONFIGURABLE,b=g.IteratorPrototype,x=g.BUGGY_SAFARI_ITERATORS,w=p("iterator"),_="keys",E="values",R="entries",C=function(){return this};t.exports=function(t,e,n,a,p,g,S){u(n,e,a);var O,A,I,k=function(t){if(t===p&&N)return N;if(!x&&t in D)return D[t];switch(t){case _:case E:case R:return function(){return new n(this,t)}}return function(){return new n(this)}},T=e+" Iterator",M=!1,D=t.prototype,P=D[w]||D["@@iterator"]||p&&D[p],N=!x&&P||k(p),F="Array"==e&&D.entries||P;if(F&&(O=c(F.call(new t)))!==Object.prototype&&O.next&&(i||c(O)===b||(l?l(O,b):s(O[w])||d(O,w,C)),f(O,T,!0,!0),i&&(v[T]=C)),m&&p==E&&P&&P.name!==E&&(!i&&y?h(D,"name",E):(M=!0,N=function(){return o(P,this)})),p)if(A={values:k(E),keys:g?N:k(_),entries:k(R)},S)for(I in A)(x||M||!(I in D))&&d(D,I,A[I]);else r({target:e,proto:!0,forced:x||M},A);return i&&!S||D[w]===N||d(D,w,N,{name:p}),v[e]=N,A}},"w/Ji":function(t,e,n){var r,o=n("gDYM"),i=n("11ZY"),a=n("ek/P"),s=n("s3NK"),u=n("R1TW"),c=n("HRgQ"),l=n("3pC9"),f=l("IE_PROTO"),h=function(){},d=function(t){return"<script>"+t+"</"+"script>"},p=function(t){t.write(d("")),t.close();var e=t.parentWindow.Object;return t=null,e},v=function(){try{r=new ActiveXObject("htmlfile")}catch(t){}var t,e;v="undefined"!=typeof document?document.domain&&r?p(r):((e=c("iframe")).style.display="none",u.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(d("document.F=Object")),t.close(),t.F):p(r);for(var n=a.length;n--;)delete v.prototype[a[n]];return v()};s[f]=!0,t.exports=Object.create||function(t,e){var n;return null!==t?(h.prototype=o(t),n=new h,h.prototype=null,n[f]=t):n=v(),void 0===e?n:i.f(n,e)}},w13K:function(t,e,n){"use strict";var r=n("OzTt"),o=n("+5TE"),i=n("gDYM"),a=n("zrDt"),s=n("AvGt"),u=n("Qean"),c=n("Krfs"),l=n("JtDR"),f=n("a59c");o("match",(function(t,e,n){return[function(e){var n=u(this),o=null==e?void 0:c(e,t);return o?r(o,e,n):new RegExp(e)[t](s(n))},function(t){var r=i(this),o=s(t),u=n(e,r,o);if(u.done)return u.value;if(!r.global)return f(r,o);var c=r.unicode;r.lastIndex=0;for(var h,d=[],p=0;null!==(h=f(r,o));){var v=s(h[0]);d[p]=v,""===v&&(r.lastIndex=l(o,a(r.lastIndex),c)),p++}return 0===p?null:d}]}))},"wCa+":function(t,e,n){var r=n("JRM0"),o=n("XOuC");r({target:"Object",stat:!0,forced:Object.assign!==o},{assign:o})},wLDV:function(t,e,n){"use strict";var r=n("JRM0"),o=n("nEaP"),i=n("OzTt"),a=n("WGD3"),s=n("Qean"),u=n("PGFG"),c=n("GrtF"),l=n("AvGt"),f=n("Krfs"),h=n("O2Ja"),d=n("XgMv"),p=n("GHf2"),v=n("PCqT"),g=p("replace"),m=RegExp.prototype,y=o.TypeError,b=a(h),x=a("".indexOf),w=a("".replace),_=a("".slice),E=Math.max,R=function(t,e,n){return n>t.length?-1:""===e?n:x(t,e,n)};r({target:"String",proto:!0},{replaceAll:function(t,e){var n,r,o,a,h,p,C,S,O,A=s(this),I=0,k=0,T="";if(null!=t){if((n=c(t))&&(r=l(s("flags"in m?t.flags:b(t))),!~x(r,"g")))throw y("`.replaceAll` does not allow non-global regexes");if(o=f(t,g))return i(o,t,A,e);if(v&&n)return w(l(A),t,e)}for(a=l(A),h=l(t),(p=u(e))||(e=l(e)),S=E(1,C=h.length),I=R(a,h,0);-1!==I;)O=p?l(e(h,I,a)):d(h,a,I,[],void 0,e),T+=_(a,k,I)+O,k=I+C,I=R(a,h,I+S);return k<a.length&&(T+=_(a,k)),T}})},wLFK:function(t,e,n){var r=n("Hvpk"),o=n("jP2f"),i=Function.prototype,a=r&&Object.getOwnPropertyDescriptor,s=o(i,"name"),u=s&&"something"===function(){}.name,c=s&&(!r||r&&a(i,"name").configurable);t.exports={EXISTS:s,PROPER:u,CONFIGURABLE:c}},wObw:function(t,e,n){n("JRM0")({target:"Math",stat:!0},{log10:n("1+4v")})},wQUi:function(t,e,n){var r=n("GHf2");e.f=r},wcNg:function(t){var e=function(t){"use strict";function e(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}function n(t,e,n,i){var a=Object.create((e&&e.prototype instanceof o?e:o).prototype),s=new h(i||[]);return a._invoke=function(t,e,n){var o=_;return function(i,a){if(o===R)throw new Error("Generator is already running");if(o===C){if("throw"===i)throw a;return p()}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=c(s,n);if(u){if(u===S)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===_)throw o=C,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=R;var l=r(t,e,n);if("normal"===l.type){if(o=n.done?C:E,l.arg===S)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=C,n.method="throw",n.arg=l.arg)}}}(t,n,s),a}function r(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}function o(){}function i(){}function a(){}function s(t){["next","throw","return"].forEach((function(n){e(t,n,(function(t){return this._invoke(n,t)}))}))}function u(t,e){function n(o,i,a,s){var u=r(t[o],t,i);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==typeof l&&m.call(l,"__await")?e.resolve(l.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(l).then((function(t){c.value=t,a(c)}),(function(t){return n("throw",t,a,s)}))}s(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function c(t,e){var n=t.iterator[e.method];if(n===v){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=v,c(t,e),"throw"===e.method))return S;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return S}var o=r(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,S;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=v),e.delegate=null,S):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,S)}function l(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function f(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function h(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(l,this),this.reset(!0)}function d(t){if(t){var e=t[b];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,r=function e(){for(;++n<t.length;)if(m.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=v,e.done=!0,e};return r.next=r}}return{next:p}}function p(){return{value:v,done:!0}}var v,g=Object.prototype,m=g.hasOwnProperty,y="function"==typeof Symbol?Symbol:{},b=y.iterator||"@@iterator",x=y.asyncIterator||"@@asyncIterator",w=y.toStringTag||"@@toStringTag";try{e({},"")}catch(t){e=function(t,e,n){return t[e]=n}}t.wrap=n;var _="suspendedStart",E="suspendedYield",R="executing",C="completed",S={},O={};e(O,b,(function(){return this}));var A=Object.getPrototypeOf,I=A&&A(A(d([])));I&&I!==g&&m.call(I,b)&&(O=I);var k=a.prototype=o.prototype=Object.create(O);return i.prototype=a,e(k,"constructor",a),e(a,"constructor",i),i.displayName=e(a,w,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===i||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,a):(t.__proto__=a,e(t,w,"GeneratorFunction")),t.prototype=Object.create(k),t},t.awrap=function(t){return{__await:t}},s(u.prototype),e(u.prototype,x,(function(){return this})),t.AsyncIterator=u,t.async=function(e,r,o,i,a){void 0===a&&(a=Promise);var s=new u(n(e,r,o,i),a);return t.isGeneratorFunction(r)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},s(k),e(k,w,"Generator"),e(k,b,(function(){return this})),e(k,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=d,h.prototype={constructor:h,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=v,this.done=!1,this.delegate=null,this.method="next",this.arg=v,this.tryEntries.forEach(f),!t)for(var e in this)"t"===e.charAt(0)&&m.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=v)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){function e(e,r){return i.type="throw",i.arg=t,n.next=e,r&&(n.method="next",n.arg=v),!!r}if(this.done)throw t;for(var n=this,r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],i=o.completion;if("root"===o.tryLoc)return e("end");if(o.tryLoc<=this.prev){var a=m.call(o,"catchLoc"),s=m.call(o,"finallyLoc");if(a&&s){if(this.prev<o.catchLoc)return e(o.catchLoc,!0);if(this.prev<o.finallyLoc)return e(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return e(o.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return e(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&m.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,S):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),S},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),f(n),S}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;f(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:d(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=v),S}},t}(t.exports);try{regeneratorRuntime=e}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}},wk30:function(t,e,n){n("JRM0")({target:"Object",stat:!0,sham:!n("Hvpk")},{create:n("w/Ji")})},wnjq:function(t,e,n){var r=n("OzTt"),o=n("gDYM"),i=n("Krfs");t.exports=function(t,e,n){var a,s;o(t);try{if(!(a=i(t,"return"))){if("throw"===e)throw n;return n}a=r(a,t)}catch(t){s=!0,a=t}if("throw"===e)throw n;if(s)throw a;return o(a),n}},"x+Sn":function(t,e,n){var r=n("JRM0"),o=Math.ceil,i=Math.floor;r({target:"Math",stat:!0},{trunc:function(t){return(t>0?i:o)(t)}})},x3Br:function(t,e,n){"use strict";var r=n("JRM0"),o=n("SmY9").left,i=n("fK/z"),a=n("G5hJ"),s=n("YxGO");r({target:"Array",proto:!0,forced:!i("reduce")||!s&&a>79&&a<83},{reduce:function(t){var e=arguments.length;return o(this,t,e,e>1?arguments[1]:void 0)}})},xBW5:function(t,e,n){var r=n("YxGO");t.exports=function(t){try{if(r)return Function('return require("'+t+'")')()}catch(t){}}},xWgW:function(t,e,n){n("JRM0")({target:"Object",stat:!0},{hasOwn:n("jP2f")})},xZ2g:function(t,e,n){"use strict";var r=n("JRM0"),o=n("UVdV"),i=n("VSW8"),a=n("nRc6").f,s=n("jP2f"),u=n("iBt0"),c=n("5CFb"),l=n("QvVa"),f=n("7tL4"),h=n("oa+t"),d=n("PCqT"),p="DOMException",v=o("Error"),g=o(p),m=function(){u(this,y);var t=arguments.length,e=l(t<1?void 0:arguments[0]),n=l(t<2?void 0:arguments[1],"Error"),r=new g(e,n),o=v(e);return o.name=p,a(r,"stack",i(1,h(o.stack,1))),c(r,this,m),r},y=m.prototype=g.prototype,b="stack"in v(p),x="stack"in new g(1,2),w=b&&!x;r({global:!0,forced:d||w},{DOMException:w?m:g});var _=o(p),E=_.prototype;if(E.constructor!==_)for(var R in d||a(E,"constructor",i(1,_)),f)if(s(f,R)){var C=f[R],S=C.s;s(_,S)||a(_,S,i(6,C.c))}},xeeI:function(t,e,n){n("JRM0")({target:"Number",stat:!0},{EPSILON:Math.pow(2,-52)})},xg3p:function(t,e,n){"use strict";var r=n("Xiyl"),o=n("R/cv"),i=n("sLmC"),a=r.aTypedArray;(0,r.exportTypedArrayMethod)("lastIndexOf",(function(t){var e=arguments.length;return o(i,a(this),e>1?[t,arguments[1]]:[t])}))},xmYR:function(t,e,n){"use strict";var r=n("nEaP"),o=n("R/cv"),i=n("Xiyl"),a=n("+iL7"),s=n("i6bU"),u=r.Int8Array,c=i.aTypedArray,l=i.exportTypedArrayMethod,f=[].toLocaleString,h=!!u&&a((function(){f.call(new u(1))}));l("toLocaleString",(function(){return o(f,h?s(c(this)):c(this),s(arguments))}),a((function(){return[1,2].toLocaleString()!=new u([1,2]).toLocaleString()}))||!a((function(){u.prototype.toLocaleString.call([1,2])})))},xwiM:function(t,e,n){var r=n("Hvpk"),o=n("+iL7"),i=n("HRgQ");t.exports=!r&&!o((function(){return 7!=Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a}))},xxLW:function(t,e,n){var r=n("0K2p");t.exports=function(t,e,n){for(var o in e)r(t,o,e[o],n);return t}},y89P:function(t,e,n){"use strict";var r=n("R/cv"),o=n("OzTt"),i=n("WGD3"),a=n("+5TE"),s=n("+iL7"),u=n("gDYM"),c=n("PGFG"),l=n("ZK/t"),f=n("zrDt"),h=n("AvGt"),d=n("Qean"),p=n("JtDR"),v=n("Krfs"),g=n("XgMv"),m=n("a59c"),y=n("GHf2")("replace"),b=Math.max,x=Math.min,w=i([].concat),_=i([].push),E=i("".indexOf),R=i("".slice),C="$0"==="a".replace(/./,"$0"),S=!!/./[y]&&""===/./[y]("a","$0");a("replace",(function(t,e,n){var i=S?"$":"$0";return[function(t,n){var r=d(this),i=null==t?void 0:v(t,y);return i?o(i,t,r,n):o(e,h(r),t,n)},function(t,o){var a=u(this),s=h(t);if("string"==typeof o&&-1===E(o,i)&&-1===E(o,"$<")){var d=n(e,a,s,o);if(d.done)return d.value}var v=c(o);v||(o=h(o));var y=a.global;if(y){var C=a.unicode;a.lastIndex=0}for(var S=[];;){var O=m(a,s);if(null===O)break;if(_(S,O),!y)break;""===h(O[0])&&(a.lastIndex=p(s,f(a.lastIndex),C))}for(var A,I="",k=0,T=0;T<S.length;T++){for(var M=h((O=S[T])[0]),D=b(x(l(O.index),s.length),0),P=[],N=1;N<O.length;N++)_(P,void 0===(A=O[N])?A:String(A));var F=O.groups;if(v){var L=w([M],P,D,s);void 0!==F&&_(L,F);var j=h(r(o,void 0,L))}else j=g(M,s,D,P,F,o);D>=k&&(I+=R(s,k,D)+j,k=D+M.length)}return I+R(s,k)}]}),!!s((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}))||!C||S)},y8Ly:function(t,e,n){"use strict";var r=n("JRM0"),o=n("jid/");r({target:"String",proto:!0,forced:n("Uo50")("link")},{link:function(t){return o(this,"a","href",t)}})},y9dk:function(t,e,n){var r=n("nEaP"),o=n("+iL7"),i=n("Ncbx"),a=n("Xiyl").NATIVE_ARRAY_BUFFER_VIEWS,s=r.ArrayBuffer,u=r.Int8Array;t.exports=!a||!o((function(){u(1)}))||!o((function(){new u(-1)}))||!i((function(t){new u,new u(null),new u(1.5),new u(t)}),!0)||o((function(){return 1!==new u(new s(2),1,void 0).length}))},"yEA/":function(t,e,n){n("JRM0")({target:"Object",stat:!0},{is:n("mvOm")})},yPLR:function(t,e,n){var r=n("JRM0"),o=n("SlvM");r({global:!0,forced:parseInt!=o},{parseInt:o})},ydrk:function(t,e,n){n("JRM0")({target:"Number",stat:!0},{isInteger:n("a6dz")})},ykSQ:function(t,e,n){var r=n("0K2p"),o=n("Z1fm"),i=Error.prototype;i.toString!==o&&r(i,"toString",o)},"z+V7":function(t,e,n){var r=n("WGD3"),o=n("ZK/t"),i=n("AvGt"),a=n("Qean"),s=r("".charAt),u=r("".charCodeAt),c=r("".slice),l=function(t){return function(e,n){var r,l,f=i(a(e)),h=o(n),d=f.length;return h<0||h>=d?t?"":void 0:(r=u(f,h))<55296||r>56319||h+1===d||(l=u(f,h+1))<56320||l>57343?t?s(f,h):r:t?c(f,h,h+2):l-56320+(r-55296<<10)+65536}};t.exports={codeAt:l(!1),charAt:l(!0)}},z36D:function(t,e,n){"use strict";var r=n("ensb");e.a=Object(r.a)((function(t){n.e(15).then(function(){var e=n("M6X6");"function"==typeof t&&t(e)}.bind(null,n)).catch(n.oe)}))},zSDB:function(t,e,n){"use strict";var r=n("JRM0"),o=n("jid/");r({target:"String",proto:!0,forced:n("Uo50")("anchor")},{anchor:function(t){return o(this,"a","name",t)}})},zSSO:function(t,e,n){var r=n("JRM0"),o=n("2jZG").entries;r({target:"Object",stat:!0},{entries:function(t){return o(t)}})},zrDt:function(t,e,n){var r=n("ZK/t"),o=Math.min;t.exports=function(t){return t>0?o(r(t),9007199254740991):0}},ztTQ:function(t,e,n){"use strict";var r=n("b3pM"),o=n("nRc6"),i=n("VSW8");t.exports=function(t,e,n){var a=r(e);a in t?o.f(t,a,i(0,n)):t[a]=n}}});
//# sourceMappingURL=bundle.e89c3.js.map